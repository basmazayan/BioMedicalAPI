{"version":3,"file":"8783.8ba5719bad37269f5806.js","mappings":"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","sources":["./node_modules/@arcgis/core/views/2d/layers/WMSLayerView2D.js","./node_modules/@arcgis/core/views/layers/WMSLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import r from\"../../../core/Logger.js\";import{isAbortError as i}from\"../../../core/promiseUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import o from\"../../../geometry/Extent.js\";import{BitmapContainer as n}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as p}from\"./LayerView2D.js\";import m from\"./support/ExportStrategy.js\";import h from\"../../layers/LayerView.js\";import{RefreshableLayerView as c}from\"../../layers/RefreshableLayerView.js\";import{WMSLayerView as d}from\"../../layers/WMSLayerView.js\";const l=r.getLogger(\"esri.views.2d.layers.WMSLayerView2D\");let y=class extends(d(c(p(h)))){initialize(){const{layer:e,view:r}=this;e.supportsSpatialReference(r.spatialReference)||this.addResolvingPromise(Promise.reject(new t(\"layerview:spatial-reference-incompatible\",\"The spatial references supported by this WMS layer are incompatible with the spatial reference of the view\",{layer:e})))}update(e){this.strategy.update(e).catch((e=>{i(e)||l.error(e)}))}attach(){const{layer:e}=this,{imageMaxHeight:t,imageMaxWidth:r}=e;this._bitmapContainer=new n,this.container.addChild(this._bitmapContainer),this.strategy=new m({container:this._bitmapContainer,fetchSource:this.fetchImage.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxHeight:t,imageMaxWidth:r,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1}),this.handles.add(this.watch(\"exportImageVersion\",(()=>this.requestUpdate())),\"exportImageVersion\")}detach(){this.handles.remove(\"exportImageVersion\"),this.strategy.destroy(),this.container.removeChild(this._bitmapContainer),this._bitmapContainer.removeAllChildren()}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}createFetchPopupFeaturesQuery(e){const{view:t}=this,r=this._bitmapContainer,{x:i,y:s}=e,{spatialReference:a}=t;let n=null,p=0,m=0;if(r.children.some((e=>{const{width:t,height:r,resolution:h,x:c,y:d}=e,l=c+h*t,y=d-h*r;return i>=c&&i<=l&&s<=d&&s>=y&&(n=new o({xmin:c,ymin:y,xmax:l,ymax:d,spatialReference:a}),p=t,m=r,!0)})),!n)return null;const h=n.width/p,c=Math.round((i-n.xmin)/h),d=Math.round((n.ymax-s)/h);return{extent:n,width:p,height:m,x:c,y:d}}async doRefresh(){this.requestUpdate()}isUpdating(){return this.strategy.updating||this.updateRequested}fetchImage(e,t,r,i){return this.layer.fetchImage(e,t,r,{timeExtent:this.timeExtent,...i})}};e([s()],y.prototype,\"strategy\",void 0),e([s()],y.prototype,\"updating\",void 0),y=e([a(\"esri.views.2d.layers.WMSLayerView2D\")],y);const u=y;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as s}from\"../../layers/support/commonProperties.js\";import{ExportWMSImageParameters as p}from\"../../layers/support/ExportWMSImageParameters.js\";const a=a=>{let i=class extends a{initialize(){this.exportImageParameters=new p({layer:this.layer})}destroy(){this.exportImageParameters.destroy(),this.exportImageParameters=null}get exportImageVersion(){var e;return null==(e=this.exportImageParameters)||e.commitProperty(\"version\"),this.commitProperty(\"timeExtent\"),(this._get(\"exportImageVersion\")||0)+1}fetchPopupFeatures(e){const{layer:t}=this;if(!e)return Promise.reject(new r(\"wmslayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:t}));const{popupEnabled:o}=t;if(!o)return Promise.reject(new r(\"wmslayerview:fetchPopupFeatures\",\"popupEnabled should be true\",{popupEnabled:o}));const s=this.createFetchPopupFeaturesQuery(e);if(!s)return Promise.resolve([]);const{extent:p,width:a,height:i,x:m,y:n}=s;if(!(p&&a&&i))throw new r(\"wmslayerview:fetchPopupFeatures\",\"WMSLayer does not support fetching features.\",{extent:p,width:a,height:i});const u=t.fetchFeatureInfo(p,a,i,m,n);return Promise.resolve(u?[u]:[])}};return e([t()],i.prototype,\"exportImageParameters\",void 0),e([t({readOnly:!0})],i.prototype,\"exportImageVersion\",null),e([t()],i.prototype,\"layer\",void 0),e([t(s)],i.prototype,\"timeExtent\",void 0),i=e([o(\"esri.layers.mixins.WMSLayerView\")],i),i};export{a as WMSLayerView,a as default};\n"],"names":["_","e","t","r","isAbortError","i","property","s","subclass","a","o","BitmapContainer","n","LayerView2DMixin","p","m","h","RefreshableLayerView","c","WMSLayerView","d","l","getLogger","y","initialize","layer","view","supportsSpatialReference","spatialReference","addResolvingPromise","Promise","reject","update","strategy","catch","error","attach","imageMaxHeight","imageMaxWidth","_bitmapContainer","container","addChild","fetchSource","fetchImage","bind","requestUpdate","imageRotationSupported","imageNormalizationSupported","hidpi","handles","add","watch","detach","remove","destroy","removeChild","removeAllChildren","moveStart","viewChange","moveEnd","createFetchPopupFeaturesQuery","x","children","some","width","height","resolution","xmin","ymin","xmax","ymax","Math","round","extent","doRefresh","isUpdating","updating","updateRequested","timeExtent","prototype","u","default"],"sourceRoot":"webpack:///"}