{"version":3,"mappings":"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","names":["u","d","f","Object","freeze","remove","pause","resume","g","c","l","fetchPopupFeatures","e","Array","from","t","graphicsViews","s","hitTest","filter","popupTemplate","flat","this","_graphicsViewsFeatureCollectionMap","keys","_graphicsViews","i","get","Promise","all","highlight","uid","isArray","length","map","toArray","addHighlight","removeHighlight","update","processUpdate","attach","view","requestUpdate","layer","featureCollections","Map","p","featuresTilingScheme","fadeTransitionEnabled","r","n","graphics","source","renderer","requestUpdateCallback","container","set","addChild","handles","add","a","visible","notifyChange","sublayers","o","_createGraphicsViews","_destroyGraphicsViews","detach","moveStart","moveEnd","viewChange","isUpdating","updating","removeAllChildren","destroy","on","graphicUpdateHandler","push","h","m"],"sources":["./node_modules/@arcgis/core/views/2d/layers/MapNotesLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import s from\"../../../Graphic.js\";import i from\"../../../core/Collection.js\";import{isSome as t,isNone as r}from\"../../../core/maybe.js\";import{init as a,on as o}from\"../../../core/watchUtils.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/set.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView2DMixin as c}from\"./LayerView2D.js\";import p from\"./graphics/GraphicContainer.js\";import n from\"./graphics/GraphicsView2D.js\";import l from\"../../layers/LayerView.js\";const u=\"sublayers\",d=\"layerView\",f=Object.freeze({remove(){},pause(){},resume(){}});let g=class extends(c(l)){async fetchPopupFeatures(e){return Array.from(this.graphicsViews(),(s=>s.hitTest(e).filter((e=>!!e.popupTemplate)))).flat()}*graphicsViews(){t(this._graphicsViewsFeatureCollectionMap)?yield*this._graphicsViewsFeatureCollectionMap.keys():t(this._graphicsViews)?yield*this._graphicsViews:yield*[]}async hitTest(e,s){const i=Array.from(this.graphicsViews(),(async s=>{const i=await s.hitTest(e);if(t(this._graphicsViewsFeatureCollectionMap)){const e=this._graphicsViewsFeatureCollectionMap.get(s);for(const s of i)!s.popupTemplate&&e.popupTemplate&&(s.popupTemplate=e.popupTemplate)}return i}));return(await Promise.all(i)).flat()}highlight(e){let t;if(\"number\"==typeof e?t=[e]:e instanceof s?t=[e.uid]:Array.isArray(e)&&e.length>0?t=\"number\"==typeof e[0]?e:e.map((e=>e&&e.uid)):i.isCollection(e)&&(t=e.map((e=>e&&e.uid)).toArray()),t=t.filter((e=>null!=e)),!t.length)return f;for(const s of this.graphicsViews())s.addHighlight(t);return{remove:()=>{for(const e of this.graphicsViews())e.removeHighlight(t)}}}update(e){for(const s of this.graphicsViews())s.processUpdate(e)}attach(){const e=this.view,s=()=>this.requestUpdate(),i=this.layer.featureCollections;if(t(i)&&i.length){this._graphicsViewsFeatureCollectionMap=new Map;for(const t of i){const i=new p(this.view.featuresTilingScheme);i.fadeTransitionEnabled=!0;const r=new n({view:e,graphics:t.source,renderer:t.renderer,requestUpdateCallback:s,container:i});this._graphicsViewsFeatureCollectionMap.set(r,t),this.container.addChild(r.container),this.handles.add([a(t,\"visible\",(e=>r.container.visible=e)),a(r,\"updating\",(()=>this.notifyChange(\"updating\")))],d)}}else t(this.layer.sublayers)&&this.handles.add(o(this.layer,\"sublayers\",\"change\",(()=>this._createGraphicsViews()),(()=>this._createGraphicsViews()),(()=>this._destroyGraphicsViews())),u)}detach(){this._destroyGraphicsViews(),this.handles.remove(u)}moveStart(){}moveEnd(){}viewChange(){for(const e of this.graphicsViews())e.viewChange()}isUpdating(){for(const e of this.graphicsViews())if(e.updating)return!0;return!1}_destroyGraphicsViews(){this.container.removeAllChildren(),this.handles.remove(d);for(const e of this.graphicsViews())e.destroy();this._graphicsViews=null,this._graphicsViewsFeatureCollectionMap=null}_createGraphicsViews(){if(this._destroyGraphicsViews(),r(this.layer.sublayers))return;const e=[],s=this.view,i=()=>this.requestUpdate();for(const t of this.layer.sublayers){const r=new p(this.view.featuresTilingScheme);r.fadeTransitionEnabled=!0;const o=new n({view:s,graphics:t.graphics,requestUpdateCallback:i,container:r});this.handles.add([t.on(\"graphic-update\",o.graphicUpdateHandler),a(t,\"visible\",(e=>o.container.visible=e)),a(o,\"updating\",(()=>this.notifyChange(\"updating\")))],d),this.container.addChild(o.container),e.push(o)}this._graphicsViews=e}};g=e([h(\"esri.views.2d.layers.MapNotesLayerView2D\")],g);const m=g;export{m as default};\n"],"sourceRoot":"webpack:///","file":"498.367d65bd82a8c00229b2.js"}