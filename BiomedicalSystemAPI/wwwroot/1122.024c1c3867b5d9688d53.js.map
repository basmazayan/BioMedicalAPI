{"version":3,"file":"1122.024c1c3867b5d9688d53.js","mappings":"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","sources":["./node_modules/@arcgis/core/layers/support/RasterWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{isSome as r}from\"../../core/maybe.js\";import e from\"../../geometry/support/GeographicTransformation.js\";import t from\"./PixelBlock.js\";import{decode as o}from\"./rasterFormats/RasterCodec.js\";import{estimateStatisticsHistograms as s,split as i,mosaic as a,approximateTransform as n}from\"./rasterFunctions/pixelUtils.js\";import{requirePE as m,load as l,getProjectionOffsetGrid as f}from\"./rasterFunctions/rasterProjectionHelper.js\";import{convertVectorFieldData as c}from\"./rasterFunctions/vectorFieldUtils.js\";import{readTransform as p}from\"./rasterTransforms/utils.js\";import u from\"../../renderers/support/RasterSymbolizer.js\";import{createStreamlinesMesh as d}from\"../../views/2d/engine/flow/dataUtils.js\";import S from\"../../geometry/Extent.js\";class h{convertVectorFieldData(e){const o=t.fromJSON(e.pixelBlock),s=c(o,e.type);return Promise.resolve(r(s)&&s.toJSON())}async decode(r){const e=await o(r.data,r.options);return e&&e.toJSON()}symbolize(e){e.pixelBlock=t.fromJSON(e.pixelBlock),e.extent=e.extent?S.fromJSON(e.extent):null;const o=this.symbolizer.symbolize(e);return Promise.resolve(r(o)&&o.toJSON())}async updateSymbolizer(r){var e;this.symbolizer=u.fromJSON(r.symbolizerJSON),r.histograms&&\"rasterStretch\"===(null==(e=this.symbolizer)?void 0:e.rendererJSON.type)&&(this.symbolizer.rendererJSON.histograms=r.histograms)}stretch(e){const o=this.symbolizer.simpleStretch(t.fromJSON(e.srcPixelBlock),e.stretchParams);return Promise.resolve(r(o)&&o.toJSON())}estimateStatisticsHistograms(r){const e=s(t.fromJSON(r.srcPixelBlock));return Promise.resolve(e)}split(r){const e=i(t.fromJSON(r.srcPixelBlock),r.tileSize,r.maximumPyramidLevel);return e&&e.forEach(((r,t)=>{e.set(t,null==r?void 0:r.toJSON())})),Promise.resolve(e)}async mosaicAndTransform(r){const e=r.srcPixelBlocks.map((r=>r?new t(r):null)),o=a(e,r.srcMosaicSize,{blockWidths:r.blockWidths,alignmentInfo:r.alignmentInfo});if(!r.coefs)return o&&o.toJSON();const s=n(o,r.destDimension,r.coefs,r.sampleSpacing,r.interpolation);return s&&s.toJSON()}async createStreamlinesMesh(r,e){const t={data:new Float32Array(r.flowData.buffer),width:r.flowData.width,height:r.flowData.height},{vertexData:o,indexData:s}=await d(r.rendererSettings,t,e.signal);return{result:{vertexBuffer:o.buffer,indexBuffer:s.buffer},transferList:[o.buffer,s.buffer]}}async getProjectionOffsetGrid(r){const t=S.fromJSON(r.projectedExtent),o=S.fromJSON(r.srcBufferExtent);let s=null;r.datumTransformationStemps&&(s=new e({steps:r.datumTransformationStemps})),m(t.spatialReference,o.spatialReference,s)&&await l();const i=r.rasterTransform?p(r.rasterTransform):null;return f({...r,projectedExtent:t,srcBufferExtent:o,datumTransformation:s,rasterTransform:i})}}export{h as default};\n"],"names":["isSome","r","e","t","decode","o","estimateStatisticsHistograms","s","split","i","mosaic","a","approximateTransform","n","requirePE","m","load","l","getProjectionOffsetGrid","f","convertVectorFieldData","c","readTransform","p","u","createStreamlinesMesh","d","S","h","fromJSON","pixelBlock","type","Promise","resolve","toJSON","data","options","symbolize","extent","symbolizer","updateSymbolizer","symbolizerJSON","histograms","rendererJSON","stretch","simpleStretch","srcPixelBlock","stretchParams","tileSize","maximumPyramidLevel","forEach","set","mosaicAndTransform","srcPixelBlocks","map","srcMosaicSize","blockWidths","alignmentInfo","coefs","destDimension","sampleSpacing","interpolation","Float32Array","flowData","buffer","width","height","vertexData","indexData","rendererSettings","signal","result","vertexBuffer","indexBuffer","transferList","projectedExtent","srcBufferExtent","datumTransformationStemps","steps","spatialReference","rasterTransform","datumTransformation","default"],"sourceRoot":"webpack:///"}