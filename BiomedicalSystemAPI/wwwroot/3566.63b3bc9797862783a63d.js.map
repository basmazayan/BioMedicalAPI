{"version":3,"file":"3566.63b3bc9797862783a63d.js","mappings":"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","sources":["./node_modules/@arcgis/core/layers/graphics/sources/geojson/GeoJSONSourceWorker.js","./node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js","./node_modules/@arcgis/core/layers/graphics/sources/support/clientSideDefaults.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../request.js\";import t from\"../../../../core/Error.js\";import s from\"../../../../core/Logger.js\";import{isSome as i}from\"../../../../core/maybe.js\";import{createTask as r,isAbortError as n}from\"../../../../core/promiseUtils.js\";import{getJsonType as a}from\"../../../../geometry/support/jsonUtils.js\";import{WGS84 as o,equals as l}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{convertFromGeometry as u,convertToGeometry as d,convertFromFeatures as p,convertToFeature as c,convertFromFeature as y}from\"../../featureConversionUtils.js\";import h from\"../../data/FeatureStore.js\";import{checkProjectionSupport as m,project as f}from\"../../data/projectionSupport.js\";import g from\"../../data/QueryEngine.js\";import{inferLayerProperties as _,createOptimizedFeatures as I,validateGeoJSON as j}from\"./geojson.js\";import{createDrawingInfo as F,createDefaultTemplate as E,createDefaultAttributesFunction as b}from\"../support/clientSideDefaults.js\";import{loadGeometryEngineForSimplify as T,mixAttributes as w,createFeatureEditSuccessResult as q,createFeatureEditErrorResult as x,simplify as S}from\"../support/sourceUtils.js\";import R from\"../../../support/FieldsIndex.js\";import{kebabDict as k}from\"../../../support/fieldType.js\";import{getFieldDefaultValue as D}from\"../../../support/fieldUtils.js\";const O={hasAttachments:!1,capabilities:\"query, editing, create, delete, update\",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};class C{constructor(){this._queryEngine=null,this._snapshotFeatures=async e=>{const t=await this._fetch(e);return this._createFeatures(t)}}destroy(){var e;null==(e=this._queryEngine)||e.destroy(),this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null}async load(e,s={}){this.loadOptions={url:e.url,customParameters:e.customParameters};const i=[];await this._checkProjection(e.spatialReference);let r=null;e.url&&(r=await this._fetch(null==s?void 0:s.signal));const n=_(r,{geometryType:e.geometryType}),a=e.fields||n.fields||[],l=null!=e.hasZ?e.hasZ:n.hasZ,u=n.geometryType,d=e.objectIdField||n.objectIdFieldName||\"__OBJECTID\",p=e.spatialReference||o;let c=e.timeInfo;a===n.fields&&n.unknownFields.length>0&&i.push({name:\"geojson-layer:unknown-field-types\",message:\"Some fields types couldn't be inferred from the features and were dropped\",details:{unknownFields:n.unknownFields}});let y=a.find((e=>e.name===d));y?(\"esriFieldTypeString\"!==y.type&&(y.type=\"esriFieldTypeOID\"),y.editable=!1,y.nullable=!1):(y={alias:d,name:d,type:\"string\"===n.objectIdFieldType?\"esriFieldTypeString\":\"esriFieldTypeOID\",editable:!1,nullable:!1},a.unshift(y));const m={};for(const o of a){if(null==o.name&&(o.name=o.alias),null==o.alias&&(o.alias=o.name),!o.name)throw new t(\"geojson-layer:invalid-field-name\",\"field name is missing\",{field:o});if(!k.jsonValues.includes(o.type))throw new t(\"geojson-layer:invalid-field-type\",`invalid type for field \"${o.name}\"`,{field:o});if(o.name!==y.name){const e=D(o);void 0!==e&&(m[o.name]=e)}}this._fieldsIndex=new R(a);const f=this._fieldsIndex.requiredFields.indexOf(y);if(f>-1&&this._fieldsIndex.requiredFields.splice(f,1),c){if(c.startTimeField){const e=this._fieldsIndex.get(c.startTimeField);e?(c.startTimeField=e.name,e.type=\"esriFieldTypeDate\"):c.startTimeField=null}if(c.endTimeField){const e=this._fieldsIndex.get(c.endTimeField);e?(c.endTimeField=e.name,e.type=\"esriFieldTypeDate\"):c.endTimeField=null}if(c.trackIdField){const e=this._fieldsIndex.get(c.trackIdField);e?c.trackIdField=e.name:(c.trackIdField=null,i.push({name:\"geojson-layer:invalid-timeInfo-trackIdField\",message:\"trackIdField is missing\",details:{timeInfo:c}}))}c.startTimeField||c.endTimeField||(i.push({name:\"geojson-layer:invalid-timeInfo\",message:\"startTimeField and endTimeField are missing\",details:{timeInfo:c}}),c=null)}const I=u?F(u):null,j={warnings:i,featureErrors:[],layerDefinition:{...O,drawingInfo:I,templates:E(m),extent:null,geometryType:u,objectIdField:d,fields:a,hasZ:!!l,timeInfo:c}};this._queryEngine=new g({fields:a,geometryType:u,hasM:!1,hasZ:l,objectIdField:d,spatialReference:p,timeInfo:c,featureStore:new h({geometryType:u,hasM:!1,hasZ:l}),cacheSpatialQueries:!0}),this._createDefaultAttributes=b(m,d);const T=await this._createFeatures(r);this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,T);const w=this._normalizeFeatures(T,j.warnings,j.featureErrors);if(this._queryEngine.featureStore.addMany(w),j.layerDefinition.extent=this._queryEngine.fullExtent,j.layerDefinition.timeInfo){const{start:e,end:t}=this._queryEngine.timeExtent;j.layerDefinition.timeInfo.timeExtent=[e,t]}return j}async applyEdits(e){const{spatialReference:t,geometryType:s}=this._queryEngine;return await Promise.all([T(t,s),m(e.adds,t),m(e.updates,t)]),await this._waitSnapshotComplete(),this._applyEdits(e)}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(e,t.signal)}async refresh(e){var i;return this.loadOptions.customParameters=e,null==(i=this._snapshotTask)||i.abort(),this._snapshotTask=r(this._snapshotFeatures),this._snapshotTask.promise.then((e=>{this._queryEngine.featureStore.clear(),this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,e);const t=this._normalizeFeatures(e);t&&this._queryEngine.featureStore.addMany(t)}),(e=>{this._queryEngine.featureStore.clear(),n(e)||s.getLogger(\"esri.layers.GeoJSONLayer\").error(new t(\"geojson-layer:refresh\",\"An error occurred during refresh\",{error:e}))})),await this._waitSnapshotComplete(),{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent}}async _createFeatures(e){const{geometryType:t,hasZ:s,objectIdField:r}=this._queryEngine,n=I(e,{geometryType:t,hasZ:s,objectIdField:r});if(!l(this._queryEngine.spatialReference,o))for(const a of n)i(a.geometry)&&(a.geometry=u(f(d(a.geometry,this._queryEngine.geometryType,this._queryEngine.hasZ,!1),o,this._queryEngine.spatialReference)));return n}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _fetch(t){const{url:s,customParameters:i}=this.loadOptions,r=(await e(s,{responseType:\"json\",query:{...i},signal:t})).data;return await j(r),r}_normalizeFeatures(e,t,s){const{objectIdField:i}=this._queryEngine,r=[];for(const n of e){const e=this._createDefaultAttributes(),a=w(this._fieldsIndex,e,n.attributes,!0,t);a?null==s||s.push(a):(this._assignObjectId(e,n.attributes,!0),n.attributes=e,n.objectId=e[i],r.push(n))}return r}_applyEdits(e){const{adds:t,updates:s,deletes:i}=e,r={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(r,t),s&&s.length&&this._applyUpdateEdits(r,s),i&&i.length){for(const e of i)r.deleteResults.push(q(e));this._queryEngine.featureStore.removeManyById(i)}return{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,featureEditResults:r}}_applyAddEdits(e,t){const{addResults:s}=e,{geometryType:r,hasM:n,hasZ:o,objectIdField:l,spatialReference:u,featureStore:d}=this._queryEngine,c=[];for(const p of t){if(p.geometry&&r!==a(p.geometry)){s.push(x(\"Incorrect geometry type.\"));continue}const t=this._createDefaultAttributes(),n=w(this._fieldsIndex,t,p.attributes);if(n)s.push(n);else{if(this._assignObjectId(t,p.attributes),p.attributes=t,null!=p.uid){const t=p.attributes[l];e.uidToObjectId[p.uid]=t}i(p.geometry)&&(p.geometry=f(S(p.geometry,u),p.geometry.spatialReference,u)),c.push(p),s.push(q(p.attributes[l]))}}d.addMany(p([],c,r,o,n,l))}_applyUpdateEdits({updateResults:e},t){const{geometryType:s,hasM:r,hasZ:n,objectIdField:o,spatialReference:l,featureStore:u}=this._queryEngine;for(const d of t){const{attributes:t,geometry:p}=d,h=t&&t[o];if(null==h){e.push(x(`Identifier field ${o} missing`));continue}if(!u.has(h)){e.push(x(`Feature with object id ${h} missing`));continue}const m=c(u.getFeature(h),s,n,r);if(i(p)){if(s!==a(p)){e.push(x(\"Incorrect geometry type.\"));continue}m.geometry=f(S(p,l),p.spatialReference,l)}if(t){const s=w(this._fieldsIndex,m.attributes,t);if(s){e.push(s);continue}}u.add(y(m,s,n,r,o)),e.push(q(h))}}_createObjectIdGenerator(e,t){const s=e.fieldsIndex.get(e.objectIdField);if(\"esriFieldTypeString\"===s.type)return()=>s.name+\"-\"+Date.now().toString(16);let i=Number.NEGATIVE_INFINITY;for(const r of t)r.objectId&&(i=Math.max(i,r.objectId));return i=Math.max(0,i)+1,()=>i++}_assignObjectId(e,t,s=!1){const i=this._queryEngine.objectIdField;e[i]=s&&i in t?t[i]:this._objectIdGenerator()}async _checkProjection(e){try{await m(o,e)}catch{throw new t(\"geojson-layer\",\"Projection not supported\")}}}export{C as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import t from\"../../OptimizedFeature.js\";import n from\"../../OptimizedGeometry.js\";import{isNumericField as o}from\"../../../support/fieldUtils.js\";const r={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function i(e){return r[e]}function*s(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const t of e.features)t&&(yield t)}}function*c(e){if(!e)return null;switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const t of e.coordinates)yield*t;break;case\"MultiPolygon\":for(const t of e.coordinates)for(const e of t)yield*e}}function*u(e,o={}){const{geometryType:r,objectIdField:s}=o;for(const u of e){var c;const{geometry:e,properties:l,id:f}=u;if(e&&i(e.type)!==r)continue;const a=l||{};let y=null!=(c=a[s])?c:null;s&&null!=f&&!a[s]&&(a[s]=y=f);const p=new t(e?d(new n,e,o):null,a,null,y);yield p}}function l(e){for(const t of e)if(t.length>2)return!0;return!1}function f(e){return!y(e)}function a(e){return y(e)}function y(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n],r=e[(n+1)%e.length];t+=o[0]*r[1]-r[0]*o[1]}return t<=0}function p(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function d(e,t,n){switch(t.type){case\"LineString\":return g(e,t,n);case\"MultiLineString\":return m(e,t,n);case\"MultiPoint\":return h(e,t,n);case\"MultiPolygon\":return w(e,t,n);case\"Point\":return P(e,t,n);case\"Polygon\":return b(e,t,n)}}function g(e,t,n){return F(e,t.coordinates,n),e}function m(e,t,n){for(const o of t.coordinates)F(e,o,n);return e}function h(e,t,n){return F(e,t.coordinates,n),e}function w(e,t,n){for(const o of t.coordinates){j(e,o[0],n);for(let t=1;t<o.length;t++)S(e,o[t],n)}return e}function P(e,t,n){return M(e,t.coordinates,n),e}function b(e,t,n){const o=t.coordinates;j(e,o[0],n);for(let r=1;r<o.length;r++)S(e,o[r],n);return e}function j(e,t,n){const o=p(t);f(o)?G(e,o,n):F(e,o,n)}function S(e,t,n){const o=p(t);a(o)?G(e,o,n):F(e,o,n)}function F(e,t,n){for(const o of t)M(e,o,n);e.lengths.push(t.length)}function G(e,t,n){for(let o=t.length-1;o>=0;o--)M(e,t[o],n);e.lengths.push(t.length)}function M(e,t,n){const[o,r,i]=t;e.coords.push(o,r),n.hasZ&&e.coords.push(i||0)}function k(e){switch(typeof e){case\"string\":return\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function O(t){if(!t)throw new e(\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==t.type&&\"FeatureCollection\"!==t.type)throw new e(\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:t});const{crs:n}=t;if(!n)return;const o=\"string\"==typeof n?n:\"name\"===n.type?n.properties.name:\"EPSG\"===n.type?n.properties.code:null,r=new RegExp(\".*(CRS84H?|4326)$\",\"i\");if(!o||!r.test(o))throw new e(\"geojson-layer:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:n})}function T(e,t={}){const n=[],r=new Set,u=new Set;let f,a=!1,y=null,p=!1,{geometryType:d=null}=t,g=!1;for(const o of s(e)){const{geometry:e,properties:t,id:s}=o;if(!e||(d||(d=i(e.type)),i(e.type)===d)){if(!a){a=l(c(e))}if(p||(p=null!=s,p&&(f=typeof s,y=Object.keys(t).filter((e=>t[e]===s)))),p&&null!=s&&(y.length>1?y=y.filter((e=>t[e]===s)):1===y.length&&(y=t[y[0]]===s?y:[])),!g&&t){let e=!0;for(const o in t){if(r.has(o))continue;const i=t[o];if(null==i){e=!1,u.add(o);continue}const s=k(i);\"unknown\"!==s?(u.delete(o),r.add(o),n.push({name:o,alias:o,type:s})):u.add(o)}g=e}}}const m=y&&1===y.length&&y[0]||null;if(m)for(const i of n)if(i.name===m&&o(i)){i.type=\"esriFieldTypeOID\";break}return{fields:n,geometryType:d,hasZ:a,objectIdFieldName:m,objectIdFieldType:f,unknownFields:Array.from(u)}}function L(e,t){return Array.from(u(s(e),t))}export{L as createOptimizedFeatures,i as getGeometryType,T as inferLayerProperties,O as validateGeoJSON};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/has.js\";import{clone as s}from\"../../../../core/lang.js\";import{queryCapabilities as e}from\"../../data/QueryEngineCapabilities.js\";import{defaultPointSymbolJSON as r,defaultPolylineSymbolJSON as p,defaultPolygonSymbolJSON as o}from\"../../../../symbols/support/defaultsJSON.js\";function u(t){return{renderer:{type:\"simple\",symbol:\"esriGeometryPoint\"===t||\"esriGeometryMultipoint\"===t?r:\"esriGeometryPolyline\"===t?p:o}}}function n(s,e){if(t(\"esri-csp-restrictions\"))return()=>({[e]:null,...s});try{let t=`this.${e} = null;`;for(const e in s){t+=`this${e.includes(\".\")?`[\"${e}\"]`:`.${e}`} = ${JSON.stringify(s[e])};`}const r=new Function(t);return()=>new r}catch(r){return()=>({[e]:null,...s})}}function i(t={}){return[{name:\"New Feature\",description:\"\",prototype:{attributes:s(t)}}]}function a(t,s){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:s,supportsDelete:s,supportsEditing:s,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:s,supportsExceedsLimitStatistics:!0},query:e,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:s,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}export{a as createCapabilities,n as createDefaultAttributesFunction,i as createDefaultTemplate,u as createDrawingInfo};\n"],"names":["e","t","s","isSome","i","createTask","r","isAbortError","n","getJsonType","a","WGS84","o","equals","l","convertFromGeometry","u","convertToGeometry","d","convertFromFeatures","p","convertToFeature","c","convertFromFeature","y","h","checkProjectionSupport","m","project","f","g","inferLayerProperties","_","createOptimizedFeatures","I","validateGeoJSON","j","createDrawingInfo","F","createDefaultTemplate","E","createDefaultAttributesFunction","b","loadGeometryEngineForSimplify","T","mixAttributes","w","createFeatureEditSuccessResult","q","createFeatureEditErrorResult","x","simplify","S","R","kebabDict","k","getFieldDefaultValue","D","O","hasAttachments","capabilities","useStandardizedQueries","supportsCoordinatesQuantization","supportsReturningQueryGeometry","advancedQueryCapabilities","supportsQueryAttachments","supportsStatistics","supportsPercentileStatistics","supportsReturningGeometryCentroid","supportsQueryWithDistance","supportsDistinct","supportsReturningQueryExtent","supportsReturningGeometryProperties","supportsHavingClause","supportsOrderBy","supportsPagination","supportsQueryWithResultType","supportsSqlExpression","supportsDisjointSpatialRel","C","constructor","_queryEngine","_snapshotFeatures","_fetch","_createFeatures","destroy","_fieldsIndex","_createDefaultAttributes","load","loadOptions","url","customParameters","_checkProjection","spatialReference","signal","geometryType","fields","hasZ","objectIdField","objectIdFieldName","timeInfo","unknownFields","length","push","name","message","details","find","type","editable","nullable","alias","objectIdFieldType","unshift","field","jsonValues","includes","requiredFields","indexOf","splice","startTimeField","get","endTimeField","trackIdField","warnings","featureErrors","layerDefinition","drawingInfo","templates","extent","hasM","featureStore","cacheSpatialQueries","_objectIdGenerator","_createObjectIdGenerator","_normalizeFeatures","addMany","fullExtent","start","end","timeExtent","applyEdits","Promise","all","adds","updates","_waitSnapshotComplete","_applyEdits","queryFeatures","executeQuery","queryFeatureCount","executeQueryForCount","queryObjectIds","executeQueryForIds","queryExtent","executeQueryForExtent","querySnapping","executeQueryForSnapping","refresh","_snapshotTask","abort","promise","then","clear","getLogger","error","geometry","finished","responseType","query","data","attributes","_assignObjectId","objectId","deletes","addResults","deleteResults","updateResults","uidToObjectId","_applyAddEdits","_applyUpdateEdits","removeManyById","featureEditResults","uid","has","getFeature","add","fieldsIndex","Date","now","toString","Number","NEGATIVE_INFINITY","Math","max","default"],"sourceRoot":"webpack:///"}