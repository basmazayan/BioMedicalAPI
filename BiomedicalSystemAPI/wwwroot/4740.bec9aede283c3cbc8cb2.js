"use strict";var Le=Object.defineProperty,We=Object.defineProperties,Ye=Object.getOwnPropertyDescriptors,Ze=Object.getOwnPropertySymbols,Je=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable,De=Math.pow,Oe=(he,ee,p)=>ee in he?Le(he,ee,{enumerable:!0,configurable:!0,writable:!0,value:p}):he[ee]=p,Pe=(he,ee)=>{for(var p in ee||(ee={}))Je.call(ee,p)&&Oe(he,p,ee[p]);if(Ze)for(var p of Ze(ee))Xe.call(ee,p)&&Oe(he,p,ee[p]);return he},Ge=(he,ee)=>We(he,Ye(ee));(self.webpackChunkbio_medical=self.webpackChunkbio_medical||[]).push([[4740],{64740:(he,ee,p)=>{p.d(ee,{Z:()=>S});var b=p(49996),B=p(61414),q=p(60161),te=p(18502),ve=p(20834),z=p(55612),H=p(61164),L=p(7401),A=p(15783),G=p(70279),j=p(31582),P=p(35169),ue=p(97486),oe=p(36403);const ie=new class{constructor(t,i){this._cache=new ue.Z(t),this._invalidCache=new ue.Z(i)}get(t,i){const e=`${i.uid}:${t}`,s=this._cache.get(e);if(s)return s;if(void 0!==this._invalidCache.get(e))return null;try{const n=oe.WhereClause.create(t,i);return this._cache.put(e,n),n}catch(n){return this._invalidCache.put(e,null),null}}}(50,500),ce="feature-store:unsupported-query",be=new Set(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);function pe(h,t){return h?ie.get(h,t):null}function ge(h,t,i,e=!0){const s=[];for(const n of t)if("*"!==n&&!h.has(n))if(e){const a=Se(n);try{const u=pe(a,h);if(!u)throw new B.Z(ce,"invalid SQL expression",{where:a});if(!u.isStandardized)throw new B.Z(ce,"expression is not standard",{clause:u});ge(h,u.fieldNames,"expression contains missing fields")}catch(u){const x=u&&u.details;if(x&&(x.clause||x.where))throw u;x&&x.missingFields?s.push(...x.missingFields):s.push(n)}}else s.push(n);if(s.length)throw new B.Z(ce,i,{missingFields:s})}function Se(h){return h.split(" as ")[0]}function xe(h,t){const i=t.get(h);return!!i&&!be.has(i.type)}var me=p(79371),M=p(91343),C=p(91409),k=p(42187),N=p(76281);class ne{constructor(t,i,e){this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=t.returnDistinctValues,this.fieldsIndex=e,this.featureAdapter=i;const s=t.outFields;if(s&&-1===s.indexOf("*")){this.outFields=s;let n=0;for(const a of s){const u=Se(a),x=this.fieldsIndex.get(u),y=x?null:pe(u,e),F=x?x.name:a.split(" as ")[1]||"FIELD_EXP_"+n++;this._fieldDataCache.set(a,{alias:F,clause:y})}}}countDistinctValues(t){return this.returnDistinctValues?(t.forEach(i=>this.getAttributes(i)),this._returnDistinctMap.size):t.length}getAttributes(t){const i=this._processAttributesForOutFields(t);return this._processAttributesForDistinctValues(i)}getFieldValue(t,i,e){const s=e?e.name:i;let n=null;return this._fieldDataCache.has(s)?n=this._fieldDataCache.get(s).clause:e||(n=pe(i,this.fieldsIndex),this._fieldDataCache.set(s,{alias:s,clause:n})),e?this.featureAdapter.getAttribute(t,s):n.calculateValue(t,this.featureAdapter)}getNormalizedValue(t,i){const e=i.normalizationType,s=i.normalizationTotal;let n=this.getFieldValue(t,i.field,i.fieldInfo);if(e&&Number.isFinite(n)){const a=this.getFieldValue(t,i.normalizationField,i.normalizationFieldInfo);n=(0,N.fk)(n,e,a,s)}return n}getExpressionValue(t,i,e){const s={attributes:this.featureAdapter.getAttributes(t)},n=e.createExecContext(s,i.viewInfo);return e.executeFunction(i.compiledFunc,n)}validateItem(t,i){return this._fieldDataCache.has(i)||this._fieldDataCache.set(i,{alias:i,clause:pe(i,this.fieldsIndex)}),this._fieldDataCache.get(i).clause.testFeature(t,this.featureAdapter)}validateItems(t,i){return this._fieldDataCache.has(i)||this._fieldDataCache.set(i,{alias:i,clause:pe(i,this.fieldsIndex)}),this._fieldDataCache.get(i).clause.testSet(t,this.featureAdapter)}_processAttributesForOutFields(t){const i=this.outFields;if(!i||!i.length)return this.featureAdapter.getAttributes(t);const e={};for(const s of i){const{alias:n,clause:a}=this._fieldDataCache.get(s);e[n]=a?a.calculateValue(t,this.featureAdapter):this.featureAdapter.getAttribute(t,n)}return e}_processAttributesForDistinctValues(t){if((0,te.Wi)(t)||!this.returnDistinctValues)return t;const i=this.outFields,e=[];if(i)for(const a of i){const{alias:u}=this._fieldDataCache.get(a);e.push(t[u])}else for(const a in t)e.push(t[a]);const s=`${(i||["*"]).join(",")}=${e.join(",")}`;let n=this._returnDistinctMap.get(s)||0;return this._returnDistinctMap.set(s,++n),n>1?null:t}}var re=p(808),m=p(27939),E=p(6663),D=p(2999);class _{constructor(t,i,e){this.items=t,this.queryGeometry=i,this.definitionExpression=e.definitionExpression,this.geometryType=e.geometryType,this.hasM=e.hasM,this.hasZ=e.hasZ,this.objectIdField=e.objectIdField,this.spatialReference=e.spatialReference,this.fieldsIndex=e.fieldsIndex,this.timeInfo=e.timeInfo,this.featureAdapter=e.featureAdapter,this.aggregateAdapter=e.aggregateAdapter}get size(){return this.items.length}createQueryResponseForCount(t){const i=new ne(t,this.featureAdapter,this.fieldsIndex);if(!t.outStatistics)return i.countDistinctValues(this.items);const{groupByFieldsForStatistics:e,having:s}=t;if(!(null==e?void 0:e.length))return 1;const n=new Map,a=new Map,u=new Set,x=t.outStatistics;for(const y of x){const{statisticType:F}=y,V="exceedslimit"!==F?y.onStatisticField:void 0;if(!a.has(V)){const Y=[];for(const U of e){const X=this._getAttributeValues(i,U,n);Y.push(X)}a.set(V,this._calculateUniqueValues(Y,i.returnDistinctValues))}const w=a.get(V);for(const Y in w){const{data:U,items:X}=w[Y],se=U.join(",");s&&!i.validateItems(X,s)||u.add(se)}}return u.size}createQueryResponse(t){let i;return i=t.outStatistics?t.outStatistics.some(e=>"exceedslimit"===e.statisticType)?this._createExceedsLimitQueryResponse(t):this._createStatisticsQueryResponse(t):this._createFeatureQueryResponse(t),t.returnQueryGeometry&&((0,P.JY)(t.outSR)&&!(0,P.fS)(this.queryGeometry.spatialReference,t.outSR)?i.queryGeometry=(0,m.S2)(Pe({spatialReference:t.outSR},(0,me.iV)(this.queryGeometry,this.queryGeometry.spatialReference,t.outSR))):i.queryGeometry=(0,m.S2)(Pe({spatialReference:t.outSR},this.queryGeometry))),i}createSnappingResponse(t,i){const e=this.featureAdapter,s=function(h,t){return h?t?4:3:t?3:2}(this.hasZ,this.hasM),{x:n,y:a}=t.point,u="number"==typeof t.distance?t.distance:t.distance.x,x="number"==typeof t.distance?t.distance:t.distance.y,y={candidates:[]},F="esriGeometryPolygon"===this.geometryType,V=this.getPointCreator(t.point,this.spatialReference,i);for(const w of this.items){const Y=e.getGeometry(w);if((0,te.Wi)(Y))continue;const{coords:U,lengths:X}=Y;if(1&t.types){let se=0;for(let Q=0;Q<X.length;Q++){const K=X[Q];for(let $=0;$<K;$++,se+=s){const fe=U[se],ae=U[se+1];if($!==K-1){const J=U[se+s],Fe=U[se+s+1],{x:_e,y:Te}=Z(n,a,fe,ae,J,Fe),Ce=(n-_e)/u,Me=(a-Te)/x,Ee=Ce*Ce+Me*Me;Ee<=1&&y.candidates.push({type:"edge",objectId:e.getObjectId(w),distance:Math.sqrt(Ee),target:V(_e,Te),start:V(fe,ae),end:V(J,Fe)})}}}}if(2&t.types){const se=F?U.length-s:U.length;for(let Q=0;Q<se;Q+=s){const K=U[Q],$=U[Q+1],fe=(n-K)/u,ae=(a-$)/x,J=fe*fe+ae*ae;J<=1&&y.candidates.push({type:"vertex",objectId:e.getObjectId(w),distance:Math.sqrt(J),target:V(K,$)})}}}return y.candidates.sort((w,Y)=>w.distance-Y.distance),y}getPointCreator(t,i,e){const s=(0,te.pC)(e)&&!(0,P.fS)(i,e)?n=>(0,me.iV)(n,i,e):n=>n;return null!=t.z&&null!=t.m?(n,a)=>s({x:n,y:a,z:t.z,m:t.m}):null!=t.z?(n,a)=>s({x:n,y:a,z:t.z}):null!=t.m?(n,a)=>s({x:n,y:a,m:t.m}):(n,a)=>s({x:n,y:a})}executeAttributesQuery(t){const i=pe(t.where,this.fieldsIndex);if(!i)return Promise.resolve(this);if(i.isStandardized){let e=0;const s=[];for(const a of this.items)i.testFeature(a,this.featureAdapter)&&(s[e++]=a);const n=new _(s,this.queryGeometry,this);return n.definitionExpression=t.where,Promise.resolve(n)}return Promise.reject(new TypeError("Where clause is not standardized"))}executeAggregateIdsQuery(t){if(!t.aggregateIds||!t.aggregateIds.length||(0,te.Wi)(this.aggregateAdapter))return Promise.resolve(this);const i=new Set;for(const s of t.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(s).forEach(n=>i.add(n));const e=this.featureAdapter.getObjectId;return Promise.resolve(new _(this.items.filter(s=>i.has(e(s))),this.queryGeometry,this))}executeObjectIdsQuery(t){if(!t.objectIds||!t.objectIds.length)return Promise.resolve(this);const i=new Set(t.objectIds),e=this.featureAdapter.getObjectId;return Promise.resolve(new _(this.items.filter(s=>i.has(e(s))),this.queryGeometry,this))}executeTimeQuery(t){const i=(0,re.y)(this.timeInfo,t.timeExtent,this.featureAdapter);if(!(0,te.pC)(i))return Promise.resolve(this);const e=this.items.filter(i);return Promise.resolve(new _(e,this.queryGeometry,this))}filterLatest(){const{trackIdField:t,startTimeField:i,endTimeField:e}=this.timeInfo,s=e||i,n=new Map,a=this.featureAdapter.getAttribute;for(const x of this.items){const y=a(x,t),F=a(x,s),V=n.get(y);(!V||F>a(V,s))&&n.set(y,x)}const u=Array.from(n.values());return Promise.resolve(new _(u,this.queryGeometry,this))}project(t){var i=this;return(0,b.Z)(function*(){if(!t||(0,P.fS)(i.spatialReference,t))return i;const e=i.featureAdapter,s=(yield(0,me.oj)(i.items.map(n=>(0,m.Op)(i.geometryType,i.hasZ,i.hasM,e.getGeometry(n))),i.spatialReference,t)).map((n,a)=>e.cloneWithGeometry(i.items[a],(0,k.GH)(n,i.hasZ,i.hasM)));return new _(s,i.queryGeometry,{definitionExpression:i.definitionExpression,geometryType:i.geometryType,hasM:i.hasM,hasZ:i.hasZ,objectIdField:i.objectIdField,spatialReference:t,fieldsIndex:i.fieldsIndex,timeInfo:i.timeInfo,featureAdapter:i.featureAdapter})})()}createSummaryStatisticsResponse(t,i){var e=this;return(0,b.Z)(function*(){const{field:s,valueExpression:n,normalizationField:a,normalizationType:u,normalizationTotal:x,minValue:y,maxValue:F,scale:V}=i,w=e.fieldsIndex.isDateField(s),Y=yield e._getDataValues(t,{field:s,valueExpression:n,normalizationField:a,normalizationType:u,normalizationTotal:x,scale:V}),U=(0,N.S5)({normalizationType:u,normalizationField:a,minValue:y,maxValue:F}),X=e.fieldsIndex.get(s),se={value:.5,fieldType:null==X?void 0:X.type},Q=(0,E.qN)(X)?(0,N.H0)({values:Y,supportsNullCount:U,percentileParams:se}):(0,N.i5)({values:Y,minValue:y,maxValue:F,useSampleStdDev:!u,supportsNullCount:U,percentileParams:se});return(0,N.F_)(Q,w)})()}createUniqueValuesResponse(t,i){var e=this;return(0,b.Z)(function*(){const{field:s,valueExpression:n,domain:a,returnAllCodedValues:u,scale:x}=i,y=yield e._getDataValues(t,{field:s,valueExpression:n,scale:x}),F=(0,N.eT)(y);return(0,N.Qm)(F,a,u)})()}createClassBreaksResponse(t,i){var e=this;return(0,b.Z)(function*(){const{field:s,valueExpression:n,normalizationField:a,normalizationType:u,normalizationTotal:x,classificationMethod:y,standardDeviationInterval:F,minValue:V,maxValue:w,numClasses:Y,scale:U}=i,X=yield e._getDataValues(t,{field:s,valueExpression:n,normalizationField:a,normalizationType:u,normalizationTotal:x,scale:U}),se=(0,N.G2)(X,{field:s,normalizationField:a,normalizationType:u,normalizationTotal:x,classificationMethod:y,standardDeviationInterval:F,minValue:V,maxValue:w,numClasses:Y});return(0,N.DL)(se,y)})()}createHistogramResponse(t,i){var e=this;return(0,b.Z)(function*(){const{field:s,valueExpression:n,normalizationField:a,normalizationType:u,normalizationTotal:x,classificationMethod:y,standardDeviationInterval:F,minValue:V,maxValue:w,numBins:Y,scale:U}=i,X=yield e._getDataValues(t,{field:s,valueExpression:n,normalizationField:a,normalizationType:u,normalizationTotal:x,scale:U});return(0,N.oF)(X,{field:s,normalizationField:a,normalizationType:u,normalizationTotal:x,classificationMethod:y,standardDeviationInterval:F,minValue:V,maxValue:w,numBins:Y})})()}_sortFeatures(t,i,e){if(t.length>1&&i&&i.length)for(const s of i.reverse()){const n=s.split(" "),a=n[0],u=this.fieldsIndex.get(a),x=n[1]&&"desc"===n[1].toLowerCase(),y=(0,N.Lq)(null==u?void 0:u.type,x);t.sort((F,V)=>{const w=e(F,a,u),Y=e(V,a,u);return y(w,Y)})}}_createFeatureQueryResponse(t){const i=this.items,{geometryType:e,hasM:s,hasZ:n,objectIdField:a,spatialReference:u}=this,{outFields:x,outSR:y,quantizationParameters:F,resultRecordCount:V,resultOffset:w,returnZ:Y,returnM:U}=t,X=null!=V&&i.length>(w||0)+V,se=x&&(x.includes("*")?[...this.fieldsIndex.fields]:x.map(Q=>this.fieldsIndex.get(Q)));return{exceededTransferLimit:X,features:this._createFeatures(t,i),fields:se,geometryType:e,hasM:s&&U,hasZ:n&&Y,objectIdFieldName:a,spatialReference:(0,m.S2)(y||u),transform:F&&(0,C.vY)(F)||null}}_createFeatures(t,i){const e=new ne(t,this.featureAdapter,this.fieldsIndex),{hasM:s,hasZ:n}=this,{orderByFields:a,quantizationParameters:u,returnGeometry:x,returnCentroid:y,maxAllowableOffset:F,resultOffset:V,resultRecordCount:w,returnZ:Y=!1,returnM:U=!1}=t,X=n&&Y,se=s&&U;let Q=[],K=0;const $=[...i];if(this._sortFeatures($,a,(ae,J,Fe)=>e.getFieldValue(ae,J,Fe)),x||y){const ae=(0,C.vY)(u);if(x&&!y)for(const J of $)Q[K++]={attributes:e.getAttributes(J),geometry:(0,m.Op)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(J),F,ae,X,se)};else if(!x&&y)for(const J of $)Q[K++]={attributes:e.getAttributes(J),centroid:(0,m.EG)(this,this.featureAdapter.getCentroid(J,this),ae)};else for(const J of $)Q[K++]={attributes:e.getAttributes(J),centroid:(0,m.EG)(this,this.featureAdapter.getCentroid(J,this),ae),geometry:(0,m.Op)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(J),F,ae,X,se)}}else for(const ae of $){const J=e.getAttributes(ae);J&&(Q[K++]={attributes:J})}const fe=V||0;if(null!=w){const ae=fe+w;Q=Q.slice(fe,Math.min(Q.length,ae))}return Q}_createExceedsLimitQueryResponse(t){let i=!1,e=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY;for(const a of t.outStatistics)if("exceedslimit"===a.statisticType){e=null!=a.maxPointCount?a.maxPointCount:Number.POSITIVE_INFINITY,s=null!=a.maxRecordCount?a.maxRecordCount:Number.POSITIVE_INFINITY,n=null!=a.maxVertexCount?a.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)i=this.items.length>e;else if(this.items.length>s)i=!0;else{const a=this.hasZ?this.hasM?4:3:this.hasM?3:2,u=this.featureAdapter;i=this.items.reduce((x,y)=>{const F=u.getGeometry(y);return x+((0,te.pC)(F)&&F.coords.length||0)},0)/a>n}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(i)}}]}}_createStatisticsQueryResponse(t){const i={attributes:{}},e=[],s=new Map,n=new Map,a=new Map,u=new Map,x=new ne(t,this.featureAdapter,this.fieldsIndex),y=t.outStatistics,{groupByFieldsForStatistics:F,having:V,orderByFields:w}=t,Y=F&&F.length,U=!!Y,X=U&&F[0],se=U&&!this.fieldsIndex.get(X);for(const K of y){const{outStatisticFieldName:$,statisticType:fe}=K,ae=K,J="exceedslimit"!==fe?K.onStatisticField:void 0,Fe="percentile_disc"===fe||"percentile_cont"===fe,_e=U&&1===Y&&(J===X||se)&&"count"===fe;if(U){if(!a.has(J)){const Ce=[];for(const Me of F){const Ee=this._getAttributeValues(x,Me,s);Ce.push(Ee)}a.set(J,this._calculateUniqueValues(Ce,x.returnDistinctValues))}const Te=a.get(J);for(const Ce in Te){const{count:Me,data:Ee,items:je,itemPositions:Ue}=Te[Ce],we=Ee.join(",");if(!V||x.validateItems(je,V)){const Qe=u.get(we)||{attributes:{}};let Ne=null;if(_e)Ne=Me;else{const Ae=this._getAttributeValues(x,J,s),ze=Ue.map(Be=>Ae[Be]);Ne=Fe&&"statisticParameters"in ae?this._getPercentileValue(ae,ze):this._getStatisticValue(ae,ze,null,x.returnDistinctValues)}Qe.attributes[$]=Ne,F.forEach((Ae,ze)=>Qe.attributes[this.fieldsIndex.get(Ae)?Ae:`EXPR_${ze+1}`]=Ee[ze]),u.set(we,Qe)}}}else{const Te=this._getAttributeValues(x,J,s);i.attributes[$]=Fe&&"statisticParameters"in ae?this._getPercentileValue(ae,Te):this._getStatisticValue(ae,Te,n,x.returnDistinctValues)}e.push({name:$,alias:$,type:"esriFieldTypeDouble"})}const Q=U?Array.from(u.values()):[i];return this._sortFeatures(Q,w,(K,$)=>K.attributes[$]),{fields:e,features:Q}}_getStatisticValue(t,i,e,s){const{onStatisticField:n,statisticType:a}=t;let u=null;return u=null!=e&&e.has(n)?e.get(n):(0,E.qN)(this.fieldsIndex.get(n))?(0,N.H0)({values:i,returnDistinct:s}):(0,N.i5)({values:i,minValue:null,maxValue:null,useSampleStdDev:!0}),e&&e.set(n,u),u["var"===a?"variance":a]}_getPercentileValue(t,i){const{onStatisticField:e,statisticParameters:s,statisticType:n}=t,{value:a,orderBy:u}=s,x=this.fieldsIndex.get(e),y={value:a,orderBy:u,fieldType:null==x?void 0:x.type,isDiscrete:"percentile_disc"===n};return(0,N.XL)(i,y)}_getAttributeValues(t,i,e){if(e.has(i))return e.get(i);const s=this.fieldsIndex.get(i),n=this.items.map(a=>t.getFieldValue(a,i,s));return e.set(i,n),n}_getAttributeNormalizedValues(t,i){return this.items.map(e=>t.getNormalizedValue(e,{field:i.field,fieldInfo:this.fieldsIndex.get(i.field),normalizationField:i.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(i.normalizationField),normalizationType:i.normalizationType,normalizationTotal:i.normalizationTotal}))}_getAttributeExpressionValues(t,i,e){var s=this;return(0,b.Z)(function*(){const{arcadeUtils:n}=yield(0,D.LC)(),a=n.createFunction(i),u=e&&n.getViewInfo(e);return s.items.map(x=>t.getExpressionValue(x,{compiledFunc:a,viewInfo:u},n))})()}_calculateUniqueValues(t,i){const e={},s=this.items,n=s.length;for(let a=0;a<n;a++){const u=s[a],x=[];for(const F of t)x.push(F[a]);const y=x.join(",");i?null==e[y]&&(e[y]={count:1,data:x,items:[u],itemPositions:[a]}):null==e[y]?e[y]={count:1,data:x,items:[u],itemPositions:[a]}:(e[y].count++,e[y].items.push(u),e[y].itemPositions.push(a))}return e}_getDataValues(t,i){var e=this;return(0,b.Z)(function*(){const s=new ne(t,e.featureAdapter,e.fieldsIndex),{valueExpression:n,field:a,normalizationField:u,normalizationType:x,normalizationTotal:y,scale:F}=i,V=n?{viewingMode:"map",scale:F,spatialReference:t.outSR||e.spatialReference}:null;return n?e._getAttributeExpressionValues(s,n,V):e._getAttributeNormalizedValues(s,{field:a,normalizationField:u,normalizationType:x,normalizationTotal:y})})()}}function Z(h,t,i,e,s,n){const a=s-i,u=n-e,x=a*a+u*u,y=(h-i)*a+(t-e)*u,F=Math.min(1,Math.max(0,y/x));return{x:i+a*F,y:e+u*F}}var W=p(97815),O=p(62419),r=p(2543);const l="feature-store:unsupported-query";const g=new Set,I=new ve.WJ(2e6);let v=0;class S{constructor(t){this.capabilities={query:M.g},this.geometryType=t.geometryType,this.hasM=t.hasM,this.hasZ=t.hasZ,this.objectIdField=t.objectIdField,this.spatialReference=t.spatialReference,this.definitionExpression=t.definitionExpression,this.featureStore=t.featureStore,this.aggregateAdapter=t.aggregateAdapter,this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache()),this.timeInfo=t.timeInfo,t.cacheSpatialQueries&&(this._geometryQueryCache=new ve.Xq(v+++"$$",I)),this.fieldsIndex=new O.Z(t.fields),t.scheduler&&t.priority&&(this._frameTask=t.scheduler.registerTask(t.priority))}destroy(){this._frameTask=(0,te.hw)(this._frameTask),this.clearCache(),(0,te.SC)(this._geometryQueryCache),this._changeHandle=(0,te.hw)(this._changeHandle),(0,te.SC)(this.fieldsIndex)}get featureAdapter(){return this.featureStore.featureAdapter}get fullExtent(){const t=this.featureStore.fullBounds;return t?{xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:(0,m.S2)(this.spatialReference)}:null}get timeExtent(){return this.timeInfo?(this._timeExtent||(this._timeExtent=(0,re.R)(this.timeInfo,this.featureStore)),this._timeExtent):null}clearCache(){this._geometryQueryCache&&this._geometryQueryCache.clear(),this._allItems=null,this._timeExtent=null}executeQuery(t={},i){var e=this;return(0,b.Z)(function*(){let s,n=(0,q.d9)(t);try{n=yield e._schedule(()=>(0,m.Up)(n,e.definitionExpression,e.spatialReference),i),n=yield e._reschedule(()=>e._checkQuerySupport(n),i),s=yield e._reschedule(()=>e._executeGeometryQuery(n,i),i),s=yield e._reschedule(()=>s.executeAggregateIdsQuery(n),i),s=yield e._reschedule(()=>s.executeObjectIdsQuery(n),i),s=yield e._reschedule(()=>s.executeTimeQuery(n),i),s=yield e._reschedule(()=>s.executeAttributesQuery(n),i)}catch(a){if(a!==m.vF)throw a;s=new _([],null,e)}return s.createQueryResponse(n)})()}executeQueryForCount(t={},i){var e=this;return(0,b.Z)(function*(){let s=(0,q.d9)(t);s.returnGeometry=!1,s.returnCentroid=!1,s.outSR=null;try{s=yield e._schedule(()=>(0,m.Up)(s,e.definitionExpression,e.spatialReference),i),s=yield e._reschedule(()=>e._checkQuerySupport(s),i);let n=yield e._reschedule(()=>e._executeGeometryQuery(s,i),i);return n=yield e._reschedule(()=>n.executeAggregateIdsQuery(s),i),n=yield e._reschedule(()=>n.executeObjectIdsQuery(s),i),n=yield e._reschedule(()=>n.executeTimeQuery(s),i),n=yield e._reschedule(()=>n.executeAttributesQuery(s),i),n.createQueryResponseForCount(s)}catch(n){if(n!==m.vF)throw n;return 0}})()}executeQueryForExtent(t={},i){var e=this;return(0,b.Z)(function*(){let s,n=(0,q.d9)(t);const a=n.outSR;try{n=yield e._schedule(()=>(0,m.Up)(n,e.definitionExpression,e.spatialReference),i),n=yield e._reschedule(()=>e._checkQuerySupport(n),i),n.returnGeometry=!0,n.returnCentroid=!1,n.outSR=null,s=yield e._reschedule(()=>e._executeGeometryQuery(n,i),i),s=yield e._reschedule(()=>s.executeAggregateIdsQuery(n),i),s=yield e._reschedule(()=>s.executeObjectIdsQuery(n),i),s=yield e._reschedule(()=>s.executeTimeQuery(n),i),s=yield e._reschedule(()=>s.executeAttributesQuery(n),i);const u=s.size;if(!u)return{count:u,extent:null};(0,H.t8)(R,H.Gv),e.featureStore.forEachBounds(s.items,F=>(0,H.TC)(R,F),T);const x={xmin:R[0],ymin:R[1],xmax:R[3],ymax:R[4],spatialReference:(0,m.S2)(e.spatialReference)};e.hasZ&&isFinite(R[2])&&isFinite(R[5])&&(x.zmin=R[2],x.zmax=R[5]);const y=(0,me.iV)(x,s.spatialReference,a);if(y.spatialReference=(0,m.S2)(a||e.spatialReference),y.xmax-y.xmin==0){const F=(0,z.c9)(y.spatialReference);y.xmin-=F,y.xmax+=F}if(y.ymax-y.ymin==0){const F=(0,z.c9)(y.spatialReference);y.ymin-=F,y.ymax+=F}if(e.hasZ&&null!=y.zmin&&null!=y.zmax&&y.zmax-y.zmin==0){const F=(0,z.c9)(y.spatialReference);y.zmin-=F,y.zmax+=F}return{count:u,extent:y}}catch(u){if(u===m.vF)return{count:0,extent:null};throw u}})()}executeQueryForIds(t={},i){var e=this;return(0,b.Z)(function*(){return e.executeQueryForIdSet(t,i).then(s=>Array.from(s))})()}executeQueryForIdSet(t={},i){var e=this;return(0,b.Z)(function*(){let s,n=(0,q.d9)(t);n.returnGeometry=!1,n.returnCentroid=!1,n.outSR=null;try{n=yield e._schedule(()=>(0,m.Up)(n,e.definitionExpression,e.spatialReference),i),n=yield e._reschedule(()=>e._checkQuerySupport(n),i),s=yield e._reschedule(()=>e._executeGeometryQuery(n,i),i),s=yield e._reschedule(()=>s.executeAggregateIdsQuery(n),i),s=yield e._reschedule(()=>s.executeObjectIdsQuery(n),i),s=yield e._reschedule(()=>s.executeTimeQuery(n),i),s=yield e._reschedule(()=>s.executeAttributesQuery(n),i);const a=s.items,u=new Set;return yield e._reschedule(()=>{for(const x of a)u.add(s.featureAdapter.getObjectId(x))},i),u}catch(a){if(a===m.vF)return new Set;throw a}})()}executeQueryForSnapping(t,i){var e=this;return(0,b.Z)(function*(){const{point:s,distance:n,types:a}=t;if(0===a)return{candidates:[]};const u=yield e._reschedule(()=>e._checkQuerySupport(t.query),i),x=!(0,P.fS)(s.spatialReference,e.spatialReference);x&&(yield(0,me._W)(s.spatialReference,e.spatialReference));const y="number"==typeof n?n:n.x,F="number"==typeof n?n:n.y,V={xmin:s.x-y,xmax:s.x+y,ymin:s.y-F,ymax:s.y+F,spatialReference:s.spatialReference},w=x?(0,me.iV)(V,e.spatialReference):V;if(!w)return{candidates:[]};const Y=(yield(0,j.aX)((0,G.im)(s),null,{signal:i}))[0],U=(yield(0,j.aX)((0,G.im)(w),null,{signal:i}))[0];if((0,te.Wi)(Y)||(0,te.Wi)(U))return{candidates:[]};let X=new _(e._searchFeatures(e._getQueryBBoxes(U.toJSON())),null,e);X=yield e._reschedule(()=>X.executeObjectIdsQuery(u),i),X=yield e._reschedule(()=>X.executeTimeQuery(u),i),X=yield e._reschedule(()=>X.executeAttributesQuery(u),i);const se=Y.toJSON(),Q=x?(0,me.iV)(se,e.spatialReference):se,K=x?Math.max(w.xmax-w.xmin,w.ymax-w.ymin)/2:n;return X.createSnappingResponse(Ge(Pe({},t),{point:Q,distance:K}),s.spatialReference)})()}executeQueryForLatestObservations(t={},i){var e=this;return(0,b.Z)(function*(){if(!e.timeInfo||!e.timeInfo.trackIdField)throw new B.Z(l,"Missing timeInfo or timeInfo.trackIdField",{query:t,timeInfo:e.timeInfo});let s,n=(0,q.d9)(t);try{n=yield e._schedule(()=>(0,m.Up)(n,e.definitionExpression,e.spatialReference),i),n=yield e._reschedule(()=>e._checkQuerySupport(n),i),s=yield e._reschedule(()=>e._executeGeometryQuery(n,i),i),s=yield e._reschedule(()=>s.executeAggregateIdsQuery(n),i),s=yield e._reschedule(()=>s.executeObjectIdsQuery(n),i),s=yield e._reschedule(()=>s.executeTimeQuery(n),i),s=yield e._reschedule(()=>s.executeAttributesQuery(n),i),s=yield e._reschedule(()=>s.filterLatest(),i)}catch(a){if(a!==m.vF)throw a;s=new _([],null,e)}return s.createQueryResponse(n)})()}executeQueryForSummaryStatistics(t={},i,e){var s=this;return(0,b.Z)(function*(){const{field:n,normalizationField:a,valueExpression:u}=i;return(yield s._getQueryEngineResultForStats(t,{field:n,normalizationField:a,valueExpression:u},e)).createSummaryStatisticsResponse(t,i)})()}executeQueryForUniqueValues(t={},i,e){var s=this;return(0,b.Z)(function*(){const{field:n,valueExpression:a}=i;return(yield s._getQueryEngineResultForStats(t,{field:n,valueExpression:a},e)).createUniqueValuesResponse(t,i)})()}executeQueryForClassBreaks(t={},i,e){var s=this;return(0,b.Z)(function*(){const{field:n,normalizationField:a,valueExpression:u}=i;return(yield s._getQueryEngineResultForStats(t,{field:n,normalizationField:a,valueExpression:u},e)).createClassBreaksResponse(t,i)})()}executeQueryForHistogram(t={},i,e){var s=this;return(0,b.Z)(function*(){const{field:n,normalizationField:a,valueExpression:u}=i;return(yield s._getQueryEngineResultForStats(t,{field:n,normalizationField:a,valueExpression:u},e)).createHistogramResponse(t,i)})()}_schedule(t,i){var e=this;return(0,b.Z)(function*(){return(0,te.pC)(e._frameTask)?e._frameTask.schedule(t,i):t(r.G5)})()}_reschedule(t,i){var e=this;return(0,b.Z)(function*(){return(0,te.pC)(e._frameTask)?e._frameTask.reschedule(t,i):t(r.G5)})()}_getAll(){if(!this._allItems){const t=[];this.featureStore.forEach(i=>t.push(i)),this._allItems=new _(t,null,this)}return this._allItems}_executeGeometryQuery(t,i){var e=this;return(0,b.Z)(function*(){const{geometry:s,outSR:n,spatialRel:a,returnGeometry:u,returnCentroid:x}=t,y=u||x,F=(0,P.JY)(n)&&!(0,P.fS)(e.spatialReference,n),V=e._geometryQueryCache?F&&y?JSON.stringify({geometry:s,spatialRelationship:a,outSpatialReference:n}):JSON.stringify({geometry:s,spatialRelationship:a}):null;if(V){const Q=e._geometryQueryCache.get(V);if(!(0,te.o8)(Q))return Q}const w=function(){var Q=(0,b.Z)(function*(K){if(F&&y){const $=yield K.project(n);return V&&e._geometryQueryCache.put(V,$,$.size||1),$}return V&&e._geometryQueryCache.put(V,K,K.size||1),K});return function($){return Q.apply(this,arguments)}}();if(!s)return w(e._getAll());const Y=e.featureAdapter;if("esriSpatialRelDisjoint"===a){const Q=e._searchFeatures(e._getQueryBBoxes(s));if(!Q.length)return w(e._getAll());let K,$;const fe=new Set;for(const J of Q)fe.add(Y.getObjectId(J));yield e._reschedule(()=>{let J=0;K=new Array(fe.size),e.featureStore.forEach(Fe=>K[J++]=Fe),$=fe},i);return w(yield e._reschedule((0,b.Z)(function*(){const J=yield(0,W.cW)(a,s,e.geometryType,e.hasZ,e.hasM);return new _(yield e._runSpatialFilter(K,_e=>!$.has(Y.getObjectId(_e))||J(Y.getGeometry(_e)),i),s,e)}),i))}const U=e._searchFeatures(e._getQueryBBoxes(s));if(!U.length){const Q=new _([],s,e);return V&&e._geometryQueryCache.put(V,Q,Q.size||1),Q}if(e._canExecuteSoloPass(s,t))return w(new _(U,s,e));const X=yield(0,W.cW)(a,s,e.geometryType,e.hasZ,e.hasM),se=yield e._runSpatialFilter(U,Q=>X(Y.getGeometry(Q)),i);return w(new _(se,s,e))})()}_runSpatialFilter(t,i,e){var s=this;return(0,b.Z)(function*(){if(!i)return t;if((0,te.Wi)(s._frameTask))return t.filter(x=>i(x));let n=0;const a=new Array,u=function(){var x=(0,b.Z)(function*(y){for(;n<t.length;){const F=t[n++];i(F)&&(a.push(F),y.madeProgress()),y.done&&(yield s._reschedule(V=>u(V),e))}});return function(F){return x.apply(this,arguments)}}();return s._reschedule(x=>u(x),e).then(()=>a)})()}_canExecuteSoloPass(t,i){const{geometryType:e}=this,{spatialRel:s}=i;return(0,W.hN)(t)&&("esriSpatialRelEnvelopeIntersects"===s||"esriGeometryPoint"===e&&("esriSpatialRelIntersects"===s||"esriSpatialRelContains"===s||"esriSpatialRelWithin"===s))}_getQueryBBoxes(t){if((0,W.hN)(t)){if((0,G.YX)(t))return[(0,L.al)(t.xmin,t.ymin,t.xmax,t.ymax)];if((0,G.oU)(t))return t.rings.map(i=>(0,L.al)(Math.min(i[0][0],i[2][0]),Math.min(i[0][1],i[2][1]),Math.max(i[0][0],i[2][0]),Math.max(i[0][1],i[2][1])))}return[(0,A.$P)((0,L.Ue)(),t)]}_searchFeatures(t){for(const s of t)this.featureStore.forEachInBounds(s,n=>{g.add(n)});const i=new Array(g.size);let e=0;return g.forEach(s=>i[e++]=s),g.clear(),i}_checkStatisticsSupport(t,i){var e=this;return(0,b.Z)(function*(){if(t.distance<0||null!=t.geometryPrecision||t.multipatchOption||t.pixelSize||t.relationParam||t.text||t.outStatistics||t.groupByFieldsForStatistics||t.having||t.orderByFields)throw new B.Z(l,"Unsupported query options",{query:t});return Promise.all([e._checkAttributesQuerySupport(t),e._checkStatisticsParamsSupport(i),(0,W.P0)(t,e.geometryType,e.spatialReference),(0,me._W)(e.spatialReference,t.outSR)]).then(()=>t)})()}_checkStatisticsParamsSupport(t){var i=this;return(0,b.Z)(function*(){let e=[];if(t.valueExpression){const{arcadeUtils:s}=yield(0,D.LC)();e=s.extractFieldNames(t.valueExpression)}if(t.field&&e.push(t.field),t.normalizationField&&e.push(t.normalizationField),!e.length)throw new B.Z(l,"params should have at least a field or valueExpression",{params:t});ge(i.fieldsIndex,e,"params contains missing fields")})()}_checkQuerySupport(t){var i=this;return(0,b.Z)(function*(){if(t.distance<0||null!=t.geometryPrecision||t.multipatchOption||t.pixelSize||t.relationParam||t.text)throw new B.Z(l,"Unsupported query options",{query:t});return Promise.all([i._checkAttributesQuerySupport(t),i._checkStatisticsQuerySupport(t),(0,W.P0)(t,i.geometryType,i.spatialReference),(0,me._W)(i.spatialReference,t.outSR)]).then(()=>t)})()}_checkAttributesQuerySupport(t){const{outFields:i,orderByFields:e,returnDistinctValues:s,outStatistics:n}=t,a=n?n.map(u=>u.outStatisticFieldName&&u.outStatisticFieldName.toLowerCase()):[];if(e&&e.length>0){const u=" asc",x=" desc",y=e.map(F=>{const V=F.toLowerCase();return V.indexOf(u)>-1?V.split(u)[0]:V.indexOf(x)>-1?V.split(x)[0]:F}).filter(F=>-1===a.indexOf(F));ge(this.fieldsIndex,y,"orderByFields contains missing fields")}if(i&&i.length>0)ge(this.fieldsIndex,i,"outFields contains missing fields");else if(s)throw new B.Z(l,"outFields should be specified for returnDistinctValues",{query:t});!function(h,t){if(!t)return!0;const i=ie.get(t,h);if(!i)throw new B.Z(ce,"invalid SQL expression",{where:t});if(!i.isStandardized)throw new B.Z(ce,"where clause is not standard",{where:t});ge(h,i.fieldNames,"where clause contains missing fields")}(this.fieldsIndex,t.where)}_checkStatisticsQuerySupport(t){var i=this;return(0,b.Z)(function*(){const{outStatistics:e,groupByFieldsForStatistics:s,having:n}=t,a=s&&s.length,u=e&&e.length;if(n){if(!a||!u)throw new B.Z(l,"outStatistics and groupByFieldsForStatistics should be specified with having",{query:t});!function(h,t,i){if(!t)return!0;const e=ie.get(t,h);if(!e)throw new B.Z(ce,"invalid SQL expression",{having:t});if(!e.isAggregate)throw new B.Z(ce,"having does not contain a valid aggregate function",{having:t});const s=e.fieldNames;if(ge(h,s,"having contains missing fields"),!e.getExpressions().every(n=>{const{aggregateType:a,field:u}=n,x=h.has(u)&&h.get(u).name;return i.some(y=>{const{onStatisticField:F,statisticType:V}=y;return(h.has(F)&&h.get(F).name)===x&&V.toLowerCase().trim()===a})}))throw new B.Z(ce,"expressions in having should also exist in outStatistics",{having:t})}(i.fieldsIndex,n,e)}if(u){if(!e.every(t=>"exceedslimit"!==t.statisticType))return;const x=e.map(y=>y.onStatisticField);ge(i.fieldsIndex,x,"onStatisticFields contains missing fields"),a&&ge(i.fieldsIndex,s,"groupByFieldsForStatistics contains missing fields");for(const y of e){const{onStatisticField:F,statisticType:V}=y;if("percentile_disc"!==V&&"percentile_cont"!==V||!("statisticParameters"in y)){if("count"!==V&&F&&xe(F,i.fieldsIndex))throw new B.Z(l,"outStatistics contains non-numeric fields",{definition:y,query:t})}else{const{statisticParameters:w}=y;if(!w)throw new B.Z(l,"statisticParamters should be set for percentile type",{definition:y,query:t})}}}})()}_getQueryEngineResultForStats(t={},i,e){var s=this;return(0,b.Z)(function*(){let n;t=(0,q.d9)(t);try{t=yield s._schedule(()=>(0,m.Up)(t,s.definitionExpression,s.spatialReference),e),t=yield s._reschedule(()=>s._checkStatisticsSupport(t,i),e),n=yield s._reschedule(()=>s._executeGeometryQuery(t,e),e),n=yield s._reschedule(()=>n.executeAggregateIdsQuery(t),e),n=yield s._reschedule(()=>n.executeObjectIdsQuery(t),e),n=yield s._reschedule(()=>n.executeTimeQuery(t),e),n=yield s._reschedule(()=>n.executeAttributesQuery(t),e)}catch(a){if(a!==m.vF)throw a;n=new _([],null,s)}return n})()}}const T=(0,H.Ue)(),R=(0,H.Ue)()},91343:(he,ee,p)=>{p.d(ee,{g:()=>b});const b={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}},97815:(he,ee,p)=>{p.d(ee,{hN:()=>me,P0:()=>Ie,cW:()=>Se});var b=p(49996),B=p(61414),q=p(57098),te=p(93877);var z=p(70279),H=p(35169);function L(M,C){return M?C?4:3:C?3:2}function j(M,C,k,N,ne){if(!M)return!1;const re=L(C,k),{coords:m,lengths:E}=M;let D=!1,_=0;for(const Z of E)D=P(D,m,re,_,Z,N,ne),_+=Z*re;return D}function P(M,C,k,N,ne,re,m){let E=M,D=N;for(let _=N,Z=N+ne*k;_<Z;_+=k){D=_+k,D===Z&&(D=N);const le=C[_],W=C[_+1],O=C[D],r=C[D+1];(W<m&&r>=m||r<m&&W>=m)&&le+(m-W)/(r-W)*(O-le)<re&&(E=!E)}return E}var ue=p(42187),oe=p(82760),de=p(79371),ie=p(27939);const ce="feature-store:unsupported-query",ye={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},be_spatialRelationship={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},be_queryGeometry={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},be_layerGeometry={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};function Re(M){return!0===be_spatialRelationship[M]}function Ve(M){return!0===be_queryGeometry[(0,z.Ji)(M)]}function pe(M){return!0===be_layerGeometry[M]}function Se(M,C,k,N,ne){if((0,z.oU)(C)&&"esriGeometryPoint"===k&&("esriSpatialRelIntersects"===M||"esriSpatialRelContains"===M)){const re=(0,ue.Uy)(new oe.Z,C,!1,!1);return Promise.resolve(m=>function(M,C,k,N){return j(M,C,k,N.coords[0],N.coords[1])}(re,!1,!1,m))}if((0,z.oU)(C)&&"esriGeometryMultipoint"===k){const re=(0,ue.Uy)(new oe.Z,C,!1,!1);if("esriSpatialRelContains"===M)return Promise.resolve(m=>function(M,C,k,N,ne,re){const m=L(ne,re),{coords:E,lengths:D}=N;if(!D)return!1;for(let _=0,Z=0;_<D.length;_++,Z+=m)if(!j(M,C,k,E[Z],E[Z+1]))return!1;return!0}(re,!1,!1,m,N,ne))}if((0,z.YX)(C)&&"esriGeometryPoint"===k&&("esriSpatialRelIntersects"===M||"esriSpatialRelContains"===M))return Promise.resolve(re=>(0,q.aV)(C,(0,ie.Op)(k,N,ne,re)));if((0,z.YX)(C)&&"esriGeometryMultipoint"===k&&"esriSpatialRelContains"===M)return Promise.resolve(re=>(0,q.lQ)(C,(0,ie.Op)(k,N,ne,re)));if((0,z.YX)(C)&&"esriSpatialRelIntersects"===M){const re=function(M){return"mesh"===M?te.h_:(0,te.IY)(M)}(k);return Promise.resolve(m=>re(C,(0,ie.Op)(k,N,ne,m)))}return Promise.all([p.e(6571),p.e(8592),p.e(5571)]).then(p.bind(p,25571)).then(re=>{const m=re[ye[M]].bind(null,C.spatialReference,C);return E=>m((0,ie.Op)(k,N,ne,E))})}function Ie(M,C,k){return xe.apply(this,arguments)}function xe(){return(xe=(0,b.Z)(function*(M,C,k){const{spatialRel:N,geometry:ne}=M;if(ne){if(!Re(N))throw new B.Z(ce,"Unsupported query spatial relationship",{query:M});if((0,H.JY)(ne.spatialReference)&&(0,H.JY)(k)){if(!Ve(ne))throw new B.Z(ce,"Unsupported query geometry type",{query:M});if(!pe(C))throw new B.Z(ce,"Unsupported layer geometry type",{query:M});if(M.outSR)return(0,de._W)(M.geometry&&M.geometry.spatialReference,M.outSR)}}})).apply(this,arguments)}function me(M){if((0,z.YX)(M))return!0;if((0,z.oU)(M)){for(const C of M.rings)if(5!==C.length||C[0][0]!==C[1][0]||C[0][0]!==C[4][0]||C[2][0]!==C[3][0]||C[0][1]!==C[3][1]||C[0][1]!==C[4][1]||C[1][1]!==C[2][1])return!1;return!0}return!1}},808:(he,ee,p)=>{function b(z,H){if(!z)return null;const L=H.featureAdapter,{startTimeField:A,endTimeField:G}=z;let j=Number.POSITIVE_INFINITY,P=Number.NEGATIVE_INFINITY;if(A&&G)H.forEach(ue=>{const oe=L.getAttribute(ue,A),de=L.getAttribute(ue,G);null==oe||isNaN(oe)||(j=Math.min(j,oe)),null==de||isNaN(de)||(P=Math.max(P,de))});else{const ue=A||G;H.forEach(oe=>{const de=L.getAttribute(oe,ue);null==de||isNaN(de)||(j=Math.min(j,de),P=Math.max(P,de))})}return{start:j,end:P}}function B(z,H,L){if(!H||!z)return null;const{startTimeField:A,endTimeField:G}=z;if(!A&&!G)return null;const{start:j,end:P}=H;return null===j&&null===P?null:void 0===j&&void 0===P?()=>!1:A&&G?function(z,H,L,A,G){return null!=A&&null!=G?j=>{const P=z.getAttribute(j,H),ue=z.getAttribute(j,L);return(null==P||P<=G)&&(null==ue||ue>=A)}:null!=A?j=>{const P=z.getAttribute(j,L);return null==P||P>=A}:null!=G?j=>{const P=z.getAttribute(j,H);return null==P||P<=G}:void 0}(L,A,G,j,P):function(z,H,L,A){return null!=L&&null!=A&&L===A?G=>z.getAttribute(G,H)===L:null!=L&&null!=A?G=>{const j=z.getAttribute(G,H);return j>=L&&j<=A}:null!=L?G=>z.getAttribute(G,H)>=L:null!=A?G=>z.getAttribute(G,H)<=A:void 0}(L,A||G,j,P)}p.d(ee,{R:()=>b,y:()=>B})},27939:(he,ee,p)=>{p.d(ee,{vF:()=>ue,S2:()=>N,Op:()=>Re,Up:()=>Ve,j6:()=>Ie,EG:()=>ye});var b=p(49996),B=p(74856),q=p(18502),te=p(55612),ve=p(81280),z=p(70279),H=p(31582),L=p(35169),A=p(42187),G=p(82760),j=p(79371);const P=new B.Xn({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),ue=Object.freeze({}),oe=new G.Z,de=new G.Z,ie=new G.Z,ce={esriGeometryPoint:A.fQ,esriGeometryPolyline:A.J6,esriGeometryPolygon:A.eG,esriGeometryMultipoint:A.Iv};function ye(m,E,D,_=m.hasZ,Z=m.hasM){if((0,q.Wi)(E))return null;const le=m.hasZ&&_,W=m.hasM&&Z;if(D){const O=(0,A.Nh)(ie,E,m.hasZ,m.hasM,"esriGeometryPoint",D,_,Z);return(0,A.fQ)(O,le,W)}return(0,A.fQ)(E,le,W)}function Re(m,E,D,_,Z,le,W=E,O=D){const r=E&&W,o=D&&O,l=(0,q.pC)(_)?"coords"in _?_:_.geometry:null;if((0,q.Wi)(l))return null;if(Z){let f=(0,A.zj)(de,l,E,D,m,Z,W,O);return le&&(f=(0,A.Nh)(ie,f,r,o,m,le)),ce[m](f,r,o)}if(le){const f=(0,A.Nh)(ie,l,E,D,m,le,W,O);return ce[m](f,r,o)}return(0,A.hY)(oe,l,E,D,W,O),ce[m](oe,r,o)}function Ve(m,E,D){return pe.apply(this,arguments)}function pe(){return(pe=(0,b.Z)(function*(m,E,D){const{outFields:_,orderByFields:Z,groupByFieldsForStatistics:le,outStatistics:W}=m;if(_)for(let O=0;O<_.length;O++)_[O]=_[O].trim();if(Z)for(let O=0;O<Z.length;O++)Z[O]=Z[O].trim();if(le)for(let O=0;O<le.length;O++)le[O]=le[O].trim();if(W)for(let O=0;O<W.length;O++)W[O].onStatisticField&&(W[O].onStatisticField=W[O].onStatisticField.trim());return m.geometry&&!m.outSR&&(m.outSR=m.geometry.spatialReference),Ie(m,E,D)})).apply(this,arguments)}function Ie(m,E,D){return xe.apply(this,arguments)}function xe(){return(xe=(0,b.Z)(function*(m,E,D){if(!m)return null;let{where:_}=m;if(m.where=_=_&&_.trim(),(!_||/^1 *= *1$/.test(_)||E&&E===_)&&(m.where=null),!m.geometry)return m;let Z=yield me(m);if(m.distance=0,m.units=null,"esriSpatialRelEnvelopeIntersects"===m.spatialRel){const{spatialReference:r}=m.geometry;Z=(0,ve.aO)(Z),Z.spatialReference=r}m.geometry=Z,yield(0,j._W)(Z.spatialReference,D);const le=(yield(0,H.aX)((0,z.im)(Z)))[0];if((0,q.Wi)(le))throw ue;const W=le.toJSON(),O=yield(0,j.iV)(W,W.spatialReference,D);if(!O)throw ue;return O.spatialReference=D,m.geometry=O,m})).apply(this,arguments)}function me(m){return M.apply(this,arguments)}function M(){return(M=(0,b.Z)(function*(m){const{geometry:E,distance:D,units:_}=m;if(null==D||"vertexAttributes"in E)return E;const Z=E.spatialReference,le=_?P.fromJSON(_):(0,te.qE)(Z),W=Z&&((0,L.sT)(Z)||(0,L.sS)(Z))?E:yield(0,j._W)(Z,L.Zn).then(()=>(0,j.iV)(E,L.Zn));return(yield C())(W.spatialReference,W,D,le)})).apply(this,arguments)}function C(){return k.apply(this,arguments)}function k(){return(k=(0,b.Z)(function*(){return(yield Promise.all([p.e(6571),p.e(8592),p.e(5571)]).then(p.bind(p,25571))).geodesicBuffer})).apply(this,arguments)}function N(m){return m&&ne in m?JSON.parse(JSON.stringify(m,re)):m}const ne="_geVersion",re=(m,E)=>m!==ne?E:void 0},33693:(he,ee,p)=>{p.d(ee,{Z:()=>ce});var b=p(79076),B=p(74856),q=p(94911),H=(p(45072),p(30627),p(55865),p(96410)),L=p(41147),A=p(23038),G=p(66760);const j=new B.Xn({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});let P=class extends L.wq{constructor(){super(...arguments),this.baseSymbol=null,this.colorRamp=null,this.type=null}};(0,b._)([(0,q.Cb)({type:G.Z,json:{write:!0}})],P.prototype,"baseSymbol",void 0),(0,b._)([(0,q.Cb)({types:A.V,json:{read:{reader:A.i},write:!0}})],P.prototype,"colorRamp",void 0),(0,b._)([(0,q.Cb)({json:{read:j.read,write:j.write}})],P.prototype,"type",void 0),P=(0,b._)([(0,H.j)("esri.rest.support.ClassificationDefinition")],P);const ue=P,oe=new B.Xn({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),de=new B.Xn({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let ie=class extends ue{constructor(){super(...arguments),this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null,this.type="class-breaks-definition"}set standardDeviationInterval(ye){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",ye)}set definedInterval(ye){"defined-interval"===this.classificationMethod&&this._set("definedInterval",ye)}};(0,b._)([(0,q.Cb)({json:{write:!0}})],ie.prototype,"breakCount",void 0),(0,b._)([(0,q.Cb)({json:{write:!0}})],ie.prototype,"classificationField",void 0),(0,b._)([(0,q.Cb)({type:String,json:{read:oe.read,write:oe.write}})],ie.prototype,"classificationMethod",void 0),(0,b._)([(0,q.Cb)({json:{write:!0}})],ie.prototype,"normalizationField",void 0),(0,b._)([(0,q.Cb)({json:{read:de.read,write:de.write}})],ie.prototype,"normalizationType",void 0),(0,b._)([(0,q.Cb)({value:null,json:{write:!0}})],ie.prototype,"standardDeviationInterval",null),(0,b._)([(0,q.Cb)({value:null,json:{write:!0}})],ie.prototype,"definedInterval",null),(0,b._)([(0,q.Cb)()],ie.prototype,"type",void 0),ie=(0,b._)([(0,H.j)("esri.rest.support.ClassBreaksDefinition")],ie);const ce=ie},76281:(he,ee,p)=>{p.d(ee,{G2:()=>m,oF:()=>Z,XL:()=>Ie,i5:()=>Se,H0:()=>ge,eT:()=>N,Qm:()=>ne,Lq:()=>xe,fk:()=>re,S5:()=>pe,F_:()=>k,DL:()=>_});var b=p(33693);function B(r,o){return Number(r.toFixed(o))}function ve(r){const o=r.definition,{classificationMethod:l,breakCount:f,normalizationType:g,definedInterval:I}=o,v=[];let S=r.values;if(0===S.length)return[];S=S.sort((h,t)=>h-t);const T=S[0],R=S[S.length-1];if("equal-interval"===l)if(S.length>=f){const h=(R-T)/f;let t=T;for(let i=1;i<f;i++){const e=B(T+i*h,6);v.push({minValue:t,maxValue:e,label:z(t,e,g)}),t=e}v.push({minValue:t,maxValue:R,label:z(t,R,g)})}else S.forEach(h=>{v.push({minValue:h,maxValue:h,label:z(h,h,g)})});else if("natural-breaks"===l){const h=H(S),t=r.valueFrequency||h.valueFrequency,i=function(r,o,l){const f=r.length,g=[];l>f&&(l=f);for(let v=0;v<l;v++)g.push(Math.round(v*f/l-1));g.push(f-1);let I=A(g,r,o,l);return function(r,o,l,f,g,I){let v=0,S=0,T=0,R=0,h=!0;for(let t=0;t<2&&h;t++){0===t&&(h=!1);for(let i=0;i<I-1;i++)for(;l[i+1]+1!==l[i+2];){l[i+1]=l[i+1]+1;const e=oe(i,l,f,g);T=e.sbMean,v=e.sbSdcm;const s=oe(i+1,l,f,g);if(R=s.sbMean,S=s.sbSdcm,!(v+S<o[i]+o[i+1])){l[i+1]=l[i+1]-1;break}o[i]=v,o[i+1]=S,r[i]=T,r[i+1]=R,h=!0}for(let i=I-1;i>0;i--)for(;l[i]!==l[i-1]+1;){l[i]=l[i]-1;const e=oe(i-1,l,f,g);T=e.sbMean,v=e.sbSdcm;const s=oe(i,l,f,g);if(R=s.sbMean,S=s.sbSdcm,!(v+S<o[i-1]+o[i])){l[i]=l[i]+1;break}o[i-1]=v,o[i]=S,r[i-1]=T,r[i]=R,h=!0}}return h}(I.mean,I.sdcm,g,r,o,l)&&(I=A(g,r,o,l)),g}(h.uniqueValues,t,f);let e=T;for(let s=1;s<f;s++)if(h.uniqueValues.length>s){const n=B(h.uniqueValues[i[s]],6);v.push({minValue:e,maxValue:n,label:z(e,n,g)}),e=n}v.push({minValue:e,maxValue:R,label:z(e,R,g)})}else if("quantile"===l)if(S.length>=f&&T!==R){let h=T,t=Math.ceil(S.length/f),i=0;for(let e=1;e<f;e++){let s=t+i-1;s>S.length&&(s=S.length-1),s<0&&(s=0),v.push({minValue:h,maxValue:S[s],label:z(h,S[s],g)}),h=S[s],i+=t,t=Math.ceil((S.length-i)/(f-e))}v.push({minValue:h,maxValue:R,label:z(h,R,g)})}else{let h=-1;for(let t=0;t<S.length;t++){const i=S[t];i!==h&&(h=i,v.push({minValue:h,maxValue:i,label:z(h,i,g)}),h=i)}}else if("standard-deviation"===l){const h=function(r){let o=0;for(let l=0;l<r.length;l++)o+=r[l];return o/=r.length,o}(S),t=function(r,o){let l=0;for(let f=0;f<r.length;f++){const g=r[f];l+=(g-o)*(g-o)}return l/=r.length,Math.sqrt(l)}(S,h);if(0===t)v.push({minValue:S[0],maxValue:S[0],label:z(S[0],S[0],g)});else{const i=function(r,o,l,f,g){let I=Math.max(f-r,o-f)/g/l;return I=I>=1?1:I>=.5?.5:.25,I}(T,R,f,h,t)*t;let e=0,s=T;for(let a=f;a>=1;a--){const u=B(h-(a-.5)*i,6);v.push({minValue:s,maxValue:u,label:z(s,u,g)}),s=u,e++}let n=B(h+.5*i,6);v.push({minValue:s,maxValue:n,label:z(s,n,g)}),s=n,e++;for(let a=1;a<=f;a++)n=e===2*f?R:B(h+(a+.5)*i,6),v.push({minValue:s,maxValue:n,label:z(s,n,g)}),s=n,e++}}else if("defined-interval"===l){if(!I)return v;const h=S[0],t=S[S.length-1],i=Math.ceil((t-h)/I);let e=h;for(let s=1;s<i;s++){const n=B(h+s*I,6);v.push({minValue:e,maxValue:n,label:z(e,n,g)}),e=n}v.push({minValue:e,maxValue:t,label:z(e,t,g)})}return v}function z(r,o,l){let f=null;return f=r===o?l&&"percent-of-total"===l?r+"%":r.toString():l&&"percent-of-total"===l?r+"% - "+o+"%":r+" - "+o,f}function H(r){const o=[],l=[];let f=Number.MIN_VALUE,g=1,I=-1;for(let v=0;v<r.length;v++){const S=r[v];S===f?(g++,l[I]=g):null!==S&&(o.push(S),f=S,g=1,l.push(g),I++)}return{uniqueValues:o,valueFrequency:l}}function A(r,o,l,f){let g=[],I=[],v=[],S=0;const T=[],R=[];for(let e=0;e<f;e++){const s=oe(e,r,o,l);T.push(s.sbMean),R.push(s.sbSdcm),S+=R[e]}let h,t=S,i=!0;for(;i||S<t;){i=!1,g=[];for(let e=0;e<f;e++)g.push(r[e]);for(let e=0;e<f;e++)for(let s=r[e]+1;s<=r[e+1];s++)if(h=o[s],e>0&&s!==r[e+1]&&Math.abs(h-T[e])>Math.abs(h-T[e-1]))r[e]=s;else if(e<f-1&&r[e]!==s-1&&Math.abs(h-T[e])>Math.abs(h-T[e+1])){r[e+1]=s-1;break}t=S,S=0,I=[],v=[];for(let e=0;e<f;e++){I.push(T[e]),v.push(R[e]);const s=oe(e,r,o,l);T[e]=s.sbMean,R[e]=s.sbSdcm,S+=R[e]}}if(S>t){for(let e=0;e<f;e++)r[e]=g[e],T[e]=I[e],R[e]=v[e];S=t}return{mean:T,sdcm:R}}function oe(r,o,l,f){let g=0,I=0;for(let T=o[r]+1;T<=o[r+1];T++){const R=f[T];g+=l[T]*R,I+=R}I<=0&&console.log("Exception in Natural Breaks calculation");const v=g/I;let S=0;for(let T=o[r]+1;T<=o[r+1];T++)S+=f[T]*De(l[T]-v,2);return{sbMean:v,sbSdcm:S}}const de="equal-interval",be=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,Re=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),Ve=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function pe(r){const o=null!=r.normalizationField||null!=r.normalizationType,l=null!=r.minValue||null!=r.maxValue,f=!!r.sqlExpression&&r.supportsSQLExpression;return!o&&!l&&!f}function ge(r){const o=r.returnDistinct?[...new Set(r.values)]:r.values,l=o.filter(g=>null!=g).length,f={count:l};return r.supportsNullCount&&(f.nullcount=o.length-l),r.percentileParams&&(f.median=Ie(o,r.percentileParams)),f}function Se(r){const{values:o,useSampleStdDev:l,supportsNullCount:f}=r;let g=Number.POSITIVE_INFINITY,I=Number.NEGATIVE_INFINITY,v=null,S=null,T=null,R=null,h=0;const t=null==r.minValue?-1/0:r.minValue,i=null==r.maxValue?1/0:r.maxValue;for(const s of o)Number.isFinite(s)?s>=t&&s<=i&&(v+=s,g=Math.min(g,s),I=Math.max(I,s),h++):"string"==typeof s&&h++;if(h&&null!=v){S=v/h;let s=0;for(const n of o)Number.isFinite(n)&&n>=t&&n<=i&&(s+=De(n-S,2));R=l?h>1?s/(h-1):0:h>0?s/h:0,T=Math.sqrt(R)}else g=null,I=null;const e={avg:S,count:h,max:I,min:g,stddev:T,sum:v,variance:R};return f&&(e.nullcount=o.length-h),r.percentileParams&&(e.median=Ie(o,r.percentileParams)),e}function Ie(r,o){const{fieldType:l,value:f,orderBy:g,isDiscrete:I}=o,v=xe(l,"desc"===g);if(0===(r=[...r].filter(e=>null!=e).sort((e,s)=>v(e,s))).length)return null;if(f<=0)return r[0];if(f>=1)return r[r.length-1];const S=(r.length-1)*f,T=Math.floor(S),R=T+1,h=S%1,t=r[T],i=r[R];return R>=r.length||I||"string"==typeof t||"string"==typeof i?t:t*(1-h)+i*h}function xe(r,o){const l=o?1:-1,f=function(r){return r?(o,l)=>l-o:(o,l)=>o-l}(o),g=me(o);if(!r||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...Re].includes(r))return(I,v)=>"number"==typeof I&&"number"==typeof v?f(I,v):"string"==typeof I&&"string"==typeof v?g(I,v):l;if("esriFieldTypeDate"===r)return(I,v)=>{const S=new Date(I).getTime(),T=new Date(v).getTime();return isNaN(S)||isNaN(T)?l:f(S,T)};if(Re.has(r))return(I,v)=>f(I,v);if("esriFieldTypeString"===r)return(I,v)=>g(I,v);if("esriFieldTypeGUID"===r||"esriFieldTypeGlobalID"===r){const I=me(o);return(v,S)=>I(C(v),C(S))}return o?(I,v)=>1:(I,v)=>-1}function me(r){return r?(o,l)=>(o=o.toUpperCase())>(l=l.toUpperCase())?-1:o<l?1:0:(o,l)=>(o=o.toUpperCase())<(l=l.toUpperCase())?-1:o>l?1:0}function C(r){return r.substr(24,12)+r.substr(19,4)+r.substr(16,2)+r.substr(14,2)+r.substr(11,2)+r.substr(9,2)+r.substr(6,2)+r.substr(4,2)+r.substr(2,2)+r.substr(0,2)}function k(r,o){let l;for(l in r)Ve.indexOf(l)>-1&&(Number.isFinite(r[l])||(r[l]=null));return o&&["avg","stddev","variance"].forEach(f=>{null!=r[f]&&(r[f]=Math.ceil(r[f]))}),r}function N(r){const o={};for(let l of r)(null==l||"string"==typeof l&&""===l.trim())&&(l=null),null==o[l]?o[l]={count:1,data:l}:o[l].count++;return{count:o}}function ne(r,o,l){const f=r.count,g=[];l&&o&&"coded-value"===o.type&&o.codedValues.forEach(I=>{const v=I.code;f.hasOwnProperty(v)||(f[v]={data:v,count:0})});for(const I in f){const v=f[I];g.push({value:v.data,count:v.count,label:v.label})}return{uniqueValueInfos:g}}function re(r,o,l,f){let g=null;switch(o){case"log":0!==r&&(g=Math.log(r)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(f)&&0!==f&&(g=r/f*100);break;case"field":Number.isFinite(l)&&0!==l&&(g=r/l);break;case"natural-log":r>0&&(g=Math.log(r));break;case"square-root":r>0&&(g=De(r,.5))}return g}function m(r,o){const l=function(r){const o=r.field,l=r.classificationMethod||de,f=r.normalizationType,g=r.normalizationField,I=new b.Z;return I.classificationField=o,I.breakCount=r.breakCount,I.classificationMethod=l,I.standardDeviationInterval="standard-deviation"===l?r.standardDeviationInterval||1:void 0,I.normalizationType=f,I.normalizationField="field"===f?g:void 0,I}({field:o.field,normalizationType:o.normalizationType,normalizationField:o.normalizationField,classificationMethod:o.classificationMethod,standardDeviationInterval:o.standardDeviationInterval,breakCount:o.numClasses||5});return r=function(r,o,l){return o=null==o?-1/0:o,l=null==l?1/0:l,r.filter(f=>Number.isFinite(f)&&f>=o&&f<=l)}(r,o.minValue,o.maxValue),function(r){const{normalizationTotal:o}=r;return{classBreaks:ve(r),normalizationTotal:o}}({definition:l,values:r,normalizationTotal:o.normalizationTotal})}function _(r,o){let l=r.classBreaks;const f=l.length,g=l[0].minValue,I=l[f-1].maxValue,v="standard-deviation"===o,S=be;return l=l.map(T=>{const R=T.label,h={minValue:T.minValue,maxValue:T.maxValue,label:R};if(v&&R){const t=R.match(S).map(i=>+i.trim());2===t.length?(h.minStdDev=t[0],h.maxStdDev=t[1],t[0]<0&&t[1]>0&&(h.hasAvg=!0)):1===t.length&&(R.includes("<")?(h.minStdDev=null,h.maxStdDev=t[0]):R.includes(">")&&(h.minStdDev=t[0],h.maxStdDev=null))}return h}),{minValue:g,maxValue:I,classBreakInfos:l,normalizationTotal:r.normalizationTotal}}function Z(r,o){const{min:l,max:f,intervals:g}=function(r,o){const{field:l,classificationMethod:f,standardDeviationInterval:g,normalizationType:I,normalizationField:v,normalizationTotal:S,minValue:T,maxValue:R}=o,h=o.numBins||10;let t=null,i=null,e=null;if(f&&"equal-interval"!==f||I){const{classBreaks:s}=m(r,{field:l,normalizationType:I,normalizationField:v,normalizationTotal:S,classificationMethod:f,standardDeviationInterval:g,minValue:T,maxValue:R,numClasses:h});t=s[0].minValue,i=s[s.length-1].maxValue,e=s.map(n=>[n.minValue,n.maxValue])}else{if(null!=T&&null!=R)t=T,i=R;else{const s=Se({values:r,minValue:T,maxValue:R,useSampleStdDev:!I,supportsNullCount:pe({normalizationType:I,normalizationField:v,minValue:T,maxValue:R})});t=s.min,i=s.max}e=function(r,o,l){const f=(o-r)/l,g=[];let I,v=r;for(let S=1;S<=l;S++)I=v+f,I=Number(I.toFixed(16)),g.push([v,S===l?o:I]),v=I;return g}(t,i,h)}return{min:t,max:i,intervals:e}}(r,o),I=g.map((v,S)=>({minValue:g[S][0],maxValue:g[S][1],count:0}));for(const v of r)if(null!=v&&v>=l&&v<=f){const S=W(g,v);S>-1&&I[S].count++}return{bins:I,minValue:l,maxValue:f,normalizationTotal:o.normalizationTotal}}function W(r,o){let l=-1;for(let f=r.length-1;f>=0;f--)if(o>=r[f][0]){l=f;break}return l}}}]);
//# sourceMappingURL=4740.bec9aede283c3cbc8cb2.js.map