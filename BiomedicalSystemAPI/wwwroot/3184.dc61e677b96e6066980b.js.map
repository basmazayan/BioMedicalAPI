{"version":3,"mappings":"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","names":["constructor","this","allSublayers","Map","allPoints","allPolylines","allPolygons","allMapImages","j","I","k","super","arguments","_handles","a","_bitmapIndex","_mapImageContainer","S","_kmlVisualData","C","allVisiblePoints","f","allVisiblePolylines","allVisiblePolygons","allVisibleMapImages","s","hitTest","e","i","t","Promise","all","_pointsView","_polylinesView","_polygonsView","flat","filter","layer","sourceLayer","update","processUpdate","attach","add","on","added","forEach","_addMapImage","removed","_removeMapImage","container","addChild","P","view","graphics","requestUpdateCallback","requestUpdate","x","featuresTilingScheme","watch","visibility","get","id","_refreshCollections","_fetchingPromise","_fetchService","then","notifyChange","detach","removeAll","removeAllChildren","clear","destroy","moveStart","viewChange","moveEnd","isUpdating","updating","spatialReference","isWGS84","isWebMercator","href","responseType","data","m","extent","w","g","v","xmin","y","ymax","resolution","width","naturalWidth","rotation","set","_getViewDependentUrl","viewFormat","viewBoundScale","httpQuery","h","o","l","Error","p","c","expand","d","u","xmax","_","ymin","V","size","pixelRatio","Math","max","height","toString","center","replace","r","b","query","path","n","_loadVisualData","url","addMany","_isSublayerVisible","sublayerId","map","item","parentFolderId","_fetchParsedKML","sublayers","points","polylines","polygons","mapImages","push","networkLink","state","refreshInterval","removeChild","delete","prototype","M"],"sources":["./node_modules/@arcgis/core/views/2d/layers/KMLLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{version as i}from\"../../../kernel.js\";import t from\"../../../request.js\";import s from\"../../../core/Collection.js\";import a from\"../../../core/Handles.js\";import{isSome as o,isNone as l}from\"../../../core/maybe.js\";import{queryToObject as r,objectToQuery as n}from\"../../../core/urlUtils.js\";import{property as h}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../../core/accessorSupport/decorators/subclass.js\";import m from\"../../../geometry/Extent.js\";import{load as c,project as d}from\"../../../geometry/projection.js\";import y from\"../../../geometry/SpatialReference.js\";import{canProject as w,project as g}from\"../../../geometry/support/webMercatorUtils.js\";import{getGraphics as u,fetchService as _,parseKML as V}from\"../../../layers/support/kmlUtils.js\";import{parseUrl as b}from\"../../../rest/utils.js\";import{GraphicsCollection as f}from\"../../../support/GraphicsCollection.js\";import{Bitmap as v}from\"../engine/Bitmap.js\";import{BitmapContainer as S}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as I}from\"./LayerView2D.js\";import x from\"./graphics/GraphicContainer.js\";import P from\"./graphics/GraphicsView2D.js\";import k from\"../../layers/LayerView.js\";class C{constructor(){this.allSublayers=new Map,this.allPoints=[],this.allPolylines=[],this.allPolygons=[],this.allMapImages=[]}}let j=class extends(I(k)){constructor(){super(...arguments),this._handles=new a,this._bitmapIndex=new Map,this._mapImageContainer=new S,this._kmlVisualData=new C,this.allVisiblePoints=new f,this.allVisiblePolylines=new f,this.allVisiblePolygons=new f,this.allVisibleMapImages=new s}async hitTest(e,i){var t,s,a;return(await Promise.all([null==(t=this._pointsView)?void 0:t.hitTest(e),null==(s=this._polylinesView)?void 0:s.hitTest(e),null==(a=this._polygonsView)?void 0:a.hitTest(e)])).flat().filter((e=>!!e&&(e.layer=this.layer,e.sourceLayer=this.layer,!0)))}update(e){this._polygonsView&&this._polygonsView.processUpdate(e),this._polylinesView&&this._polylinesView.processUpdate(e),this._pointsView&&this._pointsView.processUpdate(e)}attach(){this._handles.add([this.allVisibleMapImages.on(\"change\",(e=>{e.added.forEach((e=>this._addMapImage(e))),e.removed.forEach((e=>this._removeMapImage(e)))}))]),this.container.addChild(this._mapImageContainer),this._polygonsView=new P({view:this.view,graphics:this.allVisiblePolygons,requestUpdateCallback:()=>this.requestUpdate(),container:new x(this.view.featuresTilingScheme)}),this.container.addChild(this._polygonsView.container),this._polylinesView=new P({view:this.view,graphics:this.allVisiblePolylines,requestUpdateCallback:()=>this.requestUpdate(),container:new x(this.view.featuresTilingScheme)}),this.container.addChild(this._polylinesView.container),this._pointsView=new P({view:this.view,graphics:this.allVisiblePoints,requestUpdateCallback:()=>this.requestUpdate(),container:new x(this.view.featuresTilingScheme)}),this.container.addChild(this._pointsView.container),this.watch(\"layer.visibleSublayers\",(e=>{for(const[i,t]of this._kmlVisualData.allSublayers)t.visibility=0;for(const i of e){const e=this._kmlVisualData.allSublayers.get(i.id);e&&(e.visibility=1)}this._refreshCollections()})),this._fetchingPromise=this._fetchService().then((()=>{this._fetchingPromise=null,this.notifyChange(\"updating\")}))}detach(){this._handles.removeAll(),this._mapImageContainer.removeAllChildren(),this.container.removeAllChildren(),this._bitmapIndex.clear(),this._polygonsView&&(this._polygonsView.destroy(),this._polygonsView=null),this._polylinesView&&(this._polylinesView.destroy(),this._polylinesView=null),this._pointsView&&(this._pointsView.destroy(),this._pointsView=null)}moveStart(){}viewChange(){this._polygonsView.viewChange(),this._polylinesView.viewChange(),this._pointsView.viewChange()}moveEnd(){}isUpdating(){return null!=this._fetchingPromise||this._pointsView.updating||this._polygonsView.updating||this._polylinesView.updating}_addMapImage(e){(this.view.spatialReference.isWGS84||this.view.spatialReference.isWebMercator)&&t(e.href,{responseType:\"image\"}).then((({data:i})=>{let t=m.fromJSON(e.extent);w(t,this.view.spatialReference)&&(t=g(t,this.view.spatialReference));const s=new v(i,\"standard\");s.x=t.xmin,s.y=t.ymax,s.resolution=t.width/i.naturalWidth,s.rotation=e.rotation,this._mapImageContainer.addChild(s),this._bitmapIndex.set(e,s)}))}async _getViewDependentUrl(e,t){const{viewFormat:s,viewBoundScale:a,httpQuery:h}=e;if(o(s)){if(l(t))throw new Error(\"Loading this network link requires a view state.\");let p;if(await c(),o(a)&&1!==a){const e=new m(t.extent);e.expand(a),p=e}else p=t.extent;p=d(p,y.WGS84);const w=d(p,y.WebMercator),g=p.xmin,u=p.xmax,_=p.ymin,V=p.ymax,f=t.size[0]*t.pixelRatio,v=t.size[1]*t.pixelRatio,S=Math.max(w.width,w.height),I={\"[bboxWest]\":g.toString(),\"[bboxEast]\":u.toString(),\"[bboxSouth]\":_.toString(),\"[bboxNorth]\":V.toString(),\"[lookatLon]\":p.center.x.toString(),\"[lookatLat]\":p.center.y.toString(),\"[lookatRange]\":S.toString(),\"[lookatTilt]\":\"0\",\"[lookatHeading]\":t.rotation.toString(),\"[lookatTerrainLon]\":p.center.x.toString(),\"[lookatTerrainLat]\":p.center.y.toString(),\"[lookatTerrainAlt]\":\"0\",\"[cameraLon]\":p.center.x.toString(),\"[cameraLat]\":p.center.y.toString(),\"[cameraAlt]\":S.toString(),\"[horizFov]\":\"60\",\"[vertFov]\":\"60\",\"[horizPixels]\":f.toString(),\"[vertPixels]\":v.toString(),\"[terrainEnabled]\":\"0\",\"[clientVersion]\":i,\"[kmlVersion]\":\"2.2\",\"[clientName]\":\"ArcGIS API for JavaScript\",\"[language]\":\"en-US\"},x=e=>{for(const i in e)for(const t in I)e[i]=e[i].replace(t,I[t])},P=r(s);x(P);let k={};o(h)&&(k=r(h),x(k));const C=b(e.href);C.query={...C.query,...P,...k};return`${C.path}?${n(P)}`}return e.href}async _fetchService(){const e=new C;await this._loadVisualData(this.layer.url,e),this._kmlVisualData=e,this._refreshCollections()}_refreshCollections(){this.allVisiblePoints.removeAll(),this.allVisiblePolylines.removeAll(),this.allVisiblePolygons.removeAll(),this.allVisibleMapImages.removeAll(),this.allVisiblePoints.addMany(this._kmlVisualData.allPoints.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisiblePolylines.addMany(this._kmlVisualData.allPolylines.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisiblePolygons.addMany(this._kmlVisualData.allPolygons.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisibleMapImages.addMany(this._kmlVisualData.allMapImages.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e)))}_isSublayerVisible(e){const i=this._kmlVisualData.allSublayers.get(e);return!!i.visibility&&(-1===i.parentFolderId||this._isSublayerVisible(i.parentFolderId))}_loadVisualData(e,i){return this._fetchParsedKML(e).then((async e=>{for(const t of e.sublayers){i.allSublayers.set(t.id,t);const e=t.points?await u(t.points):[],s=t.polylines?await u(t.polylines):[],a=t.polygons?await u(t.polygons):[],o=t.mapImages||[];if(i.allPoints.push(...e.map((e=>({item:e,sublayerId:t.id})))),i.allPolylines.push(...s.map((e=>({item:e,sublayerId:t.id})))),i.allPolygons.push(...a.map((e=>({item:e,sublayerId:t.id})))),i.allMapImages.push(...o.map((e=>({item:e,sublayerId:t.id})))),t.networkLink){const e=await this._getViewDependentUrl(t.networkLink,this.view.state);await this._loadVisualData(e,i)}}}))}_fetchParsedKML(e){return _(e,this.view.spatialReference,this.layer.refreshInterval).then((e=>V(e.data)))}_removeMapImage(e){const i=this._bitmapIndex.get(e);i&&(this._mapImageContainer.removeChild(i),this._bitmapIndex.delete(e))}};e([h()],j.prototype,\"_pointsView\",void 0),e([h()],j.prototype,\"_polylinesView\",void 0),e([h()],j.prototype,\"_polygonsView\",void 0),e([h()],j.prototype,\"_fetchingPromise\",void 0),e([h()],j.prototype,\"updating\",void 0),j=e([p(\"esri.views.2d.layers.KMLLayerView2D\")],j);const M=j;export{M as default};\n"],"sourceRoot":"webpack:///","file":"3184.dc61e677b96e6066980b.js"}