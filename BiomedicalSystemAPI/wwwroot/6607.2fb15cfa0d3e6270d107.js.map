{"version":3,"mappings":"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","names":["originPosition","a","scale","d","Y","g","L","E","Q","K","D","ne","f","l","ee","ge","$","ce","b","maxSize","B","p","_","c","Z","F","h","constructor","super","getEffectivePopupTemplate","getObjectId","clone","objectId","type","read","e","this","x","transitionStep","end","_transitionTo","value","Promise","default","normalizeCtorArgs","Fe","concurrency","destroy","push","r","s","_mergeEdits","addedFeatures","addOrModified","removed","readOnly","t","_startupResolver","isReady","initialize","_controller","AbortController","addResolvingPromise","_startWorker","signal","abort","_connection","close","client","tileRenderer","closed","startup","o","when","i","Array","isArray","source","transferList","n","service","config","tileInfo","toJSON","tiles","invoke","resolve","_set","updateTiles","promise","update","applyUpdate","setHighlight","refresh","querySummaryStatistics","query","params","queryUniqueValues","queryClassBreaks","queryHistogram","queryFeatures","queryVisibleFeatures","queryObjectIds","queryFeatureCount","queryExtent","queryLatestObservations","queryStatistics","getDisplayId","getFeatures","getAggregates","getAggregateValueRanges","mapValidDisplayIds","onEdits","enableEvent","name","strategy","prototype","u","clear","tileKeys","spans","level","row","H","ye","m","R","X","hasMissingTiles","_getOrAcquireTile","_getTile","_releaseTile","_addPlaceholders","Math","_addPlaceholderChildren","_addPlaceholderChild","_addPlaceholderParent","P","O","_updatingRequiredFieldsPromise","filter","timeExtent","layer","requiredFields","view","_handleRequiredFieldsChange","fieldsIndex","outFields","y","replacement","version","featureEffect","_override","_clearOverride","error","highlight","Error","createQuery","returnGeometry","outSpatialReference","spatialReference","j","where","intersection","fetchPopupFeatures","validateFetchPopupFeatures","fetchClientPopupFeatures","_loadArcadeModules","get","content","some","_updateRequiredFields","then","objectIdField","renderer","orderBy","featureReduction","Set","collectRequiredFields","w","timeInfo","startField","endField","floorInfo","floorField","v","subtypeField","sublayers","map","all","displayField","from","sort","clientGraphics","popupEnabled","q","isAggregate","popupTemplate","length","Map","createPopupQuery","arcadeUtils","hasGeometryOperations","set","size","Boolean","objectIds","keys","features","geometryType","I","add","returnZ","returnM","canResume","isEmpty","Number","M","A","k","U","arguments","_pipelineIsUpdating","_commandsQueue","process","_doEdit","_doRefresh","dataChanged","_doUpdate","_visibilityOverrides","_highlightIds","_lastPixelBuffer","_updateHighlight","_proxy","_uploadsLocked","_needsClusterSizeUpdate","featureEffectView","_lastDefinitionExpression","_updateClusterSizeTask","remove","_initProxy","_initServiceOptions","handles","on","valueRanges","initial","sync","isTable","_createClientOptions","V","_createServiceOptions","_serviceOptions","orderByFields","items","suspended","labelingInfo","labelsVisible","availableFields","floors","definitionExpression","gdbVersion","historicMoment","getTime","JSON","stringify","customParameters","apiKey","geometryDefinition","clips","reduce","visible","sublayerHash","filterHash","effectHash","streamFilter","clipsHash","event","z","geometry","has","toArray","_addHighlight","_removeHighlight","hasHighlight","hitTest","aggregates","_createHittestResult","queryAggregates","fe","_cleanUpQuery","queryFeaturesJSON","forEach","_setLayersForFeature","count","extent","setVisibility","delete","_update","_tileStrategy","added","requestUpdate","notifyChange","attach","timeline","record","title","N","acquireTile","_acquireTile","releaseTile","tileInfoView","featuresTilingScheme","buffer","_edit","detach","container","removeAllChildren","uninstall","_tileRendererHash","moveStart","viewChange","moveEnd","isUpdating","updating","console","log","setUpdating","emitEvent","emit","_detectQueryMode","editingInfo","lastEditDate","refreshInterval","capabilities","supportsPagination","operations","supportsEditing","mode","featureCount","fullExtent","width","height","warn","fields","globalIdField","getFeatureDefinition","openPorts","parsedUrl","dynamicDataSource","datesInUnknownTimezone","valueExpression","field","timeReferenceUnknownClient","maxRecordCount","tileMaxRecordCount","_createMemoryServiceOptions","_validateEdit","edits","doRefresh","deletedFeatures","includes","destroyed","_hasRequiredSupport","_getEffectiveRenderer","_createSchemaConfig","C","resourceManager","_createConfiguration","max","schema","pixelBuffer","_createTileRendererHash","_initTileRenderer","onConfigUpdate","_onceTilesUpdated","mesh","targets","aggregate","_lockGPUUploads","_unlockGPUUploads","_updateClusterSizeVariable","_forceAttributeTextureUpload","invalidateLabels","_effectiveRenderer","_createUpdateClusterSizeTask","watch","_updateClusterEffectiveRendererSizeVariable","dynamicClusterSize","visualVariables","indexOf","T","_aggregateValueRanges","aggregateFields","once","layerView","install","hasFilter","_injectOverrides","_addFloorFilterClause","hiddenIds","viewAllLevelIds","replace","join","RegExp","trim","S","J","devicePixelRatio","window","filters","supportsTextureFloat","maxTextureSize","lockGPUUploads","unlockGPUUploads","forceAttributeTextureUpload","token","catch","sourceLayer","marker","fill","line","text","minScale","oe","isOutline","vvFlags","ve","_createHash","reject","styleName","data","portal","url","baseUrl","origin","find","symbolName","rendererKey","maxVVSize","cim","materialHash","mosaicHash","dashTemplate","path","fontName","getRequiredFields","lastEditInfoEnabled","typeIdField","relationships","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate","se"],"sources":["./node_modules/@arcgis/core/core/devEnvironmentUtils.js","./node_modules/@arcgis/core/geometry/support/quantizationUtils.js","./node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","./node_modules/@arcgis/core/views/2d/engine/webgl/visualVariablesUtils.js","./node_modules/@arcgis/core/AggregateGraphic.js","./node_modules/@arcgis/core/layers/effects/FeatureEffectView.js","./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers.js","./node_modules/@arcgis/core/views/2d/layers/support/FeatureCommandQueue.js","./node_modules/@arcgis/core/views/2d/layers/support/FeatureLayerProxy.js","./node_modules/@arcgis/core/views/2d/tiling/TileManager.js","./node_modules/@arcgis/core/views/layers/FeatureLayerView.js","./node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js","./node_modules/@arcgis/core/symbols/cim/ExpandedCIM.js","./node_modules/@arcgis/core/views/2d/layers/support/webStyleUtils.js","./node_modules/@arcgis/core/views/2d/layers/support/cimSymbolUtils.js","./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js","./node_modules/@arcgis/core/views/layers/support/popupUtils.js","./node_modules/@arcgis/core/views/support/drapedUtils.js","./node_modules/@arcgis/core/views/support/floorFilterUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction c(c){return c=c||globalThis.location.hostname,n.some((a=>{var o;return null!=(null==(o=c)?void 0:o.match(a))}))}function a(c,a){return c&&(a=a||globalThis.location.hostname)?null!=a.match(t)||null!=a.match(r)?c.replace(\"static.arcgis.com\",\"staticdev.arcgis.com\"):null!=a.match(l)||null!=a.match(s)?c.replace(\"static.arcgis.com\",\"staticqa.arcgis.com\"):c:c}function o(c){c=c||globalThis.location.hostname;return[/^zrh-.+?\\.esri\\.com$/].concat(n).some((a=>{var o;return null!=(null==(o=c)?void 0:o.match(a))}))}const t=/^devext.arcgis.com$/,l=/^qaext.arcgis.com$/,r=/^[\\w-]*\\.mapsdevext.arcgis.com$/,s=/^[\\w-]*\\.mapsqa.arcgis.com$/,n=[/^([\\w-]*\\.)?[\\w-]*\\.zrh-dev-local.esri.com$/,t,l,/^jsapps.esri.com$/,r,s];export{a as adjustStaticAGOUrl,c as isDevEnvironment,o as isTelemetryDevEnvironment};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as n,isNone as t}from\"../../core/maybe.js\";import{isPoint as e,isPolyline as r,isPolygon as u,isMultipoint as i,isExtent as o}from\"./jsonUtils.js\";function l(n){return n&&\"upperLeft\"===n.originPosition}const a=(n,t,e)=>[t,e],m=(n,t,e)=>[t,e,n[2]],c=(n,t,e)=>[t,e,n[2],n[3]];function s(t){if(!t)return null;return{originPosition:\"upper-left\"===t.originPosition?\"upperLeft\":\"lower-left\"===t.originPosition?\"lowerLeft\":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance]:[1,1],translate:n(t.extent)?[t.extent.xmin,t.extent.ymax]:[0,0]}}function f(t,e){if(t===e||null==t&&null==e)return!0;if(null==t||null==e)return!1;let r,u,i,o,a,m;return l(t)?(r=t.translate[0],u=t.translate[1],i=t.scale[0]):(r=n(t.extent)?t.extent.xmin:0,u=n(t.extent)?t.extent.ymax:0,i=t.tolerance),l(e)?(o=e.translate[0],a=e.translate[1],m=e.scale[0]):(o=n(e.extent)?e.extent.xmin:0,a=n(e.extent)?e.extent.ymax:0,m=e.tolerance),r===o&&u===a&&i===m}function x({scale:n,translate:t},e){return Math.round((e-t[0])/n[0])}function h({scale:n,translate:t},e){return Math.round((t[1]-e)/n[1])}function I(n,t,e){const r=[];let u,i,o,l;for(let a=0;a<e.length;a++){const m=e[a];a>0?(o=x(n,m[0]),l=h(n,m[1]),o===u&&l===i||(r.push(t(m,o-u,l-i)),u=o,i=l)):(u=x(n,m[0]),i=h(n,m[1]),r.push(t(m,u,i)))}return r.length>0?r:null}function g(n,t,e){return t[0]=x(n,e[0]),t[3]=h(n,e[1]),t[2]=x(n,e[2]),t[1]=h(n,e[3]),t}function p(n,t,e,r){return I(n,e?r?c:m:r?m:a,t)}function N(n,t,e,r){const u=[],i=e?r?c:m:r?m:a;for(let o=0;o<t.length;o++){const e=I(n,i,t[o]);e&&e.length>=3&&u.push(e)}return u.length?u:null}function y(n,t,e,r){const u=[],i=e?r?c:m:r?m:a;for(let o=0;o<t.length;o++){const e=I(n,i,t[o]);e&&e.length>=2&&u.push(e)}return u.length?u:null}function z({scale:n,translate:t},e){return e*n[0]+t[0]}function T({scale:n,translate:t},e){return t[1]-e*n[1]}function M(n,t,e){const r=new Array(e.length);if(!e.length)return r;const[u,i]=n.scale;let o=z(n,e[0][0]),l=T(n,e[0][1]);r[0]=t(e[0],o,l);for(let a=1;a<e.length;a++){const n=e[a];o+=n[0]*u,l-=n[1]*i,r[a]=t(n,o,l)}return r}function E(n,t,e){const r=new Array(e.length);for(let u=0;u<e.length;u++)r[u]=M(n,t,e[u]);return r}function P(n,t,e){return e?(t[0]=z(n,e[0]),t[1]=T(n,e[3]),t[2]=z(n,e[2]),t[3]=T(n,e[1]),t):[z(n,t[0]),T(n,t[3]),z(n,t[2]),T(n,t[1])]}function b(n,t,e,r){return M(n,e?r?c:m:r?m:a,t)}function F(n,t,e,r){return E(n,e?r?c:m:r?m:a,t)}function V(n,t,e,r){return E(n,e?r?c:m:r?m:a,t)}function Y(n,t,e){let[r,u]=e[0],i=Math.min(r,t[0]),o=Math.min(u,t[1]),l=Math.max(r,t[2]),a=Math.max(u,t[3]);for(let m=1;m<e.length;m++){const[n,t]=e[m];r+=n,u+=t,n<0&&(i=Math.min(i,r)),n>0&&(l=Math.max(l,r)),t<0?o=Math.min(o,u):t>0&&(a=Math.max(a,u))}return n[0]=i,n[1]=o,n[2]=l,n[3]=a,n}function _(n,t){if(!t.length)return null;n[0]=n[1]=Number.POSITIVE_INFINITY,n[2]=n[3]=Number.NEGATIVE_INFINITY;for(let e=0;e<t.length;e++)Y(n,n,t[e]);return n}function A(n){const t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return Y(t,t,n)}function w(n){return _([0,0,0,0],n)}function j(n){return _([0,0,0,0],n)}function G(n,t,e,r,u){return t.xmin=x(n,e.xmin),t.ymin=h(n,e.ymin),t.xmax=x(n,e.xmax),t.ymax=h(n,e.ymax),t!==e&&(r&&(t.zmin=e.zmin,t.zmax=e.zmax),u&&(t.mmin=e.mmin,t.mmax=e.mmax)),t}function L(n,t,e,r,u){return t.points=p(n,e.points,r,u),t}function O(n,t,e,r,u){return t.x=x(n,e.x),t.y=h(n,e.y),t!==e&&(r&&(t.z=e.z),u&&(t.m=e.m)),t}function S(n,t,e,r,u){const i=N(n,e.rings,r,u);return i?(t.rings=i,t):null}function d(n,t,e,r,u){const i=y(n,e.paths,r,u);return i?(t.paths=i,t):null}function U(n,t){return n&&t?e(t)?O(n,{},t,!1,!1):r(t)?d(n,{},t,!1,!1):u(t)?S(n,{},t,!1,!1):i(t)?L(n,{},t,!1,!1):o(t)?G(n,{},t,!1,!1):null:null}function k(n,t,e,r,u){return t.xmin=z(n,e.xmin),t.ymin=T(n,e.ymin),t.xmax=z(n,e.xmax),t.ymax=T(n,e.ymax),t!==e&&(r&&(t.zmin=e.zmin,t.zmax=e.zmax),u&&(t.mmin=e.mmin,t.mmax=e.mmax)),t}function q(t,e,r,u,i){return n(r)&&(e.points=b(t,r.points,u,i)),e}function v(n,e,r,u,i){return t(r)||(e.x=z(n,r.x),e.y=T(n,r.y),e!==r&&(u&&(e.z=r.z),i&&(e.m=r.m))),e}function B(t,e,r,u,i){return n(r)&&(e.rings=V(t,r.rings,u,i)),e}function C(t,e,r,u,i){return n(r)&&(e.paths=F(t,r.paths,u,i)),e}export{f as equals,Y as getQuantizedBoundsCoordsArray,_ as getQuantizedBoundsCoordsArrayArray,w as getQuantizedBoundsPaths,A as getQuantizedBoundsPoints,j as getQuantizedBoundsRings,g as quantizeBounds,G as quantizeExtent,U as quantizeGeometry,L as quantizeMultipoint,y as quantizePaths,O as quantizePoint,p as quantizePoints,S as quantizePolygon,d as quantizePolyline,N as quantizeRings,x as quantizeX,h as quantizeY,s as toQuantizationTransform,P as unquantizeBounds,M as unquantizeCoordsArray,E as unquantizeCoordsArrayArray,k as unquantizeExtent,q as unquantizeMultipoint,F as unquantizePaths,v as unquantizePoint,b as unquantizePoints,B as unquantizePolygon,C as unquantizePolyline,V as unquantizeRings,z as unquantizeX,T as unquantizeY};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import s from\"../../../../core/Logger.js\";import{WGLVVFlag as i}from\"./enums.js\";import{isNumber as r}from\"./Utils.js\";const l=s.getLogger(\"esri.views.2d.engine.webgl\");function o(s){return r(s.minDataValue)&&r(s.maxDataValue)&&null!=s.minSize&&null!=s.maxSize?i.SIZE_MINMAX_VALUE:(s.expression&&\"view.scale\"===s.expression||s.valueExpression&&\"$view.scale\"===s.valueExpression)&&Array.isArray(s.stops)?i.SIZE_SCALE_STOPS:(null!=s.field||s.expression&&\"view.scale\"!==s.expression||s.valueExpression&&\"$view.scale\"!==s.valueExpression)&&(Array.isArray(s.stops)||\"levels\"in s&&s.levels)?i.SIZE_FIELD_STOPS:(null!=s.field||s.expression&&\"view.scale\"!==s.expression||s.valueExpression&&\"$view.scale\"!==s.valueExpression)&&null!=s.valueUnit?i.SIZE_UNIT_VALUE:(l.error(new e(\"mapview-bad-type\",\"Found invalid size VisualVariable\",s)),i.NONE)}export{o as getTypeOfSizeVisualVariable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"./chunks/tslib.es6.js\";import r from\"./Graphic.js\";import{property as t}from\"./core/accessorSupport/decorators/property.js\";import\"./core/arrayUtils.js\";import\"./core/has.js\";import\"./core/accessorSupport/ensureType.js\";import{subclass as o}from\"./core/accessorSupport/decorators/subclass.js\";var p;let s=p=class extends r{constructor(){super(...arguments),this.isAggregate=!0}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const r=this.sourceLayer&&this.sourceLayer.featureReduction;return r&&\"popupTemplate\"in r&&r.popupEnabled?r.popupTemplate:null}getObjectId(){return this.objectId}clone(){return new p({objectId:this.objectId,...this.cloneProperties()})}};e([t({type:Boolean})],s.prototype,\"isAggregate\",void 0),e([t({type:Number,json:{read:!0}})],s.prototype,\"objectId\",void 0),s=p=e([o(\"esri.AggregateGraphic\")],s);const c=s;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import i from\"../../core/has.js\";import{unwrap as s}from\"../../core/maybe.js\";import{property as f}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as c}from\"../../core/accessorSupport/decorators/subclass.js\";import r from\"./EffectView.js\";let o=class extends t{constructor(e){super(e),this._filter=null,this.duration=i(\"mapview-transitions-duration\"),this._excludedEffectView=new r(e),this._includedEffectView=new r(e)}get excludedEffects(){return this._excludedEffectView.effects}set featureEffect(e){this._get(\"featureEffect\")!==e&&this._transitionTo(e)}get filter(){var e;return this._filter||(null==(e=s(this.featureEffect))?void 0:e.filter)||null}get hasEffects(){return this._excludedEffectView.hasEffects||this._includedEffectView.hasEffects}get includedEffects(){return this._includedEffectView.effects}set scale(e){this._set(\"scale\",e),this._excludedEffectView.scale=e,this._includedEffectView.scale=e}get transitioning(){return this._excludedEffectView.transitioning||this._includedEffectView.transitioning}transitionStep(e,t){this._set(\"scale\",t),this.transitioning?(this._includedEffectView.transitionStep(e,t),this._excludedEffectView.transitionStep(e,t),this.transitioning||(this._filter=null)):(this._excludedEffectView.scale=t,this._includedEffectView.scale=t)}end(){this._includedEffectView.end(),this._excludedEffectView.end(),this._filter=null}_transitionTo(e){const t=this._get(\"featureEffect\"),i=s(e),f=s(null==i?void 0:i.includedEffect),c=s(null==i?void 0:i.excludedEffect),r=this._includedEffectView.canTransitionTo(f)&&this._excludedEffectView.canTransitionTo(c);this._includedEffectView.effect=f,this._excludedEffectView.effect=c,this._set(\"featureEffect\",i),this._filter=(null==i?void 0:i.filter)||(null==t?void 0:t.filter)||null,r||this.end()}};e([f()],o.prototype,\"_filter\",void 0),e([f()],o.prototype,\"_excludedEffectView\",void 0),e([f()],o.prototype,\"_includedEffectView\",void 0),e([f()],o.prototype,\"duration\",void 0),e([f()],o.prototype,\"excludedEffects\",null),e([f()],o.prototype,\"featureEffect\",null),e([f()],o.prototype,\"filter\",null),e([f()],o.prototype,\"hasEffects\",null),e([f()],o.prototype,\"includedEffects\",null),e([f({value:0})],o.prototype,\"scale\",null),e([f()],o.prototype,\"transitioning\",null),o=e([c(\"esri.layers.effects.FeatureEffectView\")],o);const l=o;export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nasync function e(e,a){if(!e)return null;switch(e.type){case\"class-breaks\":case\"simple\":case\"unique-value\":case\"dot-density\":case\"dictionary\":return new((await import(\"./tileRenderers/SymbolTileRenderer.js\")).default)(a);case\"heatmap\":return new((await import(\"./tileRenderers/HeatmapTileRenderer.js\")).default)(a)}}export{e as createOrReuseTileRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{QueueProcessor as o}from\"../../../support/QueueProcessor.js\";function n(e){return e.some((e=>e.globalId))}function d(e){return e.filter((e=>!e.error)).map((e=>{var r;return null!=(r=e.objectId)?r:e.globalId}))}function a(e,r){const s=new Set(e);for(const t of r.values())s.add(t);return s}function i(e,r){const s=new Set(e);for(const t of r.values())s.delete(t);return s}let u=class extends r{constructor(e){super(e),this._hasGlobalIds=!1}normalizeCtorArgs(e){return this._queueProcessor=new o({concurrency:1,process:e.process}),{}}destroy(){this._queueProcessor.clear()}get updating(){return this._queueProcessor.length>0}push(e){const r=this._queueProcessor,s=r.last();switch(e.type){case\"update\":case\"refresh\":if((null==s?void 0:s.type)===e.type)return;r.push(e).finally((()=>this.notifyChange(\"updating\")));break;case\"edit\":{const t=\"processed-edit\"===(null==s?void 0:s.type)?s:null;t&&r.popLast();const o=this._mergeEdits(t,e);for(const e of o)r.push(e).finally((()=>this.notifyChange(\"updating\")));break}}this.notifyChange(\"updating\")}_mergeEdits(e,r){var s,t;const{addedFeatures:o,deletedFeatures:u,updatedFeatures:c}=r.edits;if(this._hasGlobalIds=this._hasGlobalIds||n(o)||n(c)||n(u),this._hasGlobalIds){return[e,{type:\"processed-edit\",edits:{addOrModified:[...o,...c],removed:u}}]}const l=new Set(d(null!=(s=null==e?void 0:e.edits.addOrModified)?s:[])),p=new Set(d(null!=(t=null==e?void 0:e.edits.removed)?t:[])),f=new Set([...d(o),...d(c)]),h=new Set(d(u));return[{type:\"processed-edit\",edits:{addOrModified:Array.from(a(i(l,h),f)).map((e=>({objectId:e}))),removed:Array.from(a(i(p,f),h)).map((e=>({objectId:e})))}}]}};e([s({readOnly:!0})],u.prototype,\"updating\",null),u=e([t(\"esri.views.2d.layers.support.FeatureCommandQueue\")],u);const c=u;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{EsriPromise as t}from\"../../../../core/Promise.js\";import{createResolver as r,ignoreAbortErrors as s,throwIfNotAbortError as o}from\"../../../../core/promiseUtils.js\";import{open as i}from\"../../../../core/workers/workers.js\";import{property as n}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";function c(e){return Array.isArray(e)}let l=class extends t{constructor(e){super(e),this._startupResolver=r(),this.isReady=!1}initialize(){this._controller=new AbortController,this.addResolvingPromise(this._startWorker(this._controller.signal))}destroy(){this._controller.abort(),this._connection&&this._connection.close()}set tileRenderer(e){this.client.tileRenderer=e}get closed(){return this._connection.closed}async startup(e,t,r,s){await this.when();const o=this._controller.signal,i=c(r.source)?{transferList:r.source,signal:o}:void 0,n={service:r,config:t,tileInfo:e.tileInfo.toJSON(),tiles:s};await this._connection.invoke(\"startup\",n,i),this._startupResolver.resolve(),this._set(\"isReady\",!0)}async updateTiles(e){return await this._startupResolver.promise,s(this._connection.invoke(\"updateTiles\",e))}async update(e){const t={config:e};return await this._startupResolver.promise,this._connection.invoke(\"update\",t)}async applyUpdate(e){return await this._startupResolver.promise,this._connection.invoke(\"applyUpdate\",e)}async setHighlight(e){return await this._startupResolver.promise,s(this._connection.invoke(\"controller.setHighlight\",e))}async refresh(e){return await this._startupResolver.promise,s(this._connection.invoke(\"controller.refresh\",e))}async querySummaryStatistics(e,t,r){return await this._startupResolver.promise,this._connection.invoke(\"controller.querySummaryStatistics\",{query:e.toJSON(),params:t},r)}async queryUniqueValues(e,t,r){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryUniqueValues\",{query:e.toJSON(),params:t},r)}async queryClassBreaks(e,t,r){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryClassBreaks\",{query:e.toJSON(),params:t},r)}async queryHistogram(e,t,r){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryHistogram\",{query:e.toJSON(),params:t},r)}async queryFeatures(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatures\",e.toJSON(),t)}async queryVisibleFeatures(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryVisibleFeatures\",e.toJSON(),t)}async queryObjectIds(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryObjectIds\",e.toJSON(),t)}async queryFeatureCount(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatureCount\",e.toJSON(),t)}async queryExtent(e,t){return this._connection.invoke(\"controller.queryExtent\",e.toJSON(),t)}async queryLatestObservations(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryLatestObservations\",e.toJSON(),t)}async queryStatistics(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryStatistics\",e)}async getObjectId(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getObjectId\",e)}async getDisplayId(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getDisplayId\",e)}async getFeatures(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getFeatures\",e)}async getAggregates(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregates\")}async getAggregateValueRanges(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregateValueRanges\")}async mapValidDisplayIds(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.mapValidDisplayIds\",e)}async onEdits(e){return await this._startupResolver.promise,s(this._connection.invoke(\"controller.onEdits\",e))}async enableEvent(e,t){return await this._startupResolver.promise,s(this._connection.invoke(\"controller.enableEvent\",{name:e,value:t}))}async _startWorker(e){try{this._connection=await i(\"Pipeline\",{client:this.client,strategy:\"dedicated\",signal:e})}catch(t){o(t)}}};e([n()],l.prototype,\"isReady\",void 0),e([n()],l.prototype,\"client\",void 0),e([n()],l.prototype,\"tileRenderer\",null),l=e([a(\"esri.views.2d.layers.support.FeatureLayerProxy\")],l);const u=l;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import i from\"./TileCoverage.js\";import t from\"./TileKey.js\";const l=1e-6;class s{constructor(e){this._tiles=new Map,this.buffer=0,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.buffer=e.buffer}destroy(){}clear(){this._tiles.forEach((e=>this._releaseTile(e)))}tileKeys(){const e=[];return this._tiles.forEach(((i,t)=>e.push(t))),e}update(e){const l=this.tileInfoView.getTileCoverage(e.state,this.buffer,\"closest\"),{spans:s,lodInfo:r}=l,{level:a}=r,o=[],d=[],h=new Set,n=new Set;for(const{row:i,colFrom:c,colTo:f}of s)for(let e=c;e<=f;e++){const l=t.getId(a,i,r.normalizeCol(e),r.getWorldForColumn(e)),s=this._getOrAcquireTile(o,l);h.add(l),s.isReady?s.visible=!0:n.add(s.key)}n.forEach((e=>this._addPlaceholders(h,e))),this._tiles.forEach((e=>{h.has(e.key.id)||(d.push(e.key.id),this._releaseTile(e))})),i.pool.release(l);return{hasMissingTiles:n.size>0,added:o,removed:d}}_getOrAcquireTile(e,i){if(!this._tiles.has(i)){const l=this.acquireTile(new t(i));e.push(i),this._tiles.set(i,l),l.visible=!1}return this._tiles.get(i)}_getTile(e){return this._tiles.get(e)}_releaseTile(e){this._tiles.delete(e.key.id),this.releaseTile(e)}_addPlaceholders(e,i){const t=this._addPlaceholderChildren(e,i);if(!(Math.abs(1-t)<l)){if(!this._addPlaceholderParent(e,i)){this._getTile(i.id).visible=!0}}}_addPlaceholderChildren(e,i){let t=0;return this._tiles.forEach((l=>{t+=this._addPlaceholderChild(e,l,i)})),t}_addPlaceholderChild(e,i,t){if(i.key.level<=t.level||!i.hasData||!t.contains(i.key))return 0;i.visible=!0,e.add(i.key.id);return 1/(1<<2*(i.key.level-t.level))}_addPlaceholderParent(i,t){let l=t.getParentKey(),s=0,r=null;for(;e(l);){if(i.has(l.id))return!0;const e=this._getTile(l.id);if(null!=e&&e.isReady)return e.visible=!0,i.add(e.key.id),!0;null!=e&&e.hasData&&e.patchCount>s&&(s=e.patchCount,r=e),l=l.getParentKey()}return!!r&&(r.visible=!0,i.add(r.key.id),!0)}}export{s as TileManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{deprecatedProperty as t}from\"../../core/deprecate.js\";import r from\"../../core/Error.js\";import i from\"../../core/Logger.js\";import{isSome as s,isNone as o}from\"../../core/maybe.js\";import{eachAlways as a}from\"../../core/promiseUtils.js\";import{init as n,on as l}from\"../../core/watchUtils.js\";import{property as u}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as f}from\"../../layers/support/commonProperties.js\";import d from\"../../layers/support/FeatureEffect.js\";import c from\"../../layers/support/FeatureFilter.js\";import{fixFields as m,unpackFieldNames as y,collectLabelingFields as h,collectElevationFields as F,collectFilterFields as w,collectFeatureReductionFields as g,collectOrderByInfos as E,collectFields as x,collectField as v,featureHasFields as b}from\"../../layers/support/fieldUtils.js\";import j from\"../../rest/support/Query.js\";import{loadArcade as R}from\"../../support/arcadeOnDemand.js\";import{getFetchPopupTemplate as q,getRequiredFields as I}from\"./support/popupUtils.js\";import{getFloorFilterClause as _}from\"../support/floorFilterUtils.js\";const P=i.getLogger(\"esri.views.layers.FeatureLayerView\"),O=i=>{let O=class extends i{constructor(...e){super(...e),this._updatingRequiredFieldsPromise=null,this.filter=null,this.timeExtent=null,this.layer=null,this.requiredFields=[],this.view=null}initialize(){n(this,[\"layer.renderer\",\"layer.labelingInfo\",\"layer.elevationInfo.featureExpressionInfo\",\"layer.displayField\",\"filter\",\"featureEffect\",\"layer.timeInfo\",\"layer.floorInfo\",\"timeExtent\"],(()=>this._handleRequiredFieldsChange()),!0),l(this,\"view.floors\",\"change\",(()=>this._handleRequiredFieldsChange())),l(this,\"layer.sublayer\",\"change\",(()=>this._handleRequiredFieldsChange()))}get availableFields(){const{layer:e,layer:{fieldsIndex:t},requiredFields:r}=this;return\"outFields\"in e&&e.outFields?m(t,[...y(t,e.outFields),...r]):m(t,r)}set effect(e){t(P,\"effect\",{replacement:\"featureEffect\",version:\"4.22\"}),this.featureEffect=e}get effect(){return t(P,\"effect\",{replacement:\"featureEffect\",version:\"4.22\"}),this.featureEffect}get featureEffect(){return this.layer&&\"featureEffect\"in this.layer?this.layer.featureEffect:null}set featureEffect(e){void 0!==e?this._override(\"featureEffect\",e):this._clearOverride(\"featureEffect\")}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){P.error(\"#maximumNumberOfFeatures=\",\"Setting maximum number of features is not supported\")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error(\"missing implementation\")}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},t=s(this.filter)?this.filter.createQuery(e):new j(e);if(\"feature\"===this.layer.type){const e=_(this);s(e)&&(t.where=t.where?`(${t.where}) AND (${e})`:e)}return s(this.timeExtent)&&(t.timeExtent=s(t.timeExtent)?t.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),t}queryFeatures(e,t){throw new Error(\"missing implementation\")}queryObjectIds(e,t){throw new Error(\"missing implementation\")}queryFeatureCount(e,t){throw new Error(\"missing implementation\")}queryExtent(e,t){throw new Error(\"missing implementation\")}async fetchPopupFeatures(e,t){const r=this.validateFetchPopupFeatures(t);if(r)throw r;return this.fetchClientPopupFeatures(t)}_loadArcadeModules(e){if(e.get(\"expressionInfos.length\")||Array.isArray(e.content)&&e.content.some((e=>\"expression\"===e.type)))return R()}_handleRequiredFieldsChange(){const e=this._updateRequiredFields();this._set(\"_updatingRequiredFieldsPromise\",e),e.then((()=>{this._updatingRequiredFieldsPromise===e&&this._set(\"_updatingRequiredFieldsPromise\",null)}))}async _updateRequiredFields(){if(!this.layer||!this.view)return;const e=\"3d\"===this.view.type,{layer:t,layer:{fieldsIndex:r,objectIdField:i}}=this,o=\"renderer\"in t&&t.renderer,n=\"orderBy\"in t&&t.orderBy,l=t.featureReduction,u=new Set,p=await a([o?o.collectRequiredFields(u,r):null,h(u,t),e?F(u,t):null,s(this.filter)?w(u,t,this.filter):null,s(this.featureEffect)?w(u,t,this.featureEffect.filter):null,l?g(u,t,l):null,n?E(u,t,n):null]);if(t.timeInfo&&this.timeExtent&&x(u,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),\"feature\"===t.type&&t.floorInfo&&x(u,t.fieldsIndex,[t.floorInfo.floorField]),\"subtype-group\"===t.type){v(u,r,t.subtypeField);const e=t.sublayers.map((e=>{var t;return Promise.all([null==(t=e.renderer)?void 0:t.collectRequiredFields(u,r),h(u,e)])}));await a(e)}for(const s of p)s.error&&P.error(s.error);v(u,r,i),e&&\"displayField\"in t&&t.displayField&&v(u,r,t.displayField);const f=Array.from(u).sort();this._set(\"requiredFields\",f)}validateFetchPopupFeatures(e){if(o(e))return null;for(const t of e.clientGraphics){const i=t.layer;if(\"popupEnabled\"in i&&!i.popupEnabled)return new r(\"featurelayerview:fetchPopupFeatures\",\"Popups are disabled\",{layer:i});if(\"popupTemplate\"in i){if(!q(i,e))return new r(\"featurelayerview:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:i})}if(t.isAggregate&&!(i.featureReduction&&\"popupTemplate\"in i.featureReduction&&i.featureReduction.popupEnabled&&i.featureReduction.popupTemplate))return new r(\"featurelayerview:fetchPopupFeatures\",\"Popups are disabled\",{layer:i})}}async fetchClientPopupFeatures(e){const t=s(e)?e.clientGraphics:null;if(!t||0===t.length)return[];const r=new Array(t.length),i=new Map,o=await this.createPopupQuery(e);for(let a=0;a<t.length;a++){const n=t[a];if(n.isAggregate){r[a]=n;continue}const{layer:l}=n;if(!(\"popupEnabled\"in l))continue;const u=y(this.layer.fieldsIndex,o.outFields),p=q(l,e);if(!s(p))continue;const f=await this._loadArcadeModules(p);f&&f.arcadeUtils.hasGeometryOperations(p)||!b(u,n)?i.set(n.getObjectId(),a):r[a]=n}if(\"stream\"===this.layer.type||0===i.size)return r.filter(Boolean);o.objectIds=Array.from(i.keys());try{const e=await this.layer.queryFeatures(o);for(const t of e.features){r[i.get(t.getObjectId())]=t}}catch{}return r.filter(Boolean)}async createPopupQuery(e){const t=this.layer.createQuery(),r=new Set;let i=!1;const o=s(e)&&e.clientGraphics?e.clientGraphics.map((e=>e.layer)):[this.layer];for(const a of o){if(!(\"popupEnabled\"in a))continue;const t=q(a,e);if(!s(t))continue;const o=await this._loadArcadeModules(t),n=o&&o.arcadeUtils.hasGeometryOperations(t);i=!(\"point\"!==this.layer.geometryType&&!n);const l=await I(this.layer,t);for(const e of l)r.add(e)}if(t.returnGeometry=i,t.returnZ=i,t.returnM=i,t.outFields=Array.from(r),t.outSpatialReference=this.view.spatialReference,\"feature\"===this.layer.type){const e=_(this);s(e)&&(t.where=t.where?`(${t.where}) AND (${e})`:e)}return t}canResume(){return!!super.canResume()&&(!s(this.timeExtent)||!this.timeExtent.isEmpty)}};return e([u()],O.prototype,\"_updatingRequiredFieldsPromise\",void 0),e([u({readOnly:!0})],O.prototype,\"availableFields\",null),e([u()],O.prototype,\"effect\",null),e([u({type:d})],O.prototype,\"featureEffect\",null),e([u({type:c})],O.prototype,\"filter\",void 0),e([u(f)],O.prototype,\"timeExtent\",void 0),e([u()],O.prototype,\"layer\",void 0),e([u({type:Number})],O.prototype,\"maximumNumberOfFeatures\",null),e([u({readOnly:!0,type:Boolean})],O.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([u({readOnly:!0})],O.prototype,\"requiredFields\",void 0),e([u()],O.prototype,\"suspended\",void 0),e([u()],O.prototype,\"view\",void 0),O=e([p(\"esri.views.layers.FeatureLayerView\")],O),O};export{O as FeatureLayerView,O as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../AggregateGraphic.js\";import\"../../../geometry.js\";import i from\"../../../Graphic.js\";import r from\"../../../core/Collection.js\";import s from\"../../../core/Error.js\";import a from\"../../../core/has.js\";import{clone as n}from\"../../../core/lang.js\";import o from\"../../../core/Logger.js\";import{andThen as l,isSome as h,unwrap as u,isNone as d}from\"../../../core/maybe.js\";import{debounce as p,isAbortError as c}from\"../../../core/promiseUtils.js\";import{react as y}from\"../../../core/reactiveUtils.js\";import{init as f,whenFalseOnce as g}from\"../../../core/watchUtils.js\";import{property as m}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as _}from\"../../../core/accessorSupport/decorators/subclass.js\";import v from\"../../../layers/effects/FeatureEffectView.js\";import b from\"../../../layers/support/FeatureFilter.js\";import{calculateTolerance as R}from\"../../../renderers/support/clickToleranceUtils.js\";import x from\"../../../rest/support/FeatureSet.js\";import w from\"../../../rest/support/Query.js\";import{MAX_FILTERS as S}from\"../engine/webgl/definitions.js\";import{LayerView2DMixin as U}from\"./LayerView2D.js\";import{createSchema as F}from\"./features/schemaUtils.js\";import{createOrReuseTileRenderer as I}from\"./features/tileRenderers.js\";import{computePxBuffer as C}from\"./features/support/pixelBuffering.js\";import{findSizeVV as O,createClusterCountSizeVariable as E,isClusterCompatibleRenderer as q,createClusterRenderer as T}from\"./support/clusterUtils.js\";import j from\"./support/FeatureCommandQueue.js\";import V from\"./support/FeatureLayerProxy.js\";import{toJSONGeometryType as P}from\"./support/util.js\";import{TileManager as N}from\"../tiling/TileManager.js\";import{FeatureLayerView as k}from\"../../layers/FeatureLayerView.js\";import L from\"../../layers/LayerView.js\";import{RefreshableLayerView as H}from\"../../layers/RefreshableLayerView.js\";import{createQueryGeometry as z}from\"../../support/drapedUtils.js\";import J from\"../../webgl/capabilities.js\";import B from\"../../../geometry/Extent.js\";function Q(e){return e&&\"openPorts\"in e}const M=o.getLogger(\"esri.views.2d.layers.FeatureLayerView2D\");let A=class extends(k(H(U(L)))){constructor(){super(...arguments),this._pipelineIsUpdating=!0,this._commandsQueue=new j({process:e=>{switch(e.type){case\"processed-edit\":return this._doEdit(e);case\"refresh\":return this._doRefresh(e.dataChanged);case\"update\":return this._doUpdate()}}}),this._visibilityOverrides=new Set,this._highlightIds=new Map,this._lastPixelBuffer=0,this._updateHighlight=p((async()=>this._proxy.setHighlight(Array.from(this._highlightIds.keys())))),this._uploadsLocked=!1,this._needsClusterSizeUpdate=!1,this.featureEffectView=new v,this._lastDefinitionExpression=null}destroy(){var e,t;l(this._updateClusterSizeTask,(e=>e.remove())),null==(e=this._proxy)||e.destroy(),null==(t=this.tileRenderer)||t.destroy(),this._commandsQueue.destroy()}initialize(){this.addResolvingPromise(Promise.all([this._initProxy(),this._initServiceOptions()])),this.handles.add([this.on(\"valueRangesChanged\",(e=>{this._set(\"_aggregateValueRanges\",e.valueRanges)})),y((()=>this.featureEffect),(e=>{this.featureEffectView.featureEffect=e}),{initial:!0,sync:!0})])}async _initProxy(){if(\"isTable\"in this.layer&&this.layer.isTable)throw new s(\"featurelayerview:table-not-supported\",\"table feature layer can't be displayed\",{layer:this.layer});this._proxy&&this._proxy.destroy();const e=this._createClientOptions();return this._set(\"_proxy\",new V({client:e})),this._proxy.when()}async _initServiceOptions(){this._set(\"_serviceOptions\",await this._createServiceOptions())}get orderByFields(){return\"stream\"!==this._serviceOptions.type&&this._serviceOptions.orderByFields}get labelsVisible(){const e=\"subtype-group\"===this.layer.type?this.layer.sublayers.items:[this.layer];return!this.suspended&&e.some((e=>e.labelingInfo&&e.labelsVisible))}get queryMode(){return this._serviceOptions.type}get renderingConfigHash(){if(!this.layer)return null;const e=this.availableFields,t=this.layer,i=this.view.floors,{definitionExpression:r}=t,s=\"subtype-group\"!==this.layer.type&&this.layer.labelsVisible&&this.layer.labelingInfo,a=\"renderer\"in t&&t.renderer,n=\"feature\"===t.type?t.gdbVersion:void 0,o=\"feature\"===t.type&&t.historicMoment?t.historicMoment.getTime():void 0,{timeExtent:l}=this,u=\"customParameters\"in t?JSON.stringify(t.customParameters):void 0,d=\"apiKey\"in t?t.apiKey:void 0,p=\"stream\"===t.type?`${JSON.stringify(t.geometryDefinition)}${t.definitionExpression}`:null,c=JSON.stringify(this.clips),y=t.featureReduction&&t.featureReduction.toJSON(),f=\"orderBy\"in this.layer&&JSON.stringify(this.layer.orderBy),g=\"sublayers\"in this.layer&&this.layer.sublayers.items.reduce(((e,t)=>e+`${t.visible?1:0}.${JSON.stringify(t.renderer)}.${t.labelsVisible}\\n.${JSON.stringify(t.labelingInfo)}`),\"\");return JSON.stringify({orderBy:f,sublayerHash:g,filterHash:h(this.filter)&&this.filter.toJSON(),effectHash:h(this.featureEffect)&&this.featureEffect.toJSON(),streamFilter:p,gdbVersion:n,definitionExpression:r,historicMoment:o,availableFields:e,renderer:a,labelingInfo:s,timeExtent:l,floors:i,clipsHash:c,featureReduction:y,customParameters:u,apiKey:d})}async fetchPopupFeatures(e,t){var i;if(h(t)&&0===t.clientGraphics.length)return[];if(!(\"cluster\"===(null==(i=this.layer.featureReduction)?void 0:i.type))){const i=R({renderer:\"renderer\"in this.layer&&this.layer.renderer,event:h(t)&&t.event}),r=z(e,i,this.view),{features:s}=await this.queryVisibleFeatures(new w({geometry:r,outFields:[\"*\"],returnGeometry:!0}));t=h(t)?t:{};const a=new Set(t.clientGraphics.map((e=>e.getObjectId())));for(const e of s)a.has(e.getObjectId())||t.clientGraphics.push(e)}return super.fetchPopupFeatures(e,t)}highlight(e){var t;let s;return e instanceof i?s=[e.getObjectId()]:\"number\"==typeof e||\"string\"==typeof e?s=[e]:Array.isArray(e)&&e.length>0?s=\"number\"==typeof e[0]||\"string\"==typeof e[0]?e:e.map((e=>null==e?void 0:e.getObjectId())):r.isCollection(e)&&e.length>0&&(s=e.map((e=>null==e?void 0:e.getObjectId())).toArray()),s=null==(t=s)?void 0:t.filter((e=>null!=e)),s&&s.length?(this._addHighlight(s),{remove:()=>this._removeHighlight(s)}):{remove:()=>{}}}hasHighlight(){return!!this._highlightIds.size}async hitTest(e,r){if(!this.tileRenderer)return null;const s=await this.tileRenderer.hitTest(r);if(0===s.length)return null;const{features:a,aggregates:n}=await this._proxy.getFeatures(s);return[...n.map((e=>this._createHittestResult(t.fromJSON(e)))),...a.map((e=>this._createHittestResult(i.fromJSON(e))))]}async queryAggregates(){return(await this._proxy.getAggregates()).map((e=>t.fromJSON(e)))}queryStatistics(){return this._proxy.queryStatistics()}async querySummaryStatistics(e,t,i){const r={...t,scale:this.view.scale};return this._proxy.querySummaryStatistics(this._cleanUpQuery(e),r,i)}async queryUniqueValues(e,t,i){const r={...t,scale:this.view.scale};return this._proxy.queryUniqueValues(this._cleanUpQuery(e),r,i)}async queryClassBreaks(e,t,i){const r={...t,scale:this.view.scale};return this._proxy.queryClassBreaks(this._cleanUpQuery(e),r,i)}async queryHistogram(e,t,i){const r={...t,scale:this.view.scale};return this._proxy.queryHistogram(this._cleanUpQuery(e),r,i)}queryFeatures(e,t){return this.queryFeaturesJSON(e,t).then((e=>{const t=x.fromJSON(e);return t.features.forEach((e=>this._setLayersForFeature(e))),t}))}queryVisibleFeatures(e,t){return this._proxy.queryVisibleFeatures(this._cleanUpQuery(e),t).then((e=>{const t=x.fromJSON(e);return t.features.forEach((e=>this._setLayersForFeature(e))),t}))}queryFeaturesJSON(e,t){return this._proxy.queryFeatures(this._cleanUpQuery(e),t)}queryObjectIds(e,t){return this._proxy.queryObjectIds(this._cleanUpQuery(e),t)}queryFeatureCount(e,t){return this._proxy.queryFeatureCount(this._cleanUpQuery(e),t)}queryExtent(e,t){return this._proxy.queryExtent(this._cleanUpQuery(e),t).then((e=>({count:e.count,extent:B.fromJSON(e.extent)})))}setVisibility(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._update()}update(e){if(!this._tileStrategy||!this.tileRenderer)return;const{hasMissingTiles:t,added:i,removed:r}=this._tileStrategy.update(e);(i.length||r.length)&&this._proxy.updateTiles({added:i,removed:r}),t&&this.requestUpdate(),this.notifyChange(\"updating\")}attach(){this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`),this._tileStrategy=new N({acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add(f(this,\"renderingConfigHash\",(()=>this._update())),\"attach\"),\"stream\"!==this.layer.type&&this.handles.add(this.layer.on(\"edits\",(e=>this._edit(e))),\"attach\")}detach(){this.container.removeAllChildren(),this.handles.remove(\"attach\"),this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null),this._tileRendererHash=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}isUpdating(){var e;const t=\"renderer\"in this.layer&&null!=this.layer.renderer,i=this._commandsQueue.updating,r=null!=this._updatingRequiredFieldsPromise,s=!this._proxy||!this._proxy.isReady,n=this._pipelineIsUpdating,o=null===this.tileRenderer||(null==(e=this.tileRenderer)?void 0:e.updating),l=t&&(i||r||s||n||o);return a(\"esri-2d-log-updating\")&&console.log(`Updating FLV2D: ${l}\\n  -> hasRenderer ${t}\\n  -> hasPendingCommand ${i}\\n  -> updatingRequiredFields ${r}\\n  -> updatingProxy ${s}\\n  -> updatingPipeline ${n}\\n  -> updatingTileRenderer ${o}\\n`),l}_createClientOptions(){return{setUpdating:e=>{this._set(\"_pipelineIsUpdating\",e)},emitEvent:e=>{this.emit(e.name,e.event)}}}async _detectQueryMode(e){var t;const i=\"path\"in e,r=\"editingInfo\"in this.layer&&(null==(t=this.layer.editingInfo)?void 0:t.lastEditDate),s=!!this.layer.refreshInterval,n=!r&&s;if(i&&(\"feature\"===this.layer.type||\"subtype-group\"===this.layer.type)&&\"point\"===this.layer.geometryType&&this.layer.capabilities.query.supportsPagination&&!this.layer.capabilities.operations.supportsEditing&&!n&&a(\"featurelayer-snapshot-enabled\"))try{const e=await this.layer.queryFeatureCount();if(e<=a(\"featurelayer-snapshot-point-min-threshold\"))return{mode:\"snapshot\",featureCount:e};const t=a(\"featurelayer-snapshot-point-max-threshold\"),i=a(\"featurelayer-snapshot-point-coverage\"),r=this.view.extent,s=u(this.layer.fullExtent),n=null==s?void 0:s.clone().intersection(r),o=h(n)?n.width*n.height:0,l=(null==s?void 0:s.width)*(null==s?void 0:s.height),d=0===l?0:o/l;if(e<=t&&d>=i)return{mode:\"snapshot\",featureCount:e}}catch(o){M.warn(\"mapview-feature-layer\",\"Encountered an error when querying for featureCount\",{error:o})}return{mode:\"on-demand\"}}async _createServiceOptions(){var e;const t=this.layer;if(\"stream\"===t.type)return null;const{capabilities:i,objectIdField:r}=t,s=t.fields.map((e=>e.toJSON())),a=h(t.fullExtent)&&t.fullExtent.toJSON(),o=P(t.geometryType),l=t.timeInfo&&t.timeInfo.toJSON()||null,u=t.spatialReference?t.spatialReference.toJSON():null,d=\"feature\"===t.type?t.globalIdField:null;let p;\"ogc-feature\"===t.type?p=t.source.getFeatureDefinition():Q(t.source)?p=await t.source.openPorts():t.parsedUrl&&(p=n(t.parsedUrl),\"dynamicDataSource\"in t&&t.dynamicDataSource&&(p.query={layer:JSON.stringify({source:t.dynamicDataSource})}));const c=\"datesInUnknownTimezone\"in this.layer&&this.layer.datesInUnknownTimezone,y=null!=(e=\"subtypeField\"in this.layer&&this.layer.subtypeField)?e:null,{mode:f,featureCount:g}=await this._detectQueryMode(p);let m=this.layer.objectIdField;if(\"feature\"===this.layer.type&&h(this.layer.orderBy)&&this.layer.orderBy.length){const e=!this.layer.orderBy[0].valueExpression&&this.layer.orderBy[0].field;e&&(m=e)}return{type:f,timeReferenceUnknownClient:c,subtypeField:y,featureCount:g,globalIdField:d,maxRecordCount:i.query.maxRecordCount,tileMaxRecordCount:i.query.tileMaxRecordCount,capabilities:i,fields:s,fullExtent:a,geometryType:o,objectIdField:r,source:p,timeInfo:l,spatialReference:u,orderByFields:m}}async _createMemoryServiceOptions(e){const t=await e.openPorts();return{...this._createServiceOptions(),type:\"memory\",source:t}}_cleanUpQuery(e){const t=w.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t}async _update(){return this._commandsQueue.push({type:\"update\"})}async _edit(e){if(this._validateEdit(e))return this._commandsQueue.push({type:\"edit\",edits:e})}async doRefresh(e){return this._commandsQueue.push({type:\"refresh\",dataChanged:e})}_validateEdit(e){const t=\"globalIdField\"in this.layer&&this.layer.globalIdField,i=e.deletedFeatures.some((e=>-1===e.objectId||!e.objectId)),r=t&&this.availableFields.includes(t);return i&&!r?(M.error(new s(\"mapview-apply-edits\",`Editing the specified service requires the layer's globalIdField, ${t} to be included the layer's outFields for updates to be reflected on the map`)),null):e}async _doUpdate(){try{if(this.destroyed||!this._hasRequiredSupport(this.layer)||!this._tileStrategy)return;const{featureEffectView:t,filter:i}=this;await this._updateRequiredFields();const{renderer:r}=this._getEffectiveRenderer();this._set(\"_effectiveRenderer\",r);const s=this._createSchemaConfig(),a=P(this.layer.geometryType),n=await C(r,a,this.view.resourceManager,this.layer.fields,this.layer.spatialReference,this.layer.featureReduction),o=this._createConfiguration(s,i,t.filter),l=this._lastDefinitionExpression!==o.definitionExpression;this._lastDefinitionExpression=o.definitionExpression,this._lastPixelBuffer=0===n?0:Math.max(n,this._lastPixelBuffer),o.schema.source.pixelBuffer=this._lastPixelBuffer;const h=this._createTileRendererHash(r);if(\"snapshot\"===this._serviceOptions.type&&(o.schema.source.featureCount=this._serviceOptions.featureCount),h!==this._tileRendererHash){await this._initTileRenderer(r);const e=this._serviceOptions;this.tileRenderer.onConfigUpdate(r);const t=this.layer;\"stream\"!==t.type&&Q(t.source)&&(e.source=await t.source.openPorts()),\"stream\"===t.type&&await this._initServiceOptions();const i={added:this._tileStrategy.tileKeys(),removed:[]};await this._proxy.startup(this.view.featuresTilingScheme,o,e,i),this.hasHighlight()&&await this._proxy.setHighlight(Array.from(this._highlightIds.keys())),await this._onceTilesUpdated(),this.tileRenderer.onConfigUpdate(r)}else{\"snapshot\"===this._serviceOptions.type&&l&&(o.schema.source.featureCount=await this.layer.queryFeatureCount());const t=await this._proxy.update(o);(t.mesh||t.targets.aggregate)&&this._lockGPUUploads();try{await this._proxy.applyUpdate(t)}catch(e){c(e)||M.error(e)}(t.mesh||t.targets.aggregate)&&this._unlockGPUUploads(),this.tileRenderer.onConfigUpdate(r),this._updateClusterSizeVariable(),this._forceAttributeTextureUpload()}this._tileRendererHash=h,this.tileRenderer.invalidateLabels(),this.requestUpdate()}catch(e){}}async _doEdit(e){try{await this._proxy.onEdits(e)}catch(t){c(t),0}}async _doRefresh(e){this._lockGPUUploads();try{await this._proxy.refresh(e)}catch(t){c(t),0}this._unlockGPUUploads()}_updateClusterSizeVariable(){this._needsClusterSizeUpdate&&(this.tileRenderer.onConfigUpdate(this._effectiveRenderer),this._needsClusterSizeUpdate=!1)}_createUpdateClusterSizeTask(e,t){return this.watch(\"_aggregateValueRanges\",(async i=>{this._updateClusterEffectiveRendererSizeVariable(e,t,i),this._needsClusterSizeUpdate=!0,this._uploadsLocked||this._updateClusterSizeVariable()}))}async _updateClusterEffectiveRendererSizeVariable(e,t,i){if(e.dynamicClusterSize&&\"visualVariables\"in e&&e.visualVariables){const r=O(e.visualVariables);if(h(r)&&\"cluster_count\"===r.field){const s=e.visualVariables.indexOf(r);e.visualVariables[s]=E(t,i);const a=e.clone();a.dynamicClusterSize=!0,this._set(\"_effectiveRenderer\",a)}}}_getEffectiveRenderer(){const e=\"renderer\"in this.layer&&this.layer.renderer,t=this.layer.featureReduction;if(h(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null),t&&\"cluster\"===t.type&&q(e)){const i=t,r=[],s=T(r,e,i,this._aggregateValueRanges);return l(this._updateClusterSizeTask,(e=>e.remove())),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(s,i),{renderer:s,aggregateFields:r,featureReduction:t}}return{renderer:e,aggregateFields:[],featureReduction:null}}_acquireTile(e){const t=this.tileRenderer.acquireTile(e);return t.once(\"attach\",(()=>{this.requestUpdate()})),t}_releaseTile(e){this.tileRenderer.releaseTile(e)}async _initTileRenderer(e){const t=await I(e,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer});return this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null),this.destroyed?null:(this._proxy.tileRenderer=t,this._set(\"tileRenderer\",t),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(e),this.requestUpdate(),this.tileRenderer)}_createTileRendererHash(e){return`${\"heatmap\"===e.type?\"heatmap\":\"symbol\"}.${\"dot-density\"===e.type}`}get hasFilter(){const e=!!(\"floorInfo\"in this.layer&&this.layer.floorInfo&&this.view.floors&&this.view.floors.length);return!!this.filter||e||!!this._visibilityOverrides.size||!!this.timeExtent}_injectOverrides(e){const t=h(e)?e.timeExtent:null,i=h(this.timeExtent)&&h(t)?this.timeExtent.intersection(t):this.timeExtent||t;let r=null;const s=\"floorInfo\"in this.layer&&this.layer.floorInfo;if(s){const t=h(e)&&e.where;r=this._addFloorFilterClause(t)}if(!this._visibilityOverrides.size&&!i&&!s)return h(e)?e.toJSON():null;(e=h(e)&&e.clone()||new b).timeExtent=i,r&&(e.where=r);const a=e.toJSON();return a.hiddenIds=Array.from(this._visibilityOverrides),a}_addFloorFilterClause(e){const t=this.layer;let i=e||\"\";if(\"floorInfo\"in t&&t.floorInfo){var r;let e=this.view.floors;if(!e||!e.length)return i;null!=(r=t.floorInfo.viewAllLevelIds)&&r.length&&(e=t.floorInfo.viewAllLevelIds);const s=e.filter((e=>\"\"!==e)).map((e=>\"'\"+e+\"'\"));s.push(\"''\");const a=t.floorInfo.floorField;let n=\"(\"+a+\" IN ({ids}) OR \"+a+\" IS NULL)\";if(n=n.replace(\"{ids}\",s.join(\", \")),h(i)&&i.includes(a)){let e=new RegExp(\"AND \\\\(\"+a+\".*NULL\\\\)\",\"g\");i=i.replace(e,\"\"),e=new RegExp(\"\\\\(\"+a+\".*NULL\\\\)\",\"g\"),i=i.replace(e,\"\"),i=i.replace(/\\s+/g,\" \").trim()}i=\"\"!==i?\"(\"+i+\") AND \"+n:n}return\"\"!==i?i:null}_createConfiguration(e,t,i){const r=\"feature\"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,s=\"feature\"===this.layer.type?this.layer.gdbVersion:void 0,a=new Array(S),n=this._injectOverrides(t);a[0]=n,a[1]=h(i)?i.toJSON():null;const o=F(e);if(d(o))return null;const l=J();return{definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,gdbVersion:s,historicMoment:r,devicePixelRatio:window.devicePixelRatio||1,filters:a,schema:o,supportsTextureFloat:l.supportsTextureFloat,maxTextureSize:l.maxTextureSize}}_hasRequiredSupport(e){var t;return!(\"renderer\"in e&&\"dot-density\"===(null==(t=e.renderer)?void 0:t.type)&&!J().supportsTextureFloat)||(M.error(new s(\"webgl-missing-extension\",\"Missing WebGL extension OES_Texture_Float which is required for DotDensity\")),!1)}_onceTilesUpdated(){return this.requestUpdate(),g(this,\"_pipelineIsUpdating\",!1)}_lockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!0,this.tileRenderer.lockGPUUploads())}_unlockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!1,this.tileRenderer.unlockGPUUploads())}_forceAttributeTextureUpload(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()}_createSchemaConfig(){const e=\"feature\"===this.layer.type?this.layer.historicMoment:null,t=\"feature\"===this.layer.type?this.layer.gdbVersion:null;return{renderer:\"renderer\"in this.layer&&this.layer.renderer,spatialReference:this.layer.spatialReference,timeExtent:this.layer.timeExtent,definitionExpression:this.layer.definitionExpression,featureReduction:this.layer.featureReduction,fields:this.layer.fields,geometryType:this.layer.geometryType,historicMoment:e,labelsVisible:\"labelsVisible\"in this.layer&&this.layer.labelsVisible,labelingInfo:\"labelingInfo\"in this.layer&&this.layer.labelingInfo,availableFields:this.availableFields,featureEffect:this.featureEffect,filter:this.filter,gdbVersion:t,pixelBuffer:0,orderBy:\"orderBy\"in this.layer&&this.layer.orderBy?this.layer.orderBy:null,customParameters:{...\"customParameters\"in this.layer?this.layer.customParameters:void 0,token:\"apiKey\"in this.layer?this.layer.apiKey:void 0}}}_addHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t);this._highlightIds.set(t,e+1)}else this._highlightIds.set(t,1);this._updateHighlight().catch((e=>{c(e)||M.error(e)}))}_removeHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t)-1;0===e?this._highlightIds.delete(t):this._highlightIds.set(t,e)}this._updateHighlight().catch((e=>{c(e)||M.error(e)}))}_setLayersForFeature(e){const t=this.layer;e.layer=t,e.sourceLayer=t}_createHittestResult(e){return this._setLayersForFeature(e),h(e.geometry)&&(e.geometry.spatialReference=this.view.spatialReference),e}};e([m()],A.prototype,\"_serviceOptions\",void 0),e([m()],A.prototype,\"_proxy\",void 0),e([m()],A.prototype,\"_pipelineIsUpdating\",void 0),e([m()],A.prototype,\"_effectiveRenderer\",void 0),e([m()],A.prototype,\"_aggregateValueRanges\",void 0),e([m()],A.prototype,\"_commandsQueue\",void 0),e([m()],A.prototype,\"featureEffectView\",void 0),e([m()],A.prototype,\"labelsVisible\",null),e([m({readOnly:!0})],A.prototype,\"queryMode\",null),e([m()],A.prototype,\"renderingConfigHash\",null),e([m()],A.prototype,\"tileRenderer\",void 0),e([m()],A.prototype,\"updating\",void 0),A=e([_(\"esri.views.2d.layers.FeatureLayerView2D\")],A);const D=A;export{D as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{WGLGeometryType as e}from\"../../views/2d/engine/webgl/enums.js\";import{createMaterialKey as t}from\"../../views/2d/engine/webgl/materialKey/MaterialKey.js\";const a={marker:e.MARKER,fill:e.FILL,line:e.LINE,text:e.TEXT};class l{constructor(e,l,s,n){const r={minScale:null==l?void 0:l.minScale,maxScale:null==l?void 0:l.maxScale},c=i(r);this.layers=e,this.data=l,this.hash=this._createHash()+c,this.rendererKey=s;const m={isOutline:!1,isOutlinedFill:!1,placement:null,stride:{fill:\"default\"},vvFlags:s};for(const i of e){const e=a[i.type];i.materialKey=t(e,m),i.maxVVSize=n,i.scaleInfo=r,i.templateHash+=c}}get type(){return\"expanded-cim\"}_createHash(){let e=\"\";for(const t of this.layers)e+=t.templateHash;return e}}function i(e){return e.minScale||e.maxScale?e.minScale+\"-\"+e.maxScale:\"\"}export{l as ExpandedCIM};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isDevEnvironment as t,adjustStaticAGOUrl as r}from\"../../../../core/devEnvironmentUtils.js\";import e from\"../../../../core/Error.js\";import{throwIfAborted as o}from\"../../../../core/promiseUtils.js\";import{urlToObject as n}from\"../../../../core/urlUtils.js\";import s from\"../../../../portal/Portal.js\";import{f as l}from\"../../../../chunks/persistableUrlUtils.js\";import{fetchStyle as m,Style2DUrlTemplate as a,requestJSON as i,makeCIMSymbolRef as c,symbolUrlFromStyleItem as u}from\"../../../../symbols/support/styleUtils.js\";async function y(t,r,n){if(!t.name)return Promise.reject(new e(\"style-symbol-reference-name-missing\",\"Missing name in style symbol reference\"));if(t.styleName&&\"Esri2DPointSymbolsStyle\"===t.styleName)return f(t,n);try{return p(await m(t,r,n),t.name,r,n)}catch(s){return o(s),null}}async function f(t,r){const e=a.replace(/\\{SymbolName\\}/gi,t.name);try{const t=await i(e,r);return c(t.data)}catch(n){return o(n),null}}async function p(m,a,y,f){const p=m.data,b={portal:y&&y.portal||s.getDefault(),url:n(m.baseUrl),origin:\"portal-item\"},d=p.items.find((t=>t.name===a));if(!d){throw new e(\"symbolstyleutils:symbol-name-not-found\",`The symbol name '${a}' could not be found`,{symbolName:a})}let j=l(u(d,\"cimRef\"),b);t()&&(j=r(j));try{const t=await i(j,f);return c(t.data)}catch(U){return o(U),null}}export{y as fetchCIMSymbolReference};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{analyzeCIMSymbol as e}from\"../../../../symbols/cim/cimAnalyzer.js\";import{ExpandedCIM as t}from\"../../../../symbols/cim/ExpandedCIM.js\";import{fetchCIMSymbolReference as a}from\"./webStyleUtils.js\";const r=async(e,t,a,r)=>Promise.all(e.map((e=>l(e,t,a,r)))),n=async(a,r,n)=>new t(await e(a.data,r,n),a.data,a.rendererKey,a.maxVVSize),l=async(e,t,r,l)=>{if(!e)return null;if(\"cim\"===e.type)return n(e,t,r);if(\"web-style\"===e.type){const i={type:\"cim\",data:await a(e,null,l),rendererKey:e.rendererKey,maxVVSize:e.maxVVSize};return n(i,t,r)}return e};function i(e){if(!e)return null;const{type:t,cim:a,url:r,materialHash:n}=e,l={cim:a,type:t,mosaicHash:n,url:r,size:null,dashTemplate:null,path:null,text:null,fontName:null};switch(t){case\"marker\":l.size=e.size,l.path=e.path;break;case\"line\":l.dashTemplate=e.dashTemplate;break;case\"text\":l.text=e.text,l.fontName=e.fontName}return l}export{i as cimLayerToRasterizationInfo,l as expandSymbol,r as expandSymbols};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/watchUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";const i=i=>{let c=class extends i{initialize(){this.handles.add(o(this,\"layer\",\"refresh\",(r=>{this.doRefresh(r.dataChanged).catch((r=>{s(r)||e.getLogger(this.declaredClass).error(r)}))})),\"RefreshableLayerView\")}};return r([t()],c.prototype,\"layer\",void 0),c=r([a(\"esri.layers.mixins.RefreshableLayerView\")],c),c};export{i as RefreshableLayerView,i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function t(t,d=t.popupTemplate){if(!e(d))return[];const i=await d.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=d,{objectIdField:s,typeIdField:a,globalIdField:o,relationships:u}=t;if(i.includes(\"*\"))return[\"*\"];const f=n?await p(t):[],r=l(t.fieldsIndex,[...i,...f]);return a&&r.push(a),r&&s&&t.fieldsIndex.has(s)&&-1===r.indexOf(s)&&r.push(s),r&&o&&t.fieldsIndex.has(o)&&-1===r.indexOf(o)&&r.push(o),u&&u.forEach((e=>{const{keyField:p}=e;r&&p&&t.fieldsIndex.has(p)&&-1===r.indexOf(p)&&r.push(p)})),r}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,t as getRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{isSome as e,isNone as t}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as r}from\"../../core/unitUtils.js\";import{calculateTolerance as n}from\"../../renderers/support/clickToleranceUtils.js\";import i from\"../../geometry/Extent.js\";function a(t,n,a,o=new i){let s;if(\"2d\"===a.type)s=n*a.resolution;else if(\"3d\"===a.type){const i=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?r(o)/r(a.spatialReference):n*i}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,i){const o=i.toMap(e);if(t(o))return!1;return a(o,n(),i,s).intersects(r)}const s=new i;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction o(o){var n;const l=o.layer;if(\"floorInfo\"in l&&null!=(n=l.floorInfo)&&n.floorField&&\"floors\"in o.view){return r(o.view.floors,l.floorInfo.floorField)}return null}function n(o,n){var l;return\"floorInfo\"in n&&null!=(l=n.floorInfo)&&l.floorField?r(o,n.floorInfo.floorField):null}function l(o,n){const{definitionExpression:l}=n;return o?l?`(${l}) AND (${o})`:o:l}function r(o,n){if(null==o||!o.length)return null;const l=o.filter((o=>\"\"!==o)).map((o=>`'${o}'`));return l.push(\"''\"),`${n} IN (${l.join(\",\")}) OR ${n} IS NULL`}export{l as combineFloorsDefinitionExpression,o as getFloorFilterClause,n as getLayerFloorFilterClause};\n"],"sourceRoot":"webpack:///","file":"6607.2fb15cfa0d3e6270d107.js"}