{"version":3,"mappings":"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","names":["LineString","x","I","ut","ct","lt","me","D","dt","Xe","P","f","O","y","M","v","data","crs","geometryType","geometry","ne","de","ve","we","name","Ce","fields","xe","q","ze","nt","constructor","this","attributes","hasField","isDateField","getFieldIndex","s","n","small","delta","decoded","large","super","area","e","ht","t","error","$","Fe","b","w","S","u","C","fieldName","Z","T","h","i","getSize","getQuantizationTransform","getCursor","getIndex","setIndex","getAttributeHash","index","getObjectId","getDisplayId","setDisplayId","getGroupId","setGroupId","readLegacyFeature","readOptimizedFeature","We","getXHydrated","getYHydrated","getX","getY","readLegacyPointGeometry","readLegacyGeometry","readLegacyCentroid","readGeometryArea","readUnquantizedGeometry","l","o","readHydratedGeometry","le","r","J","readGeometry","readCentroid","copy","next","_readAttribute","toLowerCase","_readAttributes","copyInto","_readAttributeAtIndex","he","_parseGeometry","a","_parseGeometryForDisplay","_","F","Je","d","service","destroy","capabilities","collection","layerDefinition","source","Array","isArray","query","supportsFormatPBF","open","_portsOpen","then","client","close","executeQuery","invoke","toJSON","m","objectIdField","c","quantizationParameters","p","spatialReference","supportsQuantization","clone","features","filter","Number","isFinite","feature","filters","mesh","Q","create","storage","unset","any","describe","console","queryFilter","done","et","signal","end","clear","applyUpdate","add","edit","type","re","message","_invalidate","removeIds","abort","events","_resolver","_didEdit","_subscriptions","Map","_outSR","outSR","_serviceInfo","serviceInfo","_onTileUpdateMessage","onMessage","_onMessage","get","id","te","remove","status","options","update","length","outFields","Set","forEach","has","from","_schema","sort","debug","orderByFields","returnCentroid","returnGeometry","timeReferenceUnknownClient","outSpatialReference","where","definitionExpression","gdbVersion","historicMoment","timeExtent","customParameters","why","push","_queryInfo","resolve","whenInitialized","promise","refresh","resend","_tiles","unsubscribe","subscribe","set","delete","createQuery","Date","U","queryLastEditDate","Error","values","tile","map","createTileQuery","objectIds","result","hasFeatures","key","mode","_adapter","_queue","concurrency","process","replace","depth","level","_patchQueue","some","supportsMaxRecordCountFactor","maxRecordCount","maxRecordCountFactor","Math","min","maxPageSize","enableEvent","_fetchDataTile","catch","readers","path","responseType","editingInfo","lastEditDate","getQuantizationParameters","resultType","extent","maxAllowableOffset","resolution","_executePatchQuery","start","_resend","indexOf","addOrUpdate","joinAttributes","_resendSubscription","empty","requests","edits","Promise","all","maxDrillLevel","returnExceededLimitFeatures","exceededTransferLimit","createChildTiles","Mt","checkForUpdates","_getToAdd","_getToRemove","_nextId","_purge","_purgeSomeByDisplayCount","_purgeByAge","_purgeByAgeReceived","_purgeTracks","ft","onFeature","mt","pr","CONNECTING","OPEN","CLOSING","CLOSED","errorString","sourceSpatialReference","_config","_featureZScaler","_open","_tryCreateWebSocket","destroyed","_handshake","_websocket","onopen","onclose","onerror","onmessage","readyState","_createWebSocket","notifyChange","maxReconnectionAttempts","maxReconnectionInterval","WebSocket","_onClose","_onError","timeout","JSON","parse","reject","wkid","format","send","stringify","_set","code","prototype","maxQueryDepth","_fetchServiceDefinition","timeInfo","trackIdField","warn","_fetchWebSocketUrl","streamUrls","_buddyServicesQuery","_queryBuddyServices","_setFilter","_enrich","_serviceDefinition","urls","token","_inferWebSocketBaseUrl","_serializeFilter","bind","setTimeout","shiftCentralMeridian","join","_relatedFeatures","relatedFeatures","joinField","centroid","keepLatestArchive","_queryRelatedFeatures","_queryArchive","_queryBuddy","featuresUrl","_addRelatedFeatures","default","url","load","supportsPagination","supportsCentroid","num","_queryPages","weakClone","coords","minX","minY","maxX","maxY","forEachVertex","max","onUpdate","_geometryType","_objectIdToFeature","objectId","_index","search","_features","bounds","g","removeById","size","_dataReceiveEventEnabled","_level","_updateInfo","websocket","purgeOptions","serviceFilter","updateInterval","enableDataReceived","_onUpdate","De","vr","_store","_manager","_connection","_quantize","_handles","on","_onFeature","watch","emit","performance","now","_updateIntervalId","setInterval","round","canAcceptRequest","clearInterval","resume","_getTileFeatures","didSend","stream","entries","transform","enqueue","reader","_fetchDataTilePage","pageSize","getColumnForX","floor","normalizeCol","getRowForY","scale","translate","_loading","_controller","AbortController","_downloadPromise","_didSendEnd","_queries","_invalidated","_hasAggregates","_random","store","_markedIdsBufId","createBitset","targets","aggregate","featureCount","_download","_sendPatchQuery","_signal","getBitset","ceil","getInt","_downloadPage","sweepFeatures","sweepFeatureSets","_sendEnd","cacheHint","insert","instance","_send","tileInfoView","row","col","getLODInfoAt","Gr","Or","Ur","cr","Mr","zt","_acquire","_release","dropLevels","insertCursor","removeCursor","find","findSingleOccupancyNode","H","j","N","getRegionDisplayIds","X","L","getRegionStatistics","Ee","count","_forEachNode","_linkChildren","_updateStatisticsCursor","value","_aggregateStatistics","_normalizeStatistics","realloc","getLngLatBounds","jr","geohashX","geohashY","geohashBoundsInfo","cluster_count","displayId","createDisplayId","referenceId","tileLevel","clusterId","_geohashLevel","_tileLevel","_aggregateValueRanges","_aggregateValueRangesChanged","_geohashBuf","_clusters","geometryInfo","_spatialReference","_projectionSupportCheck","R","_bitsets","geohash","inserted","updateSchema","_tree","_statisticFields","_rebuildTree","forEachSet","lookupByDisplayIdUnsafe","_remove","sweepClusters","releaseDisplayId","unsetAttributeData","onTileData","_getTransforms","_update","params","clusterRadius","_getClustersForTile","attachStorage","computed","setComputedAttributes","valueRanges","onTileUpdate","added","removed","_setGeohashLevel","_markTileClustersForDeletion","getAggregate","getAggregates","getFeatureDisplayIdsForAggregate","xLL","yLL","xTR","yTR","getDisplayIdForReferenceId","getAggregateValueRanges","isVisible","_setGeohash","isWebMercator","PI","atan","exp","clusterPixelBuffer","_getGeohashLevel","Ye","wrap","_lookupCluster","left","right","originPosition","valid","_getClusterId","_markForDeletion","_getClusterBounds","getXForColumn","getYForRow","V","xTotal","k","yTotal","B","G","A","_updateAggregateValueRangeForCluster","minValue","maxValue","arguments","_storage","_lastCleanup","_cleanupNeeded","_tileToResolver","tileStore","config","processor","remoteClient","initialize","_initAttributeStore","_initStores","_initQueryEngine","_initSource","_updateQueue","_source","_onTileMessage","handles","onIdle","_checkUpdating","startup","tileScheme","_patchTile","featureStore","_proxyEvents","propertyName","event","attributeStore","invalidateResources","render","hasM","hasZ","fieldsIndex","aggregateStore","queryEngine","cacheSpatialQueries","aggregateAdapter","getFeatureObjectIds","tiles","schema","isUpdating","updating","pause","updateFilters","clearTiles","hasAggregates","onEdits","_lookupObjectIdByGlobalId","globalId","addOrModified","invalidate","onTileClear","_repushCurrentLevelTiles","_markAndSweep","querySummaryStatistics","executeQueryForSummaryStatistics","queryUniqueValues","executeQueryForUniqueValues","queryClassBreaks","executeQueryForClassBreaks","queryHistogram","executeQueryForHistogram","queryExtent","executeQueryForExtent","queryFeatures","queryVisibleFeatures","objectIdFieldName","queryFeatureCount","executeQueryForCount","queryLatestObservations","executeQueryForLatestObservations","queryObjectIds","executeQueryForIds","queryStatistics","storeStatistics","lookupObjectId","lookupDisplayId","getFeatures","getFeature","aggregates","lookupFeatureByDisplayId","readAttributes","setHighlight","globalIdField","readAttribute","_maybeForceCleanup","onTileMessage","setArcadeSpatialReference","hasInstance","sendUpdates","loading","_mark","getInstanceId","forEachBufferId","constructOnly","readOnly","controller","viewState","_paused","_pendingTileUpdates","tileInfo","_createProcessorAndController","updateTiles","pop","_handleControllerConfig","_handleProcessorConfig","_createController","_createProcessor","processors"],"sources":["./node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js","./node_modules/@arcgis/core/views/2d/layers/features/support/FeatureSetReaderPBFHeader.js","./node_modules/@arcgis/core/views/2d/layers/features/support/FeatureSetReaderPBF.js","./node_modules/@arcgis/core/views/2d/layers/features/controllers/support/sourceAdapters.js","./node_modules/@arcgis/core/views/2d/layers/features/support/UpdateToken.js","./node_modules/@arcgis/core/views/2d/layers/features/sources/DataTileSubscription.js","./node_modules/@arcgis/core/views/2d/layers/features/sources/DataTileSource.js","./node_modules/@arcgis/core/views/2d/layers/features/sources/BaseFeatureSource.js","./node_modules/@arcgis/core/views/2d/layers/features/sources/DrillDownFeatureSource.js","./node_modules/@arcgis/core/layers/graphics/data/StreamFeatureManager.js","./node_modules/@arcgis/core/layers/graphics/sources/connections/StreamConnection.js","./node_modules/@arcgis/core/layers/graphics/sources/connections/WebSocketConnection.js","./node_modules/@arcgis/core/layers/graphics/sources/connections/GeoEventConnection.js","./node_modules/@arcgis/core/views/2d/layers/features/sources/GeoEventSource.js","./node_modules/@arcgis/core/layers/graphics/sources/connections/createConnection.js","./node_modules/@arcgis/core/views/2d/layers/features/sources/PagedFeatureSource.js","./node_modules/@arcgis/core/views/2d/layers/features/sources/SnapshotFeatureSource.js","./node_modules/@arcgis/core/views/2d/layers/features/sources/createSource.js","./node_modules/@arcgis/core/geohash/geohashUtils.js","./node_modules/@arcgis/core/geohash/GeohashTree.js","./node_modules/@arcgis/core/views/2d/layers/features/support/ClusterStore.js","./node_modules/@arcgis/core/views/2d/layers/features/controllers/FeatureController2D.js","./node_modules/@arcgis/core/views/2d/layers/features/Pipeline.js","./node_modules/@arcgis/core/views/2d/layers/features/processors.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import t from\"../../OptimizedFeature.js\";import n from\"../../OptimizedGeometry.js\";import{isNumericField as o}from\"../../../support/fieldUtils.js\";const r={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function i(e){return r[e]}function*s(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const t of e.features)t&&(yield t)}}function*c(e){if(!e)return null;switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const t of e.coordinates)yield*t;break;case\"MultiPolygon\":for(const t of e.coordinates)for(const e of t)yield*e}}function*u(e,o={}){const{geometryType:r,objectIdField:s}=o;for(const u of e){var c;const{geometry:e,properties:l,id:f}=u;if(e&&i(e.type)!==r)continue;const a=l||{};let y=null!=(c=a[s])?c:null;s&&null!=f&&!a[s]&&(a[s]=y=f);const p=new t(e?d(new n,e,o):null,a,null,y);yield p}}function l(e){for(const t of e)if(t.length>2)return!0;return!1}function f(e){return!y(e)}function a(e){return y(e)}function y(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n],r=e[(n+1)%e.length];t+=o[0]*r[1]-r[0]*o[1]}return t<=0}function p(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function d(e,t,n){switch(t.type){case\"LineString\":return g(e,t,n);case\"MultiLineString\":return m(e,t,n);case\"MultiPoint\":return h(e,t,n);case\"MultiPolygon\":return w(e,t,n);case\"Point\":return P(e,t,n);case\"Polygon\":return b(e,t,n)}}function g(e,t,n){return F(e,t.coordinates,n),e}function m(e,t,n){for(const o of t.coordinates)F(e,o,n);return e}function h(e,t,n){return F(e,t.coordinates,n),e}function w(e,t,n){for(const o of t.coordinates){j(e,o[0],n);for(let t=1;t<o.length;t++)S(e,o[t],n)}return e}function P(e,t,n){return M(e,t.coordinates,n),e}function b(e,t,n){const o=t.coordinates;j(e,o[0],n);for(let r=1;r<o.length;r++)S(e,o[r],n);return e}function j(e,t,n){const o=p(t);f(o)?G(e,o,n):F(e,o,n)}function S(e,t,n){const o=p(t);a(o)?G(e,o,n):F(e,o,n)}function F(e,t,n){for(const o of t)M(e,o,n);e.lengths.push(t.length)}function G(e,t,n){for(let o=t.length-1;o>=0;o--)M(e,t[o],n);e.lengths.push(t.length)}function M(e,t,n){const[o,r,i]=t;e.coords.push(o,r),n.hasZ&&e.coords.push(i||0)}function k(e){switch(typeof e){case\"string\":return\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function O(t){if(!t)throw new e(\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==t.type&&\"FeatureCollection\"!==t.type)throw new e(\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:t});const{crs:n}=t;if(!n)return;const o=\"string\"==typeof n?n:\"name\"===n.type?n.properties.name:\"EPSG\"===n.type?n.properties.code:null,r=new RegExp(\".*(CRS84H?|4326)$\",\"i\");if(!o||!r.test(o))throw new e(\"geojson-layer:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:n})}function T(e,t={}){const n=[],r=new Set,u=new Set;let f,a=!1,y=null,p=!1,{geometryType:d=null}=t,g=!1;for(const o of s(e)){const{geometry:e,properties:t,id:s}=o;if(!e||(d||(d=i(e.type)),i(e.type)===d)){if(!a){a=l(c(e))}if(p||(p=null!=s,p&&(f=typeof s,y=Object.keys(t).filter((e=>t[e]===s)))),p&&null!=s&&(y.length>1?y=y.filter((e=>t[e]===s)):1===y.length&&(y=t[y[0]]===s?y:[])),!g&&t){let e=!0;for(const o in t){if(r.has(o))continue;const i=t[o];if(null==i){e=!1,u.add(o);continue}const s=k(i);\"unknown\"!==s?(u.delete(o),r.add(o),n.push({name:o,alias:o,type:s})):u.add(o)}g=e}}}const m=y&&1===y.length&&y[0]||null;if(m)for(const i of n)if(i.name===m&&o(i)){i.type=\"esriFieldTypeOID\";break}return{fields:n,geometryType:d,hasZ:a,objectIdFieldName:m,objectIdFieldType:f,unknownFields:Array.from(u)}}function L(e,t){return Array.from(u(s(e),t))}export{L as createOptimizedFeatures,i as getGeometryType,T as inferLayerProperties,O as validateGeoJSON};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Error.js\";import{parseTransform as t,parseFieldType as s}from\"../../../../../rest/query/operations/pbfFeatureServiceParser.js\";const r=268435455;class n{constructor(){this.fieldMap=new Map,this.fields=[],this.hasFeatures=!1,this.fieldCount=0,this.featureCount=0,this.objectIdFieldIndex=0,this.vertexCount=0,this.offsets={attributes:new Array,geometry:new Array},this.centroid=new Array}hasField(e){return this.fieldMap.has(e)}isDateField(e){var t;return null==(t=this.fieldMap.get(e))?void 0:t.isDate}getFieldIndex(e){var t;return null==(t=this.fieldMap.get(e))?void 0:t.index}}function a(e){const t=1,r=2,n=e.getLength(),a=e.pos()+n,i={name:\"\",isDate:!1};for(;e.pos()<a&&e.next();)switch(e.tag()){case t:i.name=e.getString();break;case r:\"esriFieldTypeDate\"===s(e.getEnum())&&(i.isDate=!0);break;default:e.skip()}return i}function i(e){return e.toLowerCase().trim()}function o(s,o,c=!1){const f=1,d=3,l=9,u=12,g=13,p=15,h=s.pos(),m=new n;let b=0,w=0;const k=1,x=2,y=4,I=3;let F=null,L=null,A=null,C=!1;for(;s.next();)switch(s.tag()){case f:F=s.getString();break;case d:L=s.getString();break;case u:A=s.processMessage(t);break;case l:if(m.exceededTransferLimit=s.getBool(),m.exceededTransferLimit){m.offsets.geometry=c?new Float64Array(8e3):new Int32Array(8e3),m.centroid=c?new Float64Array(16e3):new Int32Array(16e3);for(let e=0;e<m.centroid.length;e++)m.centroid[e]=r}break;case g:{const e=a(s),t=e.name,r=i(e.name),n={fieldName:t,index:b++,isDate:e.isDate};m.fields.push(n),m.fieldMap.set(e.name,n),m.fieldMap.set(r,n);break}case p:{const e=s.getLength(),t=s.pos()+e;if(!m.exceededTransferLimit){const e=m.offsets.geometry,t=m.centroid;e.push(0),t.push(r),t.push(r)}!C&&m.exceededTransferLimit&&(C=!0,m.offsets.attributes=c?new Float64Array(8e3*b):new Uint32Array(8e3*b));let n=w*b;for(;s.pos()<t&&s.next();)switch(s.tag()){case k:{if(C)m.offsets.attributes[n++]=s.pos();else{m.offsets.attributes.push(s.pos())}const e=s.getLength();s.skipLen(e);break}case x:if(o){const e=s.getLength(),t=s.pos()+e;for(;s.pos()<t&&s.next();)switch(s.tag()){case I:{s.getUInt32();const e=s.getSInt64(),t=s.getSInt64();m.centroid[2*w]=e,m.centroid[2*w+1]=t;break}default:s.skip()}}else{m.offsets.geometry[w]=s.pos();const e=s.getLength();m.vertexCount+=e,s.skipLen(e)}break;case y:{const e=s.getLength(),t=s.pos()+e;for(;s.pos()<t&&s.next();)switch(s.tag()){case I:{s.getUInt32();const e=s.getSInt64(),t=s.getSInt64();m.centroid[2*w]=e,m.centroid[2*w+1]=t;break}default:s.skip()}break}default:s.skip()}w++,m.hasFeatures=!0;break}default:s.skip()}const S=F||L;if(!S)throw new e(\"FeatureSet has no objectId or globalId field name\");return m.featureCount=w,m.fieldCount=b,m.objectIdFieldIndex=m.getFieldIndex(S),m.transform=A,m.displayIds=new Uint32Array(m.featureCount),m.groupIds=new Uint16Array(m.featureCount),s.move(h),m}export{n as FeatureSetHeader,o as parseHeader};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Error.js\";import t from\"../../../../../core/Logger.js\";import{isNone as r,isSome as s}from\"../../../../../core/maybe.js\";import i from\"../../../../../core/pbf.js\";import{convertToGeometry as n,unquantizeOptimizedGeometry as a}from\"../../../../../layers/graphics/featureConversionUtils.js\";import h from\"../../../../../layers/graphics/OptimizedFeature.js\";import o from\"../../../../../layers/graphics/OptimizedGeometry.js\";import{FeatureSetReader as d}from\"./FeatureSetReader.js\";import{parseHeader as u}from\"./FeatureSetReaderPBFHeader.js\";const c=t.getLogger(\"esri.view.2d.layers.features.support.FeatureSetReaderPBF\"),g=!0,_=268435455,l=128,f=128e3,y={small:{delta:new Int32Array(l),decoded:new Int32Array(l)},large:{delta:new Int32Array(f),decoded:new Int32Array(f)}};function I(e){return e<=y.small.delta.length?y.small:(e<=y.large.delta.length||(y.large.delta=new Int32Array(Math.round(1.25*e)),y.large.decoded=new Int32Array(Math.round(1.25*e))),y.large)}function p(e){return e.toLowerCase().trim()}function m(t){try{const e=2,r=new i(new Uint8Array(t),new DataView(t));for(;r.next();){if(r.tag()===e)return x(r.getMessage());r.skip()}}catch(r){const t=new e(\"query:parsing-pbf\",\"Error while parsing FeatureSet PBF payload\",{error:r});c.error(t)}return null}function x(e){const t=1;for(;e.next();){if(e.tag()===t)return e.getMessage();e.skip()}return null}function S(e){const t=1,r=2,s=3,i=4,n=5,a=6,h=7,o=8,d=9,u=e.getLength(),c=e.pos()+u;for(;e.pos()<c&&e.next();)switch(e.tag()){case t:return e.getString();case r:return e.getFloat();case s:return e.getDouble();case i:return e.getSInt32();case n:return e.getUInt32();case a:return e.getInt64();case h:return e.getUInt64();case o:return e.getSInt64();case d:return e.getBool();default:return e.skip(),null}return null}function F(e,t,r,s,i,n){return.5*Math.abs(e*s+r*n+i*t-e*n-r*t-i*s)}function G(e,t,r,s){return 0===e*s-r*t&&e*r+t*s>0}class v extends d{constructor(e,t,r,s){super(e),this._hasNext=!1,this._isPoints=!1,this._featureIndex=-1,this._featureOffset=0,this._cache={area:0,unquantGeometry:void 0,geometry:void 0,centroid:void 0,legacyFeature:void 0,optFeature:void 0},this._geometryType=s,this._reader=t,this._header=r,this._hasNext=r.hasFeatures,this._isPoints=\"esriGeometryPoint\"===s}static fromBuffer(e,t,r=!1){const s=m(e),i=u(s,\"esriGeometryPoint\"===t,r),n=d.createInstance();return new v(n,s,i,t)}get geometryType(){return this._geometryType}get size(){return this._header.featureCount}get hasZ(){return!1}get hasM(){return!1}get stride(){return 2+(this.hasZ?1:0)+(this.hasM?1:0)}get hasFeatures(){return this._header.hasFeatures}get hasNext(){return this._hasNext}get exceededTransferLimit(){return this._header.exceededTransferLimit}getSize(){return this.size}getQuantizationTransform(){return this._header.transform}getCursor(){return this.copy()}getIndex(){return this._featureIndex}setIndex(e){this._cache.area=0,this._cache.unquantGeometry=void 0,this._cache.geometry=void 0,this._cache.centroid=void 0,this._cache.legacyFeature=void 0,this._cache.optFeature=void 0,this._featureIndex=e}getAttributeHash(){let e=\"\";return this._header.fields.forEach((({index:t})=>{e+=this._readAttributeAtIndex(t)+\".\"})),e}getObjectId(){return this._readAttributeAtIndex(this._header.objectIdFieldIndex)}getDisplayId(){return this._header.displayIds[this._featureIndex]}setDisplayId(e){this._header.displayIds[this._featureIndex]=e}getGroupId(){return this._header.groupIds[this._featureIndex]}setGroupId(e){this._header.groupIds[this._featureIndex]=e}readLegacyFeature(){if(void 0===this._cache.legacyFeature){var e;const t=this.readCentroid(),r={attributes:this.readAttributes(),geometry:this._isPoints?this.readLegacyPointGeometry():this.readLegacyGeometry(),centroid:null!=(e=t&&{x:t.coords[0],y:t.coords[1]})?e:null};return this._cache.legacyFeature=r,r}return this._cache.legacyFeature}readOptimizedFeature(){if(void 0===this._cache.optFeature){const e=new h(this.readGeometry(),this.readAttributes(),this.readCentroid());return e.objectId=this.getObjectId(),e.displayId=this.getDisplayId(),this._cache.optFeature=e,e}return this._cache.optFeature}getXHydrated(){const e=this._header.centroid[2*this._featureIndex],t=this.getQuantizationTransform();return r(t)?e:e*t.scale[0]+t.translate[0]}getYHydrated(){const e=this._header.centroid[2*this._featureIndex+1],t=this.getQuantizationTransform();return r(t)?e:t.translate[1]-e*t.scale[1]}getX(){return this._header.centroid[2*this._featureIndex]*this._sx+this._tx}getY(){return this._header.centroid[2*this._featureIndex+1]*this._sy+this._ty}readLegacyPointGeometry(){return{x:this.getX(),y:this.getY()}}readLegacyGeometry(e){const t=this.readGeometry(e);return n(t,this.geometryType,!1,!1)}readLegacyCentroid(){const e=this.readCentroid();if(!e)return null;const[t,r]=e.coords;return{x:t,y:r}}readGeometryArea(){return this._cache.area||this.readGeometry(!0),this._cache.area}readUnquantizedGeometry(e=!1){if(void 0===this._cache.unquantGeometry){const t=this.readGeometry(e);if(!t)return this._cache.unquantGeometry=null,null;const r=I(t.coords.length).decoded,s=t.clone(r),i=s.coords;let n=0;for(const e of s.lengths){for(let t=1;t<e;t++){const e=2*(n+t),r=2*(n+t-1);i[e]+=i[r],i[e+1]+=i[r+1]}n+=e}return this._cache.unquantGeometry=s,s}return this._cache.unquantGeometry}readHydratedGeometry(){if(this._isPoints){if(this._header.centroid[2*this._featureIndex]===_)return null;const e=this.getXHydrated(),t=this.getYHydrated();return new o([],[e,t])}const e=this.readGeometry();if(!e)return null;const t=e.clone(),r=this.getQuantizationTransform();return s(r)&&a(t,t,this.hasZ,this.hasM,r),t}readGeometry(e=!1){if(void 0===this._cache.geometry){let r=null;if(this._isPoints){if(this._header.centroid[2*this._featureIndex]===_)return null;const e=this.getX(),t=this.getY();r=new o([],[e,t])}else{const s=this._header.offsets.geometry[this._featureIndex],i=this._reader;if(0===s)return null;i.move(s);try{r=e?this._parseGeometryForDisplay(i):this._parseGeometry(i)}catch(t){return console.error(\"Failed to parse geometry!\",t),null}}return this._cache.geometry=r,r}return this._cache.geometry}readCentroid(){if(void 0===this._cache.centroid){let e=null;const t=this._header.centroid[2*this._featureIndex]+this._tx,r=this._header.centroid[2*this._featureIndex+1]+this._ty;return t===_?(e=this._computeCentroid(),e&&(this._header.centroid[2*this._featureIndex]=e.coords[0]-this._tx,this._header.centroid[2*this._featureIndex+1]=e.coords[1]-this._ty)):e=new o([],[t,r]),this._cache.centroid=e,e}return this._cache.centroid}copy(){const e=this._reader.clone(),t=new v(this.instance,e,this._header,this.geometryType);return this.copyInto(t),t}next(){for(this._cache.area=0,this._cache.unquantGeometry=void 0,this._cache.geometry=void 0,this._cache.centroid=void 0,this._cache.legacyFeature=void 0,this._cache.optFeature=void 0;++this._featureIndex<this.size&&!this._getExists(););return this._featureIndex<this.size}_readAttribute(e,t){const r=this._header.hasField(e)?e:p(e),s=this._header.getFieldIndex(r);if(null==s)return;const i=this._readAttributeAtIndex(s);if(!t)return i;if(null==i)return i;return this._header.isDateField(r)?new Date(i):i}_readAttributes(){const e={};return this._header.fields.forEach((({fieldName:t,index:r})=>{e[t]=this._readAttributeAtIndex(r)})),e}copyInto(e){super.copyInto(e),e._featureIndex=this._featureIndex,e._featureOffset=this._featureOffset,e._hasNext=this._hasNext}_readAttributeAtIndex(e){const t=this._header.offsets.attributes[this._featureIndex*this._header.fieldCount+e],r=this._reader;return r.move(t),S(r)}_parseGeometry(e){const t=2,r=3,s=e.getLength(),i=e.pos()+s,n=[],a=[];for(;e.pos()<i&&e.next();)switch(e.tag()){case t:{const t=e.getUInt32(),r=e.pos()+t;for(;e.pos()<r;)a.push(e.getUInt32());break}case r:{const t=e.getUInt32(),r=e.pos()+t;for(n.push(e.getSInt32()+this._tx),n.push(e.getSInt32()+this._ty),this.hasZ&&e.getSInt32(),this.hasM&&e.getSInt32();e.pos()<r;)n.push(e.getSInt32()),n.push(e.getSInt32()),this.hasZ&&e.getSInt32(),this.hasM&&e.getSInt32();break}default:e.skip()}return new o(a,n)}_parseGeometryForDisplay(e){const t=2,r=3,s=e.getLength(),i=e.pos()+s,n=[],a=[];let h=0,d=0,u=null,c=0;const _=\"esriGeometryPolygon\"===this.geometryType;for(;e.pos()<i&&e.next();)switch(e.tag()){case t:{const t=e.getUInt32(),r=e.pos()+t;for(;e.pos()<r;){const t=e.getUInt32();n.push(t),h+=t}u=I(2*h).delta;break}case r:{e.getUInt32();const t=2+(this.hasZ?1:0)+(this.hasM?1:0);for(const r of n)if(d+t*r>u.length)for(let t=0;t<r;t++)e.getSInt32(),e.getSInt32(),this.hasZ&&e.getSInt32(),this.hasM&&e.getSInt32();else if(_&&g){const t=this.getAreaSimplificationThreshold(r,this._header.vertexCount);let s=2,i=1;const n=!1;let h=e.getSInt32(),o=e.getSInt32();u[d++]=h,u[d++]=o,this.hasZ&&e.getSInt32(),this.hasM&&e.getSInt32();let g=e.getSInt32(),_=e.getSInt32();for(this.hasZ&&e.getSInt32(),this.hasM&&e.getSInt32();s<r;){let r=e.getSInt32(),n=e.getSInt32();this.hasZ&&e.getSInt32(),this.hasM&&e.getSInt32();const a=h+g,l=o+_;F(h,o,a,l,a+r,l+n)>=t?(c+=-.5*(a-h)*(l+o),i>1&&G(u[d-2],u[d-1],g,_)?(u[d-2]+=g,u[d-1]+=_):(u[d++]=g,u[d++]=_,i++),h=a,o=l):(r+=g,n+=_),g=r,_=n,s++}i<3||n?d-=2*i:(c+=-.5*(h+g-h)*(o+_+o),G(u[d-2],u[d-1],g,_)?(u[d-2]+=g,u[d-1]+=_,a.push(i)):(u[d++]=g,u[d++]=_,a.push(++i)))}else{let t=0,s=e.getSInt32(),i=e.getSInt32();this.hasZ&&e.getSInt32(),this.hasM&&e.getSInt32(),u[d++]=s,u[d++]=i,t+=1;for(let n=1;n<r;n++){const r=e.getSInt32(),a=e.getSInt32(),h=s+r,o=i+a;c+=-.5*(h-s)*(o+i),this.hasZ&&e.getSInt32(),this.hasM&&e.getSInt32(),n>2&&G(u[d-2],u[d-1],r,a)?(u[d-2]+=r,u[d-1]+=a):(u[d++]=r,u[d++]=a,t+=1),s=h,i=o}a.push(t)}break}default:e.skip()}if(this._cache.area=c,!a.length)return null;if(this._tx||this._ty){let e=0;for(const t of a)u[2*e]+=this._tx,u[2*e+1]+=this._ty,e+=t}return new o(a,u)}}export{v as FeatureSetReaderPBF};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../../core/has.js\";import{isSome as t,unwrap as r}from\"../../../../../../core/maybe.js\";import s from\"../../../../../../core/workers/Connection.js\";import{toQuantizationTransform as i}from\"../../../../../../geometry/support/quantizationUtils.js\";import{convertFromFeatureSet as o,quantizeOptimizedFeatureSet as a}from\"../../../../../../layers/graphics/featureConversionUtils.js\";import{queryOptimizedFeatureSet as n}from\"../../../../../../layers/ogc/ogcFeatureUtils.js\";import{executeQueryPBFBuffer as c,executeQuery as u}from\"../../../../../../rest/query/operations/query.js\";import{FeatureSetReaderJSON as m}from\"../../support/FeatureSetReaderJSON.js\";import{FeatureSetReaderPBF as p}from\"../../support/FeatureSetReaderPBF.js\";class l{constructor(e){this.service=e}destroy(){}}function f(e){return Array.isArray(e.source)}function y(e){return e&&e.capabilities&&e.collection&&e.layerDefinition}function d(t){const{capabilities:r}=t;return y(t.source)?new w(t):f(t)?new F(t):r.query.supportsFormatPBF&&e(\"featurelayer-pbf\")?new q(t):new v(t)}async function h(e){const t=new s;return await t.open(e,{}),t}class F extends l{constructor(e){super(e),this._portsOpen=h(e.source).then((e=>this.client=e))}destroy(){this.client.close(),this.client=null}async executeQuery(e,t){await this._portsOpen;const r=await this.client.invoke(\"queryFeatures\",e.toJSON(),t);return m.fromFeatureSet(r,this.service.objectIdField)}}class q extends l{async executeQuery(e,t){const{data:r}=await c(this.service.source,e,t),s=!e.quantizationParameters;return p.fromBuffer(r,this.service.geometryType,s)}}class v extends l{async executeQuery(e,s){const{source:n,capabilities:c,spatialReference:p,objectIdField:l,geometryType:f}=this.service;if(t(e.quantizationParameters)&&!c.query.supportsQuantization){const t=e.clone(),c=i(r(t.quantizationParameters));t.quantizationParameters=null;const{data:f}=await u(n,t,p,s),y=o(f,l);return a(c,y),m.fromOptimizedFeatureSet(y)}const{data:y}=await u(n,e,this.service.spatialReference,s);var d;\"esriGeometryPoint\"===f&&(y.features=null==(d=y.features)?void 0:d.filter((e=>{if(t(e.geometry)){const t=e.geometry;return Number.isFinite(t.x)&&Number.isFinite(t.y)}return!0})));return m.fromFeatureSet(y,this.service.objectIdField)}}class w extends l{async executeQuery(e,t){const{capabilities:s}=this.service;if(e.quantizationParameters&&!s.query.supportsQuantization){const s=e.clone(),o=i(r(s.quantizationParameters));s.quantizationParameters=null;const c=await n(this.service.source,e,t);return a(o,c),m.fromOptimizedFeatureSet(c)}const o=await n(this.service.source,e,t);return m.fromOptimizedFeatureSet(o)}}export{l as SourceAdapter,d as createSourceAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nclass t{constructor(){this.source=!1,this.targets={feature:!1,aggregate:!1},this.storage={filters:!1,data:!1},this.mesh=!1,this.queryFilter=!1,this.why={mesh:[],source:[]}}static create(e){const s=new t;for(const t in e){const r=e[t];if(\"object\"==typeof r)for(const e in r){const a=r[e];s[t][e]=a}s[t]=r}return s}static empty(){return t.create({})}static all(){return t.create({source:!0,targets:{feature:!0,aggregate:!0},storage:{filters:!0,data:!0},mesh:!0})}unset(t){t.source&&(this.source=!1),t.targets.feature&&(this.targets.feature=!1),t.targets.aggregate&&(this.targets.aggregate=!1),t.storage.filters&&(this.storage.filters=!1),t.storage.data&&(this.storage.data=!1),t.mesh&&(this.mesh=!1),t.queryFilter&&(this.queryFilter=!1)}any(){return this.source||this.mesh||this.storage.filters||this.storage.data||this.targets.feature||this.targets.aggregate||this.queryFilter}describe(){let t=0,e=\"\";if(this.mesh){t+=20,e+=\"-> (20) Mesh needs update\\n\";for(const t of this.why.mesh)e+=`    + ${t}\\n`}if(this.source){t+=10,e+=\"-> (10) The source needs update\\n\";for(const t of this.why.source)e+=`    + ${t}\\n`}this.targets.feature&&(t+=5,e+=\"-> (5) Feature target parameters changed\\n\"),this.storage.filters&&(t+=5,e+=\"-> (5) Feature filter parameters changed\\n\"),this.targets.aggregate&&(t+=4,e+=\"-> (4) Aggregate target parameters changed\\n\"),this.storage.data&&(t+=1,e+=\"-> (1) Texture storage parameters changed\");const s=t<5?\"Fastest\":t<10?\"Fast\":t<15?\"Moderate\":t<20?\"Slow\":\"Very Slow\";console.debug(`Applying ${s} update of cost ${t}/45 `),console.debug(e)}toJSON(){return{queryFilter:this.queryFilter,source:this.source,targets:this.targets,storage:this.storage,mesh:this.mesh}}}export{t as UpdateToken};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/CircularArray.js\";import{isSome as t,isNone as s,unwrap as r}from\"../../../../../core/maybe.js\";import{FeatureSetReaderJSON as d}from\"../support/FeatureSetReaderJSON.js\";import{UpdateToken as i}from\"../support/UpdateToken.js\";class a{constructor(t){this.requests={done:new Array,stream:new e(10)},this._edits=null,this._abortController=new AbortController,this._done=!1,this.didSend=!1,this.tile=t}get signal(){return this._abortController.signal}get options(){return{signal:this._abortController.signal}}get empty(){return!this.requests.done.length}get edits(){return this._edits}get done(){return this._done}end(){this._done=!0}clear(){this.requests.done=[]}applyUpdate(e){this.requests.done.forEach((t=>t.message.status.unset(e))),t(this._edits)&&this._edits.status.unset(e)}add(e){var s;e.message.status=null!=(s=e.message.status)?s:i.empty(),e.message.end&&this.requests.done.forEach((e=>{t(e.message)&&e.message.end&&(e.message.end=!1)})),this.requests.done.push(e)}edit(e,t){const a=e.getQuantizationTransform(),o=e.geometryType,n=Array.from(e.features()),h=[...t,...n.map((e=>e.objectId))];if(this.removeIds(h),this._invalidate(),s(this._edits))return void(this._edits={type:\"append\",addOrUpdate:d.fromOptimizedFeatures(n,o,r(a)),id:this.tile.id,status:i.empty(),end:!0});this.requests.done.forEach((e=>e.message.end=!1));r(this._edits.addOrUpdate).append(e.features())}*readers(){for(const{message:e}of this.requests.done)t(e.addOrUpdate)&&(yield e.addOrUpdate);t(this._edits)&&t(this._edits.addOrUpdate)&&(yield this._edits.addOrUpdate)}_invalidate(){for(const e of this.requests.done)e.message.status=i.empty();t(this._edits)&&(this._edits.status=i.empty())}removeIds(e){this._invalidate();for(const{message:s}of this.requests.done){const r=s.addOrUpdate;t(r)&&(r.removeIds(e),r.isEmpty&&(s.addOrUpdate=null))}t(this._edits)&&t(this._edits.addOrUpdate)&&this._edits.addOrUpdate.removeIds(e),this.requests.done=this.requests.done.filter((e=>e.message.addOrUpdate||e.message.end))}abort(){this._abortController.abort()}}export{a as DataTileSubscription};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../TimeExtent.js\";import s from\"../../../../../core/Evented.js\";import t from\"../../../../../core/has.js\";import{isSome as r}from\"../../../../../core/maybe.js\";import{createResolver as i,eachAlwaysValues as o,eachAlways as n}from\"../../../../../core/promiseUtils.js\";import{diff as c,hasDiff as u,hasDiffAny as a}from\"../../../../../core/accessorSupport/diffUtils.js\";import h from\"../../../../../rest/support/Query.js\";import{DataTileSubscription as d}from\"./DataTileSubscription.js\";function l(e,s){const t=new Set;return e&&e.forEach((e=>t.add(e))),s&&s.forEach((e=>t.add(e))),t.has(\"*\")?[\"*\"]:Array.from(t)}class m{constructor(e){this.events=new s,this._resolver=i(),this._didEdit=!1,this._subscriptions=new Map,this._outSR=e.outSR,this._serviceInfo=e.serviceInfo,this._onTileUpdateMessage=e.onMessage}destroy(){}async _onMessage(e){var s;const t=this._subscriptions.get(e.id);if(!t)return;const r={...e,remove:null!=(s=e.remove)?s:[],status:e.status};return this._onTileUpdateMessage(r,t.options)}update(s,r){var i;const o=r.fields.length;r.outFields=l(null==(i=this._schema)?void 0:i.outFields,r.outFields),r.outFields=r.outFields.length>=.75*o?[\"*\"]:r.outFields,r.outFields.sort();const n=c(this._schema,r);if(!n)return;t(\"esri-2d-update-debug\")&&console.debug(\"Applying Update - Source:\",n);const h=\"orderByFields\"in this._serviceInfo&&this._serviceInfo.orderByFields?this._serviceInfo.orderByFields:this._serviceInfo.objectIdField+\" ASC\",d={returnCentroid:t(\"esri-2d-query-centroid-enabled\")&&\"esriGeometryPolygon\"===this._serviceInfo.geometryType,returnGeometry:!0,timeReferenceUnknownClient:\"stream\"!==this._serviceInfo.type&&this._serviceInfo.timeReferenceUnknownClient,outFields:r.outFields,outSpatialReference:this._outSR,orderByFields:[h],where:r.definitionExpression||\"1=1\",gdbVersion:r.gdbVersion,historicMoment:r.historicMoment,timeExtent:e.fromJSON(r.timeExtent),customParameters:r.customParameters},m=this._schema&&u(n,\"outFields\");this._schema&&a(n,[\"timeExtent\",\"definitionExpression\",\"gdbVersion\",\"historicMoment\",\"customParameters\"])&&(s.why.mesh.push(\"Layer filter and/or custom parameters changed\"),s.why.source.push(\"Layer filter and/or custom parameters changed\"),s.mesh=!0,s.source=!0,s.queryFilter=!0),m&&(s.why.source.push(\"Layer required fields changed\"),s.source=!0),c(d,this._queryInfo)&&(this._queryInfo=d),this._schema=r,this._resolver.resolve()}whenInitialized(){return this._resolver.promise}async applyUpdate(e){if(e.queryFilter||e.source&&this._didEdit)return this.refresh(),void(this._didEdit=!1);this._subscriptions.forEach((s=>s.applyUpdate(e))),await this.resend()}refresh(){for(const e of this._tiles())this.unsubscribe(e),this.subscribe(e)}subscribe(e){const s=new d(e);this._subscriptions.set(e.id,s)}unsubscribe(e){const s=this.get(e.id);r(s)&&s.abort(),this._subscriptions.delete(e.id)}createQuery(e={}){const s=this._queryInfo.historicMoment?new Date(this._queryInfo.historicMoment):null;return new h({...this._queryInfo,historicMoment:s,...e})}get(e){return this._subscriptions.has(e)?this._subscriptions.get(e):null}async queryLastEditDate(){throw new Error(\"Service does not support query type\")}async query(e){throw new Error(\"Service does not support query\")}*_tiles(){const e=Array.from(this._subscriptions.values());for(const s of e)yield s.tile}async edit(e,s){const t=Array.from(this._subscriptions.values()),r=t.map((({tile:e})=>e));for(const i of t)i.removeIds(s);if(e.length){const t=r.map((s=>{const t=this.createTileQuery(s);return t.objectIds=e,{tile:s,query:t}})).map((async({tile:e,query:s})=>({tile:e,result:await this.query(s),query:s}))),i=(await o(t)).map((async({tile:t,result:r})=>{if(!r.hasFeatures&&!s.length&&!e.length)return;const i=this._subscriptions.get(t.key.id);i&&i.edit(r,e)}));await n(i)}this._didEdit=!0}}export{m as DataTileSource};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../request.js\";import t from\"../../../../../core/Error.js\";import r from\"../../../../../core/has.js\";import s from\"../../../../../core/Logger.js\";import{isSome as i,unwrapOr as a,isNone as o}from\"../../../../../core/maybe.js\";import{throwIfAborted as n,isAbortError as u}from\"../../../../../core/promiseUtils.js\";import{createSourceAdapter as c}from\"../controllers/support/sourceAdapters.js\";import{DataTileSource as d}from\"./DataTileSource.js\";import{QueueProcessor as l}from\"../../../../support/QueueProcessor.js\";const p=s.getLogger(\"esri.views.2d.layers.features.sources.BaseFeatureSource\"),h=4;class y extends d{constructor(e){super(e),this.type=\"feature\",this.mode=\"on-demand\",this._adapter=c(e.serviceInfo),this._queue=new l({concurrency:8,process:async e=>{if(n(e),i(e.tile)){const t=e.tile.key.id,{signal:s}=e,i=r(\"esri-tiles-debug\")?{tile:t.replace(/\\//g,\".\"),depth:e.depth}:void 0,a=await this._adapter.executeQuery(e.query,{signal:s,query:{...i,...this._schema.customParameters}});return a.level=e.tile.key.level,a}return this._adapter.executeQuery(e.query,{...e,query:this._schema.customParameters})}}),this._patchQueue=new l({concurrency:8,process:async e=>{if(n(e),i(e.tile)){const t=e.tile.key.id,{signal:s}=e,i=r(\"esri-tiles-debug\")?{tile:t.replace(/\\//g,\".\"),depth:e.depth}:void 0,a=await this._adapter.executeQuery(e.query,{signal:s,query:{...i,...this._schema.customParameters}});return a.level=e.tile.key.level,a}return this._adapter.executeQuery(e.query,{...e,query:this._schema.customParameters})}})}destroy(){super.destroy(),this._adapter.destroy(),this._queue.destroy(),this._patchQueue.destroy()}get updating(){return!!this._queue.length||Array.from(this._subscriptions.values()).some((e=>!e.done))}get maxRecordCountFactor(){const{query:e}=this._serviceInfo.capabilities;return e.supportsMaxRecordCountFactor?h:null}get maxPageSize(){var e;const{query:t}=this._serviceInfo.capabilities;return(null!=(e=t.maxRecordCount)?e:8e3)*a(this.maxRecordCountFactor,1)}get pageSize(){return Math.min(8e3,this.maxPageSize)}enableEvent(e,t){}subscribe(e){super.subscribe(e);const r=this._subscriptions.get(e.id);this._fetchDataTile(e).catch((r=>{u(r)||p.error(new t(\"mapview-query-error\",\"Encountered error when fetching tile\",{tile:e,error:r}))})).then((()=>r.end()))}unsubscribe(e){super.unsubscribe(e)}readers(e){return this._subscriptions.get(e).readers()}async query(e){return this._adapter.executeQuery(e,{query:this._schema.customParameters})}async queryLastEditDate(){const t=this._serviceInfo.source,r={...t.query,f:\"json\"};return(await e(t.path,{query:r,responseType:\"json\"})).data.editingInfo.lastEditDate}createTileQuery(e,t={}){var r;const s=this.createQuery(t);return s.quantizationParameters=null!=(r=t.quantizationParameters)?r:e.getQuantizationParameters(),s.resultType=\"tile\",s.geometry=e.extent,s.quantizationParameters&&\"esriGeometryPolyline\"===this._serviceInfo.geometryType&&(s.maxAllowableOffset=e.resolution),s}async _executePatchQuery(e,t,r,s){const a=t.clone();a.outFields=[this._serviceInfo.objectIdField,...r],a.returnCentroid=!1,a.returnGeometry=!1;const o=i(a.start)?a.start/8e3:0,n=s.signal;return this._patchQueue.push({tile:e,query:a,signal:n,depth:o})}async _resend(e,t){const{query:r,message:s}=e,a=i(r.outFields)?r.outFields:[],u=this._queryInfo.outFields,c=u.filter((e=>-1===a.indexOf(e)));if(o(s.addOrUpdate))this._onMessage({...s,type:\"append\"});else if(c.length)try{const e=this._subscriptions.get(s.id).tile,i=await this._executePatchQuery(e,r,c,t);n(t),r.outFields=u,s.addOrUpdate.joinAttributes(i),this._onMessage({...s,end:s.end,type:\"append\"})}catch(d){}else this._onMessage({...s,type:\"append\"})}async _resendSubscription(e){if(e.empty)return this._onMessage({id:e.tile.id,addOrUpdate:null,end:!1,type:\"append\"});const t=e.signal;for(const r of e.requests.done)await this._resend(r,{signal:t});return i(e.edits)?this._onMessage(e.edits):void 0}async resend(){const e=Array.from(this._subscriptions.values());await Promise.all(e.map((e=>this._resendSubscription(e))))}}export{y as BaseFeatureSource};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/has.js\";import{throwIfAborted as t,isAbortError as r}from\"../../../../../core/promiseUtils.js\";import{BaseFeatureSource as s}from\"./BaseFeatureSource.js\";const i=e(\"esri-mobile\"),a={maxDrillLevel:i?1:4,maxRecordCountFactor:i?1:3};class o extends s{constructor(e){super(e)}async _fetchDataTile(e){const s=this._serviceInfo.capabilities.query.supportsMaxRecordCountFactor,i=this._subscriptions.get(e.key.id),o=i.signal,n=e.getQuantizationParameters();let c=0;const d=async(u,l)=>{const p=this._queryInfo,m=this.createTileQuery(u,{maxRecordCountFactor:s?a.maxRecordCountFactor:void 0,returnExceededLimitFeatures:!1,quantizationParameters:n});c++;try{const r=await this._queue.push({tile:e,query:m,signal:o,depth:l});if(c--,t(o),!r)return;if(p!==this._queryInfo)return void d(u,l);if(r.exceededTransferLimit&&l<a.maxDrillLevel){for(const e of u.createChildTiles())d(e,l+1);return}const s={id:e.id,addOrUpdate:r,end:0===c,type:\"append\"};i.add({query:m,message:s}),this._onMessage(s)}catch(h){r(h)||this._onMessage({id:e.id,addOrUpdate:null,end:!0,type:\"append\"})}};d(e,0)}}export{o as DrillDownFeatureSource};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../core/CircularArray.js\";import{clamp as e}from\"../../../core/mathUtils.js\";import{isNone as s,isSome as i,unwrap as r}from\"../../../core/maybe.js\";const o=\"__esri_stream_id__\",d=\"__esri_timestamp__\",a=1e3;class h{constructor(t,e,s,i,r=128){this._trackIdToObservations=new Map,this._idCounter=0,this._lastPurge=performance.now(),this._addOrUpdated=new Map,this._removed=[],this._maxAge=0,this._timeInfo=s,this._purgeOptions=i,this.store=t,this.objectIdField=e,this.purgeInterval=r,this._useGeneratedIds=this.objectIdField===o}add(r){if(this._useGeneratedIds){const t=this._nextId();r.attributes[this.objectIdField]=t,r.objectId=t}else r.objectId=r.attributes[this.objectIdField];if(this._addOrUpdated.set(r.objectId,r),this._maxAge=Math.max(this._maxAge,r.attributes[this._timeInfo.startTimeField]),!this._timeInfo.trackIdField)return s(this._trackIdLessObservations)&&(this._trackIdLessObservations=new t(1e5)),void this._trackIdLessObservations.enqueue(r.objectId);const o=r.attributes[this._timeInfo.trackIdField];if(!this._trackIdToObservations.has(o)){const s=i(this._purgeOptions)&&null!=this._purgeOptions.maxObservations?this._purgeOptions.maxObservations:a,r=e(s,0,a);this._trackIdToObservations.set(o,new t(r))}const d=this._trackIdToObservations.get(o).enqueue(r.objectId);i(d)&&(this._addOrUpdated.has(d)?this._addOrUpdated.delete(d):this._removed.push(d))}checkForUpdates(){const t=this._getToAdd(),e=this._getToRemove(),s=performance.now();s-this._lastPurge>=this.purgeInterval&&(this._purge(s),this._lastPurge=s);const r=[];if(i(e))for(const o of e){const t=this.store.removeById(o);i(t)&&r.push(t)}if(i(t))for(const i of t)i.attributes[d]=s,this.store.add(i);(t||r)&&this.store.update(t,r)}_getToAdd(){if(!this._addOrUpdated.size)return null;const t=new Array(this._addOrUpdated.size);let e=0;return this._addOrUpdated.forEach((s=>t[e++]=s)),this._addOrUpdated.clear(),t}_getToRemove(){const t=this._removed;return this._removed.length?(this._removed=[],t):null}_nextId(){const t=this._idCounter;return this._idCounter=(this._idCounter+1)%4294967294+1,t}_purge(t){const e=this._purgeOptions;i(e)&&(this._purgeSomeByDisplayCount(e),this._purgeByAge(e),this._purgeByAgeReceived(t,e),this._purgeTracks())}_purgeSomeByDisplayCount(t){if(!t.displayCount)return;let e=this.store.size;if(e>t.displayCount){if(this._timeInfo.trackIdField)for(const s of this._trackIdToObservations.values())if(e>t.displayCount&&s.size){const t=r(s.dequeue());this._removed.push(t),e--}if(i(this._trackIdLessObservations)){let s=e-t.displayCount;for(;s-- >0;){const t=this._trackIdLessObservations.dequeue();i(t)&&this._removed.push(t)}}}}_purgeByAge(t){var e;if(!t.age||null==(e=this._timeInfo)||!e.startTimeField)return;const s=60*t.age*1e3,i=this._maxAge-s;this.store.forEach((t=>{t.attributes[this._timeInfo.startTimeField]<i&&this._removed.push(t.objectId)}))}_purgeByAgeReceived(t,e){if(!e.ageReceived)return;const s=t-60*e.ageReceived*1e3;this.store.forEach((t=>{t.attributes[d]<s&&this._removed.push(t.objectId)}))}_purgeTracks(){this._trackIdToObservations.forEach(((t,e)=>{0===t.size&&this._trackIdToObservations.delete(e)}))}}export{o as DEFAULT_STREAM_ID_FIELD,d as ESRI_TIMESTAMP,h as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Evented.js\";import{HandleOwner as s}from\"../../../../core/HandleOwner.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/set.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";let t=class extends(e.EventedMixin(s)){onFeature(r){this.emit(\"feature\",r)}};t=r([o(\"esri.layers.graphics.sources.connections.StreamConnection\")],t);const c=t;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Error.js\";import o from\"../../../../core/Logger.js\";import{isSome as r,isNone as s}from\"../../../../core/maybe.js\";import{after as n,createResolver as c}from\"../../../../core/promiseUtils.js\";import{addQueryParameters as i}from\"../../../../core/urlUtils.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{getGeometryZScaler as d}from\"../../../../geometry/support/zscale.js\";import h from\"./StreamConnection.js\";const p=o.getLogger(\"esri.layers.graphics.sources.connections.WebSocketConnection\");var u;!function(e){e[e.CONNECTING=0]=\"CONNECTING\",e[e.OPEN=1]=\"OPEN\",e[e.CLOSING=2]=\"CLOSING\",e[e.CLOSED=3]=\"CLOSED\"}(u||(u={}));let m=class extends h{constructor(e){super(),this.errorString=null;const{geometryType:t,spatialReference:o,sourceSpatialReference:r}=e;this._config=e,this._featureZScaler=d(t,r,o),this._open()}async _open(){await this._tryCreateWebSocket(),this.destroyed||await this._handshake()}destroy(){r(this._websocket)&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close()),this._websocket=null}get connectionStatus(){if(s(this._websocket))return\"disconnected\";switch(this._websocket.readyState){case u.CONNECTING:case u.OPEN:return\"connected\";case u.CLOSING:case u.CLOSED:return\"disconnected\"}}async _tryCreateWebSocket(e=this._config.source.path,o=1e3,r=0){try{if(this.destroyed)return;const t=i(e,this._config.customParameters);this._websocket=await this._createWebSocket(t),this.notifyChange(\"connectionStatus\")}catch(s){const c=o/1e3;return this._config.maxReconnectionAttempts&&r>=this._config.maxReconnectionAttempts?(p.error(new t(\"websocket-connection\",\"Exceeded maxReconnectionAttempts attempts. No further attempts will be made\")),void this.destroy()):(p.error(new t(\"websocket-connection\",`Failed to connect. Attempting to reconnect in ${c}s`,s)),await n(o),this._tryCreateWebSocket(e,Math.min(1.5*o,1e3*this._config.maxReconnectionInterval),r+1))}}_createWebSocket(e){return new Promise(((t,o)=>{const r=new WebSocket(e);r.onopen=()=>{if(r.onopen=null,this.destroyed)return r.onclose=null,void r.close();r.onclose=e=>this._onClose(e),r.onerror=e=>this._onError(e),r.onmessage=e=>this._onMessage(e),t(r)},r.onclose=e=>{r.onopen=r.onclose=null,o(e)}}))}async _handshake(e=1e4){const o=this._websocket;if(s(o))return;const r=c(),n=o.onmessage,{filter:i,outFields:a,spatialReference:l}=this._config;return r.timeout(e),o.onmessage=e=>{var s;let c=null;try{c=JSON.parse(e.data)}catch(d){}c&&\"object\"==typeof c||(p.error(new t(\"websocket-connection\",\"Protocol violation. Handshake failed - malformed message\",e.data)),r.reject(),this.destroy()),(null==(s=c.spatialReference)?void 0:s.wkid)!==(null==l?void 0:l.wkid)&&(p.error(new t(\"websocket-connection\",`Protocol violation. Handshake failed - expected wkid of ${l.wkid}`,e.data)),r.reject(),this.destroy()),\"json\"!==c.format&&(p.error(new t(\"websocket-connection\",\"Protocol violation. Handshake failed - format is not set\",e.data)),r.reject(),this.destroy()),i&&c.filter!==i&&p.error(new t(\"websocket-connection\",\"Tried to set filter, but server doesn't support it\")),a&&c.outFields!==a&&p.error(new t(\"websocket-connection\",\"Tried to set outFields, but server doesn't support it\")),o.onmessage=n,r.resolve()},o.send(JSON.stringify({filter:i,outFields:a,format:\"json\",spatialReference:{wkid:l.wkid}})),r.promise}_onMessage(e){try{const o=JSON.parse(e.data);if(\"featureResult\"!==o.type)throw new t(\"websocket-connection\",\"Protocol violation - Expected to find message of type 'featureResult'\",o);for(const e of o.features)r(this._featureZScaler)&&this._featureZScaler(e.geometry),this.onFeature(e)}catch(o){return p.error(new t(\"websocket-connection\",\"Failed to parse message\",o)),void this.destroy()}}_onError(e){const t=\"Encountered an error over WebSocket connection\";this._set(\"errorString\",t),p.error(\"websocket-connection\",t)}_onClose(e){this._websocket=null,this.notifyChange(\"connectionStatus\"),1e3!==e.code&&p.error(\"websocket-connection\",`WebSocket closed unexpectedly with error code ${e.code}`),this.destroyed||this._open()}};e([a()],m.prototype,\"connectionStatus\",null),e([a()],m.prototype,\"errorString\",void 0),m=e([l(\"esri.layers.graphics.sources.connections.WebSocketConnection\")],m);export{u as ReadyState,m as WebSocketConnection};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import t from\"../../../../request.js\";import r from\"../../../../core/Error.js\";import o from\"../../../../core/Logger.js\";import{isSome as s,isNone as i,unwrapOr as n,get as a}from\"../../../../core/maybe.js\";import{createResolver as c}from\"../../../../core/promiseUtils.js\";import{addQueryParameters as u}from\"../../../../core/urlUtils.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/set.js\";import{subclass as f}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{WebSocketConnection as d}from\"./WebSocketConnection.js\";import{executeQuery as h}from\"../../../../rest/query/operations/query.js\";import l from\"../../../../rest/support/Query.js\";import{fromJSON as y}from\"../../../../geometry/support/jsonUtils.js\";import m from\"../../../../geometry/SpatialReference.js\";const p=o.getLogger(\"esri.layers.graphics.sources.connections.GeoEventConnection\"),g=1e4,_={maxQueryDepth:5,maxRecordCountFactor:3};let w=class extends d{constructor(e){super({..._,...e})}async _open(){const e=await this._fetchServiceDefinition(this._config.source);e.timeInfo.trackIdField||p.warn(\"GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.\");const t=this._fetchWebSocketUrl(e.streamUrls,this._config.spatialReference);this._buddyServicesQuery||(this._buddyServicesQuery=this._queryBuddyServices()),await this._buddyServicesQuery,await this._tryCreateWebSocket(t);const{filter:r,outFields:o}=this._config;this.destroyed||this._setFilter(r,o)}_onMessage(e){let t;try{t=this._enrich(JSON.parse(e.data)),s(this._featureZScaler)&&this._featureZScaler(t.geometry)}catch(o){return void p.error(new r(\"geoevent-connection\",\"Failed to parse message\",o))}this.onFeature(t)}async _fetchServiceDefinition(e){const r={f:\"json\",...this._config.customParameters},o=t(e.path,{query:r,responseType:\"json\"}),s=(await o).data;return this._serviceDefinition=s,s}_fetchWebSocketUrl(e,t){const r=e[0],{urls:o,token:s}=r,i=this._inferWebSocketBaseUrl(o);return u(`${i}/subscribe`,{outSR:\"\"+t.wkid,token:s})}_inferWebSocketBaseUrl(e){if(1===e.length)return e[0];for(const t of e)if(-1!==t.indexOf(\"wss\"))return t;return p.error(new r(\"geoevent-connection\",\"Unable to infer WebSocket url\",e)),null}async _setFilter(e,t){const o=this._websocket;if(i(o)||i(e)&&i(t))return;const s=JSON.stringify({filter:this._serializeFilter(e,t)});let n=!1;const a=c(),u=()=>{n||(this.destroyed||this._websocket!==o||p.error(new r(\"geoevent-connection\",\"Server timed out when setting filter\")),a.reject())},f=e=>{const t=JSON.parse(e.data);t.filter&&(t.error&&(p.error(new r(\"geoevent-connection\",\"Failed to set service filter\",t.error)),this._set(\"errorString\",`Could not set service filter - ${t.error}`),a.reject(t.error)),o.onmessage=this._onMessage.bind(this),n=!0,a.resolve())};return o.onmessage=f,o.send(s),setTimeout(u,g),a.promise}_serializeFilter(e,t){const o={};if(i(e)&&i(t))return o;if(s(e)&&e.geometry)try{const t=y(e.geometry);if(\"extent\"!==t.type)throw new r(`Expected extent but found type ${t.type}`);o.geometry=JSON.stringify(t.shiftCentralMeridian())}catch(n){p.error(new r(\"geoevent-connection\",\"Encountered an error when setting connection geometryDefinition\",n))}return s(e)&&e.where&&\"1 = 1\"!==e.where&&(o.where=e.where),s(t)&&(o.outFields=t.join(\",\")),o}_enrich(e){if(!this._relatedFeatures)return e;const t=this._serviceDefinition.relatedFeatures.joinField,o=e.attributes[t];if(!this._relatedFeatures.has(o))return p.warn(\"geoevent-connection\",\"Feature join failed. Is the join field configured correctly?\",e),e;const{attributes:s,geometry:i}=this._relatedFeatures.get(o);for(const r in s)e.attributes[r]=s[r];return i&&(e.geometry=i),e.geometry||e.centroid||p.error(new r(\"geoevent-connection\",\"Found malformed feature - no geometry found\",e)),e}async _queryBuddyServices(){try{const{relatedFeatures:e,keepLatestArchive:t}=this._serviceDefinition,r=this._queryRelatedFeatures(e),o=this._queryArchive(t);await r;const s=await o;if(!s)return;for(const i of s.features)this.onFeature(this._enrich(i))}catch(e){p.error(new r(\"geoevent-connection\",\"Encountered an error when querying buddy services\",{error:e}))}}async _queryRelatedFeatures(e){if(!e)return;const t=await this._queryBuddy(e.featuresUrl);this._addRelatedFeatures(t)}async _queryArchive(e){if(e)return this._queryBuddy(e.featuresUrl)}async _queryBuddy(e){const t=new((await import(\"../../../FeatureLayer.js\")).default)({url:e}),{capabilities:r}=await t.load(),o=r.query.supportsMaxRecordCountFactor,s=r.query.supportsPagination,i=r.query.supportsCentroid,c=this._config.maxRecordCountFactor,u=t.capabilities.query.maxRecordCount,f=o?u*c:u,d=new l;if(d.outFields=n(this._config.outFields,[\"*\"]),d.where=n(a(this._config.filter,\"where\"),\"1=1\"),d.returnGeometry=!0,d.returnExceededLimitFeatures=!0,d.outSpatialReference=m.fromJSON(this._config.spatialReference),i&&(d.returnCentroid=!0),o&&(d.maxRecordCountFactor=c),s)return d.num=f,t.destroy(),this._queryPages(e,d);const y=await h(e,d,this._config.sourceSpatialReference);return t.destroy(),y.data}async _queryPages(e,t,r=[],o=0){t.start=s(t.num)?o*t.num:null;const{data:i}=await h(e,t,this._config.sourceSpatialReference);return i.exceededTransferLimit&&o<this._config.maxQueryDepth?(i.features.forEach((e=>r.push(e))),this._queryPages(e,t,r,o+1)):(r.forEach((e=>i.features.push(e))),i)}_addRelatedFeatures(e){const t=new Map,r=e.features,o=this._serviceDefinition.relatedFeatures.joinField;for(const s of r){const e=s.attributes[o];t.set(e,s)}this._relatedFeatures=t}};w=e([f(\"esri.layers.graphics.sources.connections.GeoEventConnection\")],w);const F=w;export{F as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../../core/has.js\";import{isSome as e}from\"../../../../../core/maybe.js\";import{r as t}from\"../../../../../chunks/rbush.js\";import{convertFromFeature as s,quantizeOptimizedGeometry as r,quantizeX as n,quantizeY as o}from\"../../../../../layers/graphics/featureConversionUtils.js\";import i from\"../../../../../layers/graphics/OptimizedGeometry.js\";import a from\"../../../../../layers/graphics/data/StreamFeatureManager.js\";import{createConnection as c}from\"../../../../../layers/graphics/sources/connections/createConnection.js\";import{DataTileSource as d}from\"./DataTileSource.js\";import{FeatureSetReaderJSON as u}from\"../support/FeatureSetReaderJSON.js\";import{UpdateToken as h}from\"../support/UpdateToken.js\";const m=2500;function p(t,s){const r=t.weakClone();if(e(t.geometry)){const e=n(s,t.geometry.coords[0]),a=o(s,t.geometry.coords[1]);r.geometry=new i([],[e,a])}return r}function l(e){return\"esriGeometryPoint\"===e?p:(t,s)=>{const n=t.weakClone(),o=new i,a=!1,c=!1,d=r(o,t.geometry,a,c,e,s,!1,!1);return n.geometry=d,n}}function _(t){return\"esriGeometryPoint\"===t?t=>e(t.geometry)?{minX:t.geometry.coords[0],minY:t.geometry.coords[1],maxX:t.geometry.coords[0],maxY:t.geometry.coords[1]}:{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}:t=>{let s=1/0,r=1/0,n=-1/0,o=-1/0;return e(t.geometry)&&t.geometry.forEachVertex(((e,t)=>{s=Math.min(s,e),r=Math.min(r,t),n=Math.max(n,e),o=Math.max(o,t)})),{minX:s,minY:r,maxX:n,maxY:o}}}function f(e,s){const r=t(9,_(s));return r.load(e),r}function g(e,t){return e.search({minX:t.bounds[0],minY:t.bounds[1],maxX:t.bounds[2],maxY:t.bounds[3]})}class y{constructor(e,t){this.onUpdate=e,this._geometryType=t,this._objectIdToFeature=new Map}get _features(){const e=[];return this._objectIdToFeature.forEach((t=>e.push(t))),e}add(e){this._objectIdToFeature.set(e.objectId,e),this._index=null}get(e){return this._objectIdToFeature.has(e)?this._objectIdToFeature.get(e):null}forEach(e){this._objectIdToFeature.forEach(e)}search(e){return this._index||(this._index=f(this._features,this._geometryType)),g(this._index,e)}removeById(e){const t=this._objectIdToFeature.get(e);return t?(this._objectIdToFeature.delete(e),this._index=null,t):null}update(e,t){this.onUpdate(e,t)}get size(){return this._objectIdToFeature.size}}class b extends d{constructor(e){super(e),this.type=\"geoevent\",this._dataReceiveEventEnabled=!1,this._level=0,this._updateInfo={websocket:0,client:0};const{outSR:t}=e,{geometryType:s,objectIdField:r,timeInfo:n,purgeOptions:o,source:i,spatialReference:d,serviceFilter:u,maxReconnectionAttempts:h,maxReconnectionInterval:p,updateInterval:_,enableDataReceived:f,customParameters:g}=e.serviceInfo,b=new y(this._onUpdate.bind(this),s),v=new a(b,r,n,o),I=c(i,d,t,s,u,h,p,g);this._store=b,this._manager=v,this._connection=I,this._quantize=l(s),this._dataReceiveEventEnabled=f,this._handles=[this._connection.on(\"feature\",(e=>this._onFeature(e))),this._connection.watch(\"connectionStatus\",(e=>this.events.emit(\"connectionStatus\",e))),this._connection.watch(\"errorString\",(e=>this.events.emit(\"errorString\",e)))];let F=performance.now();this._updateIntervalId=setInterval((()=>{const t=performance.now(),s=t-F;if(s>m){F=t;const e=Math.round(this._updateInfo.client/(s/1e3)),r=Math.round(this._updateInfo.websocket/(s/1e3));this._updateInfo.client=0,this._updateInfo.websocket=0,this.events.emit(\"updateRate\",{client:e,websocket:r})}e.canAcceptRequest()&&this._manager.checkForUpdates()}),_)}destroy(){super.destroy(),clearInterval(this._updateIntervalId),this._handles.forEach((e=>e.remove())),this._connection.destroy()}_fetchDataTile(){}resume(){}enableEvent(e,t){\"data-received\"===e&&(this._dataReceiveEventEnabled=t)}get updating(){return!1}subscribe(e){super.subscribe(e);const t=this._subscriptions.get(e.id);this._level=e.level;const s=this._getTileFeatures(e);this._onMessage({type:\"append\",id:e.key.id,addOrUpdate:s,end:!0}),t.didSend=!0}unsubscribe(e){super.unsubscribe(e)}*readers(t){const s=this._subscriptions.get(t),{tile:r}=s;yield this._getTileFeatures(r);for(const n of s.requests.stream.entries)e(n)&&e(n.addOrUpdate)&&(yield n.addOrUpdate)}createTileQuery(e){throw new Error(\"Service does not support tile  queries\")}async resend(){this._subscriptions.forEach((e=>{const{tile:t}=e,s={type:\"append\",id:t.id,addOrUpdate:this._getTileFeatures(t),end:!0};this._onMessage(s)}))}_getTileFeatures(e){const t=this._store.search(e).map((t=>this._quantize(t,e.transform)));return u.fromOptimizedFeatures(t,this._serviceInfo.geometryType,e.transform)}_onFeature(e){this._updateInfo.websocket++;try{this._dataReceiveEventEnabled&&this.events.emit(\"feature\",e);const t=s(e,this._serviceInfo.geometryType,!1,!1,this._serviceInfo.objectIdField);this._manager.add(t)}catch(t){}}_onUpdate(t,s){e(t)&&(this._updateInfo.client+=t.length),this._subscriptions.forEach(((e,t)=>{e.didSend&&e.tile.level===this._level&&this._onMessage({type:\"append\",id:t,addOrUpdate:null,clear:!0,end:!1})})),this._subscriptions.forEach(((e,t)=>{if(!e.didSend||e.tile.level!==this._level)return;const s=e.tile,r={type:\"append\",id:t,addOrUpdate:this._getTileFeatures(s),remove:[],end:!0,status:h.empty()};e.requests.stream.enqueue(r),this._onMessage(r)}))}}export{b as GeoEventSource};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"./GeoEventConnection.js\";import{WebSocketConnection as n}from\"./WebSocketConnection.js\";function t(t,o,r,c,i,s,a,m){const p=0===t.path.indexOf(\"wss://\")||0===t.path.indexOf(\"ws://\"),f={source:t,sourceSpatialReference:o,spatialReference:r,geometryType:c,filter:i,maxReconnectionAttempts:s,maxReconnectionInterval:a,customParameters:m};return p?new n(f):new e(f)}export{t as createConnection};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Error.js\";import t from\"../../../../../core/Logger.js\";import{isSome as r}from\"../../../../../core/maybe.js\";import{isAbortError as a,throwIfAborted as s,throwIfNotAbortError as i}from\"../../../../../core/promiseUtils.js\";import{BaseFeatureSource as o}from\"./BaseFeatureSource.js\";const n=t.getLogger(\"esri.views.2d.layers.features.sources.FeatureSource\");class d extends o{constructor(e){super(e)}async _fetchDataTile(t){const r=6,i=20,o=this._subscriptions.get(t.key.id);let d=!1,c=0,u=0;const p=(e,r)=>{u--,s(o);const a=t.id,i=e.reader,n=e.query;if(!i.exceededTransferLimit){if(d=!0,0!==r&&!i.hasFeatures){const e={id:a,addOrUpdate:i,end:0===u,type:\"append\"};return o.add({message:e,query:n}),void this._onMessage(e)}const e={id:a,addOrUpdate:i,end:0===u,type:\"append\"};return o.add({message:e,query:n}),void this._onMessage(e)}const c={id:a,addOrUpdate:i,end:d&&0===u,type:\"append\"};o.add({message:c,query:n}),this._onMessage(c)};let h=0,m=0;for(;!d&&m++<i;){let i;for(let r=0;r<h+1;r++){const r=c++;u++,i=this._fetchDataTilePage(t,r,o).then((e=>e&&p(e,r))).catch((r=>{d=!0,a(r)||(n.error(new e(\"mapview-query-error\",\"Encountered error when fetching tile\",{tile:t,error:r})),this._onMessage({id:t.id,addOrUpdate:null,end:d,type:\"append\"}))}))}await i,s(o),h=Math.min(h+2,r)}}async _fetchDataTilePage(e,t,a){s(a);const o=this._queryInfo,n={start:this.pageSize*t,num:this.pageSize,returnExceededLimitFeatures:!0,quantizationParameters:e.getQuantizationParameters()};r(this.maxRecordCountFactor)&&(n.maxRecordCountFactor=this.maxRecordCountFactor);const d=this.createTileQuery(e,n);try{const r=a.signal,i=await this._queue.push({tile:e,query:d,signal:r,depth:t});return s(a),i?o!==this._queryInfo?this._fetchDataTilePage(e,t,a):{reader:i,query:d}:null}catch(c){return i(c),null}}}export{d as PagedFeatureSource};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../../core/has.js\";import t from\"../../../../../core/Logger.js\";import{unwrapOrThrow as e,isSome as s,isNone as r}from\"../../../../../core/maybe.js\";import{throwIfAborted as o,after as a}from\"../../../../../core/promiseUtils.js\";import i from\"../../../../../core/RandomLCG.js\";import{BaseFeatureSource as n}from\"./BaseFeatureSource.js\";import{FeatureSetReaderIndirect as d}from\"../support/FeatureSetReaderPBFIndirect.js\";import{UpdateToken as h}from\"../support/UpdateToken.js\";const l=t.getLogger(\"esri.views.2d.layers.features.sources.SnapshotFeatureSource\");function u(t,e,s){const r=t.getXHydrated(),o=t.getYHydrated(),a=e.getColumnForX(r),i=Math.floor(e.normalizeCol(a));return`${s}/${Math.floor(e.getRowForY(o))}/${i}`}function c(t,e){if(r(t))return null;const s=e.transform,o=t.getQuantizationTransform();if(r(o)){const[e,r]=s.scale,[o,a]=s.translate,i=-o/e,n=1/e,d=a/r,h=1/-r;return t.transform(i,d,n,h)}const[a,i]=o.scale,[n,d]=o.translate,[h,l]=s.scale,[u,c]=s.translate,g=a/h,p=(n-u)/h,_=i/l,m=(-d+c)/l;return t.transform(p,m,g,_)}class g extends n{constructor(t){super(t),this.mode=\"snapshot\",this._loading=!0,this._controller=new AbortController,this._downloadPromise=null,this._didSendEnd=!1,this._queries=new Array,this._invalidated=!1,this._hasAggregates=!1,this._random=new i(1e3),this._store=t.store,this._markedIdsBufId=this._store.storage.createBitset()}destroy(){super.destroy(),this._controller.abort()}get loading(){return this._loading}get _signal(){return this._controller.signal}update(t,e){super.update(t,e),this._hasAggregates=t.targets.aggregate}async resend(t=!1){if(await this._downloadPromise,this._invalidated||t){const t=e(this._schema.featureCount,\"Expected featureCount to be defined\");return this._invalidated=!1,this._subscriptions.forEach((t=>t.clear())),this._downloadPromise=this._download(t),void await this._downloadPromise}const s=this._queries.map((({query:t,reader:e})=>this._sendPatchQuery(t,e)));await Promise.all(s),this._subscriptions.forEach((t=>{t.requests.done.forEach((t=>this._onMessage(t.message)))}))}async refresh(){await this.resend(!0)}async _sendPatchQuery(t,e){const r=s(t.outFields)?t.outFields:[],a=this._queryInfo.outFields,i=a.filter((t=>-1===r.indexOf(t)));if(!i.length)return;const n=t.clone(),d=this._signal;n.returnGeometry=!1,n.returnCentroid=!1,n.outFields=i,t.outFields=a;const h=await this._queue.push({query:n,depth:0,signal:d});o({signal:d}),e.joinAttributes(h)}async _fetchDataTile(t){if(!this._downloadPromise){const t=e(this._schema.featureCount,\"Expected featureCount to be defined\");this._downloadPromise=this._download(t)}const s=this._store.search(t),r=this._subscriptions.get(t.key.id),o=s.length-1;for(let e=0;e<o;e++){const o=c(s[e],t),i={type:\"append\",id:t.id,addOrUpdate:o,end:!1,status:h.empty()};r.add({query:null,message:i}),this._hasAggregates||await a(1),this._onMessage(i)}const i=c(o>=0?s[o]:null,t),n=this._didSendEnd,d={type:\"append\",id:t.id,addOrUpdate:i,end:n,status:h.empty()};r.add({query:null,message:d}),this._onMessage(d)}async _download(t){try{await this.whenInitialized();const e=this._store.storage.getBitset(this._markedIdsBufId),s=new Set;e.clear();const r=Math.ceil(t/this.pageSize),o=Array.from({length:r},((t,e)=>e)).sort(((t,e)=>this._random.getInt()-this._random.getInt())).map((t=>this._downloadPage(t,e,s)));await Promise.all(o),this._store.sweepFeatures(e,this._store.storage),this._store.sweepFeatureSets(s)}catch(e){l.error(\"mapview-snapshot-source\",\"Encountered and error when downloading feature snapshot\",e)}this._sendEnd(),this._loading=!1}async _downloadPage(t,e,r){const a=this.pageSize,i={start:t*a,num:a,cacheHint:!0};s(this.maxRecordCountFactor)&&(i.maxRecordCountFactor=this.maxRecordCountFactor);const n=this.createQuery(i),d=this._signal,h=await this._queue.push({query:n,depth:t,signal:d});o({signal:d}),this._queries.push({query:n,reader:h}),this._store.insert(h),r.add(h.instance);const l=h.getCursor();for(;l.next();)e.set(l.getDisplayId());this._send(h)}_send(t){if(!this._subscriptions.size)return;let e=null;const o=new Map,a=new Set,i=new Map;this._subscriptions.forEach((t=>{var s;const r=t.tile;o.set(r.key.id,null),e=r.tileInfoView,a.add(r.level);const{row:n,col:d}=r.key,h=`${r.level}/${n}/${d}`,l=null!=(s=i.get(h))?s:[];l.push(t),i.set(h,l)}));for(const s of a){const a=e.getLODInfoAt(s),n=t.getCursor();for(;n.next();){const t=u(n,a,s),e=n.getIndex();if(i.has(t))for(const s of i.get(t)){const t=s.tile.id;let a=o.get(t);r(a)&&(a=[],o.set(t,a)),a.push(e)}}}o.forEach(((e,r)=>{if(s(e)){const s=this._subscriptions.get(r),o={type:\"append\",id:r,addOrUpdate:c(d.from(t,e),s.tile),end:!1,status:h.empty()};s.add({query:null,message:o}),this._onMessage(o)}}))}_sendEnd(){this._subscriptions.forEach((t=>{const e={type:\"append\",id:t.tile.id,addOrUpdate:null,end:!0,status:h.empty()};t.add({query:null,message:e}),this._onMessage(e)})),this._didSendEnd=!0}}export{g as SnapshotFeatureSource};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{unwrapOr as e}from\"../../../../../core/maybe.js\";import{isHostedAgolService as r}from\"../../../../../layers/support/arcgisLayerUrl.js\";import{DrillDownFeatureSource as t}from\"./DrillDownFeatureSource.js\";import{GeoEventSource as o}from\"./GeoEventSource.js\";import{PagedFeatureSource as n}from\"./PagedFeatureSource.js\";import{SnapshotFeatureSource as s}from\"./SnapshotFeatureSource.js\";function a(e,r,a,u,i,p){const f=c(e,r,a,u,i,p);switch(f.type){case\"feature\":switch(f.origin){case\"hosted\":case\"local\":return new n(f);case\"snapshot\":return new s(f);case\"unknown\":return new t(f)}case\"geoevent\":return new o(f)}}function c(t,o,n,s,a,c){switch(t.type){case\"snapshot\":return{type:\"feature\",origin:\"snapshot\",featureCount:e(t.featureCount,0),serviceInfo:t,onMessage:s,outSR:o,tileInfoView:n,canAcceptRequest:a,store:c};case\"stream\":return{type:\"geoevent\",serviceInfo:t,onMessage:s,outSR:o,canAcceptRequest:a};case\"memory\":case\"on-demand\":return{type:\"feature\",serviceInfo:t,onMessage:s,outSR:o,origin:u(t.source),tileInfoView:n,canAcceptRequest:a}}function u(e){return Array.isArray(e)?\"local\":\"path\"in e&&r(e.path)?\"hosted\":\"unknown\"}}export{a as createSource};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nconst t=16,n=8,o=4,e=2,r=1,c=new Float64Array(2),h=new Float64Array(2),f=-90,l=90,a=-180,u=180,s=\"0123456789bcdefghjkmnpqrstuvwxyz\";function i(t){return t<=57?t-48:t<=104?t-88:t<=107?t-89:t<=110?t-90:t-91}function M(t){return s[t]}function g(t){return(t[0]+t[1])/2}function b(t,n,o){return t[0]=n,t[1]=o,t}function A(t,n){const o=g(t),e=n,r=!n;t[0]=r*t[0]+e*o,t[1]=r*o+e*t[1]}function m(t,n){const o=n>g(t);return A(t,o),o}function d(s,M){const m=b(c,f,l),d=b(h,a,u);for(let c=0;c<M.length;c++){const h=i(M.charCodeAt(c));c%2==0?(A(d,!!(t&h)),A(d,!!(o&h)),A(d,!!(r&h)),A(m,!!(n&h)),A(m,!!(e&h))):(A(m,!!(t&h)),A(m,!!(o&h)),A(m,!!(r&h)),A(d,!!(n&h)),A(d,!!(e&h)))}return s[0]=g(m),s[1]=g(d),s}function w(t,n){let o=0,e=0,r=30,c=30;for(let h=0;h<n.length;h++){const t=i(n.charCodeAt(h)),f=h%2==0;r-=f?3:2,c-=f?2:3,o|=j(t,f)<<r,e|=k(t,f)<<c}return{geohashX:o,geohashY:e}}function x(t,n){let o=-90,e=90,r=-180,c=180;for(let h=0;h<n;h++){const n=Math.ceil((h+1)/2),f=Math.floor((h+1)/2),l=1-h%2,a=30-(3*n+2*f),u=30-(2*n+3*f),s=3*l+2*(1-l),i=2*l+3*(1-l),M=3*l+7*(1-l)<<u,g=(7*l+3*(1-l)<<a&t.geohashX)>>a,b=(M&t.geohashY)>>u;for(let t=s-1;t>=0;t--){const n=(r+c)/2,o=g&1<<t?1:0;r=(1-o)*r+o*n,c=(1-o)*n+o*c}for(let t=i-1;t>=0;t--){const n=(o+e)/2,r=b&1<<t?1:0;o=(1-r)*o+r*n,e=(1-r)*n+r*e}}return[r,o,c,e]}function y(t,n,o,e){e%2&&(e+=1);let r=0,c=0,h=-90,f=90,l=-180,a=180;for(let u=0;u<e/2;u++){for(let t=0;t<5;t++){const n=(l+a)/2,e=o>n?1:0;r|=e<<29-(t+5*u),l=(1-e)*l+e*n,a=(1-e)*n+e*a}for(let t=0;t<5;t++){const o=(h+f)/2,e=n>o?1:0;c|=e<<29-(t+5*u),h=(1-e)*h+e*o,f=(1-e)*o+e*f}}t.geohashX=r,t.geohashY=c}function p(t,n,o,e,r){r%2&&(r+=1);let c=0,h=0,f=-90,l=90,a=-180,u=180;for(let s=0;s<r/2;s++){for(let t=0;t<5;t++){const n=(a+u)/2,o=e>n?1:0;c|=o<<29-(t+5*s),a=(1-o)*a+o*n,u=(1-o)*n+o*u}for(let t=0;t<5;t++){const n=(f+l)/2,e=o>n?1:0;h|=e<<29-(t+5*s),f=(1-e)*f+e*n,l=(1-e)*n+e*l}}t[2*n]=c,t[2*n+1]=h}function C(t,n,o){let e=\"\";const r=b(c,-90,90),f=b(h,-180,180);for(let c=0;c<o;c++){let o=0;!(c%2)?(o|=m(f,n)<<4,o|=m(r,t)<<3,o|=m(f,n)<<2,o|=m(r,t)<<1,o|=m(f,n)<<0):(o|=m(r,t)<<4,o|=m(f,n)<<3,o|=m(r,t)<<2,o|=m(f,n)<<1,o|=m(r,t)<<0),e+=M(o)}return e}function X(t){const n=Math.floor(5*t/2);return(l-f)/2**n}function Y(t){const n=Math.ceil(5*t/2);return(u-a)/2**n}function F(t,n,c){return c?t&r|(n&r)<<1|(t&e)<<1|(n&e)<<2|(t&o)<<2:n&r|(t&r)<<1|(n&e)<<1|(t&e)<<2|(n&o)<<2}function j(c,h){return h?r&c|(o&c)>>1|(t&c)>>2:(e&c)>>1|(n&c)>>2}function k(c,h){return h?(e&c)>>1|(n&c)>>2:r&c|(o&c)>>1|(t&c)>>2}function q(c,h,f){const l=!((c.length-1)%2),a=c.substring(0,c.length-1),u=i(c.charCodeAt(c.length-1));let s=0,g=0,b=0,A=0;l?(s=8,g=4,b=r&u|(o&u)>>1|(t&u)>>2,A=(e&u)>>1|(n&u)>>2):(s=4,g=8,A=r&u|(o&u)>>1|(t&u)>>2,b=(e&u)>>1|(n&u)>>2);const m=b+h,d=A+f,w=Math.floor(m/s),x=Math.floor(d/g),y=M(F(m-w*s,d-x*g,l));return c.length>1&&(w||x)?q(a,w,x)+y:a+y}function v(t,n,o,e,r){const c=Math.abs(o-t),h=Math.abs(e-n),f=X(r),l=Y(r),a=Math.ceil(h/l),u=Math.ceil(c/f),s=C(t,n,r),i=new Array;for(let M=0;M<a;M++)for(let t=0;t<u;t++)i.push(q(s,M,t));return i}function z(t,n,o,e,r,c){const h=Math.abs(o-t),f=Math.abs(e-n),l=X(r),a=Y(r),u=Math.ceil(f/a),s=Math.ceil(h/l),i=C(t,n,r);for(let M=0;M<u;M++)for(let r=0;r<s;r++){const h=q(i,M,r),[f,u]=d([0,0],h),s=f-l/2,g=u-a/2,b=f+l/2,A=u+a/2,m=l*a,w=Math.max(t,s),x=Math.max(n,g),y=Math.min(o,b)-w,p=Math.min(e,A)-x;c(h,Math.abs(y*p)/m)}}export{w as convertGeohash32ToXY,i as decodeBase32Char,d as decodeGeohash,x as decodeGeohashXY,M as encodeBase32Char,C as encodeGeohash,z as forEachIntersectingGeohash,v as getIntersectingGeohashes,q as getRelativeGeohash,X as latDistPerGeohash,Y as lonDistPerGeohash,p as setGeohashBuf,y as setGeohashXY,j as unpackXBits,k as unpackYBits};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../core/CircularArray.js\";import{isSome as s,mapOr as e}from\"../core/maybe.js\";import{decodeGeohashXY as i}from\"./geohashUtils.js\";import{FeatureSetReaderJSON as o}from\"../views/2d/layers/features/support/FeatureSetReaderJSON.js\";class n{constructor(s=[],e=8096){this._nodes=0,this._root=new a(0,0,0),this._statisticFields=s,this._pool=e?new t(8096):null}_acquire(t,e,i){this._nodes++;let o=null;return s(this._pool)&&(o=this._pool.dequeue()),s(o)?o.realloc(t,e,i):new a(t,e,i)}_release(t){this._nodes--,s(this._pool)&&this._pool.enqueue(t)}get count(){return this._root.count}get size(){return this._nodes}get poolSize(){return e(this._pool,0,(t=>t.size))}get depth(){let t=0;return this._forEachNode((s=>t=Math.max(t,s.depth))),t}dropLevels(t){this._forEachNode((s=>{if(s.depth>=t)for(let t=0;t<s.children.length;t++){const e=s.children[t];s.children[t]=null,e&&this._release(e)}}))}clear(){this.dropLevels(0)}insert(t,s,e=0){const i=o.fromOptimizedFeatures([t],\"esriGeometryPoint\").getCursor();i.next();const n=i.readGeometry();if(!n)return;const[a,l]=n.coords,r=t.geohashX,h=t.geohashY;this.insertCursor(i,t.displayId,a,l,r,h,s,e)}insertCursor(t,s,e,i,o,n,a,l=0){let r=this._root,h=0,c=0,d=0;for(;null!==r;){if(r.depth>=l&&(r.count+=1,r.xTotal+=e,r.yTotal+=i,r.xGeohashTotal+=o,r.yGeohashTotal+=n,r.displayId=s,this._updateStatisticsCursor(t,r,1)),h>=a)return void r.add(s);const u=Math.ceil((h+1)/2),f=Math.floor((h+1)/2),x=1-h%2,m=30-(3*u+2*f),p=30-(2*u+3*f),y=(o&7*x+3*(1-x)<<m)>>m,g=(n&3*x+7*(1-x)<<p)>>p,_=y+g*(8*x+4*(1-x));c=c<<3*x+2*(1-x)|y,d=d<<2*x+3*(1-x)|g,null==r.children[_]&&(r.children[_]=this._acquire(c,d,h+1)),h+=1,r=r.children[_]}}remove(t,s){const e=o.fromOptimizedFeatures([t],\"esriGeometryPoint\").getCursor();e.next();const i=e.readGeometry();if(!i)return;const[n,a]=i.coords,l=t.geohashX,r=t.geohashY;this.removeCursor(e,n,a,l,r,s)}removeCursor(t,s,e,i,o,n){let a=this._root,l=0;for(;null!==a;){if(a.count-=1,a.xTotal-=s,a.yTotal-=e,a.xGeohashTotal-=i,a.yGeohashTotal-=o,this._updateStatisticsCursor(t,a,-1),l>=n)return void a.remove(t.getDisplayId());const r=Math.ceil((l+1)/2),h=Math.floor((l+1)/2),c=1-l%2,d=30-(3*r+2*h),u=30-(2*r+3*h),f=((i&7*c+3*(1-c)<<d)>>d)+((o&3*c+7*(1-c)<<u)>>u)*(8*c+4*(1-c)),x=a.children[f];1===x.count&&(this._release(x),a.children[f]=null),l+=1,a=x}}find(t,s,e){return this._root.find(t,s,e,0,0,0)}findSingleOccupancyNode(t,s,e,i,o){let n=this._root;for(;null!==n;){const a=n.depth,l=n.xNode,r=n.yNode,h=1-a%2,c=n.xGeohashTotal/n.count,d=n.yGeohashTotal/n.count;if(1===n.count&&t<c&&c<=e&&s<d&&d<=i)return n;if(a>=o){n=n.next;continue}const u=Math.ceil((a+1)/2),f=Math.floor((a+1)/2),x=30-(3*u+2*f),m=30-(2*u+3*f),p=~((1<<x)-1),y=~((1<<m)-1),g=(t&p)>>x,_=(s&y)>>m,N=(e&p)>>x,T=(i&y)>>m,M=l<<3*h+2*(1-h),C=r<<2*h+3*(1-h),S=M+8*h+4*(1-h),b=C+4*h+8*(1-h),v=Math.max(M,g),G=Math.max(C,_),k=Math.min(S,N),F=Math.min(b,T);let I=null,z=null;for(let t=G;t<=F;t++)for(let s=v;s<=k;s++){const e=s-M+(t-C)*(8*h+4*(1-h)),i=n.children[e];i&&(I||(I=i,I.next=n.next),z&&(z.next=i),z=i,i.next=n.next)}n=I||n.next}return null}getRegionDisplayIds(t,s,e,i,o){let n=this._root;const a=[];for(;null!==n;){const l=n.depth,r=n.xNode,h=n.yNode;if(l>=o){const o=n.xGeohashTotal/n.count,l=n.yGeohashTotal/n.count;t<=o&&o<=e&&s<=l&&l<=i&&n.displayIds.forEach((t=>a.push(t))),n=n.next;continue}const c=Math.ceil((l+1)/2),d=Math.floor((l+1)/2),u=1-l%2,f=30-(3*c+2*d),x=30-(2*c+3*d),m=~((1<<f)-1),p=~((1<<x)-1),y=(t&m)>>f,g=(s&p)>>x,_=(e&m)>>f,N=(i&p)>>x,T=r<<3*u+2*(1-u),M=h<<2*u+3*(1-u),C=T+8*u+4*(1-u),S=M+4*u+8*(1-u),b=Math.max(T,y),v=Math.max(M,g),G=Math.min(C,_),k=Math.min(S,N);let F=null,I=null;for(let t=v;t<=k;t++)for(let s=b;s<=G;s++){const e=s-T+(t-M)*(8*u+4*(1-u)),i=n.children[e];i&&(F||(F=i,F.next=n.next),I&&(I.next=i),I=i,i.next=n.next)}n=F||n.next}return a}getRegionStatistics(t,s,e,i,o){let n=this._root,a=0,l=0,r=0;const h={};let c=0;for(;null!==n;){const d=n.depth,u=n.xNode,f=n.yNode;if(d>=o){const o=n.xGeohashTotal/n.count,d=n.yGeohashTotal/n.count;t<o&&o<=e&&s<d&&d<=i&&(a+=n.count,l+=n.xTotal,r+=n.yTotal,1===n.count&&(c=n.displayId),this._aggregateStatistics(h,n.statistics)),n=n.next;continue}const x=Math.ceil((d+1)/2),m=Math.floor((d+1)/2),p=1-d%2,y=30-(3*x+2*m),g=30-(2*x+3*m),_=~((1<<y)-1),N=~((1<<g)-1),T=(t&_)>>y,M=(s&N)>>g,C=(e&_)>>y,S=(i&N)>>g,b=u<<3*p+2*(1-p),v=f<<2*p+3*(1-p),G=b+8*p+4*(1-p),k=v+4*p+8*(1-p),F=Math.max(b,T),I=Math.max(v,M),z=Math.min(G,C),w=Math.min(k,S);let A=null,j=null;for(let o=I;o<=w;o++)for(let d=F;d<=z;d++){const u=d-b+(o-v)*(8*p+4*(1-p)),f=n.children[u];if(f){if(o!==I&&o!==w&&d!==F&&d!==z){const o=f.xGeohashTotal/f.count,n=f.yGeohashTotal/f.count;t<o&&o<=e&&s<n&&n<=i&&(a+=f.count,l+=f.xTotal,r+=f.yTotal,1===f.count&&(c=f.displayId),this._aggregateStatistics(h,f.statistics));continue}A||(A=f,A.next=n.next),j&&(j.next=f),j=f,f.next=n.next}}n=A||n.next}return{count:a,attributes:this._normalizeStatistics(h,a),xTotal:l,yTotal:r,referenceId:c}}_forEachNode(t){let s=this._root;for(;null!==s;){const e=this._linkChildren(s)||s.next;t(s),s=e}}_linkChildren(t){let s=null,e=null;for(let i=0;i<=t.children.length;i++){const o=t.children[i];o&&(s||(s=o,s.next=t.next),e&&(e.next=o),e=o,o.next=t.next)}return s}_updateStatisticsCursor(t,s,e){for(const i of this._statisticFields){const o=i.name,n=i.inField?t.readAttribute(i.inField):t.getComputedNumericAtIndex(i.inFieldIndex);switch(i.statisticType){case\"norm\":{s.statistics[o]||(s.statistics[o]={});const a=i.inNormalizationField,l=t.readAttribute(a),r=s.statistics[o].onStatisticField||0,h=s.statistics[o].onStatisticNormalizationField||0;null==n||isNaN(n)||null==l||0===l||isNaN(l)||(s.statistics[o].onStatisticField=r+e*n,s.statistics[o].onStatisticNormalizationField=h+e*l);break}case\"sum\":case\"avg\":{s.statistics[o]||(s.statistics[o]={value:0,nanCount:0});const t=s.statistics[o].value,i=s.statistics[o].nanCount;null==n||isNaN(n)?s.statistics[o].nanCount=i+e:s.statistics[o].value=t+e*n;break}case\"avg_angle\":{s.statistics[o]||(s.statistics[o]={x:0,y:0,nanCount:0});const t=s.statistics[o].x,i=s.statistics[o].y,a=s.statistics[o].nanCount,l=Math.PI/180;null==n||isNaN(n)?s.statistics[o].nanCount=a+e:(s.statistics[o].x=t+e*Math.cos(n*l),s.statistics[o].y=i+e*Math.sin(n*l));break}case\"mode\":{s.statistics[o]||(s.statistics[o]={});const t=s.statistics[o][n]||0;s.statistics[o][n]=t+e;break}}}}_aggregateStatistics(t,s){for(const e of this._statisticFields){const i=e.name;switch(e.statisticType){case\"sum\":case\"avg\":case\"avg_angle\":case\"mode\":case\"norm\":t[i]||(t[i]={});for(const e in s[i]){const o=t[i][e]||0;t[i][e]=o+s[i][e]}}}}_normalizeStatistics(t,s){const e={};for(const i of this._statisticFields){const o=i.name;switch(i.statisticType){case\"norm\":{const i=t[o];if(s&&null==i.onStatisticNormalizationField)break;if(s&&i.onStatisticNormalizationField){e[o]=i.onStatisticField/i.onStatisticNormalizationField;break}e[o]=0;break}case\"sum\":{if(!s)break;const{value:i,nanCount:n}=t[o];if(!(s-n))break;e[o]=i;break}case\"avg\":{if(!s)break;const{value:i,nanCount:n}=t[o];if(!(s-n))break;e[o]=i/(s-n);break}case\"avg_angle\":{if(!s)break;const{x:i,y:n,nanCount:a}=t[o];if(!(s-a))break;const l=i/(s-a),r=n/(s-a),h=180/Math.PI,c=Math.atan2(r,l)*h;e[o]=c;break}case\"mode\":{const s=t[o];let i=0,n=null;for(const t in s){const e=s[t];e>i&&(i=e,n=t)}e[o]=\"null\"===n?null:n;break}}}return e}}class a{constructor(t,s,e){this.count=0,this.xTotal=0,this.yTotal=0,this.statistics={},this.displayId=0,this.displayIds=new Set,this.next=null,this.depth=0,this.xNode=0,this.yNode=0,this.xGeohashTotal=0,this.yGeohashTotal=0,this.children=new Array(32);for(let i=0;i<this.children.length;i++)this.children[i]=null;this.xNode=t,this.yNode=s,this.depth=e}realloc(t,s,e){for(let i=0;i<this.children.length;i++)this.children[i]=null;return this.xNode=t,this.yNode=s,this.depth=e,this.next=null,this.xGeohashTotal=0,this.yGeohashTotal=0,this.xTotal=0,this.yTotal=0,this.count=0,this.statistics={},this.displayIds.clear(),this}add(t){this.displayIds.add(t)}remove(t){this.displayIds.delete(t)}getLngLatBounds(){const t=this.depth,s=Math.ceil(t/2),e=Math.floor(t/2),o=30-(3*s+2*e),n=30-(2*s+3*e),a=this.xNode<<o,l=this.yNode<<n;return i({geohashX:a,geohashY:l},this.depth)}find(t,s,e,i,o,n){if(i>=e)return this;const a=1-i%2,l=3*a+2*(1-a),r=2*a+3*(1-a),h=30-o-l,c=30-n-r,d=((t&7*a+3*(1-a)<<h)>>h)+((s&3*a+7*(1-a)<<c)>>c)*(8*a+4*(1-a)),u=this.children[d];return null==u?null:u.find(t,s,e,i+1,o+l,n+r)}}export{n as GeohashTree};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../../geometry.js\";import e from\"../../../../../core/Evented.js\";import t from\"../../../../../core/has.js\";import{isNone as s,isSome as r,andThen as a}from\"../../../../../core/maybe.js\";import{diff as i,hasDiff as o}from\"../../../../../core/accessorSupport/diffUtils.js\";import{GeohashTree as h}from\"../../../../../geohash/GeohashTree.js\";import{setGeohashBuf as l,setGeohashXY as n}from\"../../../../../geohash/geohashUtils.js\";import{earth as u}from\"../../../../../geometry/support/Ellipsoid.js\";import{getInfo as c}from\"../../../../../geometry/support/spatialReferenceUtils.js\";import{quantizeX as g,quantizeY as d}from\"../../../../../layers/graphics/featureConversionUtils.js\";import p,{OptimizedFeatureWithGeometry as f}from\"../../../../../layers/graphics/OptimizedFeature.js\";import _ from\"../../../../../layers/graphics/OptimizedGeometry.js\";import{checkProjectionSupport as m,project as y}from\"../../../../../layers/graphics/data/projectionSupport.js\";import{TILE_SIZE as v}from\"../../../engine/webgl/definitions.js\";import{Store2D as I}from\"../Store2D.js\";import{FeatureSetReaderJSON as b}from\"./FeatureSetReaderJSON.js\";import R from\"../../../../../geometry/SpatialReference.js\";const C=12,M=1;class x extends f{constructor(e,t,s,r,a){super(new _([],[t,s]),r,null,e),this.geohashBoundsInfo=a}get count(){return this.attributes.cluster_count}static create(e,t,s,r,a,i,o,h){const l=new x(t,s,r,i,o);return l.displayId=e.createDisplayId(!0),l.referenceId=h,l.tileLevel=a,l}update(e,t,s,r,a,i){return this.geometry.coords[0]=e,this.geometry.coords[1]=t,this.tileLevel=s,this.attributes=r,this.geohashBoundsInfo=a,this.referenceId=null,this.referenceId=i,this}toJSON(){return{objectId:this.objectId,referenceId:1===this.attributes.cluster_count?this.referenceId:null,attributes:{...this.attributes,clusterId:this.objectId},geometry:{x:this.geometry.coords[0],y:this.geometry.coords[1]}}}}function L(e){return 57.29577951308232*e}class j extends I{constructor(t,s,r){super(t,r),this.events=new e,this._geohashLevel=0,this._tileLevel=0,this._aggregateValueRanges={},this._aggregateValueRangesChanged=!1,this._geohashBuf=[],this._clusters=new Map,this._tiles=new Map,this.geometryInfo=t.geometryInfo,this._spatialReference=s,this._projectionSupportCheck=m(s,R.WGS84),this._bitsets.geohash=r.getBitset(r.createBitset()),this._bitsets.inserted=r.getBitset(r.createBitset())}async updateSchema(e,r){const a=this._schema;try{await super.updateSchema(e,r),await this._projectionSupportCheck}catch(n){}const l=i(a,r);r&&(!s(l)||e.source||e.storage.filters)?((o(l,\"params.fields\")||!this._tree||e.source)&&(this._tree=new h(this._statisticFields),this._rebuildTree(),t(\"esri-2d-update-debug\")&&console.debug(\"Aggregate mesh needs update due to tree changing\")),t(\"esri-2d-update-debug\")&&console.debug(\"Applying Update - ClusterStore:\",l),e.targets[r.name]=!0,e.mesh=!1,this._aggregateValueRanges={}):a&&(e.mesh=!0)}clear(){this._rebuildTree()}sweepFeatures(e,t){this._bitsets.inserted.forEachSet((s=>{if(!e.has(s)){const e=t.lookupByDisplayIdUnsafe(s);this._remove(e)}}))}sweepClusters(e,t,s){this._clusters.forEach(((r,a)=>{r&&r.tileLevel!==s&&(e.releaseDisplayId(r.displayId),t.unsetAttributeData(r.displayId),this._clusters.delete(a))}))}onTileData(e,t,r,a,i=!0){if(!this._schema||s(t.addOrUpdate))return t;const o=this._getTransforms(e,this._spatialReference);{const e=t.addOrUpdate.getCursor();for(;e.next();)this._update(e,a)}if(t.status.mesh||!i)return t;const h=new Array,l=this._schema.params.clusterRadius;this._getClustersForTile(h,e,l,r,o),t.addOrUpdate=b.fromOptimizedFeatures(h,\"esriGeometryPoint\"),t.addOrUpdate.attachStorage(r),t.end=!0;{const s=t.addOrUpdate.getCursor();for(;s.next();){const t=s.getDisplayId();this._bitsets.computed.unset(t),this.setComputedAttributes(r,s,t,e.scale)}}return this._aggregateValueRangesChanged&&t.end&&(this.events.emit(\"valueRangesChanged\",{valueRanges:this._aggregateValueRanges}),this._aggregateValueRangesChanged=!1),t}onTileUpdate({added:e,removed:t}){if(e.length){const t=e[0].level;this._tileLevel=t,this._setGeohashLevel(t)}if(!this._schema)return;const s=this._schema.params.clusterRadius;t.forEach((e=>{this._tiles.delete(e.key.id),this._markTileClustersForDeletion(e,s)}))}getAggregate(e){for(const t of this._clusters.values())if((null==t?void 0:t.displayId)===e)return t.toJSON();return null}getAggregates(){const e=[];for(const t of this._clusters.values())(null==t?void 0:t.tileLevel)===this._tileLevel&&e.push(t.toJSON());return e}getDisplayId(e){const t=this._clusters.get(e);return t?t.displayId:null}getFeatureDisplayIdsForAggregate(e){const t=this._clusters.get(e);if(!t)return[];const s=t.geohashBoundsInfo;return this._tree.getRegionDisplayIds(s.xLL,s.yLL,s.xTR,s.yTR,s.level)}getDisplayIdForReferenceId(e){for(const t of this._clusters.values())if((null==t?void 0:t.referenceId)===e)return t.displayId;return null}getAggregateValueRanges(){return this._aggregateValueRanges}forEach(e){for(const[t,s]of this._clusters)s&&e(s,t)}size(){let e=0;return this.forEach((t=>e++)),e}_rebuildTree(){this._bitsets.computed.clear(),this._bitsets.inserted.clear(),this._tree&&this._tree.clear()}_remove(e){const t=e.getDisplayId(),s=e.getXHydrated(),r=e.getYHydrated(),a=this._geohashBuf[2*t],i=this._geohashBuf[2*t+1];this._bitsets.inserted.has(t)&&(this._bitsets.inserted.unset(t),this._tree.removeCursor(e,s,r,a,i,this._geohashLevel))}_update(e,t){const s=e.getDisplayId(),r=this._bitsets.inserted,a=t.isVisible(s);if(a===r.has(s))return;if(!a)return void this._remove(e);const i=e.getXHydrated(),o=e.getYHydrated();if(!this._setGeohash(s,i,o))return;const h=this._geohashBuf[2*s],l=this._geohashBuf[2*s+1];this._tree.insertCursor(e,s,i,o,h,l,this._geohashLevel),r.set(s)}_setGeohash(e,t,s){if(this._bitsets.geohash.has(e))return!0;const r=this._geohashBuf;if(this._spatialReference.isWebMercator){const a=L(t/u.radius),i=a-360*Math.floor((a+180)/360),o=L(Math.PI/2-2*Math.atan(Math.exp(-s/u.radius)));l(r,e,o,i,C)}else{const a=y({x:t,y:s},this._spatialReference,R.WGS84);if(!a)return!1;l(r,e,a.y,a.x,C)}return this._bitsets.geohash.set(e),!0}_getClustersForTile(e,t,i,o,h,l=!0){const n=this._schema.params.clusterPixelBuffer,u=2*i,c=this._getGeohashLevel(t.key.level),f=Math.ceil(2**t.key.level*v/u),_=Math.ceil(n/u)+0,m=Math.ceil(v/u),{row:y,col:I}=t.key,b=I*v,R=y*v,C=Math.floor(b/u)-_,M=Math.floor(R/u)-_,x=C+m+2*_,L=M+m+2*_,j=t.tileInfoView.getLODInfoAt(t.key.level);for(let v=C;v<=x;v++)for(let i=M;i<=L;i++){let n=v;j.wrap&&(n=v<0?v+f:v%f);const u=j.wrap&&v<0,_=j.wrap&&v%f!==v,m=this._lookupCluster(o,j,t.key.level,n,i,c);if(r(m)){const t=a(h,(e=>u?e.left:_?e.right:e.tile));if(l&&s(t))continue;if(!m.count)continue;if(r(t)&&l){const s=m.geometry.clone();let a=m.attributes;s.coords[0]=g(t,s.coords[0]),s.coords[1]=d(t,s.coords[1]),1===m.count&&r(m.referenceId)&&(a={...m.attributes,referenceId:m.referenceId});const i=new p(s,a);i.displayId=m.displayId,e.push(i)}}}}_getGeohashLevel(e){return Math.min(Math.ceil(e/2+2),C)}_setGeohashLevel(e){const t=this._getGeohashLevel(e),s=(Math.floor(t/M)+1)*M-1;if(this._geohashLevel!==s)return this._geohashLevel=s,this._rebuildTree(),void this._bitsets.geohash.clear()}_getTransforms(e,t){const s={originPosition:\"upperLeft\",scale:[e.resolution,e.resolution],translate:[e.bounds[0],e.bounds[3]]},r=c(t);if(!r)return{tile:s,left:null,right:null};const[a,i]=r.valid;return{tile:s,left:{...s,translate:[i,e.bounds[3]]},right:{...s,translate:[a-i+e.bounds[0],e.bounds[3]]}}}_getClusterId(e,t,s){return(15&e)<<28|(16383&t)<<14|16383&s}_markForDeletion(e,t,s){const r=this._getClusterId(e,t,s);this._clusters.delete(r)}_getClusterBounds(e,t,s){const r=this._schema.params.clusterRadius,a=2*r;let i=s%2?t*a:t*a-r;const o=s*a;let h=i+a;const l=o-a,n=2**e.level*v;e.wrap&&i<0&&(i=0),e.wrap&&h>n&&(h=n);const u=i/v,c=o/v,g=h/v,d=l/v;return[e.getXForColumn(u),e.getYForRow(c),e.getXForColumn(g),e.getYForRow(d)]}_lookupCluster(e,t,s,a,i,o){const h=this._getClusterId(s,a,i),l=this._clusters.get(h),[c,g,d,p]=this._getClusterBounds(t,a,i),f={x:c,y:g},_={x:d,y:p};let m=0,v=0,I=0,b=0;if(this._spatialReference.isWebMercator){{const e=L(f.x/u.radius);m=e-360*Math.floor((e+180)/360),v=L(Math.PI/2-2*Math.atan(Math.exp(-f.y/u.radius)))}{const e=L(_.x/u.radius);I=e-360*Math.floor((e+180)/360),b=L(Math.PI/2-2*Math.atan(Math.exp(-_.y/u.radius)))}}else{const e=y(f,this._spatialReference,R.WGS84),t=y(_,this._spatialReference,R.WGS84);if(!e||!t)return null;m=e.x,v=e.y,I=t.x,b=t.y}const C={geohashX:0,geohashY:0},M={geohashX:0,geohashY:0};n(C,v,m,o),n(M,b,I,o);const j=C.geohashX,w=C.geohashY,V=M.geohashX,S=M.geohashY,F={xLL:j,yLL:w,xTR:V,yTR:S,level:o},T=this._tree.getRegionStatistics(j,w,V,S,o),{count:D,xTotal:k,yTotal:B,referenceId:G}=T,O=D?k/D:0,A=D?B/D:0;if(0===D)return this._clusters.set(h,null),null;const U={cluster_count:D,...T.attributes},X=r(l)?l.update(O,A,s,U,F,G):x.create(e,h,O,A,s,U,F,G);return 0===D&&(X.geometry.coords[0]=(c+d)/2,X.geometry.coords[1]=(g+p)/2),this._clusters.set(h,X),this._updateAggregateValueRangeForCluster(X,X.tileLevel),X}_updateAggregateValueRangeForCluster(e,t){const s=this._aggregateValueRanges[t]||{minValue:1/0,maxValue:0},r=s.minValue,a=s.maxValue;s.minValue=Math.min(r,e.count),s.maxValue=Math.max(a,e.count),this._aggregateValueRanges[t]=s,r===s.minValue&&a===s.maxValue||(this._aggregateValueRangesChanged=!0)}_markTileClustersForDeletion(e,t){const s=2*t,r=Math.ceil(v/s),{row:a,col:i}=e.key,o=i*v,h=a*v,l=Math.floor(o/s),n=Math.floor(h/s);for(let u=l;u<l+r;u++)for(let t=n;t<n+r;t++)this._markForDeletion(e.key.level,u,t)}}export{x as ClusterInfo,j as ClusterStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{HandleOwner as t}from\"../../../../../core/HandleOwner.js\";import r from\"../../../../../core/has.js\";import{isNone as s,isSome as i}from\"../../../../../core/maybe.js\";import{ignoreAbortErrors as a,after as o,throwIfAborted as n,throwIfNotAbortError as u,isAbortError as h}from\"../../../../../core/promiseUtils.js\";import{whenFalseOnce as c}from\"../../../../../core/watchUtils.js\";import{property as d}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{convertToGeometry as p}from\"../../../../../layers/graphics/featureConversionUtils.js\";import g from\"../../../../../layers/graphics/data/QueryEngine.js\";import f from\"../../../../../layers/support/FieldsIndex.js\";import{isAggregateId as y}from\"../../../engine/webgl/DisplayId.js\";import{FeatureStore2D as m}from\"../FeatureStore2D.js\";import{createSource as _}from\"../sources/createSource.js\";import S from\"../support/AttributeStore.js\";import{ClusterStore as v}from\"../support/ClusterStore.js\";import{ComputedAttributeStorage as b}from\"../support/ComputedAttributeStorage.js\";import{FeatureSetReaderJSON as I}from\"../support/FeatureSetReaderJSON.js\";import{UpdateToken as w}from\"../support/UpdateToken.js\";import{QueueProcessor as C}from\"../../../../support/QueueProcessor.js\";const E=5e3,j=\"tileRenderer.featuresView.attributeView.initialize\",F=\"tileRenderer.featuresView.attributeView.requestUpdate\",T=\"tileRenderer.featuresView.requestRender\";function k(e){return\"worker:port-closed\"===e.name}function q(e){if(!h(e)&&!k(e))throw e}function R(e){return\"feature\"===e.type&&\"snapshot\"===e.mode}let x=class extends t{constructor(){super(...arguments),this._storage=new b,this._markedIdsBufId=this._storage.createBitset(),this._lastCleanup=performance.now(),this._cleanupNeeded=!1,this._invalidated=!1,this._tileToResolver=new Map,this._didEdit=!1,this.tileStore=null,this.config=null,this.processor=null,this.remoteClient=null,this.service=null}initialize(){this._initAttributeStore(),this._initStores(),this._initQueryEngine(),this._initSource(),this._updateQueue=new C({concurrency:\"geoevent\"===this._source.type?1:4,process:(e,t)=>this._onTileMessage(e,{signal:t})}),this.handles.add([this.tileStore.on(\"update\",this.onTileUpdate.bind(this)),this.watch(\"updating\",(e=>!e&&this.onIdle()))]),this._checkUpdating=setInterval((()=>this.notifyChange(\"updating\")),300)}async startup(){this._initAttributeStore()}_initSource(){const e=this.tileStore.tileScheme,t=()=>this._updateQueue.length<50,r=(e,t)=>(this._invalidated=!0,this._patchTile(e,t));this._source=_(this.service,this.spatialReference,e,r,t,this.featureStore),this._proxyEvents()}_proxyEvents(){if(\"geoevent\"===this._source.type){const e=this._source.events;this.handles.add([e.on(\"connectionStatus\",(e=>this.remoteClient.invoke(\"setProperty\",{propertyName:\"connectionStatus\",value:e}).catch(q))),e.on(\"errorString\",(e=>this.remoteClient.invoke(\"setProperty\",{propertyName:\"errorString\",value:e}).catch(q))),e.on(\"feature\",(e=>this.remoteClient.invoke(\"emitEvent\",{name:\"data-received\",event:{attributes:e.attributes,centroid:e.centroid,geometry:e.geometry}}).catch(q))),e.on(\"updateRate\",(e=>this.remoteClient.invoke(\"emitEvent\",{name:\"update-rate\",event:{...e}}).catch(q)))])}}_initAttributeStore(){this.attributeStore?this.attributeStore.invalidateResources():this.attributeStore=new S({type:\"remote\",initialize:(e,t)=>a(this.remoteClient.invoke(j,e,{signal:t}).catch(q)),update:(e,t)=>a(this.remoteClient.invoke(F,e,{signal:t}).catch(q)),render:e=>a(this.remoteClient.invoke(T,void 0,{signal:e}).catch(q))},this.config)}_initStores(){const e=\"snapshot\"===this.service.type?\"snapshot\":\"on-demand\",t={geometryInfo:{geometryType:this.service.geometryType,hasM:!1,hasZ:!1},spatialReference:this.spatialReference,fieldsIndex:this.fieldsIndex,fields:this.service.fields};this.featureStore=new m(t,this._storage,e),this.aggregateStore=new v(t,this.spatialReference,this._storage),this.handles.add(this.aggregateStore.events.on(\"valueRangesChanged\",(e=>{this.remoteClient.invoke(\"emitEvent\",{name:\"valueRangesChanged\",event:{valueRanges:e.valueRanges}}).catch(q)})))}_initQueryEngine(){var e;const t=this;null==(e=this.queryEngine)||e.destroy(),this.queryEngine=new g({definitionExpression:this.config.definitionExpression,fields:this.service.fields,geometryType:this.service.geometryType,objectIdField:this.service.objectIdField,hasM:!1,hasZ:!1,spatialReference:this.spatialReference.toJSON(),cacheSpatialQueries:!0,featureStore:this.featureStore,aggregateAdapter:{getFeatureObjectIds:e=>t.aggregateStore.getFeatureDisplayIdsForAggregate(e).map((e=>t.getObjectId(e)))},timeInfo:this.service.timeInfo})}destroy(){this._updateQueue.destroy(),this._source.destroy(),this.queryEngine.destroy(),this.attributeStore&&this.attributeStore.destroy();for(const e of this.tileStore.tiles)this._source.unsubscribe(e);clearInterval(this._checkUpdating)}get fieldsIndex(){return new f(this.service.fields)}get hasAggregates(){return!!this.config.schema.targets.aggregate}get spatialReference(){return this.tileStore.tileScheme.spatialReference}get updating(){return this.isUpdating()}isUpdating(){return this._source.updating||!!this._updateQueue.length}enableEvent(e){this._source.enableEvent(e.name,e.value)}pause(){this._updateQueue.pause(),this._updateQueue.clear()}async update(e,t){this._set(\"config\",t),this._schema=t.schema,this._initQueryEngine(),await Promise.all([this._source.update(e,t.schema.source),this.featureStore.updateSchema(e,t.schema.targets.feature),this.attributeStore.update(e,t),this.attributeStore.updateFilters(e,this)]),await this.aggregateStore.updateSchema(e,t.schema.targets.aggregate),r(\"esri-2d-update-debug\")&&e.describe()}async applyUpdate(e){e.mesh&&this.clearTiles(),this._updateQueue.resume(),await this._source.applyUpdate(e),this.notifyChange(\"updating\"),await c(this,\"updating\",!0),this.hasAggregates&&(await o(10),await c(this,\"updating\",!0))}async onEdits({edits:e}){r(\"esri-2d-update-debug\")&&console.debug(\"Applying Edit:\",e),this._didEdit=!0;try{const t=e.removed.map((e=>e.objectId&&-1!==e.objectId?e.objectId:this._lookupObjectIdByGlobalId(e.globalId))),r=e.addOrModified.map((({objectId:e})=>e));this.featureStore.invalidate(),await this._source.edit(r,t),this.clearTiles(),this.notifyChange(\"updating\"),this.aggregateStore.clear(),await this._source.resend(),await c(this,\"updating\",!0)}catch(t){}}async refresh(e){if(!e){const e=w.empty();return e.storage.filters=!0,this.applyUpdate(e)}this.featureStore.invalidate(),this.clearTiles(),this._source.refresh(),this._cleanupNeeded=!0,this.notifyChange(\"updating\"),await c(this,\"updating\",!0)}clearTiles(){for(const e of this.tileStore.tiles)this.processor.onTileClear(e)}onTileUpdate(e){this.aggregateStore.onTileUpdate(e);for(const t of e.added)this._source.subscribe(t),this._level=t.level;for(const t of e.removed)this._source.unsubscribe(t),this._cleanupNeeded=!0,this._tileToResolver.has(t.id)&&(this._tileToResolver.get(t.id).resolve(),this._tileToResolver.delete(t.id));this.notifyChange(\"updating\")}onIdle(){this._invalidated&&((this.hasAggregates||\"heatmap\"===this.processor.type)&&this._repushCurrentLevelTiles(),this._invalidated=!1),this._markAndSweep()}async querySummaryStatistics({query:e,params:t}){return this.queryEngine.executeQueryForSummaryStatistics(e,t)}async queryUniqueValues({query:e,params:t}){return this.queryEngine.executeQueryForUniqueValues(e,t)}async queryClassBreaks({query:e,params:t}){return this.queryEngine.executeQueryForClassBreaks(e,t)}async queryHistogram({query:e,params:t}){return this.queryEngine.executeQueryForHistogram(e,t)}queryExtent(e){return this.queryEngine.executeQueryForExtent(e)}queryFeatures(e){return this.queryEngine.executeQuery(e)}async queryVisibleFeatures(e){const t=await this.queryEngine.executeQuery(e),r=t.objectIdFieldName;return t.features=t.features.filter((e=>{const t=e.attributes[r],s=this.getDisplayId(t);return this.attributeStore.isVisible(s)})),t}queryFeatureCount(e){return this.queryEngine.executeQueryForCount(e)}queryLatestObservations(e){return this.queryEngine.executeQueryForLatestObservations(e)}queryObjectIds(e){return this.queryEngine.executeQueryForIds(e)}async queryStatistics(){return this.featureStore.storeStatistics}getObjectId(e){return this.featureStore.lookupObjectId(e,this._storage)}getDisplayId(e){if(this._schema.targets.aggregate){const t=this.aggregateStore.getDisplayId(e);if(s(t)){const t=this.featureStore.lookupDisplayId(e);return this.aggregateStore.getDisplayIdForReferenceId(t)}return t}return this.featureStore.lookupDisplayId(e)}getFeatures(e){const t=[],r=[];for(const s of e)if(y(s)){const e=this.getAggregate(s);if(i(e))if(i(e.referenceId)){const r=this.getFeature(e.referenceId);i(r)&&t.push(r)}else r.push(e)}else{const e=this.getFeature(s);i(e)&&t.push(e)}return{features:t,aggregates:r}}getFeature(e){const t=this.featureStore.lookupFeatureByDisplayId(e,this._storage);if(s(t))return null;const r=t.readHydratedGeometry(),i=p(r,t.geometryType,t.hasZ,t.hasM);return{attributes:t.readAttributes(),geometry:i}}getAggregate(e){return this.aggregateStore.getAggregate(e)}getAggregates(){return this.aggregateStore.getAggregates()}async setHighlight(e){const t=e.map((e=>this.getDisplayId(e)));return this.attributeStore.setHighlight(e,t)}_lookupObjectIdByGlobalId(e){const t=this.service.globalIdField;if(s(t))throw new Error(\"Expected globalIdField to be defined\");let r=null;if(this.featureStore.forEach((s=>{e===s.readAttribute(t)&&(r=s.getObjectId())})),s(r))throw new Error(`Expected to find a feature with globalId ${e}`);return r}_repushCurrentLevelTiles(){const e=this.tileStore.tiles.filter((e=>e.level===this._level));for(const t of e)this._patchTile({type:\"append\",id:t.key.id,addOrUpdate:I.fromOptimizedFeatures([],this.service.geometryType),remove:[],end:!0,status:w.empty()})}_maybeForceCleanup(){performance.now()-this._lastCleanup>E&&this._markAndSweep()}_patchTile(e,t){const r=this._updateQueue.push(e,t).then((()=>{this.notifyChange(\"updating\")})).catch((e=>{this.notifyChange(\"updating\")}));return this.notifyChange(\"updating\"),r}async _onTileMessage(e,t){n(t);const r=this.tileStore.get(e.id);if(!r)return;if(e.clear)return this.processor.onTileClear(r);const i=e.status;this._cleanupNeeded=!0;const a=[];for(const s of e.remove){const e=this.featureStore.lookupDisplayId(s);e&&a.push(e)}e.remove=a;try{if(s(e.addOrUpdate))return void this.processor.onTileMessage(r,{...e,addOrUpdate:null},this.hasAggregates,t).catch(u);if(e.addOrUpdate.setArcadeSpatialReference(this.spatialReference),this.featureStore.hasInstance(e.addOrUpdate.instance)&&i.targets.feature||(i.targets.feature=!0,this.featureStore.onTileData(r,e)),!i.storage.data||!i.storage.filters){i.storage.data=!0,i.storage.filters=!0,this.attributeStore.onTileData(r,e);\"geoevent\"===this._source.type||this._didEdit?(await this.attributeStore.sendUpdates(),n(t)):this.attributeStore.sendUpdates()}if(this.hasAggregates&&!i.targets.aggregate){i.targets.aggregate=!0;const t=R(this._source)&&this._source.loading,s=!R(this._source)||t||e.end;if(this.aggregateStore.onTileData(r,e,this._storage,this.attributeStore,s),!s)return;i.mesh||(this.attributeStore.onTileData(r,e),await this.attributeStore.sendUpdates(),this.processor.onTileClear(r))}i.mesh||(i.mesh=!0,await this.processor.onTileMessage(r,e,this.hasAggregates,t),n(t)),this._maybeForceCleanup()}catch(o){u(o)}}_mark(e,t,r){const s=(4294901760&this._storage.getInstanceId(e))>>>16;e&&(t.add(s),r.set(e))}_markAndSweep(){this._lastCleanup=performance.now();if(!(!(\"feature\"===this._source.type&&\"snapshot\"===this._source.mode)&&(\"geoevent\"===this._source.type||this._cleanupNeeded)))return;this._cleanupNeeded=!1;const e=this._storage.getBitset(this._markedIdsBufId),t=new Set;e.clear();for(const r of this.tileStore.tiles)for(const s of this._source.readers(r.id)){const r=s.getCursor();for(;r.next();){let s=r.getDisplayId();if(!s){const e=r.getObjectId();s=this.featureStore.lookupDisplayId(e)}this._mark(s,t,e)}}\"symbol\"===this.processor.type&&this.processor.forEachBufferId((r=>{this._mark(r,t,e)})),this._updateQueue.forEach((r=>{for(const s of r.remove){const r=this.featureStore.lookupDisplayId(s);this._mark(r,t,e)}})),this.config.schema.targets.aggregate&&(this.aggregateStore.sweepFeatures(e,this.featureStore),this.aggregateStore.sweepClusters(this._storage,this.attributeStore,this._level)),this.featureStore.sweepFeatures(e,this._storage,this.attributeStore),this.featureStore.sweepFeatureSets(t)}};e([d({constructOnly:!0})],x.prototype,\"tileStore\",void 0),e([d()],x.prototype,\"config\",void 0),e([d({readOnly:!0})],x.prototype,\"fieldsIndex\",null),e([d()],x.prototype,\"processor\",void 0),e([d({constructOnly:!0})],x.prototype,\"remoteClient\",void 0),e([d({constructOnly:!0})],x.prototype,\"service\",void 0),e([d()],x.prototype,\"spatialReference\",null),e([d()],x.prototype,\"updating\",null),x=e([l(\"esri.views.2d.layers.features.controllers.FeatureController2D\")],x);const U=x;export{U as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{HandleOwner as e}from\"../../../../core/HandleOwner.js\";import\"../../../../core/has.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import s from\"../../../../layers/support/TileInfo.js\";import{loadProcessorModule as i}from\"./processors.js\";import l from\"./controllers/FeatureController2D.js\";import n from\"./support/TileStore.js\";import{UpdateToken as a}from\"./support/UpdateToken.js\";import c from\"../../tiling/TileInfoView.js\";const p=new Set;function h(){return p}let u=class extends e{constructor(){super(...arguments),this.controller=null,this.processor=null,this.remoteClient=null,this.tileStore=null,this.service=null,this.viewState=null,this._paused=!1,this._pendingTileUpdates=[]}initialize(){this.handles.add(this.watch(\"updating\",(t=>{this.remoteClient.invoke(\"setUpdating\",t).catch((t=>{}))})))}destroy(){var t,e,r;null==(t=this.controller)||t.destroy(),null==(e=this.processor)||e.destroy(),null==(r=this.tileStore)||r.destroy(),this.controller=this.processor=this.tileStore=this.remoteClient=null}get updating(){return!this.controller||this.controller.updating}async startup({service:t,config:e,tileInfo:r,tiles:o}){if(this._paused=!0,this.service=t,!this.tileStore){const t=new c(s.fromJSON(r));this.tileStore=new n(t)}for(await this._createProcessorAndController(e),await this.update({config:e},!0),this.tileStore.clear(),this.tileStore.updateTiles(o),this._paused=!1;this._pendingTileUpdates.length;)this.tileStore.updateTiles(this._pendingTileUpdates.pop())}async updateTiles(t){this._paused?this._pendingTileUpdates.push(t):this.tileStore.updateTiles(t)}async update({config:t},e=!1){const r=a.empty();return e||this.controller.pause(),await Promise.all([this.processor.update(r,t),this.controller.update(r,t)]),r.toJSON()}async applyUpdate(t){return this.controller.applyUpdate(a.create(t))}async _createProcessorAndController(t){await Promise.all([this._handleControllerConfig(t),this._handleProcessorConfig(t)]),this.controller.processor=this.processor}async _handleControllerConfig(t){const e=await this._createController(this.service,t);return await e.startup(),e}async _handleProcessorConfig(t){return this._createProcessor(this.service,t)}async _createController(t,e){this.controller&&this.controller.destroy();const{tileStore:r,remoteClient:o}=this,s=new l({service:t,config:e,tileStore:r,remoteClient:o});return this.controller=s,s}async _createProcessor(t,e){const r=e.schema.processors[0].type,o=(await i(r)).default,{remoteClient:s,tileStore:l}=this,n=new o({service:t,config:e,tileStore:l,remoteClient:s});return this.processor&&this.processor.destroy(),this.processor=n,n}};t([r()],u.prototype,\"controller\",void 0),t([r()],u.prototype,\"processor\",void 0),t([r()],u.prototype,\"updating\",null),t([r()],u.prototype,\"viewState\",void 0),u=t([o(\"esri.views.2d.layers.features.Pipeline\")],u);const d=u;export{d as default,h as getInstances};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction o(o){return\"heatmap\"===o?import(\"./processors/HeatmapProcessor.js\"):import(\"./processors/SymbolProcessor.js\")}export{o as loadProcessorModule};\n"],"sourceRoot":"webpack:///","file":"4115.413a49c081bb484d71c9.js"}