"use strict";var sn=Math.pow;(self.webpackChunkbio_medical=self.webpackChunkbio_medical||[]).push([[1120],{33693:(mn,Y,F)=>{F.d(Y,{Z:()=>en});var D=F(79076),P=F(74856),S=F(94911),j=(F(45072),F(30627),F(55865),F(96410)),Z=F(41147),G=F(23038),ln=F(66760);const U=new P.Xn({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});let L=class extends Z.wq{constructor(){super(...arguments),this.baseSymbol=null,this.colorRamp=null,this.type=null}};(0,D._)([(0,S.Cb)({type:ln.Z,json:{write:!0}})],L.prototype,"baseSymbol",void 0),(0,D._)([(0,S.Cb)({types:G.V,json:{read:{reader:G.i},write:!0}})],L.prototype,"colorRamp",void 0),(0,D._)([(0,S.Cb)({json:{read:U.read,write:U.write}})],L.prototype,"type",void 0),L=(0,D._)([(0,j.j)("esri.rest.support.ClassificationDefinition")],L);const on=L,q=new P.Xn({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),H=new P.Xn({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let N=class extends on{constructor(){super(...arguments),this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null,this.type="class-breaks-definition"}set standardDeviationInterval(Q){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",Q)}set definedInterval(Q){"defined-interval"===this.classificationMethod&&this._set("definedInterval",Q)}};(0,D._)([(0,S.Cb)({json:{write:!0}})],N.prototype,"breakCount",void 0),(0,D._)([(0,S.Cb)({json:{write:!0}})],N.prototype,"classificationField",void 0),(0,D._)([(0,S.Cb)({type:String,json:{read:q.read,write:q.write}})],N.prototype,"classificationMethod",void 0),(0,D._)([(0,S.Cb)({json:{write:!0}})],N.prototype,"normalizationField",void 0),(0,D._)([(0,S.Cb)({json:{read:H.read,write:H.write}})],N.prototype,"normalizationType",void 0),(0,D._)([(0,S.Cb)({value:null,json:{write:!0}})],N.prototype,"standardDeviationInterval",null),(0,D._)([(0,S.Cb)({value:null,json:{write:!0}})],N.prototype,"definedInterval",null),(0,D._)([(0,S.Cb)()],N.prototype,"type",void 0),N=(0,D._)([(0,j.j)("esri.rest.support.ClassBreaksDefinition")],N);const en=N},91120:(mn,Y,F)=>{F.r(Y),F.d(Y,{classBreaks:()=>fn,histogram:()=>tn,summaryStatistics:()=>un,uniqueValues:()=>cn});var D=F(49996),S=(F(61414),F(96583)),k=(F(6663),F(76281)),C=F(2999);let j=null;function Z(V,v){return G.apply(this,arguments)}function G(){return(G=(0,D.Z)(function*(V,v){if(!v)return[];const x=V.field,T=V.valueExpression,z=V.normalizationType,M=V.normalizationField,B=V.normalizationTotal,w=[],E=V.viewInfoParams;let O=null,W=null;if(T){if(!j){const{arcadeUtils:R}=yield(0,C.LC)();j=R}O=j.createFunction(T),W=E&&j.getViewInfo({viewingMode:E.viewingMode,scale:E.scale,spatialReference:new S.Z(E.spatialReference)})}return v.forEach(R=>{const nn=R.attributes;let A;if(T){const an=j.createExecContext(R,W);A=j.executeFunction(O,an)}else nn&&(A=nn[x]);if(z&&isFinite(A)){const an=nn&&parseFloat(nn[M]);A=(0,k.fk)(A,z,an,B)}w.push(A)}),w})).apply(this,arguments)}function un(V){return J.apply(this,arguments)}function J(){return(J=(0,D.Z)(function*(V){const{attribute:v,features:x}=V,{normalizationType:T,normalizationField:z,minValue:M,maxValue:B,fieldType:w}=v,E=yield Z({field:v.field,valueExpression:v.valueExpression,normalizationType:T,normalizationField:z,normalizationTotal:v.normalizationTotal,viewInfoParams:v.viewInfoParams},x),O=(0,k.S5)({normalizationType:T,normalizationField:z,minValue:M,maxValue:B}),W={value:.5,fieldType:w},R="esriFieldTypeString"===w?(0,k.H0)({values:E,supportsNullCount:O,percentileParams:W}):(0,k.i5)({values:E,minValue:M,maxValue:B,useSampleStdDev:!T,supportsNullCount:O,percentileParams:W});return(0,k.F_)(R,"esriFieldTypeDate"===w)})).apply(this,arguments)}function cn(V){return $.apply(this,arguments)}function $(){return($=(0,D.Z)(function*(V){const{attribute:v,features:x}=V,T=yield Z({field:v.field,valueExpression:v.valueExpression,viewInfoParams:v.viewInfoParams},x),z=(0,k.eT)(T);return(0,k.Qm)(z,v.domain,v.returnAllCodedValues)})).apply(this,arguments)}function fn(V){return K.apply(this,arguments)}function K(){return(K=(0,D.Z)(function*(V){const{attribute:v,features:x}=V,{field:T,normalizationType:z,normalizationField:M,normalizationTotal:B,classificationMethod:w}=v,E=yield Z({field:T,valueExpression:v.valueExpression,normalizationType:z,normalizationField:M,normalizationTotal:B,viewInfoParams:v.viewInfoParams},x),O=(0,k.G2)(E,{field:T,normalizationType:z,normalizationField:M,normalizationTotal:B,classificationMethod:w,standardDeviationInterval:v.standardDeviationInterval,numClasses:v.numClasses,minValue:v.minValue,maxValue:v.maxValue});return(0,k.DL)(O,w)})).apply(this,arguments)}function tn(V){return _.apply(this,arguments)}function _(){return(_=(0,D.Z)(function*(V){const{attribute:v,features:x}=V,{field:T,normalizationType:z,normalizationField:M,normalizationTotal:B,classificationMethod:w}=v,E=yield Z({field:T,valueExpression:v.valueExpression,normalizationType:z,normalizationField:M,normalizationTotal:B,viewInfoParams:v.viewInfoParams},x);return(0,k.oF)(E,{field:T,normalizationType:z,normalizationField:M,normalizationTotal:B,classificationMethod:w,standardDeviationInterval:v.standardDeviationInterval,numBins:v.numBins,minValue:v.minValue,maxValue:v.maxValue})})).apply(this,arguments)}},76281:(mn,Y,F)=>{F.d(Y,{G2:()=>w,oF:()=>R,XL:()=>tn,i5:()=>K,H0:()=>fn,eT:()=>z,Qm:()=>M,Lq:()=>_,fk:()=>B,S5:()=>$,F_:()=>T,DL:()=>W});var D=F(33693);function P(n,l){return Number(n.toFixed(l))}function k(n){const l=n.definition,{classificationMethod:a,breakCount:s,normalizationType:u,definedInterval:d}=l,r=[];let f=n.values;if(0===f.length)return[];f=f.sort((m,y)=>m-y);const b=f[0],g=f[f.length-1];if("equal-interval"===a)if(f.length>=s){const m=(g-b)/s;let y=b;for(let p=1;p<s;p++){const c=P(b+p*m,6);r.push({minValue:y,maxValue:c,label:C(y,c,u)}),y=c}r.push({minValue:y,maxValue:g,label:C(y,g,u)})}else f.forEach(m=>{r.push({minValue:m,maxValue:m,label:C(m,m,u)})});else if("natural-breaks"===a){const m=j(f),y=n.valueFrequency||m.valueFrequency,p=function(n,l,a){const s=n.length,u=[];a>s&&(a=s);for(let r=0;r<a;r++)u.push(Math.round(r*s/a-1));u.push(s-1);let d=G(u,n,l,a);return function(n,l,a,s,u,d){let r=0,f=0,b=0,g=0,m=!0;for(let y=0;y<2&&m;y++){0===y&&(m=!1);for(let p=0;p<d-1;p++)for(;a[p+1]+1!==a[p+2];){a[p+1]=a[p+1]+1;const c=q(p,a,s,u);b=c.sbMean,r=c.sbSdcm;const h=q(p+1,a,s,u);if(g=h.sbMean,f=h.sbSdcm,!(r+f<l[p]+l[p+1])){a[p+1]=a[p+1]-1;break}l[p]=r,l[p+1]=f,n[p]=b,n[p+1]=g,m=!0}for(let p=d-1;p>0;p--)for(;a[p]!==a[p-1]+1;){a[p]=a[p]-1;const c=q(p-1,a,s,u);b=c.sbMean,r=c.sbSdcm;const h=q(p,a,s,u);if(g=h.sbMean,f=h.sbSdcm,!(r+f<l[p-1]+l[p])){a[p]=a[p]+1;break}l[p-1]=r,l[p]=f,n[p-1]=b,n[p]=g,m=!0}}return m}(d.mean,d.sdcm,u,n,l,a)&&(d=G(u,n,l,a)),u}(m.uniqueValues,y,s);let c=b;for(let h=1;h<s;h++)if(m.uniqueValues.length>h){const I=P(m.uniqueValues[p[h]],6);r.push({minValue:c,maxValue:I,label:C(c,I,u)}),c=I}r.push({minValue:c,maxValue:g,label:C(c,g,u)})}else if("quantile"===a)if(f.length>=s&&b!==g){let m=b,y=Math.ceil(f.length/s),p=0;for(let c=1;c<s;c++){let h=y+p-1;h>f.length&&(h=f.length-1),h<0&&(h=0),r.push({minValue:m,maxValue:f[h],label:C(m,f[h],u)}),m=f[h],p+=y,y=Math.ceil((f.length-p)/(s-c))}r.push({minValue:m,maxValue:g,label:C(m,g,u)})}else{let m=-1;for(let y=0;y<f.length;y++){const p=f[y];p!==m&&(m=p,r.push({minValue:m,maxValue:p,label:C(m,p,u)}),m=p)}}else if("standard-deviation"===a){const m=function(n){let l=0;for(let a=0;a<n.length;a++)l+=n[a];return l/=n.length,l}(f),y=function(n,l){let a=0;for(let s=0;s<n.length;s++){const u=n[s];a+=(u-l)*(u-l)}return a/=n.length,Math.sqrt(a)}(f,m);if(0===y)r.push({minValue:f[0],maxValue:f[0],label:C(f[0],f[0],u)});else{const p=function(n,l,a,s,u){let d=Math.max(s-n,l-s)/u/a;return d=d>=1?1:d>=.5?.5:.25,d}(b,g,s,m,y)*y;let c=0,h=b;for(let X=s;X>=1;X--){const dn=P(m-(X-.5)*p,6);r.push({minValue:h,maxValue:dn,label:C(h,dn,u)}),h=dn,c++}let I=P(m+.5*p,6);r.push({minValue:h,maxValue:I,label:C(h,I,u)}),h=I,c++;for(let X=1;X<=s;X++)I=c===2*s?g:P(m+(X+.5)*p,6),r.push({minValue:h,maxValue:I,label:C(h,I,u)}),h=I,c++}}else if("defined-interval"===a){if(!d)return r;const m=f[0],y=f[f.length-1],p=Math.ceil((y-m)/d);let c=m;for(let h=1;h<p;h++){const I=P(m+h*d,6);r.push({minValue:c,maxValue:I,label:C(c,I,u)}),c=I}r.push({minValue:c,maxValue:y,label:C(c,y,u)})}return r}function C(n,l,a){let s=null;return s=n===l?a&&"percent-of-total"===a?n+"%":n.toString():a&&"percent-of-total"===a?n+"% - "+l+"%":n+" - "+l,s}function j(n){const l=[],a=[];let s=Number.MIN_VALUE,u=1,d=-1;for(let r=0;r<n.length;r++){const f=n[r];f===s?(u++,a[d]=u):null!==f&&(l.push(f),s=f,u=1,a.push(u),d++)}return{uniqueValues:l,valueFrequency:a}}function G(n,l,a,s){let u=[],d=[],r=[],f=0;const b=[],g=[];for(let c=0;c<s;c++){const h=q(c,n,l,a);b.push(h.sbMean),g.push(h.sbSdcm),f+=g[c]}let m,y=f,p=!0;for(;p||f<y;){p=!1,u=[];for(let c=0;c<s;c++)u.push(n[c]);for(let c=0;c<s;c++)for(let h=n[c]+1;h<=n[c+1];h++)if(m=l[h],c>0&&h!==n[c+1]&&Math.abs(m-b[c])>Math.abs(m-b[c-1]))n[c]=h;else if(c<s-1&&n[c]!==h-1&&Math.abs(m-b[c])>Math.abs(m-b[c+1])){n[c+1]=h-1;break}y=f,f=0,d=[],r=[];for(let c=0;c<s;c++){d.push(b[c]),r.push(g[c]);const h=q(c,n,l,a);b[c]=h.sbMean,g[c]=h.sbSdcm,f+=g[c]}}if(f>y){for(let c=0;c<s;c++)n[c]=u[c],b[c]=d[c],g[c]=r[c];f=y}return{mean:b,sdcm:g}}function q(n,l,a,s){let u=0,d=0;for(let b=l[n]+1;b<=l[n+1];b++){const g=s[b];u+=a[b]*g,d+=g}d<=0&&console.log("Exception in Natural Breaks calculation");const r=u/d;let f=0;for(let b=l[n]+1;b<=l[n+1];b++)f+=s[b]*sn(a[b]-r,2);return{sbMean:r,sbSdcm:f}}const H="equal-interval",un=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,J=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),cn=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function $(n){const l=null!=n.normalizationField||null!=n.normalizationType,a=null!=n.minValue||null!=n.maxValue,s=!!n.sqlExpression&&n.supportsSQLExpression;return!l&&!a&&!s}function fn(n){const l=n.returnDistinct?[...new Set(n.values)]:n.values,a=l.filter(u=>null!=u).length,s={count:a};return n.supportsNullCount&&(s.nullcount=l.length-a),n.percentileParams&&(s.median=tn(l,n.percentileParams)),s}function K(n){const{values:l,useSampleStdDev:a,supportsNullCount:s}=n;let u=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,r=null,f=null,b=null,g=null,m=0;const y=null==n.minValue?-1/0:n.minValue,p=null==n.maxValue?1/0:n.maxValue;for(const h of l)Number.isFinite(h)?h>=y&&h<=p&&(r+=h,u=Math.min(u,h),d=Math.max(d,h),m++):"string"==typeof h&&m++;if(m&&null!=r){f=r/m;let h=0;for(const I of l)Number.isFinite(I)&&I>=y&&I<=p&&(h+=sn(I-f,2));g=a?m>1?h/(m-1):0:m>0?h/m:0,b=Math.sqrt(g)}else u=null,d=null;const c={avg:f,count:m,max:d,min:u,stddev:b,sum:r,variance:g};return s&&(c.nullcount=l.length-m),n.percentileParams&&(c.median=tn(l,n.percentileParams)),c}function tn(n,l){const{fieldType:a,value:s,orderBy:u,isDiscrete:d}=l,r=_(a,"desc"===u);if(0===(n=[...n].filter(c=>null!=c).sort((c,h)=>r(c,h))).length)return null;if(s<=0)return n[0];if(s>=1)return n[n.length-1];const f=(n.length-1)*s,b=Math.floor(f),g=b+1,m=f%1,y=n[b],p=n[g];return g>=n.length||d||"string"==typeof y||"string"==typeof p?y:y*(1-m)+p*m}function _(n,l){const a=l?1:-1,s=function(n){return n?(l,a)=>a-l:(l,a)=>l-a}(l),u=V(l);if(!n||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...J].includes(n))return(d,r)=>"number"==typeof d&&"number"==typeof r?s(d,r):"string"==typeof d&&"string"==typeof r?u(d,r):a;if("esriFieldTypeDate"===n)return(d,r)=>{const f=new Date(d).getTime(),b=new Date(r).getTime();return isNaN(f)||isNaN(b)?a:s(f,b)};if(J.has(n))return(d,r)=>s(d,r);if("esriFieldTypeString"===n)return(d,r)=>u(d,r);if("esriFieldTypeGUID"===n||"esriFieldTypeGlobalID"===n){const d=V(l);return(r,f)=>d(x(r),x(f))}return l?(d,r)=>1:(d,r)=>-1}function V(n){return n?(l,a)=>(l=l.toUpperCase())>(a=a.toUpperCase())?-1:l<a?1:0:(l,a)=>(l=l.toUpperCase())<(a=a.toUpperCase())?-1:l>a?1:0}function x(n){return n.substr(24,12)+n.substr(19,4)+n.substr(16,2)+n.substr(14,2)+n.substr(11,2)+n.substr(9,2)+n.substr(6,2)+n.substr(4,2)+n.substr(2,2)+n.substr(0,2)}function T(n,l){let a;for(a in n)cn.indexOf(a)>-1&&(Number.isFinite(n[a])||(n[a]=null));return l&&["avg","stddev","variance"].forEach(s=>{null!=n[s]&&(n[s]=Math.ceil(n[s]))}),n}function z(n){const l={};for(let a of n)(null==a||"string"==typeof a&&""===a.trim())&&(a=null),null==l[a]?l[a]={count:1,data:a}:l[a].count++;return{count:l}}function M(n,l,a){const s=n.count,u=[];a&&l&&"coded-value"===l.type&&l.codedValues.forEach(d=>{const r=d.code;s.hasOwnProperty(r)||(s[r]={data:r,count:0})});for(const d in s){const r=s[d];u.push({value:r.data,count:r.count,label:r.label})}return{uniqueValueInfos:u}}function B(n,l,a,s){let u=null;switch(l){case"log":0!==n&&(u=Math.log(n)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(s)&&0!==s&&(u=n/s*100);break;case"field":Number.isFinite(a)&&0!==a&&(u=n/a);break;case"natural-log":n>0&&(u=Math.log(n));break;case"square-root":n>0&&(u=sn(n,.5))}return u}function w(n,l){const a=function(n){const l=n.field,a=n.classificationMethod||H,s=n.normalizationType,u=n.normalizationField,d=new D.Z;return d.classificationField=l,d.breakCount=n.breakCount,d.classificationMethod=a,d.standardDeviationInterval="standard-deviation"===a?n.standardDeviationInterval||1:void 0,d.normalizationType=s,d.normalizationField="field"===s?u:void 0,d}({field:l.field,normalizationType:l.normalizationType,normalizationField:l.normalizationField,classificationMethod:l.classificationMethod,standardDeviationInterval:l.standardDeviationInterval,breakCount:l.numClasses||5});return n=function(n,l,a){return l=null==l?-1/0:l,a=null==a?1/0:a,n.filter(s=>Number.isFinite(s)&&s>=l&&s<=a)}(n,l.minValue,l.maxValue),function(n){const{normalizationTotal:l}=n;return{classBreaks:k(n),normalizationTotal:l}}({definition:a,values:n,normalizationTotal:l.normalizationTotal})}function W(n,l){let a=n.classBreaks;const s=a.length,u=a[0].minValue,d=a[s-1].maxValue,r="standard-deviation"===l,f=un;return a=a.map(b=>{const g=b.label,m={minValue:b.minValue,maxValue:b.maxValue,label:g};if(r&&g){const y=g.match(f).map(p=>+p.trim());2===y.length?(m.minStdDev=y[0],m.maxStdDev=y[1],y[0]<0&&y[1]>0&&(m.hasAvg=!0)):1===y.length&&(g.includes("<")?(m.minStdDev=null,m.maxStdDev=y[0]):g.includes(">")&&(m.minStdDev=y[0],m.maxStdDev=null))}return m}),{minValue:u,maxValue:d,classBreakInfos:a,normalizationTotal:n.normalizationTotal}}function R(n,l){const{min:a,max:s,intervals:u}=function(n,l){const{field:a,classificationMethod:s,standardDeviationInterval:u,normalizationType:d,normalizationField:r,normalizationTotal:f,minValue:b,maxValue:g}=l,m=l.numBins||10;let y=null,p=null,c=null;if(s&&"equal-interval"!==s||d){const{classBreaks:h}=w(n,{field:a,normalizationType:d,normalizationField:r,normalizationTotal:f,classificationMethod:s,standardDeviationInterval:u,minValue:b,maxValue:g,numClasses:m});y=h[0].minValue,p=h[h.length-1].maxValue,c=h.map(I=>[I.minValue,I.maxValue])}else{if(null!=b&&null!=g)y=b,p=g;else{const h=K({values:n,minValue:b,maxValue:g,useSampleStdDev:!d,supportsNullCount:$({normalizationType:d,normalizationField:r,minValue:b,maxValue:g})});y=h.min,p=h.max}c=function(n,l,a){const s=(l-n)/a,u=[];let d,r=n;for(let f=1;f<=a;f++)d=r+s,d=Number(d.toFixed(16)),u.push([r,f===a?l:d]),r=d;return u}(y,p,m)}return{min:y,max:p,intervals:c}}(n,l),d=u.map((r,f)=>({minValue:u[f][0],maxValue:u[f][1],count:0}));for(const r of n)if(null!=r&&r>=a&&r<=s){const f=A(u,r);f>-1&&d[f].count++}return{bins:d,minValue:a,maxValue:s,normalizationTotal:l.normalizationTotal}}function A(n,l){let a=-1;for(let s=n.length-1;s>=0;s--)if(l>=n[s][0]){a=s;break}return a}}}]);
//# sourceMappingURL=1120.d6a3d41fc0ace4810ec4.js.map