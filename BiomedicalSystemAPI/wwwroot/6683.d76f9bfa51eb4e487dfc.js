"use strict";(self.webpackChunkbio_medical=self.webpackChunkbio_medical||[]).push([[6683],{2226:(Qt,Dt,ut)=>{ut.d(Dt,{e:()=>yt});var pt,tt,W={exports:{}};pt=W,void 0!==(tt=function(){function Bt(d,w,b){b=b||2;var B,E,R,j,rt,at,wt,At=w&&w.length,Et=At?w[0]*b:d.length,Tt=Pt(d,0,Et,b,!0),nt=[];if(!Tt||Tt.next===Tt.prev)return nt;if(At&&(Tt=function(d,w,b,B){var E,R,j,rt=[];for(E=0,R=w.length;E<R;E++)(j=Pt(d,w[E]*B,E<R-1?w[E+1]*B:d.length,B,!1))===j.next&&(j.steiner=!0),rt.push(e(j));for(rt.sort($),E=0;E<rt.length;E++)b=Lt(b=m(rt[E],b),b.next);return b}(d,w,Tt,b)),d.length>80*b){B=R=d[0],E=j=d[1];for(var ft=b;ft<Et;ft+=b)(rt=d[ft])<B&&(B=rt),(at=d[ft+1])<E&&(E=at),rt>R&&(R=rt),at>j&&(j=at);wt=0!==(wt=Math.max(R-B,j-E))?1/wt:0}return U(Tt,nt,b,B,E,wt),nt}function Pt(d,w,b,B,E){var R,j;if(E===Jt(d,w,b,B)>0)for(R=w;R<b;R+=B)j=gt(R,d[R],d[R+1],j);else for(R=b-B;R>=w;R-=B)j=gt(R,d[R],d[R+1],j);if(j&&G(j,j.next)){var rt=j.next;dt(j),j=rt}return j}function Lt(d,w){if(!d)return d;w||(w=d);var b,B=d;do{if(b=!1,B.steiner||!G(B,B.next)&&0!==st(B.prev,B,B.next))B=B.next;else{var E=B.prev;if(dt(B),(B=w=E)===B.next)break;b=!0}}while(b||B!==w);return w}function U(d,w,b,B,E,R,j){if(d){!j&&R&&t(d,B,E,R);for(var rt,at,wt=d;d.prev!==d.next;)if(rt=d.prev,at=d.next,R?X(d,B,E,R):C(d))w.push(rt.i/b),w.push(d.i/b),w.push(at.i/b),dt(d),d=at.next,wt=at.next;else if((d=at)===wt){j?1===j?U(d=q(Lt(d),w,b),w,b,B,E,R,2):2===j&&z(d,w,b,B,E,R):U(Lt(d),w,b,B,E,R,1);break}}}function C(d){var w=d.prev,b=d,B=d.next;if(st(w,b,B)>=0)return!1;for(var E=d.next.next;E!==d.prev;){if(ht(w.x,w.y,b.x,b.y,B.x,B.y,E.x,E.y)&&st(E.prev,E,E.next)>=0)return!1;E=E.next}return!0}function X(d,w,b,B){var E=d.prev,R=d,j=d.next;if(st(E,R,j)>=0)return!1;for(var rt=E.x<R.x?E.x<j.x?E.x:j.x:R.x<j.x?R.x:j.x,at=E.y<R.y?E.y<j.y?E.y:j.y:R.y<j.y?R.y:j.y,wt=E.x>R.x?E.x>j.x?E.x:j.x:R.x>j.x?R.x:j.x,At=E.y>R.y?E.y>j.y?E.y:j.y:R.y>j.y?R.y:j.y,Et=et(rt,at,w,b,B),Tt=et(wt,At,w,b,B),nt=d.prevZ,ft=d.nextZ;nt&&nt.z>=Et&&ft&&ft.z<=Tt;){if(nt!==d.prev&&nt!==d.next&&ht(E.x,E.y,R.x,R.y,j.x,j.y,nt.x,nt.y)&&st(nt.prev,nt,nt.next)>=0||(nt=nt.prevZ,ft!==d.prev&&ft!==d.next&&ht(E.x,E.y,R.x,R.y,j.x,j.y,ft.x,ft.y)&&st(ft.prev,ft,ft.next)>=0))return!1;ft=ft.nextZ}for(;nt&&nt.z>=Et;){if(nt!==d.prev&&nt!==d.next&&ht(E.x,E.y,R.x,R.y,j.x,j.y,nt.x,nt.y)&&st(nt.prev,nt,nt.next)>=0)return!1;nt=nt.prevZ}for(;ft&&ft.z<=Tt;){if(ft!==d.prev&&ft!==d.next&&ht(E.x,E.y,R.x,R.y,j.x,j.y,ft.x,ft.y)&&st(ft.prev,ft,ft.next)>=0)return!1;ft=ft.nextZ}return!0}function q(d,w,b){var B=d;do{var E=B.prev,R=B.next.next;!G(E,R)&&y(E,B,B.next,R)&&N(E,R)&&N(R,E)&&(w.push(E.i/b),w.push(B.i/b),w.push(R.i/b),dt(B),dt(B.next),B=d=R),B=B.next}while(B!==d);return Lt(B)}function z(d,w,b,B,E,R){var j=d;do{for(var rt=j.next.next;rt!==j.prev;){if(j.i!==rt.i&&ct(j,rt)){var at=Q(j,rt);return j=Lt(j,j.next),at=Lt(at,at.next),U(j,w,b,B,E,R),void U(at,w,b,B,E,R)}rt=rt.next}j=j.next}while(j!==d)}function $(d,w){return d.x-w.x}function i(d){if(d.next.prev===d)return d;let w=d;for(;;){const b=w.next;if(b.prev===w||b===w||b===d)break;w=b}return w}function m(d,w){var b=function(d,w){var b,B=w,E=d.x,R=d.y,j=-1/0;do{if(R<=B.y&&R>=B.next.y&&B.next.y!==B.y){var rt=B.x+(R-B.y)*(B.next.x-B.x)/(B.next.y-B.y);if(rt<=E&&rt>j){if(j=rt,rt===E){if(R===B.y)return B;if(R===B.next.y)return B.next}b=B.x<B.next.x?B:B.next}}B=B.next}while(B!==w);if(!b)return null;if(E===j)return b;var at,wt=b,At=b.x,Et=b.y,Tt=1/0;B=b;do{E>=B.x&&B.x>=At&&E!==B.x&&ht(R<Et?E:j,R,At,Et,R<Et?j:E,R,B.x,B.y)&&(at=Math.abs(R-B.y)/(E-B.x),N(B,d)&&(at<Tt||at===Tt&&(B.x>b.x||B.x===b.x&&Y(b,B)))&&(b=B,Tt=at)),B=B.next}while(B!==wt);return b}(d,w);if(!b)return w;var B=Q(b,d),E=Lt(b,b.next);let R=i(B);return Lt(R,R.next),E=i(E),i(w===b?E:w)}function Y(d,w){return st(d.prev,d,w.prev)<0&&st(w.next,d,d.next)<0}function t(d,w,b,B){var E=d;do{if(null===E.z&&(E.z=et(E.x,E.y,w,b,B)),E.prev.next!==E||E.next.prev!==E)return E.prev.next=E,E.next.prev=E,t(d,w,b,B);E.prevZ=E.prev,E.nextZ=E.next,E=E.next}while(E!==d);E.prevZ.nextZ=null,E.prevZ=null,function(d){var w,b,B,E,R,j,rt,at,wt=1;do{for(b=d,d=null,R=null,j=0;b;){for(j++,B=b,rt=0,w=0;w<wt&&(rt++,B=B.nextZ);w++);for(at=wt;rt>0||at>0&&B;)0!==rt&&(0===at||!B||b.z<=B.z)?(E=b,b=b.nextZ,rt--):(E=B,B=B.nextZ,at--),R?R.nextZ=E:d=E,E.prevZ=R,R=E;b=B}R.nextZ=null,wt*=2}while(j>1)}(E)}function et(d,w,b,B,E){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=32767*(d-b)*E)|d<<8))|d<<4))|d<<2))|d<<1))|(w=1431655765&((w=858993459&((w=252645135&((w=16711935&((w=32767*(w-B)*E)|w<<8))|w<<4))|w<<2))|w<<1))<<1}function e(d){var w=d,b=d;do{(w.x<b.x||w.x===b.x&&w.y<b.y)&&(b=w),w=w.next}while(w!==d);return b}function ht(d,w,b,B,E,R,j,rt){return(E-j)*(w-rt)-(d-j)*(R-rt)>=0&&(d-j)*(B-rt)-(b-j)*(w-rt)>=0&&(b-j)*(R-rt)-(E-j)*(B-rt)>=0}function ct(d,w){return d.next.i!==w.i&&d.prev.i!==w.i&&!function(d,w){var b=d;do{if(b.i!==d.i&&b.next.i!==d.i&&b.i!==w.i&&b.next.i!==w.i&&y(b,b.next,d,w))return!0;b=b.next}while(b!==d);return!1}(d,w)&&(N(d,w)&&N(w,d)&&function(d,w){var b=d,B=!1,E=(d.x+w.x)/2,R=(d.y+w.y)/2;do{b.y>R!=b.next.y>R&&b.next.y!==b.y&&E<(b.next.x-b.x)*(R-b.y)/(b.next.y-b.y)+b.x&&(B=!B),b=b.next}while(b!==d);return B}(d,w)&&(st(d.prev,d,w.prev)||st(d,w.prev,w))||G(d,w)&&st(d.prev,d,d.next)>0&&st(w.prev,w,w.next)>0)}function st(d,w,b){return(w.y-d.y)*(b.x-w.x)-(w.x-d.x)*(b.y-w.y)}function G(d,w){return d.x===w.x&&d.y===w.y}function y(d,w,b,B){var E=zt(st(d,w,b)),R=zt(st(d,w,B)),j=zt(st(b,B,d)),rt=zt(st(b,B,w));return E!==R&&j!==rt||!(0!==E||!Mt(d,b,w))||!(0!==R||!Mt(d,B,w))||!(0!==j||!Mt(b,d,B))||!(0!==rt||!Mt(b,w,B))}function Mt(d,w,b){return w.x<=Math.max(d.x,b.x)&&w.x>=Math.min(d.x,b.x)&&w.y<=Math.max(d.y,b.y)&&w.y>=Math.min(d.y,b.y)}function zt(d){return d>0?1:d<0?-1:0}function N(d,w){return st(d.prev,d,d.next)<0?st(d,w,d.next)>=0&&st(d,d.prev,w)>=0:st(d,w,d.prev)<0||st(d,d.next,w)<0}function Q(d,w){var b=new vt(d.i,d.x,d.y),B=new vt(w.i,w.x,w.y),E=d.next,R=w.prev;return d.next=w,w.prev=d,b.next=E,E.prev=b,B.next=b,b.prev=B,R.next=B,B.prev=R,B}function gt(d,w,b,B){var E=new vt(d,w,b);return B?(E.next=B.next,E.prev=B,B.next.prev=E,B.next=E):(E.prev=E,E.next=E),E}function dt(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function vt(d,w,b){this.i=d,this.x=w,this.y=b,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Jt(d,w,b,B){for(var E=0,R=w,j=b-B;R<b;R+=B)E+=(d[j]-d[R])*(d[R+1]+d[j+1]),j=R;return E}return Bt.deviation=function(d,w,b,B){var E=w&&w.length,R=E?w[0]*b:d.length,j=Math.abs(Jt(d,0,R,b));if(E)for(var rt=0,at=w.length;rt<at;rt++){var wt=w[rt]*b,At=rt<at-1?w[rt+1]*b:d.length;j-=Math.abs(Jt(d,wt,At,b))}var Et=0;for(rt=0;rt<B.length;rt+=3){var Tt=B[rt]*b,nt=B[rt+1]*b,ft=B[rt+2]*b;Et+=Math.abs((d[Tt]-d[ft])*(d[nt+1]-d[Tt+1])-(d[Tt]-d[nt])*(d[ft+1]-d[Tt+1]))}return 0===j&&0===Et?0:Math.abs((Et-j)/j)},Bt.flatten=function(d){for(var w=d[0][0].length,b={vertices:[],holes:[],dimensions:w},B=0,E=0;E<d.length;E++){for(var R=0;R<d[E].length;R++)for(var j=0;j<w;j++)b.vertices.push(d[E][R][j]);E>0&&(B+=d[E-1].length,b.holes.push(B))}return b},Bt}())&&(pt.exports=tt);const yt=W.exports},17873:(Qt,Dt,ut)=>{ut.d(Dt,{Z:()=>d});const pt=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["\xab","\xbb"],["\xbb","\xab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],xt=["\u0622","\u0623","\u0625","\u0627"],tt=["\ufef5","\ufef7","\ufef9","\ufefb"],W=["\ufef6","\ufef8","\ufefa","\ufefc"],yt=["\u0627","\u0628","\u062a","\u062b","\u062c","\u062d","\u062e","\u062f","\u0630","\u0631","\u0632","\u0633","\u0634","\u0635","\u0636","\u0637","\u0638","\u0639","\u063a","\u0641","\u0642","\u0643","\u0644","\u0645","\u0646","\u0647","\u0648","\u064a","\u0625","\u0623","\u0622","\u0629","\u0649","\u0644","\u0645","\u0646","\u0647","\u0648","\u064a","\u0625","\u0623","\u0622","\u0629","\u0649","\u06cc","\u0626","\u0624"],Bt=["\ufe8d","\ufe8f","\ufe95","\ufe99","\ufe9d","\ufea1","\ufea5","\ufea9","\ufeab","\ufead","\ufeaf","\ufeb1","\ufeb5","\ufeb9","\ufebd","\ufec1","\ufec5","\ufec9","\ufecd","\ufed1","\ufed5","\ufed9","\ufedd","\ufee1","\ufee5","\ufee9","\ufeed","\ufef1","\ufe87","\ufe83","\ufe81","\ufe93","\ufeef","\ufbfc","\ufe89","\ufe85","\ufe70","\ufe72","\ufe74","\ufe76","\ufe78","\ufe7a","\ufe7c","\ufe7e","\ufe80","\ufe89","\ufe85"],Pt=["\ufe8e","\ufe90","\ufe96","\ufe9a","\ufe9e","\ufea2","\ufea6","\ufeaa","\ufeac","\ufeae","\ufeb0","\ufeb2","\ufeb6","\ufeba","\ufebe","\ufec2","\ufec6","\ufeca","\ufece","\ufed2","\ufed6","\ufeda","\ufede","\ufee2","\ufee6","\ufeea","\ufeee","\ufef2","\ufe88","\ufe84","\ufe82","\ufe94","\ufef0","\ufbfd","\ufe8a","\ufe86","\ufe70","\ufe72","\ufe74","\ufe76","\ufe78","\ufe7a","\ufe7c","\ufe7e","\ufe80","\ufe8a","\ufe86"],Lt=["\ufe8e","\ufe92","\ufe98","\ufe9c","\ufea0","\ufea4","\ufea8","\ufeaa","\ufeac","\ufeae","\ufeb0","\ufeb4","\ufeb8","\ufebc","\ufec0","\ufec4","\ufec8","\ufecc","\ufed0","\ufed4","\ufed8","\ufedc","\ufee0","\ufee4","\ufee8","\ufeec","\ufeee","\ufef4","\ufe88","\ufe84","\ufe82","\ufe94","\ufef0","\ufbff","\ufe8c","\ufe86","\ufe71","\ufe72","\ufe74","\ufe77","\ufe79","\ufe7b","\ufe7d","\ufe7f","\ufe80","\ufe8c","\ufe86"],U=["\ufe8d","\ufe91","\ufe97","\ufe9b","\ufe9f","\ufea3","\ufea7","\ufea9","\ufeab","\ufead","\ufeaf","\ufeb3","\ufeb7","\ufebb","\ufebf","\ufec3","\ufec7","\ufecb","\ufecf","\ufed3","\ufed7","\ufedb","\ufedf","\ufee3","\ufee7","\ufeeb","\ufeed","\ufef3","\ufe87","\ufe83","\ufe81","\ufe93","\ufeef","\ufbfe","\ufe8b","\ufe85","\ufe70","\ufe72","\ufe74","\ufe76","\ufe78","\ufe7a","\ufe7c","\ufe7e","\ufe80","\ufe8b","\ufe85"],C=["\u0621","\u0622","\u0623","\u0624","\u0625","\u0627","\u0629","\u062f","\u0630","\u0631","\u0632","\u0648","\u0649"],X=["\u064b","\u064b","\u064c","\u061f","\u064d","\u061f","\u064e","\u064e","\u064f","\u064f","\u0650","\u0650","\u0651","\u0651","\u0652","\u0652","\u0621","\u0622","\u0622","\u0623","\u0623","\u0624","\u0624","\u0625","\u0625","\u0626","\u0626","\u0626","\u0626","\u0627","\u0627","\u0628","\u0628","\u0628","\u0628","\u0629","\u0629","\u062a","\u062a","\u062a","\u062a","\u062b","\u062b","\u062b","\u062b","\u062c","\u062c","\u062c","\u062c","\u062d","\u062d","\u062d","\u062d","\u062e","\u062e","\u062e","\u062e","\u062f","\u062f","\u0630","\u0630","\u0631","\u0631","\u0632","\u0632","\u0633","\u0633","\u0633","\u0633","\u0634","\u0634","\u0634","\u0634","\u0635","\u0635","\u0635","\u0635","\u0636","\u0636","\u0636","\u0636","\u0637","\u0637","\u0637","\u0637","\u0638","\u0638","\u0638","\u0638","\u0639","\u0639","\u0639","\u0639","\u063a","\u063a","\u063a","\u063a","\u0641","\u0641","\u0641","\u0641","\u0642","\u0642","\u0642","\u0642","\u0643","\u0643","\u0643","\u0643","\u0644","\u0644","\u0644","\u0644","\u0645","\u0645","\u0645","\u0645","\u0646","\u0646","\u0646","\u0646","\u0647","\u0647","\u0647","\u0647","\u0648","\u0648","\u0649","\u0649","\u064a","\u064a","\u064a","\u064a","\ufef5","\ufef6","\ufef7","\ufef8","\ufef9","\ufefa","\ufefb","\ufefc","\u061f","\u061f","\u061f"],q=["\u0621","\u0641"],z=["\u063a","\u064a"],V=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],$=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],G=11,y=12,Q=18,gt=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],dt=100,vt=[100,0,0,0,0,101,102,103,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,104,4,4,4,0,4,0,4,0,4,4,4,0,0,4,4,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,0,0,4,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,105,7,7,106,107],Jt=[[Q,Q,Q,Q,Q,Q,Q,Q,Q,6,5,6,8,5,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,5,5,5,6,8,4,4,G,G,G,4,4,4,4,4,10,9,10,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,Q,Q,Q,Q,Q,Q,5,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,9,4,G,G,G,G,4,4,4,4,0,4,4,Q,4,4,G,G,2,2,4,0,4,4,4,2,0,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,4,4,4,4,4,4,4,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,1,y,1,y,y,1,y,y,1,y,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4],[3,3,3,3,4,4,4,4,7,G,G,7,9,7,4,4,y,y,y,y,y,y,y,y,y,y,y,7,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,3,3,3,3,3,3,3,3,3,3,G,3,3,7,7,7,y,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,y,y,y,y,y,y,y,3,4,y,y,y,y,y,y,7,7,y,y,4,y,y,y,y,7,7,2,2,2,2,2,2,2,2,2,2,7,7,7,7,7,7],[7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,7,7,y,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,y,y,y,y,y,y,y,y,y,y,y,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,y,y,y,y,y,y,y,y,y,1,1,4,4,4,4,1,4,4,4,4,4],[8,8,8,8,8,8,8,8,8,8,8,Q,Q,Q,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,5,13,14,15,16,17,9,G,G,G,G,G,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,Q,Q,Q,Q,Q,4,4,4,4,4,Q,Q,Q,Q,Q,Q,2,0,4,4,2,2,2,2,2,2,10,10,4,4,4,0,2,2,2,2,2,2,2,2,2,2,10,10,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,4,4,4,4,4,1,y,1,1,1,1,1,1,1,1,1,1,10,1,1,1,1,1,1,1,1,1,1,1,1,1,4,1,1,1,1,1,4,1,4,1,1,4,1,1,4,1,1,1,1,1,1,1,1,1,1,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],[y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,y,y,y,y,y,y,y,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,9,4,4,9,4,4,4,4,4,4,4,4,4,G,4,4,10,10,4,4,4,4,4,G,G,4,4,4,4,4,7,7,7,7,7,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,Q],[4,4,4,G,G,G,4,4,4,4,4,10,9,10,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,0,4,4,4,G,G,4,4,4,G,G,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4]];class d{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(o,g,M){if(this.sourceToTarget=[],this.targetToSource=[],!o)return"";if(function(x,o,g){f=[],T=[];for(let M=0;M<g;M++)x[M]=M,o[M]=M,f[M]=M}(this.sourceToTarget,this.targetToSource,o.length),!this.checkParameters(g,M))return o;g=this.inputFormat,M=this.outputFormat;let _=o;const D=v,Z=r(g.charAt(1)),F=r(M.charAt(1)),J=("I"===g.charAt(0)?"L":g.charAt(0))+Z,lt=("I"===M.charAt(0)?"L":M.charAt(0))+F,it=g.charAt(2)+M.charAt(2);D.defInFormat=J,D.defOutFormat=lt,D.defSwap=it;const bt=w(o,J,lt,it,D);let _t=!1;return"R"===M.charAt(1)?_t=!0:"C"!==M.charAt(1)&&"D"!==M.charAt(1)||(_t="rtl"===this.checkContextual(bt)),this.sourceToTarget=f,this.targetToSource=function(x){const o=new Array(x.length);for(let g=0;g<x.length;g++)o[x[g]]=g;return o}(this.sourceToTarget),p=this.targetToSource,_=g.charAt(3)===M.charAt(3)?bt:"S"===M.charAt(3)?function(x,o,g){if(0===o.length)return"";void 0===x&&(x=!0),void 0===g&&(g=!0);const M=(o=String(o)).split("");let _=0,D=1,Z=M.length;x||(_=M.length-1,D=-1,Z=1);const F=function(x,o,g,M,_){let D=0;const Z=[];let F=0;for(let J=o;J*g<M;J+=g)if(Ut(x[J])||n(x[J])){if("\u0644"===x[J]&&mt(x,J+g,g,M)){x[J]=a(x[J+g],0===D?tt:W),J+=g,l(x,J,g,M),_&&(Z[F]=J,F++),D=0;continue}const lt=x[J];1===D?x[J]=jt(x,J+g,g,M)?Ot(x[J]):I(x[J],Pt):!0===jt(x,J+g,g,M)?x[J]=I(x[J],U):x[J]=I(x[J],Bt),n(lt)||(D=1),!0===Zt(lt)&&(D=0)}else D=0;return Z}(M,_,D,Z,g);let J="";for(let lt=0;lt<M.length;lt++)g&&ft(F,F.length,lt)>-1?(u(p,lt,!x,-1),f.splice(lt,1)):J+=M[lt];return J}(_t,bt,!0):function(x,o,g){if(0===x.length)return"";void 0===g&&(g=!0),void 0===o&&(o=!0);let M="";const _=(x=String(x)).split("");for(let D=0;D<x.length;D++){let Z=!1;if(_[D]>="\ufe70"&&_[D]<"\ufeff"){const F=x.charCodeAt(D);_[D]>="\ufef5"&&_[D]<="\ufefc"?(o?(D>0&&g&&" "===_[D-1]?M=M.substring(0,M.length-1)+"\u0644":(M+="\u0644",Z=!0),M+=xt[(F-65269)/2]):(M+=xt[(F-65269)/2],M+="\u0644",D+1<x.length&&g&&" "===_[D+1]?D++:Z=!0),Z&&(u(p,D,!0,1),f.splice(D,0,f[D]))):M+=X[F-65136]}else M+=_[D]}return M}(bt,_t,!0),this.sourceToTarget=f,this.targetToSource=p,this.levels=T,_}_inputFormatSetter(o){if(!O.test(o))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=o}_outputFormatSetter(o){if(!O.test(o))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=o}checkParameters(o,g){return o?this._inputFormatSetter(o):o=this.inputFormat,g?this._outputFormatSetter(g):g=this.outputFormat,o!==g}checkContextual(o){let g=R(o);if("ltr"!==g&&"rtl"!==g){try{g=document.dir.toLowerCase()}catch(M){}"ltr"!==g&&"rtl"!==g&&(g="ltr")}return g}hasBidiChar(o){return k.test(o)}}function w(x,o,g,M,_){const D=function(x,o,g){if(void 0===o.inFormat&&(o.inFormat=g.defInFormat),void 0===o.outFormat&&(o.outFormat=g.defOutFormat),void 0===o.swap&&(o.swap=g.defSwap),o.inFormat===o.outFormat)return o;const M=o.inFormat.substring(0,1),_=o.outFormat.substring(0,1);let D,Z=o.inFormat.substring(1,4),F=o.outFormat.substring(1,4);return"C"===Z.charAt(0)&&(D=R(x),Z="ltr"===D||"rtl"===D?D.toUpperCase():"L"===o.inFormat.charAt(2)?"LTR":"RTL",o.inFormat=M+Z),"C"===F.charAt(0)&&(D=R(x),"rtl"===D?F="RTL":"ltr"===D?(D=function(x){const o=x.split("");return o.reverse(),R(o.join(""))}(x),F=D.toUpperCase()):F="L"===o.outFormat.charAt(2)?"LTR":"RTL",o.outFormat=_+F),o}(x,{inFormat:o,outFormat:g,swap:M},_);if(D.inFormat===D.outFormat)return x;o=D.inFormat,g=D.outFormat,M=D.swap;const Z=o.substring(0,1),F=o.substring(1,4),J=g.substring(0,1),lt=g.substring(1,4);if(_.inFormat=o,_.outFormat=g,_.swap=M,"L"===Z&&"VLTR"===g){if("LTR"===F)return _.dir=P,at(x,_);if("RTL"===F)return _.dir=S,at(x,_)}if("V"===Z&&"V"===J)return _.dir="RTL"===F?S:P,nt(x,_);if("L"===Z&&"VRTL"===g)return"LTR"===F?(_.dir=P,x=at(x,_)):(_.dir=S,x=at(x,_)),nt(x);if("VLTR"===o&&"LLTR"===g)return _.dir=P,at(x,_);if("V"===Z&&"L"===J&&F!==lt)return x=nt(x),"RTL"===F?w(x,"LLTR","VLTR",M,_):w(x,"LRTL","VRTL",M,_);if("VRTL"===o&&"LRTL"===g)return w(x,"LRTL","VRTL",M,_);if("L"===Z&&"L"===J){const it=_.swap;return _.swap=it.substr(0,1)+"N","RTL"===F?(_.dir=S,x=at(x,_),_.swap="N"+it.substr(1,2),_.dir=P,x=at(x,_)):(_.dir=P,x=at(x,_),_.swap="N"+it.substr(1,2),x=w(x,"VLTR","LRTL",_.swap,_)),x}return x}function R(x){const o=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(x);return o?o[0]<="z"?"ltr":"rtl":""}function at(x,o){const g=x.split(""),M=[];return wt(g,M,o),function(x,o,g){if(0!==g.hiLevel&&g.swap.substr(0,1)!==g.swap.substr(1,2))for(let M=0;M<x.length;M++)1===o[M]&&(x[M]=Kt(x[M]))}(g,M,o),kt(2,g,M,o),kt(1,g,M,o),T=M,g.join("")}function wt(x,o,g){const M=x.length,_=g.dir?$:V;let D=0,Z=-1;const F=[],J=[];g.hiLevel=g.dir,g.lastArabic=!1,g.hasUbatAl=!1,g.hasUbatB=!1,g.hasUbatS=!1;for(let lt=0;lt<M;lt++)F[lt]=Tt(x[lt]);for(let lt=0;lt<M;lt++){const it=D,bt=Rt(x,F,J,lt,g);J[lt]=bt,D=_[it][bt];const _t=240&D;D&=15;const It=_[D][L];if(o[lt]=It,_t>0)if(16===_t){for(let St=Z;St<lt;St++)o[St]=1;Z=-1}else Z=-1;if(_[D][A])-1===Z&&(Z=lt);else if(Z>-1){for(let St=Z;St<lt;St++)o[St]=It;Z=-1}5===F[lt]&&(o[lt]=0),g.hiLevel|=It}g.hasUbatS&&function(x,o,g,M){for(let _=0;_<g;_++)if(6===x[_]){o[_]=M.dir;for(let D=_-1;D>=0&&8===x[D];D--)o[D]=M.dir}}(F,o,M,g)}function Tt(x){const o=x.charCodeAt(0),g=vt[o>>8];return g<dt?g:Jt[g-dt][255&o]}function nt(x,o){const g=x.split("");if(o){const M=[];wt(g,M,o),T=M}return g.reverse(),f.reverse(),g.join("")}function ft(x,o,g){for(let M=0;M<o;M++)if(x[M]===g)return M;return-1}function Ut(x){for(let o=0;o<q.length;o++)if(x>=q[o]&&x<=z[o])return!0;return!1}function jt(x,o,g,M){for(;o*g<M&&n(x[o]);)o+=g;return!!(o*g<M&&Ut(x[o]))}function mt(x,o,g,M){for(;o*g<M&&n(x[o]);)o+=g;let _=" ";if(!(o*g<M))return!1;_=x[o];for(let D=0;D<xt.length;D++)if(xt[D]===_)return!0;return!1}function kt(x,o,g,M){if(M.hiLevel<x)return;if(1===x&&M.dir===S&&!M.hasUbatB)return o.reverse(),void f.reverse();const _=o.length;let D,Z,F,J,lt,it=0;for(;it<_;){if(g[it]>=x){for(D=it+1;D<_&&g[D]>=x;)D++;for(Z=it,F=D-1;Z<F;Z++,F--)J=o[Z],o[Z]=o[F],o[F]=J,lt=f[Z],f[Z]=f[F],f[F]=lt;it=D}it++}}function Rt(x,o,g,M,_){const D=o[M];return{UBAT_L:()=>(_.lastArabic=!1,0),UBAT_R:()=>(_.lastArabic=!1,1),UBAT_ON:()=>4,UBAT_AN:()=>3,UBAT_EN:()=>_.lastArabic?3:2,UBAT_AL:()=>(_.lastArabic=!0,_.hasUbatAl=!0,1),UBAT_WS:()=>4,UBAT_CS:()=>{let Z,F;return M<1||M+1>=o.length||2!==(Z=g[M-1])&&3!==Z||2!==(F=o[M+1])&&3!==F?4:(_.lastArabic&&(F=3),F===Z?F:4)},UBAT_ES:()=>2===(M>0?g[M-1]:5)&&M+1<o.length&&2===o[M+1]?2:4,UBAT_ET:()=>{if(M>0&&2===g[M-1])return 2;if(_.lastArabic)return 4;let Z=M+1;const F=o.length;for(;Z<F&&o[Z]===G;)Z++;return Z<F&&2===o[Z]?2:4},UBAT_NSM:()=>{if("VLTR"===_.inFormat){const Z=o.length;let F=M+1;for(;F<Z&&o[F]===y;)F++;if(F<Z){const J=x[M].charCodeAt[0],lt=J>=1425&&J<=2303||64286===J,it=o[F];if(lt&&(1===it||7===it))return 1}}return M<1||5===o[M-1]?4:g[M-1]},UBAT_B:()=>(_.lastArabic=!0,_.hasUbatB=!0,_.dir),UBAT_S:()=>(_.hasUbatS=!0,4),UBAT_LRE:()=>(_.lastArabic=!1,4),UBAT_RLE:()=>(_.lastArabic=!1,4),UBAT_LRO:()=>(_.lastArabic=!1,4),UBAT_RLO:()=>(_.lastArabic=!1,4),UBAT_PDF:()=>(_.lastArabic=!1,4),UBAT_BN:()=>4}[gt[D]]()}function Kt(x){let o,g=0,M=pt.length-1;for(;g<=M;)if(o=Math.floor((g+M)/2),x<pt[o][0])M=o-1;else{if(!(x>pt[o][0]))return pt[o][1];g=o+1}return x}function Zt(x){for(let o=0;o<C.length;o++)if(C[o]===x)return!0;return!1}function Ot(x){for(let o=0;o<yt.length;o++)if(x===yt[o])return Lt[o];return x}function I(x,o){for(let g=0;g<yt.length;g++)if(x===yt[g])return o[g];return x}function n(x){return x>="\u064b"&&x<="\u0655"}function r(x){return"L"===x?"LTR":"R"===x?"RTL":"C"===x?"CLR":"D"===x?"CRL":""}function l(x,o,g,M){for(;o*g<M&&n(x[o]);)o+=g;return o*g<M&&(x[o]=" ",!0)}function a(x,o){for(let g=0;g<xt.length;g++)if(x===xt[g])return o[g];return x}function u(x,o,g,M){for(let _=0;_<x.length;_++)(x[_]>o||!g&&x[_]===o)&&(x[_]+=M)}let f=[],p=[],T=[];const v={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1,defOutFormat:""},L=5,A=6,P=0,S=1,O=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,k=/[\u0591-\u06ff\ufb1d-\ufefc]/},2607:(Qt,Dt,ut)=>{ut.d(Dt,{j:()=>Pt,b:()=>X});var pt=ut(49996),xt=ut(22287),tt=ut(30627);let yt=null,Bt=null;function Pt(){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,pt.Z)(function*(){return yt||(yt=U()),yt})).apply(this,arguments)}function U(){return C.apply(this,arguments)}function C(){return(C=(0,pt.Z)(function*(){Bt=yield((0,tt.Z)("esri-csp-restrictions")?yield ut.e(5919).then(ut.bind(ut,35919)).then(z=>z.l):yield ut.e(6460).then(ut.bind(ut,36460)).then(z=>z.l)).load({locateFile:()=>(0,xt.V)("esri/core/libs/libtess/libtess.wasm")})})).apply(this,arguments)}function X(q,z){const V=Math.max(q.length,128e3);return Bt.triangulate(q,z,V)}},14437:(Qt,Dt,ut)=>{ut.d(Dt,{_U:()=>tt,DT:()=>Lt,B1:()=>pt,JJ:()=>xt,sX:()=>m,k3:()=>$,DQ:()=>q,Or:()=>z});const pt=Number.POSITIVE_INFINITY,xt=Math.PI,tt=2*xt,yt=128/xt,Lt=xt/180,X=1/Math.LN2;function q(Y,t){return(Y%=t)>=0?Y:Y+t}function z(Y){return q(Y*yt,256)}function $(Y){return Math.log(Y)*X}function m(Y,t,ot){return Y*(1-ot)+t*ot}},26683:(Qt,Dt,ut)=>{ut.r(Dt),ut.d(Dt,{default:()=>Ot});var pt=ut(49996),xt=ut(7808),tt=ut(18502),W=ut(14437);function Bt(I){return!(I<11904)&&(I>=12704&&I<=12735||I>=12544&&I<=12591||I>=65072&&I<=65103||I>=63744&&I<=64255||I>=13056&&I<=13311||I>=11904&&I<=12031||I>=12736&&I<=12783||I>=12288&&I<=12351||I>=13312&&I<=19903||I>=19968&&I<=40959||I>=12800&&I<=13055||I>=65280&&I<=65519||I>=12352&&I<=12447||I>=12272&&I<=12287||I>=12032&&I<=12255||I>=12784&&I<=12799||I>=12448&&I<=12543||I>=65040&&I<=65055||I>=42128&&I<=42191||I>=40960&&I<=42127)}function Pt(I){switch(I){case 10:case 32:case 38:case 40:case 41:case 43:case 45:case 47:case 173:case 183:case 8203:case 8208:case 8211:case 8231:return!0}return!1}function Lt(I){switch(I){case 9:case 10:case 11:case 12:case 13:case 32:return!0}return!1}var U=ut(16434);const C=24;class q{constructor(n,r,l,a,c,h,u){this._glyphItems=n,this._maxWidth=r,this._lineHeight=l,this._letterSpacing=a,this._hAnchor=c,this._vAnchor=h,this._justify=u}getShaping(n,r,l){const a=this._letterSpacing,c=this._lineHeight,h=this._justify,u=this._maxWidth,f=[];let p=0,T=0;const v=n.length;for(let o=0;o<v;o++){const g=n.charCodeAt(o),M=l&&(746===(I=g)||747===I||!(I<4352)&&(I>=12704&&I<=12735||I>=12544&&I<=12591||I>=65072&&I<=65103&&!(I>=65097&&I<=65103)||I>=63744&&I<=64255||I>=13056&&I<=13311||I>=11904&&I<=12031||I>=12736&&I<=12783||I>=12288&&I<=12351&&!(I>=12296&&I<=12305||I>=12308&&I<=12319||12336===I)||I>=13312&&I<=19903||I>=19968&&I<=40959||I>=12800&&I<=13055||I>=12592&&I<=12687||I>=43360&&I<=43391||I>=55216&&I<=55295||I>=4352&&I<=4607||I>=44032&&I<=55215||I>=12352&&I<=12447||I>=12272&&I<=12287||I>=12688&&I<=12703||I>=12032&&I<=12255||I>=12784&&I<=12799||I>=12448&&I<=12543&&12540!==I||I>=65280&&I<=65519&&!(65288===I||65289===I||65293===I||I>=65306&&I<=65310||65339===I||65341===I||65343===I||I>=65371&&I<=65503||65507===I||I>=65512&&I<=65519)||I>=65104&&I<=65135&&!(I>=65112&&I<=65118||I>=65123&&I<=65126)||I>=5120&&I<=5759||I>=6320&&I<=6399||I>=65040&&I<=65055||I>=19904&&I<=19967||I>=40960&&I<=42127||I>=42128&&I<=42191));let _;for(const D of this._glyphItems)if(_=D[g],_)break;f.push({codePoint:g,x:p,y:T,vertical:M,glyphMosaicItem:_}),_&&(p+=_.metrics.advance+a)}var I;let L=p;u>0&&(L=p/Math.max(1,Math.ceil(p/u)));const A=n.indexOf("\u200b")>=0,P=[];for(let o=0;o<v-1;o++){const g=f[o].codePoint,M=Bt(g);if(Pt(g)||M){let _=0;if(10===g)_-=1e4;else if(M&&A)_+=150;else{40!==g&&65288!==g||(_+=50);const D=f[o+1].codePoint;41!==D&&65289!==D||(_+=50)}P.push(this._buildBreak(o+1,f[o].x,L,P,_,!1))}}const S=this._optimalBreaks(this._buildBreak(v,p,L,P,0,!0));let O=0;const k=r?-c:c;let x=0;for(let o=0;o<S.length;o++){const g=S[o];let M=x;for(;M<g&&Lt(f[M].codePoint);)f[M].glyphMosaicItem=null,++M;let _=g-1;for(;_>M&&Lt(f[_].codePoint);)f[_].glyphMosaicItem=null,--_;if(M<=_){const D=f[M].x;for(let F=M;F<=_;F++)f[F].x-=D,f[F].y=T;let Z=f[_].x;f[_].glyphMosaicItem&&(Z+=f[_].glyphMosaicItem.metrics.advance),O=Math.max(Z,O),h&&this._applyJustification(f,M,_)}x=g,T+=k}if(f.length>0){const o=S.length-1,g=(h-this._hAnchor)*O;let M=(-this._vAnchor*(o+1)+.5)*c;r&&o&&(M+=o*c);for(const _ of f)_.x+=g,_.y+=M}return f.filter(o=>o.glyphMosaicItem)}static getTextBox(n,r){if(!n.length)return null;let l=1/0,a=1/0,c=0,h=0;for(const u of n){const f=u.glyphMosaicItem.metrics.advance,p=u.x,T=u.y-17,v=p+f,L=T+r;l=Math.min(l,p),c=Math.max(c,v),a=Math.min(a,T),h=Math.max(h,L)}return{x:l,y:a,width:c-l,height:h-a}}static getBox(n){if(!n.length)return null;let r=1/0,l=1/0,a=0,c=0;for(const h of n){const{height:u,left:f,top:p,width:T}=h.glyphMosaicItem.metrics,v=h.x,L=h.y-(u-Math.abs(p)),A=v+T+f,P=L+u;r=Math.min(r,v),a=Math.max(a,A),l=Math.min(l,L),c=Math.max(c,P)}return{x:r,y:l,width:a-r,height:c-l}}static addDecoration(n,r){const l=n.length;if(0===l)return;let c=n[0].x+n[0].glyphMosaicItem.metrics.left,h=n[0].y;for(let f=1;f<l;f++){const p=n[f];if(p.y!==h){const T=n[f-1].x+n[f-1].glyphMosaicItem.metrics.left+n[f-1].glyphMosaicItem.metrics.width;n.push({codePoint:0,x:c,y:h+r-3,vertical:!1,glyphMosaicItem:{sdf:!0,rect:new U.Z(4,0,4,8),metrics:{width:T-c,height:8,left:0,top:0,advance:0},page:0,code:0}}),h=p.y,c=p.x+p.glyphMosaicItem.metrics.left}}const u=n[l-1].x+n[l-1].glyphMosaicItem.metrics.left+n[l-1].glyphMosaicItem.metrics.width;n.push({codePoint:0,x:c,y:h+r-3,vertical:!1,glyphMosaicItem:{sdf:!0,rect:new U.Z(4,0,4,8),metrics:{width:u-c,height:8,left:0,top:0,advance:0},page:0,code:0}})}_breakScore(n,r,l,a){const c=(n-r)*(n-r);return a?n<r?c/2:2*c:c+Math.abs(l)*l}_buildBreak(n,r,l,a,c,h){let u=null,f=this._breakScore(r,l,c,h);for(const p of a){const T=r-p.x,v=this._breakScore(T,l,c,h)+p.score;v<=f&&(u=p,f=v)}return{index:n,x:r,score:f,previousBreak:u}}_optimalBreaks(n){return n?this._optimalBreaks(n.previousBreak).concat(n.index):[]}_applyJustification(n,r,l){const a=n[l],c=a.vertical?C:a.glyphMosaicItem?a.glyphMosaicItem.metrics.advance:0,h=(a.x+c)*this._justify;for(let u=r;u<=l;u++)n[u].x-=h}}var z=ut(27606),V=ut(74953);const K=.5;class t{constructor(n,r,l=0,a=-1,c=K){this.x=n,this.y=r,this.angle=l,this.segment=a,this.minzoom=c}}class ot{constructor(n,r,l,a,c,h=K,u=W.B1){this.anchor=n,this.labelAngle=r,this.glyphAngle=l,this.page=a,this.alternateVerticalGlyph=c,this.minzoom=h,this.maxzoom=u}}class et{constructor(n,r,l,a,c,h,u,f,p,T,v,L){this.tl=n,this.tr=r,this.bl=l,this.br=a,this.mosaicRect=c,this.labelAngle=h,this.minAngle=u,this.maxAngle=f,this.anchor=p,this.minzoom=T,this.maxzoom=v,this.page=L}}class e{constructor(n){this.shapes=n}}class ht{getIconPlacement(n,r,l){const a=new V.E(n.x,n.y),c=0===l.rotationAlignment,h=l.keepUpright;let u=l.rotate*W.DT;c&&(u+=n.angle);const f=new e([]);return l.allowOverlap&&l.ignorePlacement||!z.Bf||(f.iconColliders=[]),this._addIconPlacement(f,a,r,l,u),c&&h&&this._addIconPlacement(f,a,r,l,u+W.JJ),f}_addIconPlacement(n,r,l,a,c){const h=l.pixelRatio,u=l.width/h,f=l.height/h,p=a.offset;let T=p[0],v=p[1];switch(a.anchor){case 0:T-=u/2,v-=f/2;break;case 1:v-=f/2;break;case 2:T-=u,v-=f/2;break;case 3:T-=u/2;break;case 4:T-=u/2,v-=f;break;case 5:break;case 7:v-=f;break;case 6:T-=u;break;case 8:T-=u,v-=f}const L=l.rect,A=2/h,P=T-A,S=v-A,O=P+L.width/h,k=S+L.height/h,x=new V.E(P,S),o=new V.E(O,k),g=new V.E(P,k),M=new V.E(O,S);if(0!==c){const D=Math.cos(c),Z=Math.sin(c);x.rotate(D,Z),o.rotate(D,Z),g.rotate(D,Z),M.rotate(D,Z)}const _=new et(x,M,g,o,L,c,0,256,r,K,W.B1,0);if(n.shapes.push(_),(!a.allowOverlap||!a.ignorePlacement)&&z.Bf){const D=a.size,Z=a.padding,F={xTile:r.x,yTile:r.y,dxPixels:T*D-Z,dyPixels:v*D-Z,hard:!a.optional,partIndex:0,width:u*D+2*Z,height:f*D+2*Z,angle:c,minLod:K,maxLod:W.B1};n.iconColliders.push(F)}}getTextPlacement(n,r,l,a){const c=new V.E(n.x,n.y),h=a.rotate*W.DT,u=0===a.rotationAlignment,f=a.keepUpright,p=a.padding;let T=K;const v=u?n.angle:0,L=n.segment>=0&&u,A=a.allowOverlap&&a.ignorePlacement?null:[],P=[],O=!L;let k=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY,o=k,g=x;const M=(L||u)&&f,_=a.size/C;let D=!1;for(const it of r)if(it.vertical){D=!0;break}let Z,F=0,J=0;if(!L&&D){const it=q.getTextBox(r,a.lineHeight*C);switch(a.anchor){case 1:F=it.height/2,J=-it.width/2;break;case 2:F=-it.height/2,J=it.width/2;break;case 3:F=it.height/2,J=it.width/2;break;case 4:F=-it.height/2,J=-it.width/2;break;case 5:F=it.height;break;case 7:J=-it.width;break;case 6:J=it.width;break;case 8:F=-it.height}}F+=a.offset[0]*C,J+=a.offset[1]*C;for(const it of r){const bt=it.glyphMosaicItem;if(!bt||bt.rect.isEmpty)continue;const _t=bt.rect,It=bt.metrics,St=bt.page;if(A&&O){if(void 0!==Z&&Z!==it.y){let Ft,Gt,$t,qt;D?(Ft=-g+F,Gt=k+J,$t=g-o,qt=x-k):(Ft=k+F,Gt=o+J,$t=x-k,qt=g-o);const ee={xTile:n.x,yTile:n.y,dxPixels:Ft*_-p,dyPixels:Gt*_-p,hard:!a.optional,partIndex:1,width:$t*_+2*p,height:qt*_+2*p,angle:h,minLod:K,maxLod:W.B1};A.push(ee),k=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY,o=k,g=x}Z=it.y}const Nt=[];if(L){const Ft=.5*bt.metrics.width,Gt=(it.x+It.left-4+Ft)*_*8;if(T=this._placeGlyph(n,T,Gt,l,n.segment,1,it.vertical,St,Nt),f&&(T=this._placeGlyph(n,T,Gt,l,n.segment,-1,it.vertical,St,Nt)),T>=2)break}else Nt.push(new ot(c,v,v,St,!1)),u&&f&&Nt.push(new ot(c,v+W.JJ,v+W.JJ,St,!1));const Vt=it.x+It.left,Ht=it.y-17-It.top,Xt=Vt+It.width,se=Ht+It.height;let Ct,Yt,ne,re,te,le,fe,ye;if(!L&&D)if(it.vertical){const Ft=(Vt+Xt)/2-It.height/2,Gt=(Ht+se)/2+It.width/2;Ct=new V.E(-Gt-4+F,Ft-4+J),Yt=new V.E(Ct.x+_t.width,Ct.y+_t.height),ne=new V.E(Ct.x,Yt.y),re=new V.E(Yt.x,Ct.y)}else Ct=new V.E(4-Ht+F,Vt-4+J),Yt=new V.E(Ct.x-_t.height,Ct.y+_t.width),ne=new V.E(Yt.x,Ct.y),re=new V.E(Ct.x,Yt.y);else Ct=new V.E(Vt-4+F,Ht-4+J),Yt=new V.E(Ct.x+_t.width,Ct.y+_t.height),ne=new V.E(Ct.x,Yt.y),re=new V.E(Yt.x,Ct.y);for(const Ft of Nt){let Gt,$t,qt,ee;if(Ft.alternateVerticalGlyph){if(!te){const ie=(Ht+se)/2+J;te=new V.E((Vt+Xt)/2+F-It.height/2-4,ie+It.width/2+4),le=new V.E(te.x+_t.height,te.y-_t.width),fe=new V.E(le.x,te.y),ye=new V.E(te.x,le.y)}Gt=te,$t=fe,qt=ye,ee=le}else Gt=Ct,$t=ne,qt=re,ee=Yt;const he=Ht,xe=se,ce=Ft.glyphAngle+h;if(0!==ce){const ie=Math.cos(ce),ue=Math.sin(ce);Gt=Gt.clone(),$t=$t.clone(),qt=qt.clone(),ee=ee.clone(),Gt.rotate(ie,ue),ee.rotate(ie,ue),$t.rotate(ie,ue),qt.rotate(ie,ue)}let ae=0,oe=256;if(L&&D?it.vertical?Ft.alternateVerticalGlyph?(ae=32,oe=96):(ae=224,oe=32):(ae=224,oe=96):(ae=192,oe=64),P.push(new et(Gt,qt,$t,ee,_t,Ft.labelAngle,ae,oe,Ft.anchor,Ft.minzoom,Ft.maxzoom,Ft.page)),A&&(!M||this._legible(Ft.labelAngle)))if(O)Vt<k&&(k=Vt),he<o&&(o=he),Xt>x&&(x=Xt),xe>g&&(g=xe);else if(Ft.minzoom<2){const ie={xTile:n.x,yTile:n.y,dxPixels:(Vt+F)*_-p,dyPixels:(he+F)*_-p,hard:!a.optional,partIndex:1,width:(Xt-Vt)*_+2*p,height:(xe-he)*_+2*p,angle:ce,minLod:Ft.minzoom,maxLod:Ft.maxzoom};A.push(ie)}}}if(T>=2)return null;if(A&&O){let it,bt,_t,It;D?(it=-g+F,bt=k+J,_t=g-o,It=x-k):(it=k+F,bt=o+J,_t=x-k,It=g-o);const St={xTile:n.x,yTile:n.y,dxPixels:it*_-p,dyPixels:bt*_-p,hard:!a.optional,partIndex:1,width:_t*_+2*p,height:It*_+2*p,angle:h,minLod:K,maxLod:W.B1};A.push(St)}const lt=new e(P);return A&&A.length>0&&(lt.textColliders=A),lt}_legible(n){const r=(0,W.Or)(n);return r<65||r>=193}_placeGlyph(n,r,l,a,c,h,u,f,p){let T=h;const v=T<0?(0,W.DQ)(n.angle+W.JJ,W._U):n.angle;let L=0;l<0&&(T*=-1,l*=-1,L=W.JJ),T>0&&++c;let A=new V.E(n.x,n.y),P=a[c],S=W.B1;if(a.length<=c)return S;for(;;){const O=P.x-A.x,k=P.y-A.y,x=Math.sqrt(O*O+k*k),o=Math.max(l/x,r),g=O/x,M=k/x,_=(0,W.DQ)(Math.atan2(M,g)+L,W._U);if(p.push(new ot(A,v,_,f,!1,o,S)),u&&p.push(new ot(A,v,_,f,!0,o,S)),o<=r)return o;A=P.clone();do{if(c+=T,a.length<=c||c<0)return o;P=a[c]}while(A.isEqual(P));let D=P.x-A.x,Z=P.y-A.y;const F=Math.sqrt(D*D+Z*Z);D*=x/F,Z*=x/F,A.x-=D,A.y-=Z,S=o}}}var ct=ut(96545),st=ut(2607);class G{constructor(n,r){this.values={};const l=r.keys,a=r.values;for(;n.next();)switch(n.tag()){case 1:this.id=n.getUInt64();break;case 2:{const c=n.getMessage(),h=this.values;for(;!c.empty();){const u=c.getUInt32(),f=c.getUInt32();h[l[u]]=a[f]}c.release();break}case 3:this.type=n.getUInt32();break;case 4:this._pbfGeometry=n.getMessage();break;default:n.skip()}}getGeometry(n){if(void 0!==this._geometry)return this._geometry;if(!this._pbfGeometry)return null;const r=this._pbfGeometry;let l,a;this._pbfGeometry=null,n?n.reset(this.type):l=[];let c,h=1,u=0,f=0,p=0;for(;!r.empty();){if(0===u){const T=r.getUInt32();h=7&T,u=T>>3}switch(u--,h){case 1:f+=r.getSInt32(),p+=r.getSInt32(),n?n.moveTo(f,p):(a&&l.push(a),a=[],a.push(new V.E(f,p)));break;case 2:f+=r.getSInt32(),p+=r.getSInt32(),n?n.lineTo(f,p):a.push(new V.E(f,p));break;case 7:n?n.close():a&&!a[0].equals(f,p)&&a.push(a[0].clone());break;default:throw r.release(),new Error("Invalid path operation")}}return n?c=n.result():(a&&l.push(a),c=l),r.release(),this._geometry=c,c}}var y=ut(74322);class Mt extends y.Z{constructor(){super(12)}add(n,r,l){const a=this.array;a.push(n),a.push(r),a.push(l)}}class H{constructor(n){for(this.extent=4096,this.keys=[],this.values=[],this._pbfLayer=n.clone();n.next();)switch(n.tag()){case 1:this.name=n.getString();break;case 3:this.keys.push(n.getString());break;case 4:this.values.push(n.processMessage(H._parseValue));break;case 5:this.extent=n.getUInt32();break;default:n.skip()}}getData(){return this._pbfLayer}static _parseValue(n){for(;n.next();)switch(n.tag()){case 1:return n.getString();case 2:return n.getFloat();case 3:return n.getDouble();case 4:return n.getInt64();case 5:return n.getUInt64();case 6:return n.getSInt64();case 7:return n.getBool();default:n.skip()}return null}}class N extends y.Z{constructor(n){super(n)}add(n,r,l,a,c,h,u,f,p,T,v,L){const A=this.array;let P=y.Z.i1616to32(n,r);A.push(P);const S=31;P=y.Z.i8888to32(Math.round(S*l),Math.round(S*a),Math.round(S*c),Math.round(S*h)),A.push(P),P=y.Z.i8888to32(Math.round(S*u),Math.round(S*f),Math.round(S*p),Math.round(S*T)),A.push(P),P=y.Z.i1616to32(v,0),A.push(P),L&&A.push(...L)}}class Wt extends y.Z{constructor(n){super(n)}add(n,r,l){const a=this.array;a.push(y.Z.i1616to32(n,r)),l&&a.push(...l)}}class Q extends y.Z{constructor(n){super(n)}add(n,r,l,a,c,h,u){const f=this.array,p=this.index;let T=y.Z.i1616to32(n,r);f.push(T);return T=y.Z.i8888to32(Math.round(15*l),Math.round(15*a),c,h),f.push(T),u&&f.push(...u),p}}class gt extends y.Z{constructor(n){super(n)}add(n,r,l,a,c,h,u,f,p,T,v,L){const A=this.array;let P=y.Z.i1616to32(n,r);A.push(P),P=y.Z.i1616to32(Math.round(8*l),Math.round(8*a)),A.push(P),P=y.Z.i8888to32(c/4,h/4,f,p),A.push(P),P=y.Z.i8888to32(0,(0,W.Or)(u),10*T,Math.min(10*v,255)),A.push(P),L&&A.push(...L)}}class dt extends y.Z{constructor(n){super(n)}add(n,r,l,a,c){const h=this.array,u=y.Z.i1616to32(2*n+l,2*r+a);h.push(u),c&&h.push(...c)}}class vt{constructor(n,r,l){this.layerExtent=4096,this._features=[],this.layer=n,this.zoom=r,this._spriteInfo=l,this._filter=n.getFeatureFilter()}pushFeature(n){this._filter&&!this._filter.filter(n,this.zoom)||this._features.push(n)}hasFeatures(){return this._features.length>0}getResources(n,r,l){}}class Jt extends vt{constructor(n,r,l,a,c){super(n,r,l),this.type=4,this._circleVertexBuffer=a,this._circleIndexBuffer=c}get circleIndexStart(){return this._circleIndexStart}get circleIndexCount(){return this._circleIndexCount}processFeatures(n){const r=this._circleVertexBuffer,l=this._circleIndexBuffer;this._circleIndexStart=3*l.index,this._circleIndexCount=0;const a=this.layer,c=this.zoom;n&&n.setExtent(this.layerExtent);for(const h of this._features){const u=h.getGeometry(n);if(!u)continue;const f=a.circleMaterial.encodeAttributes(h,c,a);for(const p of u)if(p)for(const T of p){const v=r.index;r.add(T.x,T.y,0,0,f),r.add(T.x,T.y,0,1,f),r.add(T.x,T.y,1,0,f),r.add(T.x,T.y,1,1,f),l.add(v+0,v+1,v+2),l.add(v+1,v+2,v+3),this._circleIndexCount+=6}}}serialize(){let n=6;n+=this.layerUIDs.length,n+=this._circleVertexBuffer.array.length,n+=this._circleIndexBuffer.array.length;const r=new Uint32Array(n),l=new Int32Array(r.buffer);let a=0;r[a++]=this.type,r[a++]=this.layerUIDs.length;for(let c=0;c<this.layerUIDs.length;c++)r[a++]=this.layerUIDs[c];r[a++]=this._circleIndexStart,r[a++]=this._circleIndexCount,r[a++]=this._circleVertexBuffer.array.length;for(let c=0;c<this._circleVertexBuffer.array.length;c++)l[a++]=this._circleVertexBuffer.array[c];r[a++]=this._circleIndexBuffer.array.length;for(let c=0;c<this._circleIndexBuffer.array.length;c++)r[a++]=this._circleIndexBuffer.array[c];return r.buffer}}var d=ut(61684),w=ut(2226);class b extends vt{constructor(n,r,l,a,c,h,u){super(n,r,l),this.type=1,this._patternMap=new Map,this._fillVertexBuffer=a,this._fillIndexBuffer=c,this._outlineVertexBuffer=h,this._outlineIndexBuffer=u}get fillIndexStart(){return this._fillIndexStart}get fillIndexCount(){return this._fillIndexCount}get outlineIndexStart(){return this._outlineIndexStart}get outlineIndexCount(){return this._outlineIndexCount}getResources(n,r,l){const a=this.layer,c=this.zoom,h=a.getPaintProperty("fill-pattern");if(h)if(h.isDataDriven)for(const u of this._features)r(h.getValue(c,u),!0);else r(h.getValue(c),!0)}processFeatures(n){this._fillIndexStart=3*this._fillIndexBuffer.index,this._fillIndexCount=0,this._outlineIndexStart=3*this._outlineIndexBuffer.index,this._outlineIndexCount=0;const r=this.layer,l=this.zoom,{fillMaterial:a,outlineMaterial:c,hasDataDrivenFill:h,hasDataDrivenOutline:u}=r;n&&n.setExtent(this.layerExtent);const f=r.getPaintProperty("fill-pattern"),p=null==f?void 0:f.isDataDriven;let T=!f&&r.getPaintValue("fill-antialias",l);if(r.outlineUsesFillColor){if(T&&!r.hasDataDrivenOpacity){const A=r.getPaintValue("fill-opacity",l),P=r.getPaintValue("fill-opacity",l+1);A<1&&P<1&&(T=!1)}if(T&&!r.hasDataDrivenColor){const A=r.getPaintValue("fill-color",l),P=r.getPaintValue("fill-color",l+1);A[3]<1&&P[3]<1&&(T=!1)}}const v=this._features,L=null==n?void 0:n.validateTessellation;if(p){const A=[];for(const P of v){const S=f.getValue(l,P),O=this._spriteInfo[S];if(!O||!O.rect)continue;const k=a.encodeAttributes(P,l,r,O),x=T&&u?c.encodeAttributes(P,l,r):[],o=P.getGeometry(n);A.push({ddFillAttributes:k,ddOutlineAttributes:x,page:O.page,geometry:o}),A.sort((g,M)=>g.page-M.page);for(const{ddFillAttributes:g,ddOutlineAttributes:M,page:_,geometry:D}of A)this._processFeature(D,T,r.outlineUsesFillColor,g,M,L,_)}}else for(const A of v){const P=h?a.encodeAttributes(A,l,r):null,S=T&&u?c.encodeAttributes(A,l,r):null,O=A.getGeometry(n);this._processFeature(O,T,r.outlineUsesFillColor,P,S,L)}}serialize(){let n=10;n+=this.layerUIDs.length,n+=this._fillVertexBuffer.array.length,n+=this._fillIndexBuffer.array.length,n+=this._outlineVertexBuffer.array.length,n+=this._outlineIndexBuffer.array.length,n+=3*this._patternMap.size+1;const r=new Uint32Array(n),l=new Int32Array(r.buffer);let a=0;r[a++]=this.type,r[a++]=this.layerUIDs.length;for(let u=0;u<this.layerUIDs.length;u++)r[a++]=this.layerUIDs[u];r[a++]=this._fillIndexStart,r[a++]=this._fillIndexCount,r[a++]=this._outlineIndexStart,r[a++]=this._outlineIndexCount;const c=this._patternMap,h=c.size;if(r[a++]=h,h>0)for(const[u,[f,p]]of c)r[a++]=u,r[a++]=f,r[a++]=p;r[a++]=this._fillVertexBuffer.array.length;for(let u=0;u<this._fillVertexBuffer.array.length;u++)l[a++]=this._fillVertexBuffer.array[u];r[a++]=this._fillIndexBuffer.array.length;for(let u=0;u<this._fillIndexBuffer.array.length;u++)r[a++]=this._fillIndexBuffer.array[u];r[a++]=this._outlineVertexBuffer.array.length;for(let u=0;u<this._outlineVertexBuffer.array.length;u++)l[a++]=this._outlineVertexBuffer.array[u];r[a++]=this._outlineIndexBuffer.array.length;for(let u=0;u<this._outlineIndexBuffer.array.length;u++)r[a++]=this._outlineIndexBuffer.array[u];return r.buffer}_processFeature(n,r,l,a,c,h,u){if(!n)return;const f=n.length,p=!c||0===c.length;if(r&&(!l||p))for(let L=0;L<f;L++)this._processOutline(n[L],c);let v;for(let L=0;L<f;L++){const A=b._area(n[L]);A>32?(void 0!==v&&this._processFill(n,v,a,h,u),v=[L]):A<-32&&void 0!==v&&v.push(L)}void 0!==v&&this._processFill(n,v,a,h,u)}_processOutline(n,r){const l=this._outlineVertexBuffer,a=this._outlineIndexBuffer,c=a.index;let h,u,f;const p=new V.E(0,0),T=new V.E(0,0),v=new V.E(0,0);let L=-1,A=-1,P=-1,S=-1,O=-1,k=!1;let o=n.length;if(o<2)return;const g=n[0];let M=n[o-1];for(;o&&M.isEqual(g);)--o,M=n[o-1];if(!(o-0<2)){for(let _=0;_<o;++_){0===_?(h=n[o-1],u=n[0],f=n[1],p.assignSub(u,h),p.normalize(),p.rightPerpendicular()):(h=u,u=f,f=_!==o-1?n[_+1]:n[0],p.assign(T));const D=this._isClipEdge(h,u);-1===S&&(k=D),T.assignSub(f,u),T.normalize(),T.rightPerpendicular();const Z=p.x*T.y-p.y*T.x;v.assignAdd(p,T),v.normalize();const F=-v.x*-p.x+-v.y*-p.y;let J=Math.abs(0!==F?1/F:1);J>8&&(J=8),Z>=0?(P=l.add(u.x,u.y,p.x,p.y,0,1,r),-1===S&&(S=P),L>=0&&A>=0&&P>=0&&!D&&a.add(L,A,P),A=l.add(u.x,u.y,J*-v.x,J*-v.y,0,-1,r),-1===O&&(O=A),L>=0&&A>=0&&P>=0&&!D&&a.add(L,A,P),L=A,A=P,P=l.add(u.x,u.y,v.x,v.y,0,1,r),L>=0&&A>=0&&P>=0&&!D&&a.add(L,A,P),A=l.add(u.x,u.y,T.x,T.y,0,1,r),L>=0&&A>=0&&P>=0&&!D&&a.add(L,A,P)):(P=l.add(u.x,u.y,J*v.x,J*v.y,0,1,r),-1===S&&(S=P),L>=0&&A>=0&&P>=0&&!D&&a.add(L,A,P),A=l.add(u.x,u.y,-p.x,-p.y,0,-1,r),-1===O&&(O=A),L>=0&&A>=0&&P>=0&&!D&&a.add(L,A,P),L=A,A=P,P=l.add(u.x,u.y,-v.x,-v.y,0,-1,r),L>=0&&A>=0&&P>=0&&!D&&a.add(L,A,P),L=l.add(u.x,u.y,-T.x,-T.y,0,-1,r),L>=0&&A>=0&&P>=0&&!D&&a.add(L,A,P))}L>=0&&A>=0&&S>=0&&!k&&a.add(L,A,S),L>=0&&S>=0&&O>=0&&!k&&a.add(L,O,S),this._outlineIndexCount+=3*(a.index-c)}}_processFill(n,r,l,a,c){let h;r.length>1&&(h=[]);let u=0;for(const v of r)0!==u&&h.push(u),u+=n[v].length;const f=2*u,p=d.Z.acquire();for(const v of r){const L=n[v],A=L.length;for(let P=0;P<A;++P)p.push(L[P].x,L[P].y)}const T=(0,w.e)(p,h,2);if(w.e.deviation(p,h,2,T)>0){const v=r.map(P=>n[P].length),{buffer:L,vertexCount:A}=(0,st.b)(p,v);if(A>0){const P=this._fillVertexBuffer.index;for(let S=0;S<A;S++)this._fillVertexBuffer.add(L[2*S],L[2*S+1],l);for(let S=0;S<A;S+=3){const O=P+S;this._fillIndexBuffer.add(O,O+1,O+2)}if(void 0!==c){const S=this._patternMap,O=S.get(c);O?O[1]+=A:S.set(c,[this._fillIndexStart+this._fillIndexCount,A])}this._fillIndexCount+=A}}else{const v=T.length;if(v>0){const L=this._fillVertexBuffer.index;let A=0;for(;A<f;)this._fillVertexBuffer.add(p[A++],p[A++],l);let P=0;for(;P<v;)this._fillIndexBuffer.add(L+T[P++],L+T[P++],L+T[P++]);if(void 0!==c){const S=this._patternMap,O=S.get(c);O?O[1]+=v:S.set(c,[this._fillIndexStart+this._fillIndexCount,v])}this._fillIndexCount+=v}}d.Z.release(p)}_isClipEdge(n,r){return n.x===r.x?n.x<=-64||n.x>=4160:n.y===r.y&&(n.y<=-64||n.y>=4160)}static _area(n){let r=0;const l=n.length-1;for(let a=0;a<l;a++)r+=(n[a].x-n[a+1].x)*(n[a].y+n[a+1].y);return r+=(n[l].x-n[0].x)*(n[l].y+n[0].y),.5*r}}var B=ut(63537);class R extends vt{constructor(n,r,l,a,c){super(n,r,l),this.type=2,this._tessellationOptions={pixelCoordRatio:8,halfWidth:0,offset:0},this._patternMap=new Map,this.tessellationProperties={_lineVertexBuffer:null,_lineIndexBuffer:null,_ddValues:null},this.tessellationProperties._lineVertexBuffer=a,this.tessellationProperties._lineIndexBuffer=c,this._lineTessellator=new B.z(j(this.tessellationProperties),rt(this.tessellationProperties),n.canUseThinTessellation)}get lineIndexStart(){return this._lineIndexStart}get lineIndexCount(){return this._lineIndexCount}getResources(n,r,l){const a=this.layer,c=this.zoom,h=a.hasDataDrivenLine,u=a.getPaintProperty("line-pattern"),f=a.getPaintProperty("line-dasharray"),p=a.getLayoutProperty("line-cap");if(!u&&!f)return;const T=(null==p?void 0:p.getValue(c))||0,v=null==p?void 0:p.isDataDriven;if(h){const L=null==u?void 0:u.isDataDriven,A=null==f?void 0:f.isDataDriven;if(!L&&!A)return;for(const P of this._features)r(L?u.getValue(c,P):this._getDashArrayKey(P,c,a,f,v,p,T))}else if(u)r(u.getValue(c));else if(f){const L=f.getValue(c);r(a.getDashKey(L,T))}}processFeatures(n){var r,l,a,c,h,u;this._lineIndexStart=3*this.tessellationProperties._lineIndexBuffer.index,this._lineIndexCount=0;const f=this.layer,p=this.zoom,T=this._features,v=this._tessellationOptions,{hasDataDrivenLine:L,lineMaterial:A}=f;n&&n.setExtent(this.layerExtent);const P=f.getPaintProperty("line-pattern"),S=f.getPaintProperty("line-dasharray"),O=null==P?void 0:P.isDataDriven,k=null==S?void 0:S.isDataDriven;let x;x=f.getLayoutProperty("line-cap");const o=null!=(r=x)&&r.isDataDriven?x:null,g=o?null:f.getLayoutValue("line-cap",p),M=g||0,_=!!o;x=f.getLayoutProperty("line-join");const D=null!=(l=x)&&l.isDataDriven?x:null,Z=D?null:f.getLayoutValue("line-join",p);x=f.getLayoutProperty("line-miter-limit");const F=null!=(a=x)&&a.isDataDriven?x:null,J=F?null:f.getLayoutValue("line-miter-limit",p);x=f.getLayoutProperty("line-round-limit");const lt=null!=(c=x)&&c.isDataDriven?x:null,it=lt?null:f.getLayoutValue("line-round-limit",p);x=f.getPaintProperty("line-width");const bt=null!=(h=x)&&h.isDataDriven?x:null,_t=bt?null:f.getPaintValue("line-width",p);x=f.getPaintProperty("line-offset");const It=null!=(u=x)&&u.isDataDriven?x:null,St=It?null:f.getPaintValue("line-offset",p);if(O||k){const Nt=[];for(const Vt of T){const Ht=O?P.getValue(p,Vt):this._getDashArrayKey(Vt,p,f,S,_,o,M),Xt=this._spriteInfo[Ht];if(!Xt||!Xt.rect)continue;const se=A.encodeAttributes(Vt,p,f,Xt),Ct=Vt.getGeometry(n);Nt.push({ddAttributes:se,page:Xt.page,cap:o?o.getValue(p,Vt):g,join:D?D.getValue(p,Vt):Z,miterLimit:F?F.getValue(p,Vt):J,roundLimit:lt?lt.getValue(p,Vt):it,halfWidth:.5*(bt?bt.getValue(p,Vt):_t),offset:It?It.getValue(p,Vt):St,geometry:Ct})}Nt.sort((Vt,Ht)=>Vt.page-Ht.page),v.textured=!0;for(const{ddAttributes:Vt,page:Ht,cap:Xt,join:se,miterLimit:Ct,roundLimit:Yt,halfWidth:ne,offset:re,geometry:te}of Nt)v.capType=Xt,v.joinType=se,v.miterLimit=Ct,v.roundLimit=Yt,v.halfWidth=ne,v.offset=re,this._processFeature(te,Vt,Ht)}else{v.textured=!(!P&&!S),v.capType=g,v.joinType=Z,v.miterLimit=J,v.roundLimit=it,v.halfWidth=.5*_t,v.offset=St;for(const Nt of T){const Vt=L?A.encodeAttributes(Nt,p,f):null;o&&(v.capType=o.getValue(p,Nt)),D&&(v.joinType=D.getValue(p,Nt)),F&&(v.miterLimit=F.getValue(p,Nt)),lt&&(v.roundLimit=lt.getValue(p,Nt)),bt&&(v.halfWidth=.5*bt.getValue(p,Nt)),It&&(v.offset=It.getValue(p,Nt));const Ht=Nt.getGeometry(n);this._processFeature(Ht,Vt)}}}serialize(){let n=6;n+=this.layerUIDs.length,n+=this.tessellationProperties._lineVertexBuffer.array.length,n+=this.tessellationProperties._lineIndexBuffer.array.length,n+=3*this._patternMap.size+1;const r=new Uint32Array(n),l=new Int32Array(r.buffer);let a=0;r[a++]=this.type,r[a++]=this.layerUIDs.length;for(let u=0;u<this.layerUIDs.length;u++)r[a++]=this.layerUIDs[u];r[a++]=this._lineIndexStart,r[a++]=this._lineIndexCount;const c=this._patternMap,h=c.size;if(r[a++]=h,h>0)for(const[u,[f,p]]of c)r[a++]=u,r[a++]=f,r[a++]=p;r[a++]=this.tessellationProperties._lineVertexBuffer.array.length;for(let u=0;u<this.tessellationProperties._lineVertexBuffer.array.length;u++)l[a++]=this.tessellationProperties._lineVertexBuffer.array[u];r[a++]=this.tessellationProperties._lineIndexBuffer.array.length;for(let u=0;u<this.tessellationProperties._lineIndexBuffer.array.length;u++)r[a++]=this.tessellationProperties._lineIndexBuffer.array[u];return r.buffer}_processFeature(n,r,l){if(!n)return;const a=n.length;for(let c=0;c<a;c++)this._processGeometry(n[c],r,l)}_processGeometry(n,r,l){if(n.length<2)return;let c,h,u=n[0],f=1;for(;f<n.length;)c=n[f].x-u.x,h=n[f].y-u.y,c*c+h*h<1e-6?n.splice(f,1):(u=n[f],++f);if(n.length<2)return;const p=this.tessellationProperties._lineIndexBuffer,T=3*p.index;this._tessellationOptions.initialDistance=0,this._tessellationOptions.wrapDistance=65535,this.tessellationProperties._ddValues=r,this._lineTessellator.tessellate(n,this._tessellationOptions);const v=3*p.index-T;if(void 0!==l){const L=this._patternMap,A=L.get(l);A?A[1]+=v:L.set(l,[T+this._lineIndexCount,v])}this._lineIndexCount+=v}_getDashArrayKey(n,r,l,a,c,h,u){const f=c?h.getValue(r,n):u,p=a.getValue(r,n);return l.getDashKey(p,f)}}const j=I=>(n,r,l,a,c,h,u,f,p,T,v)=>(I._lineVertexBuffer.add(n,r,u,f,l,a,c,h,p,T,v,I._ddValues),I._lineVertexBuffer.index-1),rt=I=>(n,r,l)=>{I._lineIndexBuffer.add(n,r,l)};var at=ut(17873),wt=ut(13778),At=ut(560);function Tt(I,n){return I.iconMosaicItem&&n.iconMosaicItem?I.iconMosaicItem.page===n.iconMosaicItem.page?0:I.iconMosaicItem.page-n.iconMosaicItem.page:I.iconMosaicItem&&!n.iconMosaicItem?1:!I.iconMosaicItem&&n.iconMosaicItem?-1:0}class nt extends vt{constructor(n,r,l,a,c,h,u,f){super(n,r,f.getSpriteItems()),this.type=3,this._markerMap=new Map,this._glyphMap=new Map,this._glyphBufferDataStorage=new Map,this._isIconSDF=!1,this._iconVertexBuffer=l,this._iconIndexBuffer=a,this._textVertexBuffer=c,this._textIndexBuffer=h,this._placementEngine=u,this._workerTileHandler=f}get markerPageMap(){return this._markerMap}get glyphsPageMap(){return this._glyphMap}get symbolInstances(){return this._symbolInstances}getResources(n,r,l){const a=this.layer,c=this.zoom;n&&n.setExtent(this.layerExtent);const h=a.getLayoutProperty("icon-image"),u=a.getLayoutProperty("text-field");let f=a.getLayoutProperty("text-transform"),p=a.getLayoutProperty("text-font");const T=[];let v,L,A,P;h&&!h.isDataDriven&&(v=h.getValue(c)),u&&!u.isDataDriven&&(L=u.getValue(c)),f&&f.isDataDriven||(A=a.getLayoutValue("text-transform",c),f=null),p&&p.isDataDriven||(P=a.getLayoutValue("text-font",c),p=null);for(const S of this._features){const O=S.getGeometry(n);if(!O||0===O.length)continue;let k,x;h&&(k=h.isDataDriven?h.getValue(c,S):this._replaceKeys(v,S.values),k&&r(k));let o=!1;if(u&&(x=u.isDataDriven?u.getValue(c,S):this._replaceKeys(L,S.values),x)){switch(x=x.replace(/\\n/g,"\n"),f&&(A=f.getValue(c,S)),A){case 2:x=x.toLowerCase();break;case 1:x=x.toUpperCase()}if(nt._bidiEngine.hasBidiChar(x)){let D;D="rtl"===nt._bidiEngine.checkContextual(x)?"IDNNN":"ICNNN",x=nt._bidiEngine.bidiTransform(x,D,"VLYSN"),o=!0}const _=x.length;if(_>0){p&&(P=p.getValue(c,S));for(const D of P){let Z=l[D];Z||(Z=l[D]=new Set);for(let F=0;F<_;F++){const J=x.charCodeAt(F);Z.add(J)}}}}if(!k&&!x)continue;const g=a.getLayoutValue("symbol-sort-key",c,S),M={feature:S,sprite:k,label:x,rtl:o,geometry:O,hash:(x?(0,wt.hP)(x):0)^(k?(0,wt.hP)(k):0),priority:g,textFont:P};T.push(M)}this._symbolFeatures=T}processFeatures(n){n&&n.setExtent(this.layerExtent);const r=this.layer,l=this.zoom,a=r.getLayoutValue("symbol-placement",l),c=0!==a,h=8*r.getLayoutValue("symbol-spacing",l),u=r.getLayoutProperty("icon-image"),f=r.getLayoutProperty("text-field"),p=u?new At._L(r,l,c):null,T=f?new At.nj(r,l,c):null,v=this._workerTileHandler;let L;u&&(L=v.getSpriteItems()),this._iconIndexStart=3*this._iconIndexBuffer.index,this._textIndexStart=3*this._textIndexBuffer.index,this._iconIndexCount=0,this._textIndexCount=0,this._markerMap.clear(),this._glyphMap.clear();const A=[];let P=1;T&&T.size&&(P=T.size/C);const S=T?T.maxAngle*W.DT:0,O=T?8*T.size:0;for(const k of this._symbolFeatures){let x,o;p&&L&&k.sprite&&(x=L[k.sprite],x&&x.sdf&&(this._isIconSDF=!0)),x&&p.update(l,k.feature);let g=0;const M=k.label;if(M){T.update(l,k.feature);const _=c?T.keepUpright:T.writingMode&&T.writingMode.indexOf(1)>=0;let D=.5;switch(T.anchor){case 5:case 1:case 7:D=0;break;case 6:case 2:case 8:D=1}let Z=.5;switch(T.anchor){case 5:case 3:case 6:Z=0;break;case 7:case 4:case 8:Z=1}let F=.5;switch(T.justify){case 0:F=D;break;case 1:F=0;break;case 3:F=1}const J=T.letterSpacing*C,lt=c?0:T.maxWidth*C,it=T.lineHeight*C,bt=k.textFont.map(_t=>v.getGlyphItems(_t));if(o=new q(bt,lt,it,J,D,Z,F).getShaping(M,k.rtl,_),o&&o.length>0){let _t=1e30,It=-1e30;for(const St of o)_t=Math.min(_t,St.x),It=Math.max(It,St.x);g=(It-_t+48)*P*8}}for(let _ of k.geometry){const D=[];if(1===a){if(o&&o.length>0&&T&&T.size){const Z=8*T.size*(2+Math.min(2,4*Math.abs(T.offset[1])));_=nt._smoothVertices(_,Z)}nt._pushAnchors(D,_,h,g)}else 2===a?nt._pushCenterAnchor(D,_):3===k.feature.type?nt._pushCentroid(D,_):D.push(new t(_[0].x,_[0].y));for(const Z of D){if(Z.x<0||Z.x>4096||Z.y<0||Z.y>4096||c&&g>0&&0===T.rotationAlignment&&!nt._honorsTextMaxAngle(_,Z,g,S,O))continue;const F={shaping:o,line:_,iconMosaicItem:x,anchor:Z,symbolFeature:k,textColliders:[],iconColliders:[],textVertexRanges:[],iconVertexRanges:[]};A.push(F),this._processFeature(F,p,T)}}}A.sort(Tt),this._addPlacedGlyphs(),this._symbolInstances=A}serialize(){let n=11;n+=this.layerUIDs.length,n+=3*this.markerPageMap.size,n+=3*this.glyphsPageMap.size,n+=nt.symbolsSerializationLength(this._symbolInstances),n+=this._iconVertexBuffer.array.length,n+=this._iconIndexBuffer.array.length,n+=this._textVertexBuffer.array.length,n+=this._textIndexBuffer.array.length;const r=new Uint32Array(n),l=new Int32Array(r.buffer),a=new Float32Array(r.buffer);let c=0;r[c++]=this.type,r[c++]=this.layerUIDs.length;for(let h=0;h<this.layerUIDs.length;h++)r[c++]=this.layerUIDs[h];r[c++]=this._isIconSDF?1:0,r[c++]=this.markerPageMap.size;for(const[h,[u,f]]of this.markerPageMap)r[c++]=h,r[c++]=u,r[c++]=f;r[c++]=this.glyphsPageMap.size;for(const[h,[u,f]]of this.glyphsPageMap)r[c++]=h,r[c++]=u,r[c++]=f;r[c++]=this._iconVertexBuffer.index/4,r[c++]=this._textVertexBuffer.index/4,c=nt.serializeSymbols(r,l,a,c,this._symbolInstances),r[c++]=this._iconVertexBuffer.array.length;for(let h=0;h<this._iconVertexBuffer.array.length;h++)l[c++]=this._iconVertexBuffer.array[h];r[c++]=this._iconIndexBuffer.array.length;for(let h=0;h<this._iconIndexBuffer.array.length;h++)r[c++]=this._iconIndexBuffer.array[h];r[c++]=this._textVertexBuffer.array.length;for(let h=0;h<this._textVertexBuffer.array.length;h++)l[c++]=this._textVertexBuffer.array[h];r[c++]=this._textIndexBuffer.array.length;for(let h=0;h<this._textIndexBuffer.array.length;h++)r[c++]=this._textIndexBuffer.array[h];return r.buffer}static symbolsSerializationLength(n){let r=0;r+=1;for(const l of n||[]){r+=4,r+=1;for(const a of l.textColliders)r+=10;for(const a of l.iconColliders)r+=10;r+=1,r+=2*l.textVertexRanges.length,r+=1,r+=2*l.iconVertexRanges.length}return r}static serializeSymbols(n,r,l,a,c){c=c||[],r[a++]=c.length;for(const h of c){r[a++]=h.anchor.x,r[a++]=h.anchor.y,r[a++]=h.symbolFeature.hash,r[a++]=h.symbolFeature.priority,r[a++]=h.textColliders.length+h.iconColliders.length;for(const u of h.textColliders)r[a++]=u.xTile,r[a++]=u.yTile,r[a++]=u.dxPixels,r[a++]=u.dyPixels,r[a++]=u.hard?1:0,r[a++]=u.partIndex,l[a++]=u.minLod,l[a++]=u.maxLod,r[a++]=u.width,r[a++]=u.height;for(const u of h.iconColliders)r[a++]=u.xTile,r[a++]=u.yTile,r[a++]=u.dxPixels,r[a++]=u.dyPixels,r[a++]=u.hard?1:0,r[a++]=u.partIndex,l[a++]=u.minLod,l[a++]=u.maxLod,r[a++]=u.width,r[a++]=u.height;r[a++]=h.textVertexRanges.length;for(const[u,f]of h.textVertexRanges)r[a++]=u,r[a++]=f;r[a++]=h.iconVertexRanges.length;for(const[u,f]of h.iconVertexRanges)r[a++]=u,r[a++]=f}return a}_replaceKeys(n,r){return n.replace(/{([^{}]+)}/g,function(l,a){return a in r?r[a]:""})}_processFeature(n,r,l){const{line:a,iconMosaicItem:c,shaping:h,anchor:u}=n,f=this.zoom,p=this.layer,T=!!c;let v=!0;T&&(v=r.optional||!c);const L=h&&h.length>0;let A,P,S=!0;if(L&&(S=l.optional),T&&(A=this._placementEngine.getIconPlacement(u,c,r)),(A||v)&&(L&&(P=this._placementEngine.getTextPlacement(u,h,a,l)),P||S)){if(A&&P||(S||v?S||P?v||A||(P=null):A=null:(A=null,P=null)),P){const O=p.hasDataDrivenText?p.textMaterial.encodeAttributes(n.symbolFeature.feature,f,p):null;if(this._storePlacedGlyphs(n,P.shapes,f,l.rotationAlignment,O),P.textColliders){n.textColliders=P.textColliders;for(const k of P.textColliders){k.minLod=Math.max(f+(0,W.k3)(k.minLod),0),k.maxLod=Math.min(f+(0,W.k3)(k.maxLod),25);const x=k.angle;if(x){const o=Math.cos(x),g=Math.sin(x),M=k.dxPixels*o-k.dyPixels*g,_=k.dxPixels*g+k.dyPixels*o,D=(k.dxPixels+k.width)*o-k.dyPixels*g,Z=(k.dxPixels+k.width)*g+k.dyPixels*o,F=k.dxPixels*o-(k.dyPixels+k.height)*g,J=k.dxPixels*g+(k.dyPixels+k.height)*o,lt=(k.dxPixels+k.width)*o-(k.dyPixels+k.height)*g,it=(k.dxPixels+k.width)*g+(k.dyPixels+k.height)*o,bt=Math.min(M,D,F,lt),_t=Math.max(M,D,F,lt),It=Math.min(_,Z,J,it),St=Math.max(_,Z,J,it);k.dxPixels=bt,k.dyPixels=It,k.width=_t-bt,k.height=St-It}}}}if(A){const O=p.hasDataDrivenIcon?p.iconMaterial.encodeAttributes(n.symbolFeature.feature,f,p):null;if(this._addPlacedIcons(n,A.shapes,f,c.page,1===r.rotationAlignment,O),A.iconColliders){n.iconColliders=A.iconColliders;for(const k of A.iconColliders){k.minLod=Math.max(f+(0,W.k3)(k.minLod),0),k.maxLod=Math.min(f+(0,W.k3)(k.maxLod),25);const x=k.angle;if(x){const o=Math.cos(x),g=Math.sin(x),M=k.dxPixels*o-k.dyPixels*g,_=k.dxPixels*g+k.dyPixels*o,D=(k.dxPixels+k.width)*o-k.dyPixels*g,Z=(k.dxPixels+k.width)*g+k.dyPixels*o,F=k.dxPixels*o-(k.dyPixels+k.height)*g,J=k.dxPixels*g+(k.dyPixels+k.height)*o,lt=(k.dxPixels+k.width)*o-(k.dyPixels+k.height)*g,it=(k.dxPixels+k.width)*g+(k.dyPixels+k.height)*o,bt=Math.min(M,D,F,lt),_t=Math.max(M,D,F,lt),It=Math.min(_,Z,J,it),St=Math.max(_,Z,J,it);k.dxPixels=bt,k.dyPixels=It,k.width=_t-bt,k.height=St-It}}}}}}_addPlacedIcons(n,r,l,a,c,h){const u=Math.max(l-1,0),f=this._iconVertexBuffer,p=this._iconIndexBuffer,T=this._markerMap;for(const v of r){const L=c?0:Math.max(l+(0,W.k3)(v.minzoom),u),A=c?25:Math.min(l+(0,W.k3)(v.maxzoom),25);if(A<=L)continue;const P=v.tl,S=v.tr,O=v.bl,k=v.br,x=v.mosaicRect,o=v.labelAngle,g=v.minAngle,M=v.maxAngle,_=v.anchor,D=f.index,Z=x.x,F=x.y,J=Z+x.width,lt=F+x.height,it=f.index;f.add(_.x,_.y,P.x,P.y,Z,F,o,g,M,L,A,h),f.add(_.x,_.y,S.x,S.y,J,F,o,g,M,L,A,h),f.add(_.x,_.y,O.x,O.y,Z,lt,o,g,M,L,A,h),f.add(_.x,_.y,k.x,k.y,J,lt,o,g,M,L,A,h),n.iconVertexRanges.length>0&&n.iconVertexRanges[0][0]+n.iconVertexRanges[0][1]===it?n.iconVertexRanges[0][1]+=4:n.iconVertexRanges.push([it,4]),p.add(D+0,D+1,D+2),p.add(D+1,D+2,D+3),T.has(a)?T.get(a)[1]+=6:T.set(a,[this._iconIndexStart+this._iconIndexCount,6]),this._iconIndexCount+=6}}_addPlacedGlyphs(){const n=this._textVertexBuffer,r=this._textIndexBuffer,l=this._glyphMap;for(const[a,c]of this._glyphBufferDataStorage)for(const h of c){const u=n.index,f=h.symbolInstance,p=h.ddAttributes,T=n.index;n.add(h.glyphAnchor[0],h.glyphAnchor[1],h.tl[0],h.tl[1],h.xmin,h.ymin,h.labelAngle,h.minAngle,h.maxAngle,h.minLod,h.maxLod,p),n.add(h.glyphAnchor[0],h.glyphAnchor[1],h.tr[0],h.tr[1],h.xmax,h.ymin,h.labelAngle,h.minAngle,h.maxAngle,h.minLod,h.maxLod,p),n.add(h.glyphAnchor[0],h.glyphAnchor[1],h.bl[0],h.bl[1],h.xmin,h.ymax,h.labelAngle,h.minAngle,h.maxAngle,h.minLod,h.maxLod,p),n.add(h.glyphAnchor[0],h.glyphAnchor[1],h.br[0],h.br[1],h.xmax,h.ymax,h.labelAngle,h.minAngle,h.maxAngle,h.minLod,h.maxLod,p),f.textVertexRanges.length>0&&f.textVertexRanges[0][0]+f.textVertexRanges[0][1]===T?f.textVertexRanges[0][1]+=4:f.textVertexRanges.push([T,4]),r.add(u+0,u+1,u+2),r.add(u+1,u+2,u+3),l.has(a)?l.get(a)[1]+=6:l.set(a,[this._textIndexStart+this._textIndexCount,6]),this._textIndexCount+=6}this._glyphBufferDataStorage.clear()}_storePlacedGlyphs(n,r,l,a,c){const h=Math.max(l-1,0),u=1===a;let f,p,T,v,L,A,P,S,O,k,x;for(const o of r)f=u?0:Math.max(l+(0,W.k3)(o.minzoom),h),p=u?25:Math.min(l+(0,W.k3)(o.maxzoom),25),!(p<=f)&&(T=o.tl,v=o.tr,L=o.bl,A=o.br,P=o.labelAngle,S=o.minAngle,O=o.maxAngle,k=o.anchor,x=o.mosaicRect,this._glyphBufferDataStorage.has(o.page)||this._glyphBufferDataStorage.set(o.page,[]),this._glyphBufferDataStorage.get(o.page).push({glyphAnchor:[k.x,k.y],tl:[T.x,T.y],tr:[v.x,v.y],bl:[L.x,L.y],br:[A.x,A.y],xmin:x.x,ymin:x.y,xmax:x.x+x.width,ymax:x.y+x.height,labelAngle:P,minAngle:S,maxAngle:O,minLod:f,maxLod:p,placementLod:h,symbolInstance:n,ddAttributes:c}))}static _pushAnchors(n,r,l,a){l+=a;let c=0;const h=r.length-1;for(let L=0;L<h;L++)c+=V.E.distance(r[L],r[L+1]);let u=a||l;if(u*=.5,c<=u)return;const f=u/c;let p=0,T=-(l=c/Math.max(Math.round(c/l),1))/2;const v=r.length-1;for(let L=0;L<v;L++){const A=r[L],P=r[L+1],S=P.x-A.x,O=P.y-A.y,k=Math.sqrt(S*S+O*O);let x;for(;T+l<p+k;){T+=l;const o=(T-p)/k,g=(0,W.sX)(A.x,P.x,o),M=(0,W.sX)(A.y,P.y,o);void 0===x&&(x=Math.atan2(O,S)),n.push(new t(g,M,x,L,f))}p+=k}}static _pushCenterAnchor(n,r){let l=0;const a=r.length-1;for(let f=0;f<a;f++)l+=V.E.distance(r[f],r[f+1]);const c=l/2;let h=0;const u=r.length-1;for(let f=0;f<u;f++){const p=r[f],T=r[f+1],v=T.x-p.x,L=T.y-p.y,A=Math.sqrt(v*v+L*L);if(c<h+A){const P=(c-h)/A,S=(0,W.sX)(p.x,T.x,P),O=(0,W.sX)(p.y,T.y,P),k=Math.atan2(L,v);return void n.push(new t(S,O,k,f,0))}h+=A}}static _deviation(n,r,l){const a=(r.x-n.x)*(l.x-r.x)+(r.y-n.y)*(l.y-r.y),c=(r.x-n.x)*(l.y-r.y)-(r.y-n.y)*(l.x-r.x);return Math.atan2(c,a)}static _honorsTextMaxAngle(n,r,l,a,c){let h=0;const u=l/2;let f=new V.E(r.x,r.y),p=r.segment+1;for(;h>-u;){if(--p,p<0)return!1;h-=V.E.distance(n[p],f),f=n[p]}h+=V.E.distance(n[p],n[p+1]);const T=[];let v=0;const L=n.length;for(;h<u;){const A=n[p];let P,S=p;do{if(++S,S===L)return!1;P=n[S]}while(P.isEqual(A));let O,k=S;do{if(++k,k===L)return!1;O=n[k]}while(O.isEqual(P));const x=this._deviation(A,P,O);for(T.push({deviation:x,distToAnchor:h}),v+=x;h-T[0].distToAnchor>c;)v-=T.shift().deviation;if(Math.abs(v)>a)return!1;h+=V.E.distance(P,O),p=S}return!0}static _smoothVertices(n,r){if(r<=0)return n;let l=n.length;if(l<3)return n;const a=[];let c=0,h=0;a.push(0);for(let S=1;S<l;S++){const O=V.E.distance(n[S],n[S-1]);O>0&&(c+=O,a.push(c),h++,h!==S&&(n[h]=n[S]))}if(l=h+1,l<3)return n;r=Math.min(r,.2*c);const u=n[0].x,f=n[0].y,p=n[l-1].x,T=n[l-1].y,v=V.E.sub(n[0],n[1]);v.normalize(),n[0].x+=r*v.x,n[0].y+=r*v.y,v.assignSub(n[l-1],n[l-2]),v.normalize(),n[l-1].x+=r*v.x,n[l-1].y+=r*v.y,a[0]-=r,a[l-1]+=r;const L=[];L.push(new V.E(u,f));const A=1e-6,P=.5*r;for(let S=1;S<l-1;S++){let O=0,k=0,x=0;for(let o=S-1;o>=0;o--){const g=P+a[o+1]-a[S];if(g<0)break;const M=a[o+1]-a[o],_=a[S]-a[o]<P?1:g/M;if(_<A)break;const D=_*_,Z=_*g-.5*D*M,F=_*M/r,J=n[o+1],lt=n[o].x-J.x,it=n[o].y-J.y;O+=F/Z*(J.x*_*g+.5*D*(g*lt-M*J.x)-D*_*M*lt/3),k+=F/Z*(J.y*_*g+.5*D*(g*it-M*J.y)-D*_*M*it/3),x+=F}for(let o=S+1;o<l;o++){const g=P-a[o-1]+a[S];if(g<0)break;const M=a[o]-a[o-1],_=a[o]-a[S]<P?1:g/M;if(_<A)break;const D=_*_,Z=_*g-.5*D*M,F=_*M/r,J=n[o-1],lt=n[o].x-J.x,it=n[o].y-J.y;O+=F/Z*(J.x*_*g+.5*D*(g*lt-M*J.x)-D*_*M*lt/3),k+=F/Z*(J.y*_*g+.5*D*(g*it-M*J.y)-D*_*M*it/3),x+=F}L.push(new V.E(O/x,k/x))}return L.push(new V.E(p,T)),n[0].x=u,n[0].y=f,n[l-1].x=p,n[l-1].y=T,L}static _pushCentroid(n,r){const c=4096,h=4096,u=r.length-1;let f=0,p=0,T=0,v=r[0].x,L=r[0].y;v>c&&(v=c),v<0&&(v=0),L>h&&(L=h),L<0&&(L=0);for(let A=1;A<u;A++){let P=r[A].x,S=r[A].y,O=r[A+1].x,k=r[A+1].y;P>c&&(P=c),P<0&&(P=0),S>h&&(S=h),S<0&&(S=0),O>c&&(O=c),O<0&&(O=0),k>h&&(k=h),k<0&&(k=0);const x=(P-v)*(k-L)-(O-v)*(S-L);f+=x*(v+P+O),p+=x*(L+S+k),T+=x}f/=3*T,p/=3*T,isNaN(f)||isNaN(p)||n.push(new t(f,p))}}nt._bidiEngine=new at.Z;var Ut,I,ft=ut(24145);(I=Ut||(Ut={}))[I.INITIALIZED=0]="INITIALIZED",I[I.NO_DATA=1]="NO_DATA",I[I.READY=2]="READY",I[I.MODIFIED=3]="MODIFIED",I[I.INVALID=4]="INVALID";class Rt{constructor(n,r,l,a,c){if(this._pbfTiles={},this._tileClippers={},this._client=l,this._tile=r,c){this._styleLayerUIDs=new Set;for(const T of c)this._styleLayerUIDs.add(T)}this._styleRepository=a,this._layers=this._styleRepository.layers;const[h,u,f]=r.tileKey.split("/").map(parseFloat);this._level=h;const p=8+Math.max(5*(this._level-14),0);for(const T of Object.keys(n)){const v=n[T];if(this._pbfTiles[T]=new ct.Z(new Uint8Array(v.protobuff),new DataView(v.protobuff)),v.refKey){const[L]=v.refKey.split("/").map(parseFloat),A=h-L;if(A>0){const P=(1<<A)-1,S=u&P,O=f&P;this._tileClippers[T]=new ft.b(A,S,O,8,p)}}this._tileClippers[T]||(this._tileClippers[T]=new ft.I)}}_canParseStyleLayer(n){return!this._styleLayerUIDs||this._styleLayerUIDs.has(n)}parse(n){var r=this;return(0,pt.Z)(function*(){const l=(0,st.j)(),a=r._initialize(n),{returnedBuckets:c}=a;r._processLayers(a),r._linkReferences(a),r._filterFeatures(a);const h=[],u=new Set,f=(v,L)=>{u.has(v)||(h.push({name:v,repeat:L}),u.add(v))},p={};for(const v of c)v.getResources(v.tileClipper,f,p);if(r._tile.status===Ut.INVALID)return Promise.resolve([]);const T=r._fetchResources(h,p,n);return Promise.all([...T,l]).then(()=>r._processFeatures(a.returnedBuckets))})()}_initialize(n){return{signal:n&&n.signal,sourceNameToTileData:this._parseTileData(this._pbfTiles),layers:this._layers,zoom:this._level,sourceNameToTileClipper:this._tileClippers,sourceNameToUniqueSourceLayerBuckets:{},sourceNameToUniqueSourceLayers:{},returnedBuckets:[],layerIdToBucket:{},referencerUIDToReferencedId:new Map}}_processLayers(n){const{sourceNameToTileData:r,layers:l,zoom:a,sourceNameToTileClipper:c,sourceNameToUniqueSourceLayerBuckets:h,sourceNameToUniqueSourceLayers:u,returnedBuckets:f,layerIdToBucket:p,referencerUIDToReferencedId:T}=n;for(let v=l.length-1;v>=0;v--){const L=l[v];if(!this._canParseStyleLayer(L.uid)||L.minzoom&&a<Math.floor(L.minzoom)||L.maxzoom&&a>=L.maxzoom||0===L.type||!r[L.source]||!c[L.source])continue;const A=r[L.source],P=c[L.source],S=L.sourceLayer,O=A[S];if(O){let k=u[L.source];if(k||(k=u[L.source]=new Set),k.add(L.sourceLayer),L.refLayerId)T.set(L.uid,L.refLayerId);else{const x=this._createBucket(L);if(x){x.layerUIDs=[L.uid],x.layerExtent=O.extent,x.tileClipper=P;let o=h[L.source];o||(o=h[L.source]={});let g=o[S];g||(g=o[S]=[]),g.push(x),f.push(x),p[L.id]=x}}}}}_linkReferences(n){const{layerIdToBucket:r,referencerUIDToReferencedId:l}=n;l.forEach((a,c)=>{r[a=a]&&r[a].layerUIDs.push(c)})}_filterFeatures(n){const{signal:r,sourceNameToTileData:l,sourceNameToUniqueSourceLayerBuckets:a,sourceNameToUniqueSourceLayers:c}=n,h=10*this._level,u=10*(this._level+1),f=[],p=[];for(const T of Object.keys(c))c[T].forEach(v=>{f.push(v),p.push(T)});for(let T=0;T<f.length;T++){const v=p[T],L=f[T];if(!l[v]||!a[v])continue;const A=l[v][L],P=a[v][L];if(!P||0===P.length)continue;if((0,xt.Hc)(r))return;const S=A.getData();for(;S.nextTag(2);){const O=S.getMessage(),k=new G(O,A);O.release();const x=k.values;if(x){const o=x._minzoom;if(o&&o>=u)continue;const g=x._maxzoom;if(g&&g<=h)continue}for(const o of P)o.pushFeature(k)}}}_fetchResources(n,r,l){const a=[],c=this._tile.getWorkerTileHandler();let h,u;n.length>0&&(h=c.fetchSprites(n,this._client,l),a.push(h));for(const f in r){const p=r[f];p.size>0&&(u=c.fetchGlyphs(this._tile.tileKey,f,p,this._client,l),a.push(u))}return a}_processFeatures(n){const r=n.filter(l=>l.hasFeatures()||this._canParseStyleLayer(l.layer.uid));for(const l of r)l.processFeatures(l.tileClipper);return r}_parseTileData(n){const r={};for(const l of Object.keys(n)){const a=n[l],c={};for(;a.next();)switch(a.tag()){case 3:{const h=a.getMessage(),u=new H(h);h.release(),c[u.name]=u;break}default:a.skip()}r[l]=c}return r}_createBucket(n){switch(n.type){case 0:return null;case 1:return this._createFillBucket(n);case 2:return this._createLineBucket(n);case 4:return this._createCircleBucket(n);case 3:return this._createSymbolBucket(n)}}_createFillBucket(n){return new b(n,this._level,this._tile.getWorkerTileHandler().getSpriteItems(),new Wt(n.fillMaterial.getStride()),new Mt,new Q(n.outlineMaterial.getStride()),new Mt)}_createLineBucket(n){return new R(n,this._level,this._tile.getWorkerTileHandler().getSpriteItems(),new N(n.lineMaterial.getStride()),new Mt)}_createCircleBucket(n){return new Jt(n,this._level,this._tile.getWorkerTileHandler().getSpriteItems(),new dt(n.circleMaterial.getStride()),new Mt)}_createSymbolBucket(n){const r=this._tile;return new nt(n,this._level,new gt(n.iconMaterial.getStride()),new Mt,new gt(n.textMaterial.getStride()),new Mt,r.placementEngine,r.getWorkerTileHandler())}}class Kt{constructor(n,r,l,a){this.status=Ut.INITIALIZED,this.placementEngine=new ht,this.tileKey=n,this.refKeys=r,this._workerTileHandler=l,this._styleRepository=a}release(){this.tileKey="",this.refKeys=null,this.status=Ut.INITIALIZED,this._workerTileHandler=null}parse(n,r,l){var a=this;return(0,pt.Z)(function*(){const c=l&&l.signal;if((0,tt.pC)(c)){const f=()=>{c.removeEventListener("abort",f),a.status=Ut.INVALID};c.addEventListener("abort",f)}let h;try{h=yield a._parse(n,l)}catch(f){if((0,xt.D_)(f))throw f;return{result:[],transferList:[]}}a.status=Ut.READY;const u=[];for(const f of h){const p=f.serialize();u.push(p)}return{result:u,transferList:u.length<=r&&u}})()}setObsolete(){this.status=Ut.INVALID}getLayers(){return this._workerTileHandler.getLayers()}getWorkerTileHandler(){return this._workerTileHandler}_parse(n,r){var l=this;return(0,pt.Z)(function*(){const a=n.sourceName2DataAndRefKey;return 0===Object.keys(a).length?[]:(l.status=Ut.MODIFIED,new Rt(a,l,r.client,l._styleRepository,n.styleLayerUIDs).parse(r))})()}}var Zt=ut(48955);class Ot{constructor(){this._spriteInfo={},this._glyphInfo={}}reset(){return this._spriteInfo={},this._glyphInfo={},Promise.resolve()}getLayers(){var n;return null==(n=this._styleRepository)?void 0:n.layers}createTileAndParse(n,r){var l=this;return(0,pt.Z)(function*(){const{key:a}=n,c={};for(const u of Object.keys(n.sourceName2DataAndRefKey)){const f=n.sourceName2DataAndRefKey[u];c[u]=f.refKey}const h=new Kt(a,c,l,l._styleRepository);try{return yield h.parse(n,l._vectorTileLayerMaxBuffers,r)}catch(u){if(h.setObsolete(),h.release(),!(0,xt.D_)(u))throw u;return null}})()}updateStyle(n){if(!n||0===n.length||!this._styleRepository)return;const r=this._styleRepository;for(const l of n){const a=l.type,c=l.data;switch(a){case 0:r.setPaintProperties(c.layer,c.paint);break;case 1:r.setLayoutProperties(c.layer,c.layout);break;case 3:r.deleteStyleLayer(c.layer);break;case 2:r.setStyleLayer(c.layer,c.index)}}}setStyle(n){this._styleRepository=new Zt.Z(n.style),this._spriteInfo={},this._glyphInfo={},this._vectorTileLayerMaxBuffers=n.vectorTileLayerMaxBuffers}fetchSprites(n,r,l){const a=[],c=this._spriteInfo;for(const h of n)void 0===c[h.name]&&a.push(h);return 0===a.length?Promise.resolve():r.invoke("getSprites",a,{signal:l&&l.signal}).then(h=>{for(const u in h){const f=h[u];c[u]=f}})}getSpriteItems(){return this._spriteInfo}fetchGlyphs(n,r,l,a,c){const h=[];let u=this._glyphInfo[r];return u?l.forEach(f=>{u[f]||h.push(f)}):(u=this._glyphInfo[r]=[],l.forEach(f=>h.push(f))),0===h.length?Promise.resolve():a.invoke("getGlyphs",{tileID:n,font:r,codePoints:h},c).then(f=>{for(let p=0;p<f.length;p++)f[p]&&(u[p]=f[p])})}getGlyphItems(n){return this._glyphInfo[n]}}},27606:(Qt,Dt,ut)=>{ut.d(Dt,{PF:()=>xt,Ts:()=>tt,Bf:()=>pt,nN:()=>W});const pt=!0,xt=32,tt=1.5,W=200},74953:(Qt,Dt,ut)=>{ut.d(Dt,{E:()=>pt});class pt{constructor(tt,W){this.x=tt,this.y=W}clone(){return new pt(this.x,this.y)}equals(tt,W){return tt===this.x&&W===this.y}isEqual(tt){return tt.x===this.x&&tt.y===this.y}setCoords(tt,W){this.x=tt,this.y=W}normalize(){const tt=this.x,W=this.y,yt=Math.sqrt(tt*tt+W*W);this.x/=yt,this.y/=yt}rightPerpendicular(){const tt=this.x;this.x=this.y,this.y=-tt}move(tt,W){this.x+=tt,this.y+=W}assign(tt){this.x=tt.x,this.y=tt.y}assignAdd(tt,W){this.x=tt.x+W.x,this.y=tt.y+W.y}assignSub(tt,W){this.x=tt.x-W.x,this.y=tt.y-W.y}rotate(tt,W){const yt=this.x,Bt=this.y;this.x=yt*tt-Bt*W,this.y=yt*W+Bt*tt}scale(tt){this.x*=tt,this.y*=tt}length(){const tt=this.x,W=this.y;return Math.sqrt(tt*tt+W*W)}static distance(tt,W){const yt=W.x-tt.x,Bt=W.y-tt.y;return Math.sqrt(yt*yt+Bt*Bt)}static add(tt,W){return new pt(tt.x+W.x,tt.y+W.y)}static sub(tt,W){return new pt(tt.x-W.x,tt.y-W.y)}}},76272:(Qt,Dt,ut)=>{ut.d(Dt,{vX:()=>K,s5:()=>V,k3:()=>$,Or:()=>z});Number.POSITIVE_INFINITY;const xt=Math.PI,yt=128/xt,X=1/Math.LN2;function q(Y,t){return(Y%=t)>=0?Y:Y+t}function z(Y){return q(Y*yt,256)}function V(Y){return q(.7111111111111111*Y,256)}function $(Y){return Math.log(Y)*X}function K(Y,t,ot){return Y>=t&&Y<=ot||Y>=ot&&Y<=t}},16434:(Qt,Dt,ut)=>{ut.d(Dt,{Z:()=>pt});class pt{constructor(tt=0,W=0,yt=0,Bt=0){this.x=tt,this.y=W,this.width=yt,this.height=Bt}get isEmpty(){return this.width<=0||this.height<=0}union(tt){this.x=Math.min(this.x,tt.x),this.y=Math.min(this.y,tt.y),this.width=Math.max(this.width,tt.width),this.height=Math.max(this.height,tt.height)}}},24145:(Qt,Dt,ut)=>{ut.d(Dt,{I:()=>Bt,b:()=>yt});var pt=ut(30603),xt=ut(74953),tt=ut(76272);class W{constructor(U,C,X){this.ratio=U,this.x=C,this.y=X}}class yt{constructor(U,C,X,q=8,z=8){this.lines=[],this.starts=[],this.validateTessellation=!0,this.pixelRatio=q,this.pixelMargin=z,this.tileSize=pt.I_*q,this.dz=U,this.yPos=C,this.xPos=X}setPixelMargin(U){U!==this.pixelMargin&&(this.pixelMargin=U,this.setExtent(this._extent))}setExtent(U){this._extent=U,this.finalRatio=this.tileSize/U*(1<<this.dz);let C=this.pixelRatio*this.pixelMargin;C/=this.finalRatio;const X=U>>this.dz;C>X&&(C=X),this.margin=C,this.xmin=X*this.xPos-C,this.ymin=X*this.yPos-C,this.xmax=this.xmin+X+2*C,this.ymax=this.ymin+X+2*C}reset(U){this.type=U,this.lines=[],this.starts=[],this.line=null,this.start=0}moveTo(U,C){this._pushLine(),this._prevIsIn=this._isIn(U,C),this._moveTo(U,C,this._prevIsIn),this._prevPt=new xt.E(U,C),this._firstPt=new xt.E(U,C),this._dist=0}lineTo(U,C){const X=this._isIn(U,C),q=new xt.E(U,C),z=xt.E.distance(this._prevPt,q);let V,$,i,m,K,Y,t,ot;if(X)this._prevIsIn?this._lineTo(U,C,!0):(V=this._prevPt,$=q,i=this._intersect($,V),this.start=this._dist+z*(1-this._r),this._lineTo(i.x,i.y,!0),this._lineTo($.x,$.y,!0));else if(this._prevIsIn)$=this._prevPt,V=q,i=this._intersect($,V),this._lineTo(i.x,i.y,!0),this._lineTo(V.x,V.y,!1);else{const et=this._prevPt,e=q;if(et.x<=this.xmin&&e.x<=this.xmin||et.x>=this.xmax&&e.x>=this.xmax||et.y<=this.ymin&&e.y<=this.ymin||et.y>=this.ymax&&e.y>=this.ymax)this._lineTo(e.x,e.y,!1);else{const ht=[];if((et.x<this.xmin&&e.x>this.xmin||et.x>this.xmin&&e.x<this.xmin)&&(m=(this.xmin-et.x)/(e.x-et.x),ot=et.y+m*(e.y-et.y),ot<=this.ymin?Y=!1:ot>=this.ymax?Y=!0:ht.push(new W(m,this.xmin,ot))),(et.x<this.xmax&&e.x>this.xmax||et.x>this.xmax&&e.x<this.xmax)&&(m=(this.xmax-et.x)/(e.x-et.x),ot=et.y+m*(e.y-et.y),ot<=this.ymin?Y=!1:ot>=this.ymax?Y=!0:ht.push(new W(m,this.xmax,ot))),(et.y<this.ymin&&e.y>this.ymin||et.y>this.ymin&&e.y<this.ymin)&&(m=(this.ymin-et.y)/(e.y-et.y),t=et.x+m*(e.x-et.x),t<=this.xmin?K=!1:t>=this.xmax?K=!0:ht.push(new W(m,t,this.ymin))),(et.y<this.ymax&&e.y>this.ymax||et.y>this.ymax&&e.y<this.ymax)&&(m=(this.ymax-et.y)/(e.y-et.y),t=et.x+m*(e.x-et.x),t<=this.xmin?K=!1:t>=this.xmax?K=!0:ht.push(new W(m,t,this.ymax))),0===ht.length)K?Y?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):Y?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(ht.length>1&&ht[0].ratio>ht[1].ratio)this.start=this._dist+z*ht[1].ratio,this._lineTo(ht[1].x,ht[1].y,!0),this._lineTo(ht[0].x,ht[0].y,!0);else{this.start=this._dist+z*ht[0].ratio;for(let ct=0;ct<ht.length;ct++)this._lineTo(ht[ct].x,ht[ct].y,!0)}this._lineTo(e.x,e.y,!1)}}this._dist+=z,this._prevIsIn=X,this._prevPt=q}close(){if(this.line.length>2){const U=this._firstPt,C=this._prevPt;U.x===C.x&&U.y===C.y||this.lineTo(U.x,U.y);const X=this.line;let q=X.length;for(;q>=4&&(X[0].x===X[1].x&&X[0].x===X[q-2].x||X[0].y===X[1].y&&X[0].y===X[q-2].y);)X.pop(),X[0].x=X[q-2].x,X[0].y=X[q-2].y,--q}}result(U=!0){return this._pushLine(),0===this.lines.length?null:(3===this.type&&U&&Pt.simplify(this.tileSize,this.margin*this.finalRatio,this.lines),this.lines)}resultWithStarts(){if(2!==this.type)throw new Error("Only valid for lines");this._pushLine();const U=this.lines,C=U.length;if(0===C)return null;const X=[];for(let q=0;q<C;q++)X.push({line:U[q],start:this.starts[q]||0});return X}_isIn(U,C){return U>=this.xmin&&U<=this.xmax&&C>=this.ymin&&C<=this.ymax}_intersect(U,C){let X,q,z;if(C.x>=this.xmin&&C.x<=this.xmax)q=C.y<=this.ymin?this.ymin:this.ymax,z=(q-U.y)/(C.y-U.y),X=U.x+z*(C.x-U.x);else if(C.y>=this.ymin&&C.y<=this.ymax)X=C.x<=this.xmin?this.xmin:this.xmax,z=(X-U.x)/(C.x-U.x),q=U.y+z*(C.y-U.y);else{q=C.y<=this.ymin?this.ymin:this.ymax,X=C.x<=this.xmin?this.xmin:this.xmax;const V=(X-U.x)/(C.x-U.x),$=(q-U.y)/(C.y-U.y);V<$?(z=V,q=U.y+V*(C.y-U.y)):(z=$,X=U.x+$*(C.x-U.x))}return this._r=z,new xt.E(X,q)}_pushLine(){this.line&&(1===this.type?this.line.length>0&&(this.lines.push(this.line),this.starts.push(this.start)):2===this.type?this.line.length>1&&(this.lines.push(this.line),this.starts.push(this.start)):3===this.type&&this.line.length>3&&(this.lines.push(this.line),this.starts.push(this.start))),this.line=[],this.start=0}_moveTo(U,C,X){3!==this.type?X&&(U=Math.round((U-(this.xmin+this.margin))*this.finalRatio),C=Math.round((C-(this.ymin+this.margin))*this.finalRatio),this.line.push(new xt.E(U,C))):(X||(U<this.xmin&&(U=this.xmin),U>this.xmax&&(U=this.xmax),C<this.ymin&&(C=this.ymin),C>this.ymax&&(C=this.ymax)),U=Math.round((U-(this.xmin+this.margin))*this.finalRatio),C=Math.round((C-(this.ymin+this.margin))*this.finalRatio),this.line.push(new xt.E(U,C)),this._is_h=!1,this._is_v=!1)}_lineTo(U,C,X){let q,z;if(3!==this.type)if(X){if(U=Math.round((U-(this.xmin+this.margin))*this.finalRatio),C=Math.round((C-(this.ymin+this.margin))*this.finalRatio),this.line.length>0&&(q=this.line[this.line.length-1],q.equals(U,C)))return;this.line.push(new xt.E(U,C))}else this.line&&this.line.length>0&&this._pushLine();else if(X||(U<this.xmin&&(U=this.xmin),U>this.xmax&&(U=this.xmax),C<this.ymin&&(C=this.ymin),C>this.ymax&&(C=this.ymax)),U=Math.round((U-(this.xmin+this.margin))*this.finalRatio),C=Math.round((C-(this.ymin+this.margin))*this.finalRatio),this.line&&this.line.length>0){q=this.line[this.line.length-1];const V=q.x===U,$=q.y===C;if(V&&$)return;this._is_h&&V||this._is_v&&$?(q.x=U,q.y=C,z=this.line[this.line.length-2],z.x===U&&z.y===C?(this.line.pop(),this.line.length<=1?(this._is_h=!1,this._is_v=!1):(z=this.line[this.line.length-2],this._is_h=z.x===U,this._is_v=z.y===C)):(this._is_h=z.x===U,this._is_v=z.y===C)):(this.line.push(new xt.E(U,C)),this._is_h=V,this._is_v=$)}else this.line.push(new xt.E(U,C))}}class Bt{setExtent(U){this._ratio=4096===U?1:4096/U}get validateTessellation(){return this._ratio<1}reset(U){this.lines=[],this.line=null}moveTo(U,C){this.line&&this.lines.push(this.line),this.line=[];const X=this._ratio;this.line.push(new xt.E(U*X,C*X))}lineTo(U,C){const X=this._ratio;this.line.push(new xt.E(U*X,C*X))}close(){const U=this.line;U&&!U[0].isEqual(U[U.length-1])&&U.push(U[0])}result(){return this.line&&this.lines.push(this.line),0===this.lines.length?null:this.lines}}class Pt{static simplify(U,C,X){if(!X)return;const q=-C,z=U+C,V=-C,$=U+C,i=[],m=[],K=X.length;for(let t=0;t<K;++t){const ot=X[t];if(!ot||ot.length<2)continue;let et,e=ot[0];const ht=ot.length;for(let ct=1;ct<ht;++ct)et=ot[ct],e.x===et.x&&(e.x<=q&&(e.y>et.y?(i.push(t),i.push(ct),i.push(0),i.push(-1)):(m.push(t),m.push(ct),m.push(0),m.push(-1))),e.x>=z&&(e.y<et.y?(i.push(t),i.push(ct),i.push(1),i.push(-1)):(m.push(t),m.push(ct),m.push(1),m.push(-1)))),e.y===et.y&&(e.y<=V&&(e.x<et.x?(i.push(t),i.push(ct),i.push(2),i.push(-1)):(m.push(t),m.push(ct),m.push(2),m.push(-1))),e.y>=$&&(e.x>et.x?(i.push(t),i.push(ct),i.push(3),i.push(-1)):(m.push(t),m.push(ct),m.push(3),m.push(-1)))),e=et}if(0===i.length||0===m.length)return;Pt.fillParent(X,m,i),Pt.fillParent(X,i,m);const Y=[];Pt.calcDeltas(Y,m,i),Pt.calcDeltas(Y,i,m),Pt.addDeltas(Y,X)}static fillParent(U,C,X){const q=X.length,z=C.length;for(let V=0;V<z;V+=4){const $=C[V],i=C[V+1],m=C[V+2],K=U[$][i-1],Y=U[$][i];let t=8092,ot=-1;for(let et=0;et<q;et+=4){if(X[et+2]!==m)continue;const e=X[et],ht=X[et+1],ct=U[e][ht-1],st=U[e][ht];switch(m){case 0:case 1:if((0,tt.vX)(K.y,ct.y,st.y)&&(0,tt.vX)(Y.y,ct.y,st.y)){const G=Math.abs(st.y-ct.y);G<t&&(t=G,ot=et)}break;case 2:case 3:if((0,tt.vX)(K.x,ct.x,st.x)&&(0,tt.vX)(Y.x,ct.x,st.x)){const G=Math.abs(st.x-ct.x);G<t&&(t=G,ot=et)}}}C[V+3]=ot}}static calcDeltas(U,C,X){const q=C.length;for(let z=0;z<q;z+=4){const V=[],$=Pt.calcDelta(z,C,X,V);U.push(C[z]),U.push(C[z+1]),U.push(C[z+2]),U.push($)}}static calcDelta(U,C,X,q){const z=C[U+3];if(-1===z)return 0;const V=q.length;return V>1&&q[V-2]===z?0:(q.push(z),Pt.calcDelta(z,X,C,q)+1)}static addDeltas(U,C){const X=U.length;let q=0;for(let z=0;z<X;z+=4){const V=U[z+3];V>q&&(q=V)}for(let z=0;z<X;z+=4){const V=C[U[z]],$=U[z+1],i=q-U[z+3];switch(U[z+2]){case 0:V[$-1].x-=i,V[$].x-=i,1===$&&(V[V.length-1].x-=i),$===V.length-1&&(V[0].x-=i);break;case 1:V[$-1].x+=i,V[$].x+=i,1===$&&(V[V.length-1].x+=i),$===V.length-1&&(V[0].x+=i);break;case 2:V[$-1].y-=i,V[$].y-=i,1===$&&(V[V.length-1].y-=i),$===V.length-1&&(V[0].y-=i);break;case 3:V[$-1].y+=i,V[$].y+=i,1===$&&(V[V.length-1].y+=i),$===V.length-1&&(V[0].y+=i)}}}}},63537:(Qt,Dt,ut)=>{ut.d(Dt,{z:()=>q});var pt=ut(30603);function xt(z,V){return z.x===V.x&&z.y===V.y}function W(z,V){return z.x=V.y,z.y=-V.x,z}function yt(z,V){return z.x=-V.y,z.y=V.x,z}function Bt(z,V){return z.x=V.x,z.y=V.y,z}function Pt(z,V){return z.x=-V.x,z.y=-V.y,z}function Lt(z){return Math.sqrt(z.x*z.x+z.y*z.y)}function U(z,V){return z.x*V.y-z.y*V.x}function C(z,V){return z.x*V.x+z.y*V.y}function X(z,V,$,i){return z.x=V.x*$+V.y*i,z.y=V.x*i-V.y*$,z}class q{constructor(V,$,i){this.writeVertex=V,this.writeTriangle=$,this.canUseThinTessellation=i,this.prevNormal={x:void 0,y:void 0},this.nextNormal={x:void 0,y:void 0},this.textureNormalLeft={x:0,y:1},this.textureNormalRight={x:0,y:-1},this.textureNormal={x:void 0,y:void 0},this.joinNormal={x:void 0,y:void 0},this.inner={x:void 0,y:void 0},this.outer={x:void 0,y:void 0},this.roundStart={x:void 0,y:void 0},this.roundEnd={x:void 0,y:void 0},this.startBreak={x:void 0,y:void 0},this.endBreak={x:void 0,y:void 0},this.innerPrev={x:void 0,y:void 0},this.innerNext={x:void 0,y:void 0},this.bevelStart={x:void 0,y:void 0},this.bevelEnd={x:void 0,y:void 0},this.bevelMiddle={x:void 0,y:void 0}}tessellate(V,$){(function(z){if(!z)return;const V=z.length;if(V<=1)return;let $=0;for(let i=1;i<V;i++)xt(z[i],z[$])||++$===i||(z[$]=z[i]);z.length=$+1})(V),this.canUseThinTessellation&&$.halfWidth<pt.tQ&&!$.offset?this.tessellateThin_(V,$):this.tessellate_(V,$)}tessellateThin_(V,$){if(V.length<2)return;const i=$.wrapDistance||65535;let m=$.initialDistance||0,K=!1,Y=V[0].x,t=V[0].y;const ot=V.length;for(let et=1;et<ot;++et){K&&(K=!1,m=0);let e=V[et].x,ht=V[et].y,ct=e-Y,st=ht-t,G=Math.sqrt(ct*ct+st*st);if(ct/=G,st/=G,m+G>i){K=!0;const N=(i-m)/G;G=i-m,e=(1-N)*Y+N*e,ht=(1-N)*t+N*ht,--et}const y=this.writeVertex(Y,t,0,0,ct,st,st,-ct,0,-1,m),Mt=this.writeVertex(Y,t,0,0,ct,st,-st,ct,0,1,m);m+=G;const zt=this.writeVertex(e,ht,0,0,ct,st,st,-ct,0,-1,m),H=this.writeVertex(e,ht,0,0,ct,st,-st,ct,0,1,m);this.writeTriangle(y,Mt,zt),this.writeTriangle(Mt,zt,H),Y=e,t=ht}}tessellate_(V,$){const i=V[0],m=V[V.length-1],K=xt(i,m),Y=K?3:2;if(V.length<Y)return;const t=$.pixelCoordRatio,ot=null!=$.capType?$.capType:0,et=null!=$.joinType?$.joinType:2,e=null!=$.miterLimit?Math.min($.miterLimit,4):2,ht=null!=$.roundLimit?Math.min($.roundLimit,1.05):1.05,ct=null!=$.halfWidth?$.halfWidth:2,st=!!$.textured;let G,y,Mt=null,zt=null;const H=this.prevNormal,N=this.nextNormal;let Wt=-1,Q=-1;const gt=this.joinNormal;let dt,vt;const Jt=this.textureNormalLeft,d=this.textureNormalRight,w=this.textureNormal;let b=-1,B=-1;const E=$.wrapDistance||65535;let R=$.initialDistance||0;const j=this.writeVertex,rt=this.writeTriangle,at=function(At,Et,Tt,nt,ft,Ut){const jt=j(G,y,dt,vt,Tt,nt,At,Et,ft,Ut,R);return b>=0&&B>=0&&jt>=0&&rt(b,B,jt),b=B,B=jt,jt};K&&(Mt=V[V.length-2],N.x=m.x-Mt.x,N.y=m.y-Mt.y,Q=Lt(N),N.x/=Q,N.y/=Q);let wt=!1;for(let At=0;At<V.length;++At){if(wt&&(wt=!1,R=0),Mt&&(H.x=-N.x,H.y=-N.y,Wt=Q,R+Wt>E&&(wt=!0)),wt){const mt=(E-R)/Wt;Wt=E-R,Mt={x:(1-mt)*Mt.x+mt*V[At].x,y:(1-mt)*Mt.y+mt*V[At].y},--At}else Mt=V[At];G=Mt.x,y=Mt.y;const Et=At<=0&&!wt,Tt=At===V.length-1;if(Et||(R+=Wt),zt=Tt?K?V[1]:null:V[At+1],zt?(N.x=zt.x-G,N.y=zt.y-y,Q=Lt(N),N.x/=Q,N.y/=Q):(N.x=void 0,N.y=void 0),!K){if(Et){yt(gt,N),dt=gt.x,vt=gt.y,2===ot&&(at(-N.y-N.x,N.x-N.y,N.x,N.y,0,-1),at(N.y-N.x,-N.x-N.y,N.x,N.y,0,1)),1===ot&&(at(-N.y-N.x,N.x-N.y,N.x,N.y,-1,-1),at(N.y-N.x,-N.x-N.y,N.x,N.y,-1,1)),1!==ot&&0!==ot||(at(-N.y,N.x,N.x,N.y,0,-1),at(N.y,-N.x,N.x,N.y,0,1));continue}if(Tt){W(gt,H),dt=gt.x,vt=gt.y,1!==ot&&0!==ot||(at(H.y,-H.x,-H.x,-H.y,0,-1),at(-H.y,H.x,-H.x,-H.y,0,1)),2===ot&&(at(H.y-H.x,-H.x-H.y,-H.x,-H.y,0,-1),at(-H.y-H.x,H.x-H.y,-H.x,-H.y,0,1)),1===ot&&(at(H.y-H.x,-H.x-H.y,-H.x,-H.y,1,-1),at(-H.y-H.x,H.x-H.y,-H.x,-H.y,1,1));continue}}let nt,ft,Ut=-U(H,N);if(Math.abs(Ut)<.01)C(H,N)>0?(gt.x=H.x,gt.y=H.y,Ut=1,nt=Number.MAX_VALUE,ft=!0):(yt(gt,N),Ut=1,nt=1,ft=!1);else{gt.x=(H.x+N.x)/Ut,gt.y=(H.y+N.y)/Ut,nt=Lt(gt);const mt=(nt-1)*ct*t;ft=nt>4||mt>Wt&&mt>Q}dt=gt.x,vt=gt.y;let jt=et;switch(et){case 0:nt<1.05&&(jt=2);break;case 1:nt<ht&&(jt=2);break;case 2:nt>e&&(jt=0)}switch(jt){case 2:if(at(gt.x,gt.y,-H.x,-H.y,0,-1),at(-gt.x,-gt.y,-H.x,-H.y,0,1),Tt)break;if(st){const mt=wt?0:R;b=this.writeVertex(G,y,dt,vt,N.x,N.y,gt.x,gt.y,0,-1,mt),B=this.writeVertex(G,y,dt,vt,N.x,N.y,-gt.x,-gt.y,0,1,mt)}break;case 0:{const mt=Ut<0;let kt,Rt,Kt,Zt;if(mt){const r=b;b=B,B=r,kt=Jt,Rt=d}else kt=d,Rt=Jt;if(ft)Kt=mt?yt(this.innerPrev,H):W(this.innerPrev,H),Zt=mt?W(this.innerNext,N):yt(this.innerNext,N);else{const r=mt?Pt(this.inner,gt):Bt(this.inner,gt);Kt=r,Zt=r}const Ot=mt?W(this.bevelStart,H):yt(this.bevelStart,H);at(Kt.x,Kt.y,-H.x,-H.y,kt.x,kt.y);const I=at(Ot.x,Ot.y,-H.x,-H.y,Rt.x,Rt.y);if(Tt)break;const n=mt?yt(this.bevelEnd,N):W(this.bevelEnd,N);if(ft){const r=this.writeVertex(G,y,dt,vt,-H.x,-H.y,0,0,0,0,R);b=this.writeVertex(G,y,dt,vt,N.x,N.y,Zt.x,Zt.y,kt.x,kt.y,R),B=this.writeVertex(G,y,dt,vt,N.x,N.y,n.x,n.y,Rt.x,Rt.y,R),this.writeTriangle(I,r,B)}else{if(st){const r=this.bevelMiddle;r.x=(Ot.x+n.x)/2,r.y=(Ot.y+n.y)/2,X(w,r,-H.x,-H.y),at(r.x,r.y,-H.x,-H.y,w.x,w.y),X(w,r,N.x,N.y),b=this.writeVertex(G,y,dt,vt,N.x,N.y,r.x,r.y,w.x,w.y,R),B=this.writeVertex(G,y,dt,vt,N.x,N.y,Zt.x,Zt.y,kt.x,kt.y,R)}else{const r=b;b=B,B=r}at(n.x,n.y,N.x,N.y,Rt.x,Rt.y)}if(mt){const r=b;b=B,B=r}break}case 1:{const mt=Ut<0;let kt,Rt;if(mt){const O=b;b=B,B=O,kt=Jt,Rt=d}else kt=d,Rt=Jt;const Kt=mt?Pt(this.inner,gt):Bt(this.inner,gt);let Zt,Ot;ft?(Zt=mt?yt(this.innerPrev,H):W(this.innerPrev,H),Ot=mt?W(this.innerNext,N):yt(this.innerNext,N)):(Zt=Kt,Ot=Kt);const I=mt?W(this.roundStart,H):yt(this.roundStart,H),n=mt?yt(this.roundEnd,N):W(this.roundEnd,N),r=at(Zt.x,Zt.y,-H.x,-H.y,kt.x,kt.y),l=at(I.x,I.y,-H.x,-H.y,Rt.x,Rt.y);if(Tt)break;const a=this.writeVertex(G,y,dt,vt,-H.x,-H.y,0,0,0,0,R);ft||this.writeTriangle(b,B,a);const c=Pt(this.outer,Kt),h=this.writeVertex(G,y,dt,vt,N.x,N.y,n.x,n.y,Rt.x,Rt.y,R);let u,f;const p=nt>2;if(p){let O;nt!==Number.MAX_VALUE?(c.x/=nt,c.y/=nt,O=C(H,c),O=(nt*(O*O-1)+1)/O):O=-1,u=mt?W(this.startBreak,H):yt(this.startBreak,H),u.x+=H.x*O,u.y+=H.y*O,f=mt?yt(this.endBreak,N):W(this.endBreak,N),f.x+=N.x*O,f.y+=N.y*O}X(w,c,-H.x,-H.y);const T=this.writeVertex(G,y,dt,vt,-H.x,-H.y,c.x,c.y,w.x,w.y,R);X(w,c,N.x,N.y);const v=st?this.writeVertex(G,y,dt,vt,N.x,N.y,c.x,c.y,w.x,w.y,R):T,L=a,A=st?this.writeVertex(G,y,dt,vt,N.x,N.y,0,0,0,0,R):a;let P=-1,S=-1;if(p&&(X(w,u,-H.x,-H.y),P=this.writeVertex(G,y,dt,vt,-H.x,-H.y,u.x,u.y,w.x,w.y,R),X(w,f,N.x,N.y),S=this.writeVertex(G,y,dt,vt,N.x,N.y,f.x,f.y,w.x,w.y,R)),st?p?(this.writeTriangle(L,l,P),this.writeTriangle(L,P,T),this.writeTriangle(A,v,S),this.writeTriangle(A,S,h)):(this.writeTriangle(L,l,T),this.writeTriangle(A,v,h)):p?(this.writeTriangle(a,l,P),this.writeTriangle(a,P,S),this.writeTriangle(a,S,h)):(this.writeTriangle(a,l,T),this.writeTriangle(a,v,h)),ft?(b=this.writeVertex(G,y,dt,vt,N.x,N.y,Ot.x,Ot.y,kt.x,kt.y,R),B=h):(b=st?this.writeVertex(G,y,dt,vt,N.x,N.y,Ot.x,Ot.y,kt.x,kt.y,R):r,this.writeTriangle(b,A,h),B=h),mt){const O=b;b=B,B=O}break}}}}}},30603:(Qt,Dt,ut)=>{ut.d(Dt,{xl:()=>dt,aK:()=>vt,eF:()=>et,Uh:()=>kt,_6:()=>I,Tz:()=>Kt,CQ:()=>Rt,oK:()=>Zt,e0:()=>Ot,SD:()=>n,XJ:()=>nt,$0:()=>X,iV:()=>E,Zd:()=>B,Ex:()=>t,uG:()=>b,Jc:()=>rt,xm:()=>q,m4:()=>w,MI:()=>mt,AI:()=>tt,Ip:()=>ft,ru:()=>yt,fL:()=>Tt,iJ:()=>G,nM:()=>y,Ij:()=>Mt,f2:()=>zt,Ic:()=>st,Al:()=>ct,QU:()=>H,Jw:()=>N,kF:()=>Wt,yP:()=>Q,D3:()=>ht,Iw:()=>ot,tQ:()=>j,I_:()=>Bt,a:()=>At,CU:()=>wt,V4:()=>at});const tt=1e-30,yt=4294967295,Bt=512,X=8,q=29,t=24,ot=8,et={metrics:{width:15,height:17,left:0,top:-7,advance:14}},ht=0,ct=0,st=0,G=1,y=2,Mt=3,zt=4,H=5,N=6,Wt=5,Q=6,dt=1,vt=2,w=2,b=1,B=2,E=4,j=1.05,rt=6,at=5,wt=6,At=1.15,Tt=2,nt=8,ft=500,mt=10,kt=2,Rt=0,Kt=1,Zt=4,Ot=8,I=4,n=1}}]);
//# sourceMappingURL=6683.d76f9bfa51eb4e487dfc.js.map