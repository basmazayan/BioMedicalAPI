"use strict";var X=Object.defineProperty,T=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable,A=(n,r,e)=>r in n?X(n,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[r]=e,B=(n,r)=>{for(var e in r||(r={}))Y.call(r,e)&&A(n,e,r[e]);if(T)for(var e of T(r))$.call(r,e)&&A(n,e,r[e]);return n};(self.webpackChunkbio_medical=self.webpackChunkbio_medical||[]).push([[9957],{59957:(n,r,e)=>{e.r(r),e.d(r,{default:()=>Q});var v=e(49996),i=e(79076),p=e(61414),C=e(22345),M=e(7808),l=e(94911),g=(e(45072),e(30627),e(55865),e(96410)),I=e(70157),m=e(23335),D=e(78081),x=e(62330),K=e(96121),b=e(26263),z=e(46613),G=e(28763);const H=s=>{let t=class extends s{initialize(){this.exportImageParameters=new G.j({layer:this.layer})}destroy(){this.exportImageParameters.destroy(),this.exportImageParameters=null}get exportImageVersion(){var a;return null==(a=this.exportImageParameters)||a.commitProperty("version"),this.commitProperty("timeExtent"),(this._get("exportImageVersion")||0)+1}fetchPopupFeatures(a){const{layer:h}=this;if(!a)return Promise.reject(new p.Z("wmslayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:h}));const{popupEnabled:y}=h;if(!y)return Promise.reject(new p.Z("wmslayerview:fetchPopupFeatures","popupEnabled should be true",{popupEnabled:y}));const E=this.createFetchPopupFeaturesQuery(a);if(!E)return Promise.resolve([]);const{extent:o,width:d,height:c,x:P,y:L}=E;if(!(o&&d&&c))throw new p.Z("wmslayerview:fetchPopupFeatures","WMSLayer does not support fetching features.",{extent:o,width:d,height:c});const f=h.fetchFeatureInfo(o,d,c,P,L);return Promise.resolve(f?[f]:[])}};return(0,i._)([(0,l.Cb)()],t.prototype,"exportImageParameters",void 0),(0,i._)([(0,l.Cb)({readOnly:!0})],t.prototype,"exportImageVersion",null),(0,i._)([(0,l.Cb)()],t.prototype,"layer",void 0),(0,i._)([(0,l.Cb)(z.qG)],t.prototype,"timeExtent",void 0),t=(0,i._)([(0,g.j)("esri.layers.mixins.WMSLayerView")],t),t},N=C.Z.getLogger("esri.views.2d.layers.WMSLayerView2D");let u=class extends(H((0,b.y)((0,D.y)(K.Z)))){initialize(){const{layer:s,view:t}=this;s.supportsSpatialReference(t.spatialReference)||this.addResolvingPromise(Promise.reject(new p.Z("layerview:spatial-reference-incompatible","The spatial references supported by this WMS layer are incompatible with the spatial reference of the view",{layer:s})))}update(s){this.strategy.update(s).catch(t=>{(0,M.D_)(t)||N.error(t)})}attach(){const{layer:s}=this,{imageMaxHeight:t,imageMaxWidth:a}=s;this._bitmapContainer=new m.c,this.container.addChild(this._bitmapContainer),this.strategy=new x.Z({container:this._bitmapContainer,fetchSource:this.fetchImage.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxHeight:t,imageMaxWidth:a,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1}),this.handles.add(this.watch("exportImageVersion",()=>this.requestUpdate()),"exportImageVersion")}detach(){this.handles.remove("exportImageVersion"),this.strategy.destroy(),this.container.removeChild(this._bitmapContainer),this._bitmapContainer.removeAllChildren()}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}createFetchPopupFeaturesQuery(s){const{view:t}=this,a=this._bitmapContainer,{x:h,y}=s,{spatialReference:E}=t;let o=null,d=0,c=0;if(a.children.some(J=>{const{width:W,height:j,resolution:w,x:R,y:U}=J,S=R+w*W,V=U-w*j;return h>=R&&h<=S&&y<=U&&y>=V&&(o=new I.Z({xmin:R,ymin:V,xmax:S,ymax:U,spatialReference:E}),d=W,c=j,!0)}),!o)return null;const P=o.width/d,L=Math.round((h-o.xmin)/P),f=Math.round((o.ymax-y)/P);return{extent:o,width:d,height:c,x:L,y:f}}doRefresh(){var s=this;return(0,v.Z)(function*(){s.requestUpdate()})()}isUpdating(){return this.strategy.updating||this.updateRequested}fetchImage(s,t,a,h){return this.layer.fetchImage(s,t,a,B({timeExtent:this.timeExtent},h))}};(0,i._)([(0,l.Cb)()],u.prototype,"strategy",void 0),(0,i._)([(0,l.Cb)()],u.prototype,"updating",void 0),u=(0,i._)([(0,g.j)("esri.views.2d.layers.WMSLayerView2D")],u);const Q=u},26263:(n,r,e)=>{e.d(r,{y:()=>g});var v=e(79076),i=e(22345),p=e(7808),C=e(11652),M=e(94911),O=(e(45072),e(30627),e(55865),e(96410));const g=I=>{let m=class extends I{initialize(){this.handles.add((0,C.on)(this,"layer","refresh",D=>{this.doRefresh(D.dataChanged).catch(x=>{(0,p.D_)(x)||i.Z.getLogger(this.declaredClass).error(x)})}),"RefreshableLayerView")}};return(0,v._)([(0,M.Cb)()],m.prototype,"layer",void 0),m=(0,v._)([(0,O.j)("esri.layers.mixins.RefreshableLayerView")],m),m}}}]);
//# sourceMappingURL=9957.16ae7e06e1939deb2f92.js.map