{"version":3,"file":"498.9c4a919db29ad1a0d9d4.js","mappings":"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","sources":["./node_modules/@arcgis/core/views/2d/layers/MapNotesLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import s from\"../../../Graphic.js\";import i from\"../../../core/Collection.js\";import{isSome as t,isNone as r}from\"../../../core/maybe.js\";import{init as a,on as o}from\"../../../core/watchUtils.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/set.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView2DMixin as c}from\"./LayerView2D.js\";import p from\"./graphics/GraphicContainer.js\";import n from\"./graphics/GraphicsView2D.js\";import l from\"../../layers/LayerView.js\";const u=\"sublayers\",d=\"layerView\",f=Object.freeze({remove(){},pause(){},resume(){}});let g=class extends(c(l)){async fetchPopupFeatures(e){return Array.from(this.graphicsViews(),(s=>s.hitTest(e).filter((e=>!!e.popupTemplate)))).flat()}*graphicsViews(){t(this._graphicsViewsFeatureCollectionMap)?yield*this._graphicsViewsFeatureCollectionMap.keys():t(this._graphicsViews)?yield*this._graphicsViews:yield*[]}async hitTest(e,s){const i=Array.from(this.graphicsViews(),(async s=>{const i=await s.hitTest(e);if(t(this._graphicsViewsFeatureCollectionMap)){const e=this._graphicsViewsFeatureCollectionMap.get(s);for(const s of i)!s.popupTemplate&&e.popupTemplate&&(s.popupTemplate=e.popupTemplate)}return i}));return(await Promise.all(i)).flat()}highlight(e){let t;if(\"number\"==typeof e?t=[e]:e instanceof s?t=[e.uid]:Array.isArray(e)&&e.length>0?t=\"number\"==typeof e[0]?e:e.map((e=>e&&e.uid)):i.isCollection(e)&&(t=e.map((e=>e&&e.uid)).toArray()),t=t.filter((e=>null!=e)),!t.length)return f;for(const s of this.graphicsViews())s.addHighlight(t);return{remove:()=>{for(const e of this.graphicsViews())e.removeHighlight(t)}}}update(e){for(const s of this.graphicsViews())s.processUpdate(e)}attach(){const e=this.view,s=()=>this.requestUpdate(),i=this.layer.featureCollections;if(t(i)&&i.length){this._graphicsViewsFeatureCollectionMap=new Map;for(const t of i){const i=new p(this.view.featuresTilingScheme);i.fadeTransitionEnabled=!0;const r=new n({view:e,graphics:t.source,renderer:t.renderer,requestUpdateCallback:s,container:i});this._graphicsViewsFeatureCollectionMap.set(r,t),this.container.addChild(r.container),this.handles.add([a(t,\"visible\",(e=>r.container.visible=e)),a(r,\"updating\",(()=>this.notifyChange(\"updating\")))],d)}}else t(this.layer.sublayers)&&this.handles.add(o(this.layer,\"sublayers\",\"change\",(()=>this._createGraphicsViews()),(()=>this._createGraphicsViews()),(()=>this._destroyGraphicsViews())),u)}detach(){this._destroyGraphicsViews(),this.handles.remove(u)}moveStart(){}moveEnd(){}viewChange(){for(const e of this.graphicsViews())e.viewChange()}isUpdating(){for(const e of this.graphicsViews())if(e.updating)return!0;return!1}_destroyGraphicsViews(){this.container.removeAllChildren(),this.handles.remove(d);for(const e of this.graphicsViews())e.destroy();this._graphicsViews=null,this._graphicsViewsFeatureCollectionMap=null}_createGraphicsViews(){if(this._destroyGraphicsViews(),r(this.layer.sublayers))return;const e=[],s=this.view,i=()=>this.requestUpdate();for(const t of this.layer.sublayers){const r=new p(this.view.featuresTilingScheme);r.fadeTransitionEnabled=!0;const o=new n({view:s,graphics:t.graphics,requestUpdateCallback:i,container:r});this.handles.add([t.on(\"graphic-update\",o.graphicUpdateHandler),a(t,\"visible\",(e=>o.container.visible=e)),a(o,\"updating\",(()=>this.notifyChange(\"updating\")))],d),this.container.addChild(o.container),e.push(o)}this._graphicsViews=e}};g=e([h(\"esri.views.2d.layers.MapNotesLayerView2D\")],g);const m=g;export{m as default};\n"],"names":["_","e","s","i","isSome","t","isNone","r","init","a","on","o","subclass","h","LayerView2DMixin","c","p","n","l","u","d","f","Object","freeze","remove","pause","resume","g","fetchPopupFeatures","Array","from","graphicsViews","hitTest","filter","popupTemplate","flat","_graphicsViewsFeatureCollectionMap","keys","_graphicsViews","get","Promise","all","highlight","uid","isArray","length","map","isCollection","toArray","addHighlight","removeHighlight","update","processUpdate","attach","view","requestUpdate","layer","featureCollections","Map","featuresTilingScheme","fadeTransitionEnabled","graphics","source","renderer","requestUpdateCallback","container","set","addChild","handles","add","visible","notifyChange","sublayers","_createGraphicsViews","_destroyGraphicsViews","detach","moveStart","moveEnd","viewChange","isUpdating","updating","removeAllChildren","destroy","graphicUpdateHandler","push","m","default"],"sourceRoot":"webpack:///"}