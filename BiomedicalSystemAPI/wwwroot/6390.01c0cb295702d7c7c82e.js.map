{"version":3,"mappings":"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","names":["E","constructor","super","A","this","R","C","effect","canTransitionTo","transitionStep","end","_transitionTo","lt","Y","scale","F","Q","mt","j","_applyTimeTransition","U","k","tt","_updateForScale","D","y","V","value","readOnly","wt","effects","At","updateTransitionProperties","doRender","addChild","addChildAt","contains","removeAllChildren","removeChild","removeChildAt","sortChildren","_createTransforms","dvs","onAttach","onDetach","renderChildren","createRenderParams","blendMode","z","_getTransforms","fadeIn","fadeOut","beforeRender","afterRender","remove","setTransform","processRender","requestRender","processDetach","ready","N","g","geometryType","mapAligned","sdf","pattern","textureBinding","geometryTypeString","setBit","T","bit","setBits","Dt","bits","hasVV","setVV","getVariation","getVariationHash","vvSizeMinMaxValue","vvSizeScaleStops","vvSizeFieldStops","vvSizeUnitValue","et","rt","vvRotation","dt","vvColor","vvOpacity","dotDensity","simple","outlinedFill","Zt","kt","Ht","q","Ut","background","circle","fill","icon","line","outline","text","util","t","n","ID","shaders","vertexShader","zt","ji","Ke","$i","Qe","Ki","Ye","Qi","dispose","getMaterialProgram","a","o","_getMaterialOptionsValue","_getProgramTemplate","qe","attributes","render","_initialize","i","geometry","name","ct","qi","e","ei","ii","fragmentShader","r","si","ts","rendererInfo","Ji","ti","getProgram","_","m","l","vsPath","h","highlight","id","es","yt","allocate","release","Math","floor","width","height","_dirties","_glyphData","_currentPage","_glyphCache","_textures","_rangePromises","Map","_glyphSource","_binPack","push","Uint8Array","_initDecorationGlyph","length","metrics","left","top","advance","bitmap","_recordGlyph","getGlyphItems","_getGlyphCache","_fetchRanges","map","_getMosaicItem","bind","s","_getTexture","setSamplingMode","setData","bindTexture","pixelFormat","dataType","_invalidate","Set","add","forEach","_fetchRange","Promise","all","has","set","then","delete","catch","get","c","getRange","getGlyph","rect","page","code","isEmpty","x","_showDebugPage","document","createElement","getContext","ImageData","data","style","border","putImageData","body","appendChild","getMetrics","getBitmap","addRange","se","responseType","ys","bs","_getFontStack","xs","ne","draw","encodeURIComponent","d","ie","ri","nt","_initSVG","createSVGString","f","_edt","_edt1d","fe","mosaicsData","type","size","getWidth","getHeight","getPageTexture","getSpriteItem","addSpriteItem","Xt","hasItemsToProcess","processNextItem","getSpriteItems","getMosaicItemPosition","$","Es","v","u","_copy","Me","_copyBits","_allocateImage","ni","Uint32Array","b","some","numPlays","playTime","frames","paused","playing","playSpeed","currentFrameNumber","_lastUsedFrame","_load","message","play","_play","pause","clearTimeout","timerID","togglePlay","bindFrame","frameChanged","currentFrame","frameData","descriptor","updateData","updateUsedFrame","p","DataView","buffer","subarray","getUint32","getUint16","delay","disposeOp","getUint8","blendOp","dataParts","w","frameCount","Blob","_resizeCanvas","createImage","imageData","window","setTimeout","URL","createObjectURL","onload","revokeObjectURL","drawImage","getImageData","Uint8ClampedArray","onerror","Error","src","Array","prototype","slice","call","String","fromCharCode","apply","setUint32","charCodeAt","byteLength","waitTillDone","loading","firstFrameOnly","comment","lastFrame","playOnLoad","complete","interlaceOffsets","interlaceSteps","seekFrame","_setCurrentFrame","seek","time","_parse","pos","globalColourCount","globalColourTable","_parseColourTable","_parseBlock","signal","_parseImg","_finishedLoading","_parseExt","onprogress","bytesRead","totalBytes","frame","disposalMethod","delayTime","transparencyGiven","transparencyIndex","leftPos","topPos","localColourTableFlag","localColourTable","pixelBufSize","pixelBuf","_lzwDecode","readSubBlocksB","interlaced","interlacedBufSize","deinterlaceBuf","_processFrame","concat","image","ctx","_parseGCExt","readSubBlocks","_parseAppExt","getString","len","O","includes","indexOf","substring","atob","J","round","devicePixelRatio","min","error","mosaicType","resourceManager","_invalidFontsMap","_sdfConverter","_bindingInfos","_hashToBindingIndex","_ongoingRasterizations","_imageRequestQueue","concurrency","process","_spriteMosaic","M","_glyphMosaic","_rasterizer","clear","rasterizeItem","_rasterizeText","_setTextureBinding","glyphMosaicItems","_rasterizeSpriteSymbol","spriteMosaicItem","bindTextures","sprites","setUniform1i","setUniform2fv","glyphs","_hashMosaic","fromMosaic","fontName","cs","ds","hs","font","I","_handleAsyncResource","rasterizeJSONResource","simplePattern","_addItemToMosaic","_handleSVG","_handleImage","path","_handleGIFOrPNG","H","L","P","G","_imageFromBlob","HTMLImageElement","cim","colorSubstitutions","rasterizeImageResource","S","getResource","B","scaleX","me","unbind","context","Qt","_computeDelta","_updateAnimationState","gi","Gs","vi","_t","bi","re","_drawBlended","_setupShader","_createOrResizeTexture","target","postProcessingEffect","Ws","Zs","Lt","ze","Hs","fillColor","outlineWidth","innerHaloWidth","outerHaloWidth","setHighlightOptions","ks","texelData","applyHighlightOptions","destroy","js","$s","preBlur","finalBlur","renderHighlight","quadGeometry","setup","colorTarget","xi","sharedBlur1Tex","Ks","Xs","Qs","Je","jt","_ensureBuffer","Js","tr","er","ir","luminosityHighPass","gaussianBlur","composite","blit","materialManager","strength","_createOrResizeResources","horizontal","vertical","rr","nr","radialBlur","_gaussianBlur","_radialBlur","lr","hr","blur","blurRadius","Ct","amount","_r","colorize","or","ar","bloom","sr","opacity","cr","ur","getPostProcessingEffects","dr","_doRender","pr","gr","Yi","Ns","Ys","hittest","qs","integrate","Vs","insideEffect","yi","is","Ls","fr","getRenderTarget","setRenderTarget","getFbos","output","getSharedStencilBuffer","beforeRenderLayers","beforeRenderLayer","wi","compositeLayer","renderLayers","getGeometryBrush","renderObject","renderObjects","registerRenderPass","mr","blitTexture","_getOutputFBO","_applyEffects","Tt","Ti","Et","yr","br","Ei","container","disableCommands","recordContainerStart","recordContainerEnd","recordPassStart","recordPassEnd","recordBrushStart","recordBrushEnd","recordStart","console","recordEnd","_initSummary","_emitSummary","Si","print","Tr","resetMax","increment","decrement","printResourceCount","oe","Mi","Ri","Oi","Pi","exports","enable","disable","getParameter","drawArrays","drawElements","createShader","getShaderParameter","getProgramParameter","getShaderPrecisionFormat","getVertexAttrib","vertexAttribPointer","activeTexture","getTexParameter","texParameterf","texParameteri","texImage2D","texSubImage2D","copyTexImage2D","copyTexSubImage2D","generateMipmap","compressedTexImage2D","compressedTexSubImage2D","bindBuffer","bufferData","bufferSubData","getBufferParameter","pixelStorei","readPixels","bindRenderbuffer","bindFramebuffer","checkFramebufferStatus","framebufferRenderbuffer","framebufferTexture2D","getFramebufferAttachmentParameter","getRenderbufferParameter","renderbufferStorage","enumBitwiseOr","depthFunc","blendFunc","blendFuncSeparate","blendEquation","blendEquationSeparate","stencilFunc","stencilFuncSeparate","stencilMaskSeparate","stencilOp","stencilOpSeparate","cullFace","frontFace","drawArraysInstancedANGLE","drawElementsInstancedANGLE","blendEquationEXT","X","init","glEnumToString","makeDebugContext","Gt","makeLostContextSimulatingCanvas","Dn","In","Z","statusMessage","Ft","addEventListener","zn","ft","Ot","Vn","ot","Pt","pt","ki","resetToInitialState","Bi","Cr","Image","decode","gl","depthStencilTarget","wrapMode","samplingMode","Uint16Array","count","offset","stride","normalized","useProgram","preMultiplyAlpha","getBoundFramebufferObject","getViewport","setViewport","setClearColor","setBlendingEnabled","clearSafe","bindVAO","blending","Fr","Mr","Br","Ci","warn","Rr","drawBuffers","Pr","drawArraysInstanced","Ar","createVertexArray","Ir","COMPRESSED_R11_EAC","zr","COMPRESSED_RGB_S3TC_DXT1","Lr","MAX_TEXTURE_MAX_ANISOTROPY","Gr","textureFloat","Nr","Wr","MIN","Vr","ve","loseRenderingContext","Dr","R16","Zr","Sr","srcRGB","mode","zNear","face","Ur","Fi","setBlending","setCulling","setPolygonOffset","setDepthTest","setStencilTest","setDepthWrite","setColorWrite","setStencilWrite","Or","setPipelineState","externalProgramUpdate","externalTextureUnitUpdate","externalVertexArrayObjectUpdate","externalVertexBufferUpdate","externalIndexBufferUpdate","setBlendColor","setBlendFunction","setBlendFunctionSeparate","setBlendEquation","setBlendEquationSeparate","setColorMask","setFaceCullingEnabled","setPolygonOffsetFillEnabled","setCullFace","setFrontFace","setScissorTestEnabled","setScissorRect","setDepthTestEnabled","setClearDepth","setDepthFunction","setDepthWriteEnabled","setDepthRange","setStencilTestEnabled","setClearStencil","setStencilFunction","setStencilFunctionSeparate","setStencilWriteMask","setStencilOp","setStencilOpSeparate","setActiveTexture","Ai","logIno","Mt","unbindTextureAllUnits","unbindBuffer","getBoundVAO","resetState","enforceState","_loadParameters","versionString","_trash","_clipData","Float32Array","_upperLeft","_upperRight","_lowerLeft","_lowerRight","_mat2","_clipRendererInitialized","_renderRemainingTime","_lastFrameRenderTime","renderRequested","stage","_stationary","canvas","alpha","stencil","contextOptions","_canvas","antialias","depth","painter","_debugOutput","setAttribute","_renderParameters","drawPhase","state","pixelRatio","stationary","globalOpacity","deltaTime","inFadeTransition","timeline","renderingOptions","requireFBO","profiler","dataUploadCounter","_taskHandle","renderFrame","_lostWebGLContextHandle","emit","_emptyTrash","_boundFBO","_clipFBO","_clipVAO","_clipVBO","_clipStencilProgram","parentNode","highlightOptions","_background","_highlightOptions","_highlightOptionsHandle","_renderingOptions","_state","trashDisplayObject","untrashDisplayObject","resume","children","_renderChildren","_beforeRenderChildren","_isLabelDrawPhaseRequired","_afterRenderChildren","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","rotation","spatialReference","_isWrappable","isWrappable","_clipFrame","abs","cos","sin","worldScreenWidth","padding","right","bottom","_initializeClipRenderer","STENCIL_BUFFER_BIT","color","colorTexture","takeScreenshot","framebufferWidth","framebufferHeight","resolutionScale","clone","viewpoint","bt","Date","now","_readbackScreenshot","cropArea","outputScale","format","quality","disableDecorations","flipY","premultipliedAlpha","divisor","from","hasLabels","Kr","insertMetrics","getCellId","hasRange","setRange","_hasCollision","_collide","gt","_mark","_markMetrics","qr","St","Jr","tn","en","sn","an","rn","Yr","valueRepresentation","nn","Di","on","un","ln","hn","tileRenderer","run","cn","_runCollision","Qr","Jt","_isFiltered","_prepare","_collideVisible","_collideInvisible","_transformMetrics","fn","$t","Yt","initialize","dn","update","viewChange","requestUpdate","processUpdate","_applyVisibilityPass","W","K","pn","Ee","We","de","Ii","_start","_update","_end","center","_updateBox","_updateBackground","_createContainer","_createOverlay","_destroyOverlay","_toSVGPath","_handleDrag","_redraw","vn","reset","computeDelta","updateDelta","isFinished","valueDelta","valueFromInitialVelocity","Ze","Vt","evaluateMomentum","createMomentum","Se","bn","te","yn","we","targetGeometry","Te","begin","addToEstimator","onAnimationUpdate","vt","stopMomentumNavigation","xn","Ui","Tn","ee","wn","En","addToRotateEstimator","addToZoomEstimator","canZoomIn","canZoomOut","it","constraints","Sn","ke","zi","_e","Fn","_endTimer","animationManager","pan","navigation","rotate","pinch","zoomBox","view","_set","_lastEventTimestamp","performance","_startTimer","zoom","_getDefaultAnchor","stop","snapToZoom","effectiveLODs","zoomIn","zoomOut","setViewpoint","snapToNextScale","_zoomToScale","snapToPreviousScale","_scaleRotateTranslateViewpoint","setViewpointImmediate","continousRotateClockwise","animateContinous","continousRotateCounterclockwise","resetRotation","continousPanLeft","_continuousPan","continousPanRight","continousPanUp","continousPanDown","constrainByGeometry","canZoomInTo","canZoomOutTo","goTo","animate","Boolean","Gi","default","mask","overlay","_handles","_resourcePixelRatio","visible","_disposeRenderResources","_resourcesTask","abort","_magnifier","removeAll","position","watch","_reloadResources","_canRender","_updateResources","factor","ceil","_readbackTexture","resize","_program","_vertexArrayObject","_overlayTexture","_maskTexture","setUniform4fv","setUniform4f","maskEnabled","overlayEnabled","maskUrl","overlayUrl","internalFormat","flipped","driverTest","svgAlwaysPremultipliesAlpha"],"sources":["./node_modules/@arcgis/core/layers/effects/EffectView.js","./node_modules/@arcgis/core/views/2d/engine/Container.js","./node_modules/@arcgis/core/views/2d/engine/DisplayObject.js","./node_modules/@arcgis/core/views/2d/engine/webgl/materialKey/MaterialKey.js","./node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/meshUtils.js","./node_modules/@arcgis/core/views/2d/engine/vectorTiles/shaders/sources/shaderRepository.js","./node_modules/@arcgis/core/views/2d/engine/vectorTiles/shaders/sources/resolver.js","./node_modules/@arcgis/core/views/2d/engine/vectorTiles/shaders/Programs.js","./node_modules/@arcgis/core/views/2d/engine/vectorTiles/shaders/VTLMaterialManager.js","./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/BitBlitPrograms.js","./node_modules/@arcgis/core/views/2d/engine/webgl/BitBlitRenderer.js","./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/MaterialPrograms.js","./node_modules/@arcgis/core/views/2d/engine/webgl/MaterialManager.js","./node_modules/@arcgis/core/views/2d/engine/webgl/RectangleBinPack.js","./node_modules/@arcgis/core/views/2d/engine/webgl/GlyphMosaic.js","./node_modules/@arcgis/core/views/2d/engine/webgl/GlyphSource.js","./node_modules/@arcgis/core/views/2d/engine/webgl/SDFConverter.js","./node_modules/@arcgis/core/views/2d/engine/webgl/SpriteMosaic.js","./node_modules/@arcgis/core/views/2d/engine/webgl/animatedFormats/apng.js","./node_modules/@arcgis/core/views/2d/engine/webgl/animatedFormats/gif.js","./node_modules/@arcgis/core/views/2d/engine/webgl/TextureManager.js","./node_modules/@arcgis/core/views/2d/engine/webgl/fontUtils.js","./node_modules/@arcgis/core/views/2d/engine/webgl/util/symbolUtils.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/Effect.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/AnimationEffect.js","./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/BlendPrograms.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/BlendEffect.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/FeatureEffect.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/highlight/parameters.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/highlight/HighlightGradient.js","./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/HighlightPrograms.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/highlight/HighlightRenderer.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/highlight/HighlightSurfaces.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/HighlightEffect.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/HittestEffect.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Bloom.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Blur.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Colorize.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/DropShadow.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Opacity.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/EffectManager.js","./node_modules/@arcgis/core/views/2d/engine/webgl/painter/RenderPass.js","./node_modules/@arcgis/core/views/2d/engine/webgl/Painter.js","./node_modules/@arcgis/core/views/webgl/capabilities/DisjointTimerQuery.js","./node_modules/@arcgis/core/views/2d/engine/webgl/Profiler.js","./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/StencilPrograms.js","./node_modules/@arcgis/core/views/support/AllocationTracer.js","./node_modules/@arcgis/core/views/webgl/InstanceCounter.js","./node_modules/@arcgis/core/views/webgl/testDoublePrecisionArithmetic.js","./node_modules/@arcgis/core/views/webgl/testFloatBufferBlend.js","./node_modules/@arcgis/core/views/webgl/testSamplerPrecision.js","./node_modules/@arcgis/core/views/webgl/testSVGPremultipliedAlpha.js","./node_modules/@arcgis/core/views/webgl/WebGLDriverTest.js","./node_modules/@arcgis/core/views/webgl/capabilities/load.js","./node_modules/@arcgis/core/views/webgl/capabilities/DrawBuffers.js","./node_modules/@arcgis/core/views/webgl/capabilities/Instancing.js","./node_modules/@arcgis/core/views/webgl/capabilities/VertexArrayObjects.js","./node_modules/@arcgis/core/views/webgl/capabilities/LoseContext.js","./node_modules/@arcgis/core/views/webgl/RenderingContext.js","./node_modules/@arcgis/core/views/2d/engine/Stage.js","./node_modules/@arcgis/core/views/2d/engine/webgl/collisions/CollisionGrid.js","./node_modules/@arcgis/core/views/2d/engine/webgl/collisions/visualVariableSimpleUtils.js","./node_modules/@arcgis/core/views/2d/engine/webgl/collisions/CollisionEngine.js","./node_modules/@arcgis/core/views/2d/LabelManager.js","./node_modules/@arcgis/core/views/2d/navigation/ZoomBox.js","./node_modules/@arcgis/core/views/navigation/FilteredFiniteDifference.js","./node_modules/@arcgis/core/views/navigation/Momentum.js","./node_modules/@arcgis/core/views/navigation/PanPlanarMomentumEstimator.js","./node_modules/@arcgis/core/views/2d/navigation/actions/Pan.js","./node_modules/@arcgis/core/views/navigation/MomentumEstimator.js","./node_modules/@arcgis/core/views/navigation/RotationMomentumEstimator.js","./node_modules/@arcgis/core/views/navigation/ZoomMomentumEstimator.js","./node_modules/@arcgis/core/views/2d/navigation/actions/Pinch.js","./node_modules/@arcgis/core/views/2d/navigation/actions/Rotate.js","./node_modules/@arcgis/core/views/2d/navigation/MapViewNavigation.js","./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/MagnifierPrograms.js","./node_modules/@arcgis/core/views/magnifier/resources.js","./node_modules/@arcgis/core/views/2d/magnifier/MagnifierView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Accessor.js\";import s from\"../../core/has.js\";import{clone as r}from\"../../core/lang.js\";import i from\"../../core/Logger.js\";import{property as n}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as c}from\"../../core/accessorSupport/decorators/subclass.js\";import{parse as o}from\"./parser.js\";import{canInterpolateEffects as l,normalizeEffects as f}from\"./utils.js\";const a=-1;let h=class extends e{constructor(t){super(t),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=s(\"mapview-transitions-duration\"),this.effects=[]}set effect(t){if(this._get(\"effect\")!==(t=t||\"\")){this._set(\"effect\",t);try{this._transitionTo(_(t))}catch(e){this._transitionTo([]),i.getLogger(this.declaredClass).warn(\"Invalid Effect\",{effect:t,error:e})}}}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(t){this._updateForScale(t)}get transitioning(){return null!==this._to}canTransitionTo(t){try{return this.scale>0&&p(this._current,_(t),this.scale)}catch{return!1}}transitionStep(t,e){this._applyTimeTransition(t),this._updateForScale(e)}end(){this._applyTimeTransition(this.duration)}_transitionTo(t){this.scale>0&&p(this._current,t,this.scale)?(this._final=t,this._to=r(t),m(this._current,this._to,this.scale),this._from=r(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=t),this._set(\"effects\",this._current[0]?r(this._current[0].effects):[])}_applyTimeTransition(t){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=t;const e=Math.min(1,this._time/this.duration);for(let s=0;s<this._current.length;s++){const t=this._current[s],r=this._from[s],i=this._to[s];t.scale=g(r.scale,i.scale,e);for(let s=0;s<t.effects.length;s++){const n=t.effects[s],c=r.effects[s],o=i.effects[s];n.interpolate(c,o,e)}}1===e&&(this._current=this._final,this._set(\"effects\",this._current[0]?r(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(t){if(this._set(\"scale\",t),0===this._current.length)return;const e=this._current,s=this._current.length-1;let r,i,n=1;if(1===e.length||t>=e[0].scale)i=r=e[0].effects;else if(t<=e[s].scale)i=r=e[s].effects;else for(let c=0;c<s;c++){const s=e[c],o=e[c+1];if(s.scale>=t&&o.scale<=t){n=(t-s.scale)/(o.scale-s.scale),r=s.effects,i=o.effects;break}}for(let c=0;c<this.effects.length;c++){this.effects[c].interpolate(r[c],i[c],n)}}};t([n()],h.prototype,\"_to\",void 0),t([n()],h.prototype,\"duration\",void 0),t([n({value:\"\"})],h.prototype,\"effect\",null),t([n({readOnly:!0})],h.prototype,\"effects\",void 0),t([n({readOnly:!0})],h.prototype,\"hasEffects\",null),t([n({value:0})],h.prototype,\"scale\",null),t([n({readOnly:!0})],h.prototype,\"transitioning\",null),h=t([c(\"esri.layers.effects.EffectView\")],h);const u=h;function _(t){const e=o(t)||[];return d(e)?[{scale:a,effects:e}]:e}function p(t,e,s){var r,i,n,c;if(null==(r=t[0])||!r.effects||null==(i=e[0])||!i.effects)return!0;return!(((null==(n=t[0])?void 0:n.scale)===a||(null==(c=e[0])?void 0:c.scale)===a)&&(t.length>1||e.length>1)&&s<=0)&&l(t[0].effects,e[0].effects)}function m(t,e,s){var r,i;const n=t.length>e.length?t:e,c=t.length>e.length?e:t,o=c[c.length-1],l=null!=(r=null==o?void 0:o.scale)?r:s,h=null!=(i=null==o?void 0:o.effects)?i:[];for(let f=c.length;f<n.length;f++)c.push({scale:l,effects:[...h]});for(let u=0;u<n.length;u++)c[u].scale=c[u].scale===a?s:c[u].scale,n[u].scale=n[u].scale===a?s:n[u].scale,f(c[u].effects,n[u].effects)}function g(t,e,s){return t+(e-t)*s}function d(t){const e=t[0];return!!e&&\"type\"in e}export{p as canInterpolateEffectStops,_ as convertEffectToStops,u as default,m as normalizeEffectStops};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{c as e}from\"../../../chunks/mat3f32.js\";import t from\"../../../layers/effects/EffectView.js\";import{DisplayObject as i}from\"./DisplayObject.js\";class s extends i{constructor(){super(...arguments),this._childrenSet=new Set,this._needsSort=!1,this.children=[],this._effectView=null}get blendMode(){return this._blendMode}set blendMode(e){this._blendMode=e,this.requestRender()}get clips(){return this._clips}set clips(e){this._clips=e,this.children.forEach((t=>t.clips=e))}get computedEffects(){var e,t;return null!=(e=null==(t=this._effectView)?void 0:t.effects)?e:null}get effect(){var e,t;return null!=(e=null==(t=this._effectView)?void 0:t.effect)?e:\"\"}set effect(e){(this._effectView||e)&&(this._effectView||(this._effectView=new t),this._effectView.effect=e,this.requestRender())}updateTransitionProperties(e,t){super.updateTransitionProperties(e,t),this._effectView&&(this._effectView.transitionStep(e,t),this._effectView.transitioning&&this.requestRender())}doRender(e){const t=this.createRenderParams(e);this.renderChildren(t)}addChild(e){return this.addChildAt(e,this.children.length)}addChildAt(e,t=this.children.length){if(!e)return e;if(this.contains(e))return e;this._needsSort=!0;const i=e.parent;return i&&i!==this&&i.removeChild(e),t>=this.children.length?this.children.push(e):this.children.splice(t,0,e),this._childrenSet.add(e),e.parent=this,e.stage=this.stage,this!==this.stage&&(e.clips=this.clips),this.requestRender(),e}contains(e){return this._childrenSet.has(e)}removeAllChildren(){this._childrenSet.clear(),this._needsSort=!0;for(const e of this.children)this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null;this.children.length=0}removeChild(e){return this.contains(e)?this.removeChildAt(this.children.indexOf(e)):e}removeChildAt(e){if(e<0||e>=this.children.length)return null;this._needsSort=!0;const t=this.children.splice(e,1)[0];return this._childrenSet.delete(t),this!==this.stage&&(t.clips=null),t.stage=null,t.parent=null,t}sortChildren(e){this._needsSort&&(this.children.sort(e),this._needsSort=!1)}_createTransforms(){return{dvs:e()}}onAttach(){super.onAttach();const e=this.stage;for(const t of this.children)t.stage=e}onDetach(){super.onDetach();for(const e of this.children)e.stage=null}renderChildren(e){for(const t of this.children)t.beforeRender(e);for(const t of this.children)t.processRender(e);for(const t of this.children)t.afterRender(e)}createRenderParams(e){return{...e,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:e.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition}}}export{s as Container};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../core/Evented.js\";import e from\"../../../core/has.js\";import{isNone as s}from\"../../../core/maybe.js\";import{createResolver as i}from\"../../../core/promiseUtils.js\";const r=1/e(\"mapview-transitions-duration\");class a extends t{constructor(){super(...arguments),this._fadeOutResolver=null,this._fadeInResolver=null,this._clips=null,this.computedVisible=!0,this.computedOpacity=1,this.fadeTransitionEnabled=!1,this.inFadeTransition=!1,this._isReady=!1,this._opacity=1,this._stage=null,this._visible=!0}get clips(){return this._clips}set clips(t){this._clips=t,this.requestRender()}get isReady(){return this._isReady}get opacity(){return this._opacity}set opacity(t){this._opacity!==t&&(this._opacity=Math.min(1,Math.max(t,0)),this.requestRender())}get stage(){return this._stage}set stage(t){if(this._stage===t)return;const e=this._stage;this._stage=t,t?this._stage.untrashDisplayObject(this)||(this.onAttach(),this.emit(\"attach\")):e.trashDisplayObject(this)}get transforms(){return this._getTransforms()}_getTransforms(){return s(this._transforms)&&(this._transforms=this._createTransforms()),this._transforms}get visible(){return this._visible}set visible(t){this._visible!==t&&(this._visible=t,this.requestRender())}fadeIn(){return this._fadeInResolver||(this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.computedOpacity=0,this.fadeTransitionEnabled=!0,this._fadeInResolver=i(),this.requestRender()),this._fadeInResolver.promise}fadeOut(){return this._fadeOutResolver||(this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this.fadeTransitionEnabled=!0,this._fadeOutResolver=i(),this.requestRender()),this._fadeOutResolver.promise}beforeRender(t){this.updateTransitionProperties(t.deltaTime,t.state.scale)}afterRender(t){this._fadeInResolver&&this.computedOpacity===this.opacity?(this._fadeInResolver(),this._fadeInResolver=null):this._fadeOutResolver&&0===this.computedOpacity&&(this._fadeOutResolver(),this._fadeOutResolver=null)}remove(){var t;null==(t=this.parent)||t.removeChild(this)}setTransform(t){}processRender(t){this.stage&&this.computedVisible&&this.doRender(t)}requestRender(){this.stage&&this.stage.requestRender()}processDetach(){this.onDetach(),this.emit(\"detach\")}updateTransitionProperties(t,e){if(this.fadeTransitionEnabled){const e=this._fadeOutResolver||!this.visible?0:this.opacity,s=this.computedOpacity;if(s===e)this.computedVisible=this.visible;else{const i=t*r;this.computedOpacity=s>e?Math.max(e,s-i):Math.min(e,s+i),this.computedVisible=this.computedOpacity>0;const a=e===this.computedOpacity;this.inFadeTransition=!a,a||this.requestRender()}}else this.computedOpacity=this.opacity,this.computedVisible=this.visible}onAttach(){}onDetach(){}doRender(t){}ready(){this._isReady||(this._isReady=!0,this.emit(\"isReady\"),this.requestRender())}}export{a as DisplayObject};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/Error.js\";import{WGLVVFlag as e,WGLVVTarget as i,WGLGeometryType as s}from\"../enums.js\";import{isMapAligned as a}from\"../mesh/templates/meshUtils.js\";function r(t,s){const a=e.SIZE_FIELD_STOPS|e.SIZE_MINMAX_VALUE|e.SIZE_SCALE_STOPS|e.SIZE_UNIT_VALUE,r=(t&(i.FIELD_TARGETS_OUTLINE|i.MINMAX_TARGETS_OUTLINE|i.SCALE_TARGETS_OUTLINE|i.UNIT_TARGETS_OUTLINE))>>>4;return s.isOutline||s.isOutlinedFill?a&r:a&~r}const n=0,v=8,o=7,l=8,h=11,S=11,u=12,d=13,V=14,c=15,p=15,g=16,z=17,m=18,y=19,E=20,T=21,M=22;function L(t,e){switch(t){case s.FILL:return x.from(e);case s.LINE:return B.from(e);case s.MARKER:return U.from(e);case s.TEXT:return R.from(e);case s.LABEL:return b.from(e);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${t}`)}}function F(t){switch(_.load(t).geometryType){case s.MARKER:return new U(t);case s.FILL:return new x(t);case s.LINE:return new B(t);case s.TEXT:return new R(t);case s.LABEL:return new b(t)}}class _{constructor(t){this._data=0,this._data=t}static load(t){const e=this.shared;return e.data=t,e}set data(t){this._data=t}get data(){return this._data}get geometryType(){return this.bits(l,h)}set geometryType(t){this.setBits(t,l,h)}get mapAligned(){return!!this.bit(E)}set mapAligned(t){this.setBit(E,t)}get sdf(){return!!this.bit(S)}set sdf(t){this.setBit(S,t)}get pattern(){return!!this.bit(u)}set pattern(t){this.setBit(u,t)}get textureBinding(){return this.bits(n,v)}set textureBinding(t){this.setBits(t,n,v)}get geometryTypeString(){switch(this.geometryType){case s.FILL:return\"fill\";case s.MARKER:return\"marker\";case s.LINE:return\"line\";case s.TEXT:return\"text\";case s.LABEL:return\"label\";default:throw new t(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(t,e){const i=1<<t;e?this._data|=i:this._data&=~i}bit(t){return(this._data&1<<t)>>t}setBits(t,e,i){for(let s=e,a=0;s<i;s++,a++)this.setBit(s,0!=(t&1<<a))}bits(t,e){let i=0;for(let s=t,a=0;s<e;s++,a++)i|=this.bit(s)<<a;return i}hasVV(){return!1}setVV(t,e){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}}getVariationHash(){return this._data&~(o&this.textureBinding)}}_.shared=new _(0);const I=t=>class extends t{get vvSizeMinMaxValue(){return 0!==this.bit(g)}set vvSizeMinMaxValue(t){this.setBit(g,t)}get vvSizeScaleStops(){return 0!==this.bit(z)}set vvSizeScaleStops(t){this.setBit(z,t)}get vvSizeFieldStops(){return 0!==this.bit(m)}set vvSizeFieldStops(t){this.setBit(m,t)}get vvSizeUnitValue(){return 0!==this.bit(y)}set vvSizeUnitValue(t){this.setBit(y,t)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(t,i){super.setVV(t,i);const s=r(t,i)&t;this.vvSizeMinMaxValue=!!(s&e.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(s&e.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(s&e.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(s&e.SIZE_SCALE_STOPS)}},O=t=>class extends t{get vvRotation(){return 0!==this.bit(c)}set vvRotation(t){this.setBit(c,t)}hasVV(){return super.hasVV()||this.vvRotation}setVV(t,i){super.setVV(t,i),this.vvRotation=!i.isOutline&&!!(t&e.ROTATION)}},A=t=>class extends t{get vvColor(){return 0!==this.bit(d)}set vvColor(t){this.setBit(d,t)}hasVV(){return super.hasVV()||this.vvColor}setVV(t,i){super.setVV(t,i),this.vvColor=!i.isOutline&&!!(t&e.COLOR)}},f=t=>class extends t{get vvOpacity(){return 0!==this.bit(V)}set vvOpacity(t){this.setBit(V,t)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(t,i){super.setVV(t,i),this.vvOpacity=!i.isOutline&&!!(t&e.OPACITY)}};class x extends(A(f(I(_)))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=s.FILL,e.dotDensity=\"dot-density\"===t.stride.fill,e.simple=\"simple\"===t.stride.fill,e.outlinedFill=t.isOutlinedFill,e.dotDensity||e.setVV(t.vvFlags,t),e.data}getVariation(){return{...super.getVariation(),dotDensity:this.dotDensity,outlinedFill:this.outlinedFill,simple:this.simple,vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}get dotDensity(){return!!this.bit(p)}set dotDensity(t){this.setBit(p,t)}get simple(){return!!this.bit(M)}set simple(t){this.setBit(M,t)}get outlinedFill(){return!!this.bit(T)}set outlinedFill(t){this.setBit(T,t)}}x.shared=new x(0);class U extends(A(f(O(I(_))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=s.MARKER,e.setVV(t.vvFlags,t),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}U.shared=new U(0);class B extends(A(f(I(_)))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=s.LINE,e.setVV(t.vvFlags,t),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}B.shared=new B(0);class R extends(A(f(O(I(_))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=s.TEXT,e.setVV(t.vvFlags,t),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}R.shared=new R(0);class b extends(I(_)){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=s.LABEL,e.setVV(t.vvFlags,t),e.mapAligned=a(t.placement),e.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}b.shared=new b(0);export{x as FillMaterialKey,b as LabelMaterialKey,B as LineMaterialKey,U as MarkerMaterialKey,_ as MaterialKeyBase,R as TextMaterialKey,L as createMaterialKey,r as getSizeFlagsMask,F as hydrateMaterialKey};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction e(e){switch(e){case\"above-along\":case\"below-along\":case\"center-along\":case\"esriServerLinePlacementAboveAlong\":case\"esriServerLinePlacementBelowAlong\":case\"esriServerLinePlacementCenterAlong\":return!0;default:return!1}}export{e as isMapAligned};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nconst e={background:{\"background.frag\":\"#ifdef PATTERN\\nuniform lowp float u_opacity;\\nuniform lowp sampler2D u_texture;\\nvarying mediump vec4 v_tlbr;\\nvarying mediump vec2 v_tileTextureCoord;\\n#else\\nuniform lowp vec4 u_color;\\n#endif\\n#ifdef ID\\nvarying mediump vec4 v_id;\\n#endif\\nvoid main() {\\n#ifdef PATTERN\\nmediump vec2 normalizedTextureCoord = mod(v_tileTextureCoord, 1.0);\\nmediump vec2 samplePos = mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\\nlowp vec4 color = texture2D(u_texture, samplePos);\\ngl_FragColor = u_opacity * color;\\n#else\\ngl_FragColor = u_color;\\n#endif\\n#ifdef ID\\nif (gl_FragColor.a < 1.0 / 255.0) {\\ndiscard;\\n}\\ngl_FragColor = v_id;\\n#endif\\n}\",\"background.vert\":\"precision mediump float;\\nattribute vec2 a_pos;\\n#ifdef ID\\nuniform mediump vec4 u_id;\\nvarying mediump vec4 v_id;\\n#endif\\nuniform highp mat3 u_dvsMat3;\\nuniform mediump float u_coord_range;\\nuniform mediump float u_depth;\\n#ifdef PATTERN\\nuniform mediump mat3 u_pattern_matrix;\\nvarying mediump vec2 v_tileTextureCoord;\\nuniform mediump vec4 u_tlbr;\\nuniform mediump vec2 u_mosaicSize;\\nvarying mediump vec4 v_tlbr;\\n#endif\\nvoid main() {\\ngl_Position = vec4((u_dvsMat3 * vec3(u_coord_range * a_pos, 1.0)).xy, u_depth, 1.0);\\n#ifdef PATTERN\\nv_tileTextureCoord = (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\\nv_tlbr             = u_tlbr / u_mosaicSize.xyxy;\\n#endif\\n#ifdef ID\\nv_id = u_id / 255.0;\\n#endif\\n}\"},circle:{\"circle.frag\":\"precision lowp float;\\nvarying lowp vec4 v_color;\\nvarying lowp vec4 v_stroke_color;\\nvarying mediump float v_blur;\\nvarying mediump float v_stroke_width;\\nvarying mediump float v_radius;\\nvarying mediump vec2 v_offset;\\n#ifdef ID\\nvarying mediump vec4 v_id;\\n#endif\\nvoid main()\\n{\\nmediump float dist = length(v_offset);\\nmediump float alpha = smoothstep(0.0, -v_blur, dist - 1.0);\\nlowp float color_mix_ratio = v_stroke_width < 0.01 ? 0.0 : smoothstep(-v_blur, 0.0, dist - v_radius / (v_radius + v_stroke_width));\\ngl_FragColor = alpha * mix(v_color, v_stroke_color, color_mix_ratio);\\n#ifdef ID\\nif (gl_FragColor.a < 1.0 / 255.0) {\\ndiscard;\\n}\\ngl_FragColor = v_id;\\n#endif\\n}\",\"circle.vert\":\"precision mediump float;\\nattribute vec2 a_pos;\\n#pragma header\\nvarying lowp vec4 v_color;\\nvarying lowp vec4 v_stroke_color;\\nvarying mediump float v_blur;\\nvarying mediump float v_stroke_width;\\nvarying mediump float v_radius;\\nvarying mediump vec2 v_offset;\\n#ifdef ID\\nuniform mediump vec4 u_id;\\nvarying mediump vec4 v_id;\\n#endif\\nuniform highp mat3 u_dvsMat3;\\nuniform highp mat3 u_displayMat3;\\nuniform mediump vec2 u_circleTranslation;\\nuniform mediump float u_depth;\\nuniform mediump float u_antialiasingWidth;\\nvoid main()\\n{\\n#pragma main\\nv_color = color * opacity;\\nv_stroke_color = stroke_color * stroke_opacity;\\nv_stroke_width = stroke_width;\\nv_radius = radius;\\nv_blur = max(blur, u_antialiasingWidth / (radius + stroke_width));\\nmediump vec2 offset = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\\nv_offset = offset;\\n#ifdef ID\\nv_id = u_id / 255.0;\\n#endif\\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos * 0.5, 1.0) + u_displayMat3 * vec3((v_radius + v_stroke_width) * offset + u_circleTranslation, 0.0);\\ngl_Position = vec4(pos.xy, u_depth, 1.0);\\n}\"},fill:{\"fill.frag\":\"precision lowp float;\\n#ifdef PATTERN\\nuniform lowp sampler2D u_texture;\\nvarying mediump vec2 v_tileTextureCoord;\\nvarying mediump vec4 v_tlbr;\\n#endif\\n#ifdef ID\\nvarying mediump vec4 v_id;\\n#endif\\nvarying lowp vec4 v_color;\\nvec4 mixColors(vec4 color1, vec4 color2) {\\nfloat compositeAlpha = color2.a + color1.a * (1.0 - color2.a);\\nvec3 compositeColor = color2.rgb + color1.rgb * (1.0 - color2.a);\\nreturn vec4(compositeColor, compositeAlpha);\\n}\\nvoid main()\\n{\\n#ifdef PATTERN\\nmediump vec2 normalizedTextureCoord = fract(v_tileTextureCoord);\\nmediump vec2 samplePos = mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\\nlowp vec4 color = texture2D(u_texture, samplePos);\\ngl_FragColor = v_color[3] * color;\\n#else\\ngl_FragColor = v_color;\\n#endif\\n#ifdef ID\\nif (gl_FragColor.a < 1.0 / 255.0) {\\ndiscard;\\n}\\ngl_FragColor = v_id;\\n#endif\\n}\",\"fill.vert\":\"precision mediump float;\\nattribute vec2 a_pos;\\n#pragma header\\nuniform highp mat3 u_dvsMat3;\\nuniform highp mat3 u_displayMat3;\\nuniform mediump float u_depth;\\nuniform mediump vec2 u_fillTranslation;\\n#ifdef PATTERN\\n#include <util/util.glsl>\\nuniform mediump vec2 u_mosaicSize;\\nuniform mediump float u_patternFactor;\\nvarying mediump vec2 v_tileTextureCoord;\\nvarying mediump vec4 v_tlbr;\\n#endif\\n#ifdef ID\\nuniform mediump vec4 u_id;\\nvarying mediump vec4 v_id;\\n#endif\\nvarying lowp vec4 v_color;\\nvoid main()\\n{\\n#pragma main\\nv_color = color * opacity;\\n#ifdef ID\\nv_id = u_id / 255.0;\\n#endif\\n#ifdef PATTERN\\nfloat patternWidth = nextPOT(tlbr.z - tlbr.x);\\nfloat patternHeight = nextPOT(tlbr.w - tlbr.y);\\nfloat scaleX = 1.0 / (patternWidth * u_patternFactor);\\nfloat scaleY = 1.0 / (patternHeight * u_patternFactor);\\nmat3 patterMat = mat3(scaleX, 0.0,    0.0,\\n0.0,    -scaleY, 0.0,\\n0.0,    0.0,    1.0);\\nv_tileTextureCoord = (patterMat * vec3(a_pos, 1.0)).xy;\\nv_tlbr             = tlbr / u_mosaicSize.xyxy;\\n#endif\\nvec3 pos = u_dvsMat3 * vec3(a_pos, 1.0) + u_displayMat3 * vec3(u_fillTranslation, 0.0);\\ngl_Position = vec4(pos.xy, u_depth, 1.0);\\n}\"},icon:{\"icon.frag\":\"precision mediump float;\\nuniform lowp sampler2D u_texture;\\n#ifdef SDF\\nuniform lowp vec4 u_color;\\nuniform lowp vec4 u_outlineColor;\\n#endif\\nvarying mediump vec2 v_tex;\\nvarying lowp float v_opacity;\\nvarying mediump vec2 v_size;\\nvarying lowp vec4 v_color;\\n#ifdef SDF\\nvarying mediump flaot v_halo_width;\\n#endif\\n#ifdef ID\\nvarying mediump vec4 v_id;\\n#endif\\n#include <util/encoding.glsl>\\nvec4 mixColors(vec4 color1, vec4 color2) {\\nfloat compositeAlpha = color2.a + color1.a * (1.0 - color2.a);\\nvec3 compositeColor = color2.rgb + color1.rgb * (1.0 - color2.a);\\nreturn vec4(compositeColor, compositeAlpha);\\n}\\nvoid main()\\n{\\n#ifdef SDF\\nlowp vec4 fillPixelColor = v_color;\\nfloat d = rgba2float(texture2D(u_texture, v_tex)) - 0.5;\\nconst float softEdgeRatio = 0.248062016;\\nfloat size = max(v_size.x, v_size.y);\\nfloat dist = d * softEdgeRatio * size;\\nfillPixelColor *= clamp(0.5 - dist, 0.0, 1.0);\\nif (v_halo_width > 0.25) {\\nlowp vec4 outlinePixelColor = u_outlineColor;\\nconst float outlineLimitRatio = (16.0 / 86.0);\\nfloat clampedOutlineSize = softEdgeRatio * min(v_halo_width, outlineLimitRatio * max(v_size.x, v_size.y));\\noutlinePixelColor *= clamp(0.5 - (abs(dist) - clampedOutlineSize), 0.0, 1.0);\\ngl_FragColor = v_opacity * mixColors(fillPixelColor, outlinePixelColor);\\n}\\nelse {\\ngl_FragColor = v_opacity * fillPixelColor;\\n}\\n#else\\nlowp vec4 texColor = texture2D(u_texture, v_tex);\\ngl_FragColor = v_opacity * texColor;\\n#endif\\n#ifdef ID\\nif (gl_FragColor.a < 1.0 / 255.0) {\\ndiscard;\\n}\\ngl_FragColor = v_id;\\n#endif\\n}\",\"icon.vert\":\"attribute vec2 a_pos;\\nattribute vec2 a_vertexOffset;\\nattribute vec4 a_texAngleRange;\\nattribute vec4 a_levelInfo;\\nattribute float a_opacityInfo;\\n#pragma header\\n#ifdef ID\\nuniform mediump vec4 u_id;\\nvarying mediump vec4 v_id;\\n#endif\\nvarying lowp vec4 v_color;\\n#ifdef SDF\\nvarying mediump float v_halo_width;\\n#endif\\nuniform highp mat3 u_dvsMat3;\\nuniform highp mat3 u_displayMat3;\\nuniform highp mat3 u_displayViewMat3;\\nuniform mediump vec2 u_iconTranslation;\\nuniform vec2 u_mosaicSize;\\nuniform mediump float u_depth;\\nuniform mediump float u_mapRotation;\\nuniform mediump float u_level;\\nuniform lowp float u_keepUpright;\\nuniform mediump float u_fadeDuration;\\nvarying mediump vec2 v_tex;\\nvarying lowp float v_opacity;\\nvarying mediump vec2 v_size;\\nconst float C_OFFSET_PRECISION = 1.0 / 8.0;\\nconst float C_256_TO_RAD = 3.14159265359 / 128.0;\\nconst float C_DEG_TO_RAD = 3.14159265359 / 180.0;\\nconst float tileCoordRatio = 1.0 / 8.0;\\nuniform highp float u_time;\\nvoid main()\\n{\\n#pragma main\\nv_color = color;\\nv_opacity = opacity;\\n#ifdef SDF\\nv_halo_width = halo_width;\\n#endif\\nfloat modded = mod(a_opacityInfo, 128.0);\\nfloat targetOpacity = (a_opacityInfo - modded) / 128.0;\\nfloat startOpacity = modded / 127.0;\\nfloat interpolatedOpacity = clamp(startOpacity + 2.0 * (targetOpacity - 0.5) * u_time / u_fadeDuration, 0.0, 1.0);\\nv_opacity *= interpolatedOpacity;\\nmediump float a_angle         = a_levelInfo[1];\\nmediump float a_minLevel      = a_levelInfo[2];\\nmediump float a_maxLevel      = a_levelInfo[3];\\nmediump vec2 a_tex            = a_texAngleRange.xy;\\nmediump float delta_z = 0.0;\\nmediump float rotated = mod(a_angle + u_mapRotation, 256.0);\\ndelta_z += (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated));\\ndelta_z += 1.0 - step(a_minLevel, u_level);\\ndelta_z += step(a_maxLevel, u_level);\\ndelta_z += step(v_opacity, 0.0);\\nvec2 offset = C_OFFSET_PRECISION * a_vertexOffset;\\nv_size = abs(offset);\\n#ifdef SDF\\noffset = (120.0 / 86.0) * offset;\\n#endif\\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos, 1.0) + u_displayViewMat3 * vec3(size * offset, 0.0) + u_displayMat3 * vec3(u_iconTranslation, 0.0);\\ngl_Position = vec4(pos.xy, u_depth + delta_z, 1.0);\\n#ifdef ID\\nv_id = u_id / 255.0;\\n#endif\\nv_tex = a_tex.xy / u_mosaicSize;\\n}\"},line:{\"line.frag\":\"precision lowp float;\\nvarying mediump vec2 v_normal;\\nvarying highp float v_accumulatedDistance;\\nvarying mediump float v_lineHalfWidth;\\nvarying lowp vec4 v_color;\\nvarying mediump float v_blur;\\n#if defined (PATTERN) || defined(SDF)\\nvarying mediump vec4 v_tlbr;\\nvarying mediump vec2 v_patternSize;\\nvarying mediump float v_widthRatio;\\nuniform sampler2D u_texture;\\nuniform mediump float u_antialiasing;\\n#endif\\n#ifdef SDF\\n#include <util/encoding.glsl>\\n#endif\\n#ifdef ID\\nvarying mediump vec4 v_id;\\n#endif\\nvoid main()\\n{\\nmediump float fragDist = length(v_normal) * v_lineHalfWidth;\\nlowp float alpha = clamp((v_lineHalfWidth - fragDist) / v_blur, 0.0, 1.0);\\n#ifdef PATTERN\\nmediump float relativeTexX = mod(v_accumulatedDistance / (v_patternSize.x * v_widthRatio), 1.0);\\nmediump float relativeTexY = 0.5 + v_normal.y * v_lineHalfWidth / (v_patternSize.y * v_widthRatio);\\nmediump vec2 texCoord = mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\\nlowp vec4 color = texture2D(u_texture, texCoord);\\ngl_FragColor = alpha * v_color[3] * color;\\n#elif defined(SDF)\\nmediump float relativeTexX = mod((v_accumulatedDistance * 0.5) / (v_patternSize.x * v_widthRatio), 1.0);\\nmediump float relativeTexY =  0.5 + 0.25 * v_normal.y;\\nmediump vec2 texCoord = mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\\nmediump float d = rgba2float(texture2D(u_texture, texCoord)) - 0.5;\\nfloat dist = d * v_lineHalfWidth;\\ngl_FragColor = alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\\n#else\\ngl_FragColor = alpha * v_color;\\n#endif\\n#ifdef ID\\nif (gl_FragColor.a < 1.0 / 255.0) {\\ndiscard;\\n}\\ngl_FragColor = v_id;\\n#endif\\n}\",\"line.vert\":\"precision mediump float;\\nattribute vec2 a_pos;\\nattribute vec4 a_extrude_offset;\\nattribute vec4 a_dir_normal;\\nattribute vec2 a_accumulatedDistance;\\n#pragma header\\nuniform highp mat3 u_dvsMat3;\\nuniform highp mat3 u_displayMat3;\\nuniform highp mat3 u_displayViewMat3;\\nuniform mediump float u_zoomFactor;\\nuniform mediump vec2 u_lineTranslation;\\nuniform mediump float u_antialiasing;\\nuniform mediump float u_depth;\\nvarying mediump vec2 v_normal;\\nvarying highp float v_accumulatedDistance;\\nconst float scale = 1.0 / 31.0;\\nconst mediump float tileCoordRatio = 8.0;\\n#if defined (SDF)\\nconst mediump float sdfPatternHalfWidth = 15.5;\\n#endif\\n#if defined (PATTERN) || defined(SDF)\\nuniform mediump vec2 u_mosaicSize;\\nvarying mediump vec4 v_tlbr;\\nvarying mediump vec2 v_patternSize;\\nvarying mediump float v_widthRatio;\\n#endif\\n#ifdef ID\\nuniform mediump vec4 u_id;\\nvarying mediump vec4 v_id;\\n#endif\\nvarying lowp vec4 v_color;\\nvarying mediump float v_lineHalfWidth;\\nvarying mediump float v_blur;\\nvoid main()\\n{\\n#pragma main\\nv_color = color * opacity;\\nv_blur = blur + u_antialiasing;\\nv_normal = a_dir_normal.zw * scale;\\n#if defined (PATTERN) || defined(SDF)\\nv_tlbr          = tlbr / u_mosaicSize.xyxy;\\nv_patternSize   = vec2(tlbr.z - tlbr.x, tlbr.y - tlbr.w);\\n#if defined (PATTERN)\\nv_widthRatio = width / v_patternSize.y;\\n#else\\nv_widthRatio = width / sdfPatternHalfWidth / 2.0;\\n#endif\\n#endif\\nv_lineHalfWidth = (width + u_antialiasing) * 0.5;\\nmediump vec2 dir = a_dir_normal.xy * scale;\\nmediump vec2 offset_ = a_extrude_offset.zw * scale * offset;\\nmediump vec2 dist = v_lineHalfWidth * scale * a_extrude_offset.xy;\\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos + offset_ * tileCoordRatio / u_zoomFactor, 1.0) + u_displayViewMat3 * vec3(dist, 0.0) + u_displayMat3 * vec3(u_lineTranslation, 0.0);\\ngl_Position = vec4(pos.xy, u_depth, 1.0);\\n#if defined (PATTERN) || defined(SDF)\\nv_accumulatedDistance = a_accumulatedDistance.x * u_zoomFactor / tileCoordRatio + dot(dir, dist + offset_);\\n#endif\\n#ifdef ID\\nv_id = u_id / 255.0;\\n#endif\\n}\"},outline:{\"outline.frag\":\"varying lowp vec4 v_color;\\nvarying mediump vec2 v_normal;\\n#ifdef ID\\nvarying mediump vec4 v_id;\\n#endif\\nvoid main()\\n{\\nlowp float dist = abs(v_normal.y);\\nlowp float alpha = smoothstep(1.0, 0.0, dist);\\ngl_FragColor = alpha * v_color;\\n#ifdef ID\\nif (gl_FragColor.a < 1.0 / 255.0) {\\ndiscard;\\n}\\ngl_FragColor = v_id;\\n#endif\\n}\",\"outline.vert\":\"attribute vec2 a_pos;\\nattribute vec2 a_offset;\\nattribute vec2 a_xnormal;\\n#pragma header\\nvarying lowp vec4 v_color;\\n#ifdef ID\\nuniform mediump vec4 u_id;\\nvarying mediump vec4 v_id;\\n#endif\\nuniform highp mat3 u_dvsMat3;\\nuniform highp mat3 u_displayMat3;\\nuniform mediump vec2 u_fillTranslation;\\nuniform mediump float u_depth;\\nuniform mediump float u_outline_width;\\nvarying lowp vec2 v_normal;\\nconst float scale = 1.0 / 15.0;\\nvoid main()\\n{\\n#pragma main\\nv_color = color * opacity;\\n#ifdef ID\\nv_id = u_id / 255.0;\\n#endif\\nv_normal = a_xnormal;\\nmediump vec2 dist = u_outline_width * scale * a_offset;\\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos, 1.0) + u_displayMat3 * vec3(dist + u_fillTranslation, 0.0);\\ngl_Position = vec4(pos.xy, u_depth, 1.0);\\n}\"},text:{\"text.frag\":\"uniform lowp sampler2D u_texture;\\nvarying lowp vec2 v_tex;\\nvarying lowp vec4 v_color;\\nvarying mediump float v_edgeWidth;\\nvarying mediump float v_edgeDistance;\\n#ifdef ID\\nvarying mediump vec4 v_id;\\n#endif\\nvoid main()\\n{\\nlowp float dist = texture2D(u_texture, v_tex).a;\\nmediump float alpha = smoothstep(v_edgeDistance - v_edgeWidth, v_edgeDistance + v_edgeWidth, dist);\\ngl_FragColor = alpha * v_color;\\n#ifdef ID\\nif (gl_FragColor.a < 1.0 / 255.0) {\\ndiscard;\\n}\\ngl_FragColor = v_id;\\n#endif\\n}\",\"text.vert\":\"attribute vec2 a_pos;\\nattribute vec2 a_vertexOffset;\\nattribute vec4 a_texAngleRange;\\nattribute vec4 a_levelInfo;\\nattribute float a_opacityInfo;\\n#pragma header\\nvarying lowp vec4 v_color;\\n#ifdef ID\\nuniform mediump vec4 u_id;\\nvarying mediump vec4 v_id;\\n#endif\\nuniform highp mat3 u_dvsMat3;\\nuniform highp mat3 u_displayMat3;\\nuniform highp mat3 u_displayViewMat3;\\nuniform mediump vec2 u_textTranslation;\\nuniform vec2 u_mosaicSize;\\nuniform mediump float u_depth;\\nuniform mediump float u_mapRotation;\\nuniform mediump float u_level;\\nuniform lowp float u_keepUpright;\\nuniform mediump float u_fadeDuration;\\nvarying lowp vec2 v_tex;\\nconst float offsetPrecision = 1.0 / 8.0;\\nconst mediump float edgePos = 0.75;\\nuniform mediump float u_antialiasingWidth;\\nvarying mediump float v_edgeDistance;\\nvarying mediump float v_edgeWidth;\\nuniform lowp float u_halo;\\nconst float sdfFontScale = 1.0 / 24.0;\\nconst float sdfPixel = 3.0;\\nuniform highp float u_time;\\nvoid main()\\n{\\n#pragma main\\nif (u_halo > 0.5)\\n{\\nv_color = halo_color * opacity;\\nhalo_width *= sdfPixel;\\nhalo_blur *= sdfPixel;\\n}\\nelse\\n{\\nv_color = color * opacity;\\nhalo_width = 0.0;\\nhalo_blur = 0.0;\\n}\\nfloat modded = mod(a_opacityInfo, 128.0);\\nfloat targetOpacity = (a_opacityInfo - modded) / 128.0;\\nfloat startOpacity = modded / 127.0;\\nfloat interpolatedOpacity = clamp(startOpacity + 2.0 * (targetOpacity - 0.5) * u_time / u_fadeDuration, 0.0, 1.0);\\nv_color *= interpolatedOpacity;\\nmediump float a_angle       = a_levelInfo[1];\\nmediump float a_minLevel    = a_levelInfo[2];\\nmediump float a_maxLevel    = a_levelInfo[3];\\nmediump vec2 a_tex          = a_texAngleRange.xy;\\nmediump float a_visMinAngle    = a_texAngleRange.z;\\nmediump float a_visMaxAngle    = a_texAngleRange.w;\\nmediump float delta_z = 0.0;\\nmediump float angle = mod(a_angle + u_mapRotation, 256.0);\\nif (a_visMinAngle < a_visMaxAngle)\\n{\\ndelta_z += (1.0 - step(u_keepUpright, 0.0)) * (step(a_visMaxAngle, angle) + (1.0 - step(a_visMinAngle, angle)));\\n}\\nelse\\n{\\ndelta_z += (1.0 - step(u_keepUpright, 0.0)) * (step(a_visMaxAngle, angle) * (1.0 - step(a_visMinAngle, angle)));\\n}\\ndelta_z += 1.0 - step(a_minLevel, u_level);\\ndelta_z += step(a_maxLevel, u_level);\\ndelta_z += step(v_color[3], 0.0);\\nv_tex = a_tex.xy / u_mosaicSize;\\n#ifdef ID\\nv_id = u_id / 255.0;\\n#endif\\nv_edgeDistance = edgePos - halo_width / size;\\nv_edgeWidth = (u_antialiasingWidth + halo_blur) / size;\\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos, 1.0) + sdfFontScale * u_displayViewMat3 * vec3(offsetPrecision * size * a_vertexOffset, 0.0) + u_displayMat3 * vec3(u_textTranslation, 0.0);\\ngl_Position = vec4(pos.xy, u_depth + delta_z, 1.0);\\n}\"},util:{\"encoding.glsl\":\"const vec4 rgba2float_factors = vec4(\\n255.0 / (256.0),\\n255.0 / (256.0 * 256.0),\\n255.0 / (256.0 * 256.0 * 256.0),\\n255.0 / (256.0 * 256.0 * 256.0 * 256.0)\\n);\\nfloat rgba2float(vec4 rgba) {\\nreturn dot(rgba, rgba2float_factors);\\n}\",\"util.glsl\":\"float nextPOT(in float x) {\\nreturn pow(2.0, ceil(log2(abs(x))));\\n}\"}};export{e as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../../webgl/BufferObject.js\";import\"../../../../../webgl/FramebufferObject.js\";import\"../../../../../../core/has.js\";import\"../../../../../webgl/checkWebGLError.js\";import\"../../../../../webgl/enums.js\";import\"../../../../../../chunks/builtins.js\";import r from\"../../../../../webgl/ShaderCompiler.js\";import\"../../../../../webgl/Texture.js\";import\"../../../../../webgl/VertexArrayObject.js\";import e from\"./shaderRepository.js\";function t(r){let t=e;return r.split(\"/\").forEach((r=>{t&&(t=t[r])})),t}const o=new r(t);function s(r){return o.resolveIncludes(r)}export{s as resolveIncludes};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../webgl/BufferObject.js\";import\"../../../../webgl/FramebufferObject.js\";import\"../../../../../core/has.js\";import\"../../../../webgl/checkWebGLError.js\";import\"../../../../webgl/enums.js\";import\"../../../../../chunks/builtins.js\";import{glslifyDefineMap as e}from\"../../../../webgl/programUtils.js\";import\"../../../../webgl/Texture.js\";import\"../../../../webgl/VertexArrayObject.js\";import{resolveIncludes as r}from\"./sources/resolver.js\";const t=r=>e({ID:r.id,PATTERN:r.pattern}),a={shaders:e=>({vertexShader:t(e)+r(\"background/background.vert\"),fragmentShader:t(e)+r(\"background/background.frag\")})},i=r=>e({ID:r.id}),s={shaders:e=>({vertexShader:i(e)+r(\"circle/circle.vert\"),fragmentShader:i(e)+r(\"circle/circle.frag\")})},d=r=>e({ID:r.id,PATTERN:r.pattern}),o={shaders:e=>({vertexShader:d(e)+r(\"fill/fill.vert\"),fragmentShader:d(e)+r(\"fill/fill.frag\")})},l=r=>e({ID:r.id}),n={shaders:e=>({vertexShader:l(e)+r(\"outline/outline.vert\"),fragmentShader:l(e)+r(\"outline/outline.frag\")})},f=r=>e({ID:r.id,SDF:r.sdf}),g={shaders:e=>({vertexShader:f(e)+r(\"icon/icon.vert\"),fragmentShader:f(e)+r(\"icon/icon.frag\")})},c=r=>e({ID:r.id,PATTERN:r.pattern,SDF:r.sdf}),h={shaders:e=>({vertexShader:c(e)+r(\"line/line.vert\"),fragmentShader:c(e)+r(\"line/line.frag\")})},m=r=>e({ID:r.id}),b={shaders:e=>({vertexShader:m(e)+r(\"text/text.vert\"),fragmentShader:m(e)+r(\"text/text.frag\")})};export{a as background,s as circle,o as fill,g as icon,h as line,n as outline,b as text};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../webgl/BufferObject.js\";import\"../../../../webgl/FramebufferObject.js\";import{Program as e}from\"../../../../webgl/Program.js\";import\"../../../../webgl/enums.js\";import\"../../../../webgl/Texture.js\";import\"../../../../webgl/VertexArrayObject.js\";import{text as r,outline as t,line as a,icon as s,fill as n,circle as i,background as o}from\"./Programs.js\";class c{constructor(){this._programByKey=new Map}dispose(){this._programByKey.forEach((e=>e.dispose())),this._programByKey.clear()}getMaterialProgram(r,t,a){const s=t.key<<3|this._getMaterialOptionsValue(t.type,a);if(this._programByKey.has(s))return this._programByKey.get(s);const n=this._getProgramTemplate(t.type),{shaders:i}=n,{vertexShader:o,fragmentShader:c}=i(a),p=t.getShaderHeader(),u=t.getShaderMain(),g=o.replace(\"#pragma header\",p).replace(\"#pragma main\",u),m=new e(r,g,c,t.getAttributeLocations());return this._programByKey.set(s,m),m}_getMaterialOptionsValue(e,r){switch(e){case 0:{const e=r;return(e.pattern?1:0)<<1|(e.id?1:0)}case 1:{const e=r;return(e.pattern?1:0)<<1|(e.id?1:0)}case 2:return r.id?1:0;case 3:{const e=r;return(e.sdf?1:0)<<2|(e.pattern?1:0)<<1|(e.id?1:0)}case 4:{const e=r;return(e.sdf?1:0)<<1|(e.id?1:0)}case 5:return r.id?1:0;case 6:return r.id?1:0;default:return 0}}_getProgramTemplate(e){switch(e){case 0:return o;case 5:return i;case 1:return n;case 4:return s;case 3:return a;case 2:return t;case 6:return r;default:return null}}}export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{resolveIncludes as t}from\"./sources/resolver.js\";const e={shaders:{vertexShader:t(\"bitBlit/bitBlit.vert\"),fragmentShader:t(\"bitBlit/bitBlit.frag\")},attributes:new Map([[\"a_pos\",0],[\"a_tex\",1]])};export{e as bitBlit};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport r from\"../../../webgl/BufferObject.js\";import\"../../../webgl/FramebufferObject.js\";import\"../../../../core/has.js\";import\"../../../webgl/checkWebGLError.js\";import\"../../../webgl/enums.js\";import\"../../../../chunks/builtins.js\";import{createProgram as e}from\"../../../webgl/programUtils.js\";import\"../../../webgl/Texture.js\";import t from\"../../../webgl/VertexArrayObject.js\";import{bitBlit as i}from\"./shaders/BitBlitPrograms.js\";class s{constructor(){this._initialized=!1}dispose(){this._program&&(this._program.dispose(),this._program=null),this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=null)}render(r,e,t,i){r&&(this._initialized||this._initialize(r),r.setBlendFunctionSeparate(1,771,1,771),r.bindVAO(this._vertexArrayObject),r.useProgram(this._program),e.setSamplingMode(t),r.bindTexture(e,0),this._program.setUniform1i(\"u_tex\",0),this._program.setUniform1f(\"u_opacity\",i),r.drawArrays(5,0,4),r.bindTexture(null,0),r.bindVAO())}_initialize(s){if(this._initialized)return!0;const o=i.attributes,a=e(s,i);if(!a)return!1;const n={geometry:[{name:\"a_pos\",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:\"a_tex\",count:2,type:5120,offset:2,stride:4,normalized:!1,divisor:0}]},m=new Int8Array(16);m[0]=-1,m[1]=-1,m[2]=0,m[3]=0,m[4]=1,m[5]=-1,m[6]=1,m[7]=0,m[8]=-1,m[9]=1,m[10]=0,m[11]=1,m[12]=1,m[13]=1,m[14]=1,m[15]=1;const p=new t(s,o,n,{geometry:r.createVertex(s,35044,m)});return this._program=a,this._vertexArrayObject=p,this._initialized=!0,!0}}export{s as BitBlitRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{resolveIncludes as r}from\"./sources/resolver.js\";import{glslifyDefineMap as t}from\"../../../../webgl/programUtils.js\";const e=r=>{let t=\"\";t+=r[0].toUpperCase();for(let e=1;e<r.length;e++){const s=r[e];s===s.toUpperCase()?(t+=\"_\",t+=s):t+=s.toUpperCase()}return t},s=r=>{const s={};for(const t in r){s[e(t)]=r[t]}return t(s)},o=(t,e,o)=>{const n=t+t.substring(t.lastIndexOf(\"/\")),a=e+e.substring(e.lastIndexOf(\"/\"));return{attributes:o,shaders:t=>({vertexShader:s(t)+r(`${n}.vert`),fragmentShader:s(t)+r(`${a}.frag`)})}};export{o as createProgramTemplate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as r}from\"../../../../core/maybe.js\";import\"../../../webgl/BufferObject.js\";import\"../../../webgl/FramebufferObject.js\";import\"../../../../core/has.js\";import\"../../../webgl/checkWebGLError.js\";import\"../../../webgl/enums.js\";import\"../../../../chunks/builtins.js\";import e from\"../../../webgl/ProgramCache.js\";import\"../../../webgl/Texture.js\";import\"../../../webgl/VertexArrayObject.js\";import{WGLDrawPhase as t}from\"./enums.js\";import{createProgramTemplate as o}from\"./shaders/MaterialPrograms.js\";const a=r=>r===t.HITTEST||r===t.LABEL_ALPHA,s=r=>(a(r)?1:0)|(r===t.HIGHLIGHT?2:0),i=({rendererInfo:e,drawPhase:t},o,a,i)=>`${o.getVariationHash()}-${i.join(\".\")}-${s(t)}-${e.getVariationHash()}-${r(a)&&a.join(\".\")}`,g=(e,o,s,i)=>{const g=i.reduce(((r,t)=>({...r,[t]:e.context.driverTest[t]})),{}),m={...o.getVariation(),...e.rendererInfo.getVariation(),highlight:e.drawPhase===t.HIGHLIGHT,id:a(e.drawPhase),...g};if(r(s))for(const r of s)m[r]=!0;return m};class m{constructor(r){this._programByKey=new Map,this._programCache=new e(r)}dispose(){this._programCache&&this._programCache.dispose()}getProgram(r,e,t=[],a=[]){const s=e.vsPath+\".\"+e.fsPath+JSON.stringify(t)+a.join(\".\");if(this._programByKey.has(s))return this._programByKey.get(s);const i=a.reduce(((e,t)=>({...e,[t]:r.context.driverTest[t]})),{}),g={...t.map((r=>\"string\"==typeof r?{name:r,value:!0}:r)).reduce(((r,e)=>({...r,[e.name]:e.value})),{}),...i},{vsPath:m,fsPath:n,attributes:h}=e,p=this._programCache.getProgram(o(m,n,h),g);if(!p)throw new Error(\"Unable to get program for key: ${key}\");return this._programByKey.set(s,p),p}getMaterialProgram(r,e,t,a,s,m=[\"ignoresSamplerPrecision\"]){const n=i(r,e,s,m);if(this._programByKey.has(n))return this._programByKey.get(n);const h=g(r,e,s,m),p=this._programCache.getProgram(o(t,t,a),h);if(!p)throw new Error(\"Unable to get program for key: ${key}\");return this._programByKey.set(n,p),p}}export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport h from\"./Rect.js\";class t{constructor(t,e){this._width=0,this._height=0,this._free=[],this._width=t,this._height=e,this._free.push(new h(0,0,t,e))}get width(){return this._width}get height(){return this._height}allocate(t,e){if(t>this._width||e>this._height)return new h;let i=null,s=-1;for(let h=0;h<this._free.length;++h){const r=this._free[h];t<=r.width&&e<=r.height&&(null===i||r.y<=i.y&&r.x<=i.x)&&(i=r,s=h)}return null===i?new h:(this._free.splice(s,1),i.width<i.height?(i.width>t&&this._free.push(new h(i.x+t,i.y,i.width-t,e)),i.height>e&&this._free.push(new h(i.x,i.y+e,i.width,i.height-e))):(i.width>t&&this._free.push(new h(i.x+t,i.y,i.width-t,i.height)),i.height>e&&this._free.push(new h(i.x,i.y+e,t,i.height-e))),new h(i.x,i.y,t,e))}release(h){for(let t=0;t<this._free.length;++t){const e=this._free[t];if(e.y===h.y&&e.height===h.height&&e.x+e.width===h.x)e.width+=h.width;else if(e.x===h.x&&e.width===h.width&&e.y+e.height===h.y)e.height+=h.height;else if(h.y===e.y&&h.height===e.height&&h.x+h.width===e.x)e.x=h.x,e.width+=h.width;else{if(h.x!==e.x||h.width!==e.width||h.y+h.height!==e.y)continue;e.y=h.y,e.height+=h.height}this._free.splice(t,1),this.release(h)}this._free.push(h)}}export{t as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/has.js\";import{throwIfNotAbortError as e}from\"../../../../core/promiseUtils.js\";import i from\"./Rect.js\";import h from\"./RectangleBinPack.js\";import s from\"../../../webgl/Texture.js\";const r=256,a=t=>Math.floor(t/256);function n(t){const e=new Set;for(const i of t)e.add(a(i));return e}function c(t,i,h){return t.has(i)||t.set(i,h().then((()=>{t.delete(i)})).catch((h=>{t.delete(i),e(h)}))),t.get(i)}const o=t=>({rect:new i(0,0,0,0),page:0,metrics:{left:0,width:0,height:0,advance:0,top:0},code:t,sdf:!0});class l{constructor(t,e,i){this.width=0,this.height=0,this._dirties=[],this._glyphData=[],this._currentPage=0,this._glyphCache={},this._textures=[],this._rangePromises=new Map,this.width=t,this.height=e,this._glyphSource=i,this._binPack=new h(t-4,e-4),this._glyphData.push(new Uint8Array(t*e)),this._dirties.push(!0),this._textures.push(null),this._initDecorationGlyph()}dispose(){this._binPack=null;for(const t of this._textures)t&&t.dispose();this._textures.length=0,this._glyphData.length=0}_initDecorationGlyph(){const t=[117,149,181,207,207,181,149,117],e=[];for(let h=0;h<t.length;h++){const i=t[h];for(let t=0;t<11;t++)e.push(i)}const i={metrics:{width:5,height:2,left:0,top:0,advance:0},bitmap:new Uint8Array(e)};this._recordGlyph(i)}async getGlyphItems(t,e,i){const h=this._getGlyphCache(t);return await this._fetchRanges(t,e,i),e.map((e=>this._getMosaicItem(h,t,e)))}bind(t,e,i,h){const s=this._getTexture(t,i);s.setSamplingMode(e),this._dirties[i]&&(s.setData(this._glyphData[i]),this._dirties[i]=!1),t.bindTexture(s,h)}_getGlyphCache(t){return this._glyphCache[t]||(this._glyphCache[t]={}),this._glyphCache[t]}_getTexture(t,e){return this._textures[e]||(this._textures[e]=new s(t,{pixelFormat:6406,dataType:5121,width:this.width,height:this.height},new Uint8Array(this.width*this.height))),this._textures[e]}_invalidate(){this._dirties[this._currentPage]=!0}async _fetchRanges(t,e,i){const h=n(e),s=[];h.forEach((e=>{s.push(this._fetchRange(t,e,i))})),await Promise.all(s)}async _fetchRange(t,e,i){if(e>r)return null;const h=t+e;return c(this._rangePromises,h,(()=>this._glyphSource.getRange(t,e,i)))}_getMosaicItem(t,e,i){if(!t[i]){const h=this._glyphSource.getGlyph(e,i);if(!h||!h.metrics)return o(i);const s=this._recordGlyph(h),r=this._currentPage,a=h.metrics;t[i]={rect:s,page:r,metrics:a,code:i,sdf:!0},this._invalidate()}return t[i]}_recordGlyph(e){const s=e.metrics;let r;if(0===s.width)r=new i(0,0,0,0);else{const i=3,a=s.width+2*i,n=s.height+2*i;r=this._binPack.allocate(a,n),r.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(null),this._initDecorationGlyph(),this._binPack=new h(this.width-4,this.height-4),r=this._binPack.allocate(a,n));const c=this._glyphData[this._currentPage],o=e.bitmap;let l,g;if(o)for(let t=0;t<n;t++){l=a*t,g=this.width*(r.y+t)+r.x;for(let t=0;t<a;t++)c[g+t]=o[l+t]}t(\"esri-glyph-debug\")&&this._showDebugPage(c)}return r}_showDebugPage(t){const e=document.createElement(\"canvas\"),i=e.getContext(\"2d\"),h=new ImageData(this.width,this.height),s=h.data;e.width=this.width,e.height=this.height,e.style.border=\"1px solid black\";for(let r=0;r<t.length;++r)s[4*r+0]=t[r],s[4*r+1]=0,s[4*r+2]=0,s[4*r+3]=255;i.putImageData(h,0,0),document.body.appendChild(e)}}export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../../request.js\";import e from\"../../../../core/pbf.js\";class s{constructor(t){for(this._metrics=[],this._bitmaps=[];t.next();)switch(t.tag()){case 1:{const e=t.getMessage();for(;e.next();)switch(e.tag()){case 3:{const t=e.getMessage();let s,a,r,n,i,c,g;for(;t.next();)switch(t.tag()){case 1:s=t.getUInt32();break;case 2:a=t.getBytes();break;case 3:r=t.getUInt32();break;case 4:n=t.getUInt32();break;case 5:i=t.getSInt32();break;case 6:c=t.getSInt32();break;case 7:g=t.getUInt32();break;default:t.skip()}t.release(),s&&(this._metrics[s]={width:r,height:n,left:i,top:c,advance:g},this._bitmaps[s]=a);break}default:e.skip()}e.release();break}default:t.skip()}}getMetrics(t){return this._metrics[t]}getBitmap(t){return this._bitmaps[t]}}class a{constructor(){this._ranges=[]}getRange(t){return this._ranges[t]}addRange(t,e){this._ranges[t]=e}}class r{constructor(t){this._glyphInfo={},this._baseURL=t}getRange(a,r,n){const i=this._getFontStack(a);if(i.getRange(r))return Promise.resolve();const c=256*r,g=c+255,o=this._baseURL.replace(\"{fontstack}\",a).replace(\"{range}\",c+\"-\"+g);return t(o,{responseType:\"array-buffer\",...n}).then((t=>{i.addRange(r,new s(new e(new Uint8Array(t.data),new DataView(t.data))))}))}getGlyph(t,e){const s=this._getFontStack(t);if(!s)return;const a=Math.floor(e/256);if(a>256)return;const r=s.getRange(a);return r?{metrics:r.getMetrics(e),bitmap:r.getBitmap(e)}:void 0}_getFontStack(t){let e=this._glyphInfo[t];return e||(e=this._glyphInfo[t]=new a),e}}export{r as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{packFloatRGBA as t}from\"../../../../core/floatRGBA.js\";import{onAbort as s,createAbortError as e}from\"../../../../core/promiseUtils.js\";const i=1e20;class r{constructor(t){this.size=t;const s=document.createElement(\"canvas\");s.width=s.height=t,this._context=s.getContext(\"2d\"),this._gridOuter=new Float64Array(t*t),this._gridInner=new Float64Array(t*t),this._f=new Float64Array(t),this._d=new Float64Array(t),this._z=new Float64Array(t+1),this._v=new Int16Array(t)}dispose(){this._context=this._gridOuter=this._gridInner=this._f=this._d=this._z=this._v=null,this._svg&&(document.body.removeChild(this._svg),this._svg=null)}draw(r,h,n=31){this._initSVG();const o=this.createSVGString(r);return new Promise(((r,a)=>{const d=new Image;d.src=\"data:image/svg+xml; charset=utf8, \"+encodeURIComponent(o),d.onload=()=>{d.onload=null,this._context.clearRect(0,0,this.size,this.size),this._context.drawImage(d,0,0,this.size,this.size);const s=this._context.getImageData(0,0,this.size,this.size),e=new Uint8Array(this.size*this.size*4);for(let t=0;t<this.size*this.size;t++){const e=s.data[4*t+3]/255;this._gridOuter[t]=1===e?0:0===e?i:Math.max(0,.5-e)**2,this._gridInner[t]=1===e?i:0===e?0:Math.max(0,e-.5)**2}this._edt(this._gridOuter,this.size,this.size),this._edt(this._gridInner,this.size,this.size);for(let i=0;i<this.size*this.size;i++){const s=this._gridOuter[i]-this._gridInner[i];t(.5-s/(2*n),e,4*i)}r(e)};const l=h&&h.signal;l&&s(l,(()=>a(e())))}))}_initSVG(){if(!this._svg){const t=document.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\");t.setAttribute(\"style\",\"position: absolute;\"),t.setAttribute(\"width\",\"0\"),t.setAttribute(\"height\",\"0\"),t.setAttribute(\"aria-hidden\",\"true\"),t.setAttribute(\"role\",\"presentation\"),document.body.appendChild(t),this._svg=t}}createSVGString(t){this._initSVG();const s=document.createElementNS(\"http://www.w3.org/2000/svg\",\"path\");s.setAttribute(\"d\",t),this._svg.appendChild(s);const e=s.getBBox(),i=e.width/e.height,r=this.size/2;let h,n,o,a;if(i>1){n=h=r/e.width;const t=r*(1/i);o=this.size/4,a=r-t/2}else{h=n=r/e.height;o=r-r*i/2,a=this.size/4}const d=-e.x*h+o,l=-e.y*n+a;s.setAttribute(\"style\",`transform: matrix(${h}, 0, 0, ${n}, ${d}, ${l})`);const _=`<svg style=\"fill:red;\" height=\"${this.size}\" width=\"${this.size}\" xmlns=\"http://www.w3.org/2000/svg\">${this._svg.innerHTML}</svg>`;return this._svg.removeChild(s),_}_edt(t,s,e){const i=this._f,r=this._d,h=this._v,n=this._z;for(let o=0;o<s;o++){for(let r=0;r<e;r++)i[r]=t[r*s+o];this._edt1d(i,r,h,n,e);for(let i=0;i<e;i++)t[i*s+o]=r[i]}for(let o=0;o<e;o++){for(let e=0;e<s;e++)i[e]=t[o*s+e];this._edt1d(i,r,h,n,s);for(let e=0;e<s;e++)t[o*s+e]=Math.sqrt(r[e])}}_edt1d(t,s,e,r,h){e[0]=0,r[0]=-i,r[1]=+i;for(let n=1,o=0;n<h;n++){let s=(t[n]+n*n-(t[e[o]]+e[o]*e[o]))/(2*n-2*e[o]);for(;s<=r[o];)o--,s=(t[n]+n*n-(t[e[o]]+e[o]*e[o]))/(2*n-2*e[o]);o++,e[o]=n,r[o]=s,r[o+1]=+i}for(let i=0,n=0;i<h;i++){for(;r[n+1]<i;)n++;s[i]=(i-e[n])*(i-e[n])+t[e[n]]}}}export{r as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/Error.js\";import{isSome as e}from\"../../../../core/maybe.js\";import\"../../../webgl/BufferObject.js\";import\"../../../webgl/FramebufferObject.js\";import\"../../../../core/has.js\";import\"../../../webgl/checkWebGLError.js\";import\"../../../webgl/enums.js\";import\"../../../../chunks/builtins.js\";import i from\"../../../webgl/Texture.js\";import\"../../../webgl/VertexArrayObject.js\";import{SPRITE_PADDING as s}from\"./definitions.js\";import{log2 as a}from\"./GeometryUtils.js\";import r from\"./Rect.js\";import o from\"./RectangleBinPack.js\";function h(t){return t&&\"static\"===t.type}class c{constructor(t,e,i,s=0){this._mosaicPages=[],this._maxItemSize=0,this._currentPage=0,this._pageWidth=0,this._pageHeight=0,this._mosaicRects=new Map,this._spriteCopyQueue=[],this.pixelRatio=1,(e<=0||i<=0)&&console.error(\"Sprites mosaic defaultWidth and defaultHeight must be greater than zero!\"),this._pageWidth=e,this._pageHeight=i,this._requestRender=t,s>0&&(this._maxItemSize=s),this.pixelRatio=window.devicePixelRatio||1,this._binPack=new o(this._pageWidth,this._pageHeight);const a=Math.floor(this._pageWidth),r=Math.floor(this._pageHeight);this._mosaicPages.push({mosaicsData:{type:\"static\",data:new Uint32Array(a*r)},size:[this._pageWidth,this._pageHeight],dirty:!0,texture:void 0})}getWidth(t){return t>=this._mosaicPages.length?-1:this._mosaicPages[t].size[0]}getHeight(t){return t>=this._mosaicPages.length?-1:this._mosaicPages[t].size[1]}getPageTexture(t){return t<this._mosaicPages.length?this._mosaicPages[t].texture:null}has(t){return this._mosaicRects.has(t)}get itemCount(){return this._mosaicRects.size}getSpriteItem(t){return this._mosaicRects.get(t)}addSpriteItem(t,e,i,s,a,o){if(this._mosaicRects.has(t))return this._mosaicRects.get(t);let c,n,g;if(h(i))[c,n,g]=this._allocateImage(e[0],e[1]);else{c=new r(0,0,e[0],e[1]),n=this._mosaicPages.length;const t=void 0;this._mosaicPages.push({mosaicsData:i,size:e,dirty:!0,texture:t})}if(c.width<=0||c.height<=0)return null;const m={rect:c,width:e[0],height:e[1],sdf:a,simplePattern:o,pixelRatio:1,page:n};return this._mosaicRects.set(t,m),h(i)&&this._copy({rect:c,spriteSize:e,spriteData:i.data,page:n,pageSize:g,repeat:s,sdf:a}),m}hasItemsToProcess(){return 0!==this._spriteCopyQueue.length}processNextItem(){const t=this._spriteCopyQueue.pop();t&&this._copy(t)}getSpriteItems(t){const e={};for(const i of t)e[i]=this.getSpriteItem(i);return e}getMosaicItemPosition(t){const e=this.getSpriteItem(t),i=e&&e.rect;if(!i)return null;i.width=e.width,i.height=e.height;const a=e.width,r=e.height,o=s,h=this._mosaicPages[e.page];return{size:[e.width,e.height],tl:[(i.x+o)/h[0],(i.y+o)/h[1]],br:[(i.x+o+a)/h[0],(i.y+o+r)/h[1]],page:e.page}}bind(t,i,s=0,a=0){const r=this._mosaicPages[s],o=r.mosaicsData;let c=r.texture;if(c||(c=n(t,o,r.size),r.texture=c),c.setSamplingMode(i),h(o))t.bindTexture(c,a),r.dirty&&(c.setData(new Uint8Array(o.data.buffer)),c.generateMipmap());else{const i=o.data,s=i.bindFrame(t,c,a);e(this._requestRender)&&s&&i.frameCount>0&&this._requestRender.requestRender(),i.bindFrame(t,c,a)}r.dirty=!1}static _copyBits(t,e,i,s,a,r,o,h,c,n,g){let m=s*e+i,p=h*r+o;if(g){p-=r;for(let o=-1;o<=n;o++,m=((o+n)%n+s)*e+i,p+=r)for(let e=-1;e<=c;e++)a[p+e]=t[m+(e+c)%c]}else for(let u=0;u<n;u++){for(let e=0;e<c;e++)a[p+e]=t[m+e];m+=e,p+=r}}_copy(e){if(e.page>=this._mosaicPages.length)return;const i=this._mosaicPages[e.page],a=i.mosaicsData;if(!h(i.mosaicsData))throw new t(\"mapview-invalid-resource\",\"unsuitable data type!\");const r=e.spriteData,o=a.data;o&&r||console.error(\"Source or target images are uninitialized!\"),c._copyBits(r,e.spriteSize[0],0,0,o,e.pageSize[0],e.rect.x+s,e.rect.y+s,e.spriteSize[0],e.spriteSize[1],e.repeat),i.dirty=!0}_allocateImage(t,e){t+=2*s,e+=2*s;const i=Math.max(t,e);if(this._maxItemSize&&this._maxItemSize<i){const i=2**Math.ceil(a(t)),s=2**Math.ceil(a(e)),o=new r(0,0,t,e);return this._mosaicPages.push({mosaicsData:{type:\"static\",data:new Uint32Array(i*s)},size:[i,s],dirty:!0,texture:void 0}),[o,this._mosaicPages.length-1,[i,s]]}const c=this._binPack.allocate(t,e);if(c.width<=0){const i=this._mosaicPages[this._currentPage];return!i.dirty&&h(i.mosaicsData)&&(i.mosaicsData.data=null),this._currentPage=this._mosaicPages.length,this._mosaicPages.push({mosaicsData:{type:\"static\",data:new Uint32Array(this._pageWidth*this._pageHeight)},size:[this._pageWidth,this._pageHeight],dirty:!0,texture:void 0}),this._binPack=new o(this._pageWidth,this._pageHeight),this._allocateImage(t,e)}return[c,this._currentPage,[this._pageWidth,this._pageHeight]]}dispose(){this._binPack=null;for(const t of this._mosaicPages){const e=t.texture;e&&e.dispose();const i=t.mosaicsData;if(!h(i)){i.data.pause()}}this._mosaicPages=null,this._mosaicRects.clear()}}function n(t,e,s){return h(e)?new i(t,{pixelFormat:6408,dataType:5121,width:s[0],height:s[1]},new Uint8Array(e.data.buffer)):new i(t,{pixelFormat:6408,dataType:5121,samplingMode:9729,wrapMode:33071,width:s[0],height:s[1]},null)}export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/Error.js\";import{isAbortError as e}from\"../../../../../core/promiseUtils.js\";const r=new Uint32Array(256);for(let b=0;b<256;b++){let t=b;for(let e=0;e<8;e++)t=0!=(1&t)?3988292384^t>>>1:t>>>1;r[b]=t}function a(t,e=0,a=t.length-e){let i=-1;for(let s=e,n=e+a;s<n;s++)i=i>>>8^r[255&(i^t[s])];return-1^i}const i=new t(\"Not a PNG\"),s=new t(\"Not an animated PNG\"),n=new Uint8Array([137,80,78,71,13,10,26,10]);function h(t){const e=t.constructor===Uint8Array?t:new Uint8Array(t);return!n.some(((t,r)=>t!==e[r]))}function u(t){let e,r;return p(new Uint8Array(t),((t,a,i)=>{const s=new DataView(a.buffer);\"IHDR\"===t&&(e=s.getUint32(i+8),r=s.getUint32(i+12))})),[e,r]}function l(t){const e=new Uint8Array(t);if(!h(e))return!1;let r=!1;return p(e,(t=>!(r=\"acTL\"===t))),r}class o{constructor(){this.width=0,this.height=0,this.numPlays=0,this.playTime=0,this.frames=[],this.paused=!1,this.playing=!1,this.playSpeed=1,this.currentFrameNumber=0,this._lastUsedFrame=-1}static async create(r,a){const i=new o;try{await i._load(r,a)}catch(s){if(!e(s))return new t(\"invalid-resource\",`Could not load PNG: ${s.message}`)}return i}play(){this.playing||(this.paused=!1,this.playing=!0,this._play())}pause(){this.paused=!0,this.playing=!1,clearTimeout(this.timerID)}togglePlay(){this.paused||!this.playing?this.play():this.pause()}bindFrame(t,e,r){t.bindTexture(e,r);const a=this.frameChanged();if(!a)return!1;const i=this.currentFrame,s=i.frameData,n=e.descriptor;return(i.left||i.top||i.width!==n.width||i.height!==n.height)&&e.setData(null),e.updateData(0,i.left,i.top,i.width,i.height,s),this.updateUsedFrame(),a}frameChanged(){return this._lastUsedFrame!==this.currentFrameNumber}updateUsedFrame(){this._lastUsedFrame=this.currentFrameNumber}async _load(r,a){try{const t=d(this,r);if(t!==this)return t;this._resizeCanvas=document.createElement(\"canvas\"),this._resizeCanvas.width=this.width,this._resizeCanvas.height=this.height,await Promise.all(this.frames.map((t=>t.createImage(this._resizeCanvas))))}catch(i){if(!e(i))return new t(\"invalid-resource\",\"Could not parse PNG\")}this.play()}_play(){let t,e;if(0===this.playSpeed)return void this.pause();this.playSpeed<0?(this.currentFrameNumber-=1,this.currentFrameNumber<0&&(this.currentFrameNumber=this.frames.length-1),e=this.currentFrameNumber,e-=1,e<0&&(e=this.frames.length-1),t=1*-this.frames[e].delay/this.playSpeed):(this.currentFrameNumber+=1,this.currentFrameNumber%=this.frames.length,t=1*this.frames[this.currentFrameNumber].delay/this.playSpeed);const r=this.frames[this.currentFrameNumber];this.currentFrame={frameData:r.imageData,top:r.top,left:r.left,width:r.width,height:r.height},this.timerID=window.setTimeout((()=>this._play()),t)}}class c{constructor(){this.left=0,this.top=0,this.width=0,this.height=0,this.delay=0,this.disposeOp=0,this.blendOp=0,this.data=null,this.imageData=null}async createImage(t){if(null===this.imageData)return new Promise(((e,r)=>{const a=URL.createObjectURL(this.data),i=document.createElement(\"img\");i.onload=()=>{URL.revokeObjectURL(a),this.imageData=m(i,t),e()},i.onerror=()=>{URL.revokeObjectURL(a),this.imageData=null,r(new Error(\"Image creation error\"))},i.src=a}))}}function m(t,e){e.width=t.width,e.height=t.height;const r=e.getContext(\"2d\");r.drawImage(t,0,0,t.width,t.height);const a=r.getImageData(0,0,t.width,t.height),i=new Uint8Array(a.data);let s;for(let n=0;n<i.length;n+=4)s=i[n+3]/255,i[n]=i[n]*s,i[n+1]=i[n+1]*s,i[n+2]=i[n+2]*s;return new ImageData(new Uint8ClampedArray(i.buffer),t.width,t.height)}function d(t,e){const r=new Uint8Array(e);if(n.some(((t,e)=>t!==r[e])))return i;let a=!1;if(p(r,(t=>!(a=\"acTL\"===t))),!a)return s;const h=[],u=[];let l=null,o=null,m=0;if(p(r,((e,r,a,i)=>{const s=new DataView(r.buffer);switch(e){case\"IHDR\":l=r.subarray(a+8,a+8+i),t.width=s.getUint32(a+8),t.height=s.getUint32(a+12);break;case\"acTL\":t.numPlays=s.getUint32(a+8+4);break;case\"fcTL\":{o&&(t.frames.push(o),m++),o=new c,o.width=s.getUint32(a+8+4),o.height=s.getUint32(a+8+8),o.left=s.getUint32(a+8+12),o.top=s.getUint32(a+8+16);const e=s.getUint16(a+8+20);let r=s.getUint16(a+8+22);0===r&&(r=100),o.delay=1e3*e/r,o.delay<=10&&(o.delay=100),t.playTime+=o.delay,o.disposeOp=s.getUint8(a+8+24),o.blendOp=s.getUint8(a+8+25),o.dataParts=[],0===m&&2===o.disposeOp&&(o.disposeOp=1);break}case\"fdAT\":o&&o.dataParts.push(r.subarray(a+8+4,a+8+i));break;case\"IDAT\":o&&o.dataParts.push(r.subarray(a+8,a+8+i));break;case\"IEND\":u.push(w(r,a,12+i));break;default:h.push(w(r,a,12+i))}})),0===t.frames.length)return s;t.frameCount=t.frames.length;const d=new Blob(h),g=new Blob(u);return t.frames.forEach((t=>{let e=[];e.push(n),l.set(U(t.width),0),l.set(U(t.height),4),e.push(y(\"IHDR\",l)),e.push(d),t.dataParts.forEach((t=>e.push(y(\"IDAT\",t)))),e.push(g),t.data=new Blob(e,{type:\"image/png\"}),delete t.dataParts,e=null})),t}function p(t,e){const r=new DataView(t.buffer);let a,i,s,n=8;do{i=r.getUint32(n),a=g(t,n+4,4),s=e(a,t,n,i),n+=12+i}while(!1!==s&&\"IEND\"!==a&&n<t.length)}function g(t,e,r){const a=Array.prototype.slice.call(t.subarray(e,e+r));return String.fromCharCode.apply(String,a)}function f(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}function w(t,e,r){const a=new Uint8Array(r);return a.set(t.subarray(e,e+r)),a}function y(t,e){const r=t.length+e.length,i=new Uint8Array(r+8),s=new DataView(i.buffer);s.setUint32(0,e.length),i.set(f(t),4),i.set(e,8);const n=a(i,4,r);return s.setUint32(r+4,n),i}function U(t){return new Uint8Array([t>>>24&255,t>>>16&255,t>>>8&255,255&t])}export{o as default,u as getPNGSize,l as isAnimatedPNG,h as isPNG};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/Error.js\";import{isAbortError as e,isAborted as s,createAbortError as i}from\"../../../../../core/promiseUtils.js\";const a={GCExt:249,COMMENT:254,APPExt:255,UNKNOWN:1,IMAGE:44,EOF:59,EXT:33};function r(t){if(!t||0===t.byteLength)return!1;const e=t.constructor===Uint8Array?t:new Uint8Array(t);return 71===e[0]&&73===e[1]&&70===e[2]&&56===e[3]}function h(t){const e=new Uint8ClampedArray(t);let s=6;return[e[s++]+(e[s++]<<8),e[s++]+(e[s++]<<8)]}function o(t){if(!t||0===t.byteLength)return!1;const e=new Uint8Array(t);if(!r(e))return!1;let s=0;for(let i=0,a=e.length-9;i<a&&(0!==e[i]||33!==e[i+1]||249!==e[i+2]||4!==e[i+3]||0!==e[i+8]||44!==e[i+9]&&33!==e[i+9]||(s++,!(s>1)));++i);return s>1}class n{constructor(){this.paused=!1,this.playing=!1,this.waitTillDone=!0,this.loading=!1,this.firstFrameOnly=!1,this.frames=[],this.comment=\"\",this.length=0,this.currentFrameNumber=0,this.frameCount=0,this.playSpeed=1,this.lastFrame=null,this.playOnLoad=!0,this.complete=!1,this.interlaceOffsets=[0,4,2,1],this.interlaceSteps=[8,8,4,2],this._lastUsedFrame=-1}static async create(s,i){const a=new n;try{await a._load(s,i)}catch(r){if(!e(r))return new t(\"invalid-resource\",`Could not load PNG: ${r.message}`)}return a}play(){this.playing||(this.paused=!1,this.playing=!0,this._play())}pause(){this.paused=!0,this.playing=!1,clearTimeout(this.timerID)}togglePlay(){this.paused||!this.playing?this.play():this.pause()}bindFrame(t,e,s){t.bindTexture(e,s);const i=this.frameChanged();if(i){const t=this.currentFrame,s=t.frameData;e.updateData(0,0,0,t.width,t.height,s),this.updateUsedFrame()}return i}seekFrame(t){clearTimeout(this.timerID),this.currentFrameNumber=t%this.frames.length,this.playing?this._play():this._setCurrentFrame(this.currentFrameNumber)}seek(t){clearTimeout(this.timerID),t<0&&(t=0),t*=1e3,t%=this.length;let e=0;for(;t>this.frames[e].time+this.frames[e].delay&&e<this.frames.length;)e+=1;this.currentFrameNumber=e,this.playing?this._play():this._setCurrentFrame(this.currentFrameNumber)}frameChanged(){return this._lastUsedFrame!==this.currentFrameNumber}updateUsedFrame(){this._lastUsedFrame=this.currentFrameNumber}async _load(s,i){try{this.loading=!0,await this._parse(s,i),this.loading=!1,this.play()}catch(a){if(!e(a))return new t(\"invalid-resource\",\"Could not parse gif!\")}}_parse(t,e){const s=new l(t);s.pos+=6,this.width=s.data[s.pos++]+(s.data[s.pos++]<<8),this.height=s.data[s.pos++]+(s.data[s.pos++]<<8);const i=s.data[s.pos++];return this.globalColourCount=1<<1+(7&i),s.pos++,s.pos++,128&i&&(this.globalColourTable=this._parseColourTable(this.globalColourCount,s)),new Promise(((t,i)=>{setTimeout((()=>this._parseBlock(s,t,i,e)),0)}))}async _parseBlock(t,e,r,h){if(h&&h.signal&&s(h.signal))return void r(i());const o=t.data[t.pos++];if(o===a.IMAGE){if(this._parseImg(t),this.firstFrameOnly)return this._finishedLoading(),void e()}else{if(o===a.EOF)return this._finishedLoading(),void e();this._parseExt(t)}\"function\"==typeof this.onprogress&&this.onprogress({bytesRead:t.pos,totalBytes:t.data.length,frame:this.frames.length}),setTimeout((()=>this._parseBlock(t,e,r,h)),0)}_parseColourTable(t,e){const s=[];for(let i=0;i<t;i++)s.push([e.data[e.pos++],e.data[e.pos++],e.data[e.pos++]]);return s}_parseImg(t){const e=t=>{const e=this.pixelBufSize/t;this.interlacedBufSize!==this.pixelBufSize&&(this.deinterlaceBuf=new Uint8Array(this.pixelBufSize),this.interlacedBufSize=this.pixelBufSize);let s=0;for(let i=0;i<4;i++)for(let a=this.interlaceOffsets[i];a<e;a+=this.interlaceSteps[i])this.deinterlaceBuf.set(this.pixelBuf.subarray(s,s+t),a*t),s+=t},s={};this.frames.push(s),s.disposalMethod=this.disposalMethod,s.time=this.length,s.delay=10*this.delayTime,this.length+=s.delay,this.transparencyGiven?s.transparencyIndex=this.transparencyIndex:s.transparencyIndex=void 0,s.leftPos=t.data[t.pos++]+(t.data[t.pos++]<<8),s.topPos=t.data[t.pos++]+(t.data[t.pos++]<<8),s.width=t.data[t.pos++]+(t.data[t.pos++]<<8),s.height=t.data[t.pos++]+(t.data[t.pos++]<<8);const i=t.data[t.pos++];s.localColourTableFlag=!!(128&i),s.localColourTableFlag&&(s.localColourTable=this._parseColourTable(1<<1+(7&i),t)),this.pixelBufSize!==s.width*s.height&&(this.pixelBuf=new Uint8Array(s.width*s.height),this.pixelBufSize=s.width*s.height),this._lzwDecode(t.data[t.pos++],t.readSubBlocksB()),64&i?(s.interlaced=!0,e(s.width)):s.interlaced=!1,this._processFrame(s)}_lzwDecode(t,e){let s,i,a,r,h,o,n,l,d;a=i=0;let p=[];const u=1<<t,m=u+1;for(r=t+1,d=!1;!d;){for(o=h,h=0,s=0;s<r;s++)e[a>>3]&1<<(7&a)&&(h|=1<<s),a++;if(h===u){for(p=[],r=t+1,s=0;s<u;s++)p[s]=[s];p[u]=[],p[m]=null}else{if(h===m)return void(d=!0);for(h>=p.length?p.push(p[o].concat(p[o][0])):o!==u&&p.push(p[o].concat(p[h][0])),n=p[h],l=n.length,s=0;s<l;s++)this.pixelBuf[i++]=n[s];p.length===1<<r&&r<12&&r++}}}_processFrame(t){t.image=document.createElement(\"canvas\"),t.image.width=this.width,t.image.height=this.height,t.ctx=t.image.getContext(\"2d\");const e=t.localColourTableFlag?t.localColourTable:this.globalColourTable;null===this.lastFrame&&(this.lastFrame=t);const s=2===this.lastFrame.disposalMethod||3===this.lastFrame.disposalMethod;s||t.ctx.drawImage(this.lastFrame.image,0,0,this.width,this.height);const i=t.ctx.getImageData(t.leftPos,t.topPos,t.width,t.height),a=t.transparencyIndex,r=i.data,h=t.interlaced?this.deinterlaceBuf:this.pixelBuf,o=h.length;let n,l,d=0;for(let p=0;p<o;p++)n=h[p],l=e[n],a!==n?(r[d++]=l[0],r[d++]=l[1],r[d++]=l[2],r[d++]=255):s?(r[d+3]=0,d+=4):d+=4;t.ctx.putImageData(i,t.leftPos,t.topPos),this.lastFrame=t}_parseExt(t){const e=t.data[t.pos++];e===a.GCExt?this._parseGCExt(t):e===a.COMMENT?this.comment+=t.readSubBlocks():e===a.APPExt?this._parseAppExt(t):(e===a.UNKNOWN&&(t.pos+=13),t.readSubBlocks())}_parseAppExt(t){t.pos+=1,\"NETSCAPE\"===t.getString(8)?t.pos+=8:(t.pos+=3,t.readSubBlocks())}_parseGCExt(t){t.pos++;const e=t.data[t.pos++];this.disposalMethod=(28&e)>>2,this.transparencyGiven=!!(1&e),this.delayTime=t.data[t.pos++]+(t.data[t.pos++]<<8),this.transparencyIndex=t.data[t.pos++],t.pos++}_finishedLoading(){this.loading=!1,this.frameCount=this.frames.length,this.lastFrame=null,this.complete=!0,this.disposalMethod=void 0,this.transparencyGiven=void 0,this.delayTime=void 0,this.transparencyIndex=void 0,this.waitTillDone=void 0,this.pixelBuf=void 0,this.deinterlaceBuf=void 0,this.pixelBufSize=void 0,this.deinterlaceBuf=void 0,this.currentFrameNumber=0,this.frames.length>0&&this._setCurrentFrame(0),this.playOnLoad&&this.play()}_play(){let t,e;0!==this.playSpeed?(this.playSpeed<0?(this.currentFrameNumber-=1,this.currentFrameNumber<0&&(this.currentFrameNumber=this.frames.length-1),e=this.currentFrameNumber,e-=1,e<0&&(e=this.frames.length-1),t=1*-this.frames[e].delay/this.playSpeed):(this.currentFrameNumber+=1,this.currentFrameNumber%=this.frames.length,t=1*this.frames[this.currentFrameNumber].delay/this.playSpeed),this._setCurrentFrame(this.currentFrameNumber),this.timerID=window.setTimeout((()=>this._play()),t)):this.pause()}_setCurrentFrame(t){const e=this.frames[t];this.currentFrame={frameData:e.image,top:0,left:0,width:this.width,height:this.height}}}class l{constructor(t){this.pos=0,this.data=new Uint8ClampedArray(t),this.len=this.data.length}getString(t){let e=\"\";for(;t--;)e+=String.fromCharCode(this.data[this.pos++]);return e}readSubBlocks(){let t,e,s=\"\";do{for(e=t=this.data[this.pos++];e--;)s+=String.fromCharCode(this.data[this.pos++])}while(0!==t&&this.pos<this.len);return s}readSubBlocksB(){let t,e;const s=[];do{for(e=t=this.data[this.pos++];e--;)s.push(this.data[this.pos++])}while(0!==t&&this.pos<this.len);return s}}export{n as default,h as getGIFSize,o as isAnimatedGIF,r as isGIF};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../config.js\";import t from\"../../../../request.js\";import{bidiText as i}from\"../../../../core/BidiText.js\";import s from\"../../../../core/Error.js\";import r from\"../../../../core/Logger.js\";import{isNone as n,isSome as o}from\"../../../../core/maybe.js\";import{throwIfAborted as a,isAbortError as h}from\"../../../../core/promiseUtils.js\";import{pt2px as c}from\"../../../../core/screenUtils.js\";import{s as u}from\"../../../../chunks/vec2.js\";import{c as d}from\"../../../../chunks/vec2f32.js\";import l from\"../../../../symbols/cim/Rasterizer.js\";import{TEXTURE_BINDING_GLYPH_ATLAS as m,TEXTURE_BINDING_SPRITE_ATLAS as g}from\"./definitions.js\";import{MosaicType as p}from\"./enums.js\";import{getFullyQualifiedFontName as f}from\"./fontUtils.js\";import _ from\"./GlyphMosaic.js\";import w from\"./GlyphSource.js\";import y from\"./SDFConverter.js\";import M from\"./SpriteMosaic.js\";import{is3D as v,charCodes as I,isSimple as b,isSVGResource as z,isImageResource as R,shouldRepeat as T,getPMSResourceSize as j,isGIF as x,isPNG as S,getUrl as U,isSVGImage as B}from\"./Utils.js\";import G,{isPNG as C,isAnimatedPNG as F}from\"./animatedFormats/apng.js\";import P,{isGIF as q,isAnimatedGIF as L}from\"./animatedFormats/gif.js\";import{ok as $}from\"./util/Result.js\";import{keyFromSymbol as k}from\"./util/symbolUtils.js\";import{QueueProcessor as A}from\"../../../support/QueueProcessor.js\";const O=d(),N=\"arial-unicode-ms-regular\",Q=126,E=r.getLogger(\"esri.views.2d.engine.webgl.TextureManager\");async function H(e,i){const r=U(e);let n;const o=\";base64,\";if(r.includes(o)){const e=r.indexOf(o)+o.length,t=r.substring(e),i=atob(t),s=new Uint8Array(i.length);for(let r=0;r<i.length;r++)s[r]=i.charCodeAt(r);n=s.buffer}else try{const{data:e}=await t(r,{responseType:\"array-buffer\",...i});n=e}catch(a){if(!h(a))return new s(\"mapview-invalid-resource\",`Could not fetch requested resource at ${r}`)}return n}function V(e,t){const i=Math.round(c(t)*window.devicePixelRatio),s=i>=128?2:4;return Math.min(e,i*s)}const Y=(e,t,i)=>E.error(new s(e,t,i));class D{constructor(e,t,i){this.mosaicType=e,this.page=t,this.sdf=i}static fromMosaic(e,t){return new D(e,t.page,t.sdf)}}class J{constructor(i,r){this.resourceManager=r,this._invalidFontsMap=new Map,this._sdfConverter=new y(Q),this._bindingInfos=new Array,this._hashToBindingIndex=new Map,this._ongoingRasterizations=new Map,this._imageRequestQueue=new A({concurrency:10,process:async(e,i)=>{a(i);try{return await t(e,{responseType:\"image\",signal:i})}catch(r){if(!h(r))throw new s(\"mapview-invalid-resource\",`Could not fetch requested resource at ${e}`,r);throw r}}}),this._spriteMosaic=new M(i,2048,2048,500),this._glyphSource=new w(`${e.fontsUrl}/{fontstack}/{range}.pbf`),this._glyphMosaic=new _(1024,1024,this._glyphSource),this._rasterizer=new l(r)}dispose(){this._spriteMosaic.dispose(),this._glyphMosaic.dispose(),this._rasterizer.dispose(),this._sdfConverter.dispose(),this._spriteMosaic=null,this._glyphMosaic=null,this._sdfConverter=null,this._hashToBindingIndex.clear(),this._hashToBindingIndex=null,this._bindingInfos=null,this._ongoingRasterizations.clear(),this._ongoingRasterizations=null,this._imageRequestQueue.clear(),this._imageRequestQueue=null}get sprites(){return this._spriteMosaic}get glyphs(){return this._glyphMosaic}async rasterizeItem(e,t,i,s){if(n(e))return Y(\"mapview-null-resource\",\"Unable to rasterize null resource\"),null;switch(e.type){case\"text\":case\"esriTS\":{const t=await this._rasterizeText(e,i,s);return t.forEach((e=>this._setTextureBinding(p.GLYPH,e))),{glyphMosaicItems:t}}default:{if(v(e))return Y(\"mapview-invalid-type\",`MapView does not support symbol type: ${e.type}`,e),null;const i=await this._rasterizeSpriteSymbol(e,t,s);return $(i)&&i&&this._setTextureBinding(p.SPRITE,i),{spriteMosaicItem:i}}}}bindTextures(e,t,i,s=!1){if(0===i.textureBinding)return;const r=this._bindingInfos[i.textureBinding-1],n=r.page,o=s?9987:9729;switch(r.mosaicType){case p.SPRITE:{const i=this.sprites.getWidth(n),s=this.sprites.getHeight(n),r=u(O,i,s);return this._spriteMosaic.bind(e,o,n,g),t.setUniform1i(\"u_texture\",g),void t.setUniform2fv(\"u_mosaicSize\",r)}case p.GLYPH:{const i=this.glyphs.width,s=this.glyphs.height,r=u(O,i,s);return this._glyphMosaic.bind(e,o,n,m),t.setUniform1i(\"u_texture\",m),void t.setUniform2fv(\"u_mosaicSize\",r)}default:E.error(\"mapview-texture-manager\",`Cannot handle unknown type ${r.mosaicType}`)}}_hashMosaic(e,t){return 1|e<<1|(t.sdf?1:0)<<2|t.page<<3}_setTextureBinding(e,t){const i=this._hashMosaic(e,t);if(!this._hashToBindingIndex.has(i)){const s=D.fromMosaic(e,t),r=this._bindingInfos.length+1;this._hashToBindingIndex.set(i,r),this._bindingInfos.push(s)}t.textureBinding=this._hashToBindingIndex.get(i)}async _rasterizeText(e,t,s){let r,n;if(\"cim\"in e){const t=e;r=t.fontName,n=t.text}else{const t=e;r=f(t.font),n=t.text}const o=this._invalidFontsMap.has(r),a=t||I(i(n)[0]);try{return await this._glyphMosaic.getGlyphItems(o?N:r,a,s)}catch(h){return Y(\"mapview-invalid-resource\",`Couldn't find font ${r}. Falling back to Arial Unicode MS Regular`),this._invalidFontsMap.set(r,!0),this._glyphMosaic.getGlyphItems(N,a,s)}}async _rasterizeSpriteSymbol(e,t,i){if(b(e))return null;const r=k(e);if(this._spriteMosaic.has(r))return this._spriteMosaic.getSpriteItem(r);if(z(e)||R(e))return this._handleAsyncResource(r,e,i);const n=1,o=this._rasterizer.rasterizeJSONResource(e,n);if(o){const{size:t,image:i,sdf:s,simplePattern:n}=o;return this._addItemToMosaic(r,t,{type:\"static\",data:i},T(e),s,n)}return new s(\"TextureManager\",\"unrecognized or null rasterized image\")}async _handleAsyncResource(e,t,i){if(this._ongoingRasterizations.has(e))return this._ongoingRasterizations.get(e);let s;s=z(t)?this._handleSVG(t,e,i):this._handleImage(t,e,i),this._ongoingRasterizations.set(e,s);try{await s,this._ongoingRasterizations.delete(e)}catch{this._ongoingRasterizations.delete(e)}return s}async _handleSVG(e,t,i){const s=[Q,Q],r=await this._sdfConverter.draw(e.path,i);return this._addItemToMosaic(t,s,{type:\"static\",data:new Uint32Array(r.buffer)},!1,!0,!0)}async _handleGIFOrPNG(e,t,i){const r=await H(e,i);if($(r)){const o=q(r),a=C(r);if(!o&&!a)return new s(\"mapview-invalid-resource\",\"Image data is neither GIF nor PNG!\");let c;try{o&&L(r)?c=await P.create(r,i):a&&F(r)&&(c=await G.create(r,i))}catch(n){if(!h(n))return new s(\"mapview-invalid-resource\",\"Could not fetch requested resource!\")}if(c&&$(c))return this._addItemToMosaic(t,[c.width,c.height],{type:\"animated\",data:c},T(e),!1,!1);const u=new Blob([r],{type:o?\"image/gif\":\"image/png\"}),d=await this._imageFromBlob(u);if(d&&d instanceof HTMLImageElement){let i=d.width,s=d.height;\"esriPMS\"===e.type&&(i=Math.round(V(d.width,j(e))),s=Math.round(d.height*(i/d.width)));const r=\"cim\"in e?e.cim.colorSubstitutions:void 0,{size:n,sdf:o,image:a}=this._rasterizer.rasterizeImageResource(i,s,d,r);return this._addItemToMosaic(t,n,{type:\"static\",data:a},T(e),o,!1)}}return new s(\"mapview-invalid-resource\",\"Could not handle resource!\")}async _handleImage(e,t,i){if(x(e)||S(e))return this._handleGIFOrPNG(e,t,i);const r=U(e);try{let s;const a=this.resourceManager.getResource(r);if(o(a))s=a;else{const{data:e}=await this._imageRequestQueue.push(r,{...i});s=e}if(B(r))if(\"width\"in e&&\"height\"in e)s.width=c(e.width),s.height=c(e.height);else if(\"cim\"in e){var n;const t=e.cim;s.width=c(null!=(n=t.width)?n:t.scaleX*t.size),s.height=c(t.size)}if(!s.width||!s.height)return null;let h=s.width,u=s.height;\"esriPMS\"===e.type&&(h=Math.round(V(s.width,j(e))),u=Math.round(s.height*(h/s.width)));const d=\"cim\"in e?e.cim.colorSubstitutions:void 0,{size:l,sdf:m,image:g}=this._rasterizer.rasterizeImageResource(h,u,s,d);return this._addItemToMosaic(t,l,{type:\"static\",data:g},T(e),m,!1)}catch(a){if(!h(a))return new s(\"mapview-invalid-resource\",`Could not fetch requested resource at ${r}. ${a.message}`)}}async _imageFromBlob(e){const t=window.URL.createObjectURL(e);try{const{data:e}=await this._imageRequestQueue.push(t);return window.URL.revokeObjectURL(t),e}catch(i){if(window.URL.revokeObjectURL(t),!h(i))return new s(\"mapview-invalid-resource\",`Could not fetch requested resource at ${t}`);throw i}}_addItemToMosaic(e,t,i,s,r,n){return this._spriteMosaic.addSpriteItem(e,t,i,s,r,n)}}export{J as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nconst e=-26,r=-18;function t(e){const r=e.toLowerCase().split(\" \").join(\"-\");switch(r){case\"serif\":return\"noto-serif\";case\"sans-serif\":return\"arial-unicode-ms\";case\"monospace\":return\"ubuntu-mono\";case\"fantasy\":return\"cabin-sketch\";case\"cursive\":return\"redressed\";default:return r}}function n(e){const r=u(e)+c(e);return t(e.family)+(r.length>0?r:\"-regular\")}function s(t){switch(t){case\"underline\":return e;case\"line-through\":return r}return NaN}function u(e){if(!e.weight)return\"\";switch(e.weight.toLowerCase()){case\"bold\":case\"bolder\":return\"-bold\"}return\"\"}function c(e){if(!e.style)return\"\";switch(e.style.toLowerCase()){case\"italic\":case\"oblique\":return\"-italic\"}return\"\"}export{s as getFontDecorationTop,n as getFullyQualifiedFontName};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction e(e){switch(e.type){case\"esriSMS\":return`${e.style}.${e.path}`;case\"esriSLS\":return`${e.style}.${e.cap}`;case\"esriSFS\":return`${e.style}`;case\"esriPFS\":case\"esriPMS\":return e.imageData?`${e.imageData}${e.width}${e.height}`:`${e.url}${e.width}${e.height}`;default:return\"mosaicHash\"in e?e.mosaicHash:JSON.stringify(e)}}export{e as keyFromSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nclass t{constructor(){this.name=this.constructor.name}}export{t as Effect};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../../../../../core/maybe.js\";import{ATTRIBUTE_DATA_ANIMATION as t,TEXTURE_BINDING_ATTRIBUTE_DATA_0 as r,TEXTURE_BINDING_ATTRIBUTE_DATA_1 as i}from\"../definitions.js\";import s from\"../VertexStream.js\";import{Effect as a}from\"./Effect.js\";class o extends a{constructor(){super(...arguments),this.defines=[],this._desc={vsPath:\"fx/integrate\",fsPath:\"fx/integrate\",attributes:new Map([[\"a_position\",0]])}}dispose(){this._quad&&this._quad.dispose()}bind(){}unbind(){}draw(r,i){if(!i.size)return;const{context:a,renderingOptions:o}=r;this._quad||(this._quad=new s(a,[0,0,1,0,0,1,1,1]));const n=a.getBoundFramebufferObject(),{x:u,y:m,width:d,height:f}=a.getViewport();i.bindTextures(a);const c=i.getBlock(t);if(e(c))return;const _=c.getFBO(a),l=c.getFBO(a,1);a.setViewport(0,0,i.size,i.size),this._computeDelta(r,l,o.labelsAnimationTime),this._updateAnimationState(r,l,_),a.bindFramebuffer(n),a.setViewport(u,m,d,f)}_computeDelta(e,t,s){const{context:a,painter:o,displayLevel:n}=e,u=o.materialManager.getProgram(e,this._desc,[\"delta\"]);a.bindFramebuffer(t),a.setClearColor(0,0,0,0),a.clear(a.gl.COLOR_BUFFER_BIT),a.useProgram(u),u.setUniform1i(\"u_maskTexture\",r),u.setUniform1i(\"u_sourceTexture\",i),u.setUniform1f(\"u_timeDelta\",e.deltaTime),u.setUniform1f(\"u_animationTime\",s),u.setUniform1f(\"u_zoomLevel\",Math.round(10*n)),this._quad.draw()}_updateAnimationState(e,t,r){const{context:i,painter:s}=e,a=s.materialManager.getProgram(e,this._desc,[\"update\"]);i.bindTexture(t.colorTexture,1),i.useProgram(a),a.setUniform1i(\"u_sourceTexture\",1),i.bindFramebuffer(r),i.setClearColor(0,0,0,0),i.clear(i.gl.COLOR_BUFFER_BIT),this._quad.draw()}}export{o as AnimationEffect};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{resolveIncludes as e}from\"./sources/resolver.js\";const r=e=>e.replace(\"-\",\"_\").toUpperCase(),a=e=>`#define ${r(e)}\\n`,t={attributes:new Map([[\"a_pos\",0],[\"a_tex\",1]]),shaders:r=>({vertexShader:a(r)+e(\"blend/blend.vert\"),fragmentShader:a(r)+e(\"blend/blend.frag\")})};export{t as blend};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Error.js\";import r from\"../../../../../core/Logger.js\";import{isSome as t}from\"../../../../../core/maybe.js\";import\"../../../../webgl/BufferObject.js\";import\"../../../../webgl/FramebufferObject.js\";import\"../../../../../core/has.js\";import\"../../../../webgl/checkWebGLError.js\";import\"../../../../webgl/enums.js\";import\"../../../../../chunks/builtins.js\";import s from\"../../../../webgl/ProgramCache.js\";import i from\"../../../../webgl/Texture.js\";import\"../../../../webgl/VertexArrayObject.js\";import{WGLDrawPhase as o}from\"../enums.js\";import a from\"../VertexStream.js\";import{blend as n}from\"../shaders/BlendPrograms.js\";const d=r.getLogger(\"esri.views.2d.engine.webgl.effects.blendEffects.BlendEffect\");class u{constructor(){this._size=[0,0]}dispose(e){this._backBufferTexture&&(this._backBufferTexture.dispose(),this._backBufferTexture=null),this._programCache&&(this._programCache.dispose(),this._programCache=null),this._quad&&(this._quad.dispose(),this._quad=null)}draw(r,t,s,i,a){const{context:u,drawPhase:c}=r;if(this._setupShader(u),i&&\"normal\"!==i&&c!==o.LABEL)return void this._drawBlended(r,t,s,i,a);const m=this._programCache.getProgram(n,\"normal\");if(!m)return void d.error(new e(\"mapview-BlendEffect\",'Error creating shader program for blend mode \"normal\"'));u.useProgram(m),t.setSamplingMode(s),u.bindTexture(t,0),m.setUniform1i(\"u_layerTexture\",0),m.setUniform1f(\"u_opacity\",a),u.setBlendingEnabled(!0),u.setBlendFunction(1,771);const f=this._quad;f.draw(),f.unbind()}_drawBlended(r,s,i,o,a){const{context:u,state:c,pixelRatio:m,inFadeTransition:f}=r,{size:h}=c,l=u.getBoundFramebufferObject();let p,g;if(t(l)){const e=l.descriptor;p=e.width,g=e.height}else p=Math.round(m*h[0]),g=Math.round(m*h[1]);this._createOrResizeTexture(r,p,g);const b=this._backBufferTexture;l.copyToTexture(0,0,p,g,0,0,b),u.setStencilTestEnabled(!1),u.setStencilWriteMask(0),u.setBlendingEnabled(!0),u.setDepthTestEnabled(!1),u.setDepthWriteEnabled(!1);const _=this._programCache.getProgram(n,o);if(!_)return void d.error(new e(\"mapview-BlendEffect\",`Error creating shader program for blend mode ${o}`));u.useProgram(_),b.setSamplingMode(i),u.bindTexture(b,0),_.setUniform1i(\"u_backbufferTexture\",0),s.setSamplingMode(i),u.bindTexture(s,1),_.setUniform1i(\"u_layerTexture\",1),_.setUniform1f(\"u_opacity\",a),_.setUniform1f(\"u_inFadeOpacity\",f?1:0),u.setBlendFunction(1,0);const x=this._quad;x.draw(),x.unbind(),u.setBlendFunction(1,771)}_setupShader(e){this._programCache||(this._programCache=new s(e),this._quad||(this._quad=new a(e,[-1,-1,1,-1,-1,1,1,1])))}_createOrResizeTexture(e,r,t){const{context:s}=e;null!==this._backBufferTexture&&r===this._size[0]&&t===this._size[1]||(this._backBufferTexture?this._backBufferTexture.resize(r,t):this._backBufferTexture=new i(s,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:r,height:t}),this._size[0]=r,this._size[1]=t)}}export{u as BlendEffect};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{Effect as e}from\"./Effect.js\";class t extends e{constructor(e){super(),this.name=this.constructor.name,this.defines=[e]}dispose(){}bind({context:e,painter:t}){this._prev=e.getBoundFramebufferObject();const{width:r,height:s}=e.getViewport(),o=t.getFbos(r,s).effect0;e.bindFramebuffer(o),e.setColorMask(!0,!0,!0,!0),e.setClearColor(0,0,0,0),e.clear(e.gl.COLOR_BUFFER_BIT)}unbind(){}draw(e,t){const{context:r,painter:s}=e,o=s.getPostProcessingEffects(t),n=r.getBoundFramebufferObject();for(const{postProcessingEffect:c,effect:f}of o)c.draw(e,n,f);r.bindFramebuffer(this._prev),r.setStencilTestEnabled(!1),s.blitTexture(r,n.colorTexture,9728),r.setStencilTestEnabled(!0)}}export{t as FeatureEffect};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nconst o=1,t=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n=256,e={outlineWidth:.7,outerHaloWidth:.7,innerHaloWidth:.7,outlinePosition:0};export{t as ALPHA_TO_RGBA_CHANNEL_SELECTOR_MATRIX,e as HIGHLIGHT_SIZING,i as RGBA_TO_RGBA_CHANNEL_SELECTOR_MATRIX,n as SHADE_TEXTURE_SIZE,o as SIGMA};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport o from\"../../../../../../core/Logger.js\";import\"../../../../../webgl/BufferObject.js\";import\"../../../../../webgl/FramebufferObject.js\";import\"../../../../../../core/has.js\";import\"../../../../../webgl/checkWebGLError.js\";import\"../../../../../webgl/enums.js\";import\"../../../../../../chunks/builtins.js\";import i from\"../../../../../webgl/Texture.js\";import\"../../../../../webgl/VertexArrayObject.js\";import{TEXTURE_BINDING_HIGHLIGHT_1 as t}from\"../../definitions.js\";import{HIGHLIGHT_SIZING as e,SHADE_TEXTURE_SIZE as l,SIGMA as r}from\"./parameters.js\";const n=o.getLogger(\"esri.views.2d.engine.webgl.painter.highlight.HighlightGradient\");function h(o,i){i.fillColor[0]=o.color.r/255,i.fillColor[1]=o.color.g/255,i.fillColor[2]=o.color.b/255,i.fillColor[3]=o.color.a,o.haloColor?(i.outlineColor[0]=o.haloColor.r/255,i.outlineColor[1]=o.haloColor.g/255,i.outlineColor[2]=o.haloColor.b/255,i.outlineColor[3]=o.haloColor.a):(i.outlineColor[0]=i.fillColor[0],i.outlineColor[1]=i.fillColor[1],i.outlineColor[2]=i.fillColor[2],i.outlineColor[3]=i.fillColor[3]),i.fillColor[3]*=o.fillOpacity,i.outlineColor[3]*=o.haloOpacity,i.fillColor[0]*=i.fillColor[3],i.fillColor[1]*=i.fillColor[3],i.fillColor[2]*=i.fillColor[3],i.outlineColor[0]*=i.outlineColor[3],i.outlineColor[1]*=i.outlineColor[3],i.outlineColor[2]*=i.outlineColor[3],i.outlineWidth=e.outlineWidth,i.outerHaloWidth=e.outerHaloWidth,i.innerHaloWidth=e.innerHaloWidth,i.outlinePosition=e.outlinePosition}const s=[0,0,0,0];class a{constructor(){this._convertedHighlightOptions={fillColor:[.2*.75,.6*.75,.675,.75],outlineColor:[.2*.9,.54,.81,.9],outlinePosition:e.outlinePosition,outlineWidth:e.outlineWidth,innerHaloWidth:e.innerHaloWidth,outerHaloWidth:e.outerHaloWidth},this.shadeTexChanged=!0,this.texelData=new Uint8Array(4*l),this.minMaxDistance=[0,0]}setHighlightOptions(o){const i=this._convertedHighlightOptions;h(o,i);const t=i.outlinePosition-i.outlineWidth/2-i.outerHaloWidth,e=i.outlinePosition-i.outlineWidth/2,a=i.outlinePosition+i.outlineWidth/2,u=i.outlinePosition+i.outlineWidth/2+i.innerHaloWidth,d=Math.sqrt(Math.PI/2)*r,g=Math.abs(t)>d?Math.round(10*(Math.abs(t)-d))/10:0,f=Math.abs(u)>d?Math.round(10*(Math.abs(u)-d))/10:0;let C;g&&!f?n.error(\"The outer rim of the highlight is \"+g+\"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards).\"):!g&&f?n.error(\"The inner rim of the highlight is \"+f+\"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards).\"):g&&f&&n.error(\"The highlight is \"+Math.max(g,f)+\"px away from the edge of the feature; consider reducing some width values.\");const c=[void 0,void 0,void 0,void 0];function m(o,i,t){c[0]=(1-t)*o[0]+t*i[0],c[1]=(1-t)*o[1]+t*i[1],c[2]=(1-t)*o[2]+t*i[2],c[3]=(1-t)*o[3]+t*i[3]}const{texelData:p}=this;for(let r=0;r<l;++r)C=t+r/(l-1)*(u-t),C<t?(c[4*r+0]=0,c[4*r+1]=0,c[4*r+2]=0,c[4*r+3]=0):C<e?m(s,i.outlineColor,(C-t)/(e-t)):C<a?[c[0],c[1],c[2],c[3]]=i.outlineColor:C<u?m(i.outlineColor,i.fillColor,(C-a)/(u-a)):[c[4*r+0],c[4*r+1],c[4*r+2],c[4*r+3]]=i.fillColor,p[4*r+0]=255*c[0],p[4*r+1]=255*c[1],p[4*r+2]=255*c[2],p[4*r+3]=255*c[3];this.minMaxDistance[0]=t,this.minMaxDistance[1]=u,this.shadeTexChanged=!0}applyHighlightOptions(o,e){this.shadeTex||(this.shadeTex=new i(o,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:l,height:1,samplingMode:9729})),this.shadeTexChanged&&(this.shadeTex.updateData(0,0,0,l,1,this.texelData),this.shadeTexChanged=!1),o.bindTexture(this.shadeTex,t),e.setUniform2fv(\"u_minMaxDistance\",this.minMaxDistance)}destroy(){this.shadeTex&&(this.shadeTex.dispose(),this.shadeTex=null)}}export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{resolveIncludes as e}from\"./sources/resolver.js\";const t={shaders:{vertexShader:e(\"highlight/textured.vert\"),fragmentShader:e(\"highlight/highlight.frag\")},attributes:new Map([[\"a_position\",0],[\"a_texcoord\",1]])},r={shaders:{vertexShader:e(\"highlight/textured.vert\"),fragmentShader:e(\"highlight/blur.frag\")},attributes:new Map([[\"a_position\",0],[\"a_texcoord\",1]])};export{r as blur,t as highlight};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport r from\"../../../../../webgl/BufferObject.js\";import\"../../../../../webgl/FramebufferObject.js\";import\"../../../../../../core/has.js\";import\"../../../../../webgl/checkWebGLError.js\";import\"../../../../../webgl/enums.js\";import\"../../../../../../chunks/builtins.js\";import{createProgram as e}from\"../../../../../webgl/programUtils.js\";import\"../../../../../webgl/Texture.js\";import s from\"../../../../../webgl/VertexArrayObject.js\";import{TEXTURE_BINDING_HIGHLIGHT_0 as i,TEXTURE_BINDING_HIGHLIGHT_1 as t}from\"../../definitions.js\";import{ALPHA_TO_RGBA_CHANNEL_SELECTOR_MATRIX as o,RGBA_TO_RGBA_CHANNEL_SELECTOR_MATRIX as u,SIGMA as h}from\"./parameters.js\";import{highlight as a,blur as m}from\"../../shaders/HighlightPrograms.js\";class n{constructor(){this._width=void 0,this._height=void 0,this._resources=null}dispose(){this._resources&&(this._resources.quadGeometry.dispose(),this._resources.quadVAO.dispose(),this._resources.highlightProgram.dispose(),this._resources.blurProgram.dispose(),this._resources=null)}preBlur(r,e){r.bindTexture(e,i),r.useProgram(this._resources.blurProgram),this._resources.blurProgram.setUniform4fv(\"u_direction\",[1,0,1/this._width,0]),this._resources.blurProgram.setUniformMatrix4fv(\"u_channelSelector\",o),r.bindVAO(this._resources.quadVAO),r.drawArrays(5,0,4),r.bindVAO()}finalBlur(r,e){r.bindTexture(e,i),r.useProgram(this._resources.blurProgram),this._resources.blurProgram.setUniform4fv(\"u_direction\",[0,1,0,1/this._height]),this._resources.blurProgram.setUniformMatrix4fv(\"u_channelSelector\",u),r.bindVAO(this._resources.quadVAO),r.drawArrays(5,0,4),r.bindVAO()}renderHighlight(r,e,s){r.bindTexture(e,i),r.useProgram(this._resources.highlightProgram),s.applyHighlightOptions(r,this._resources.highlightProgram),r.bindVAO(this._resources.quadVAO),r.setBlendingEnabled(!0),r.setBlendFunction(1,771),r.drawArrays(5,0,4),r.bindVAO()}_initialize(o,u,n){this._width=u,this._height=n;const g=r.createVertex(o,35044,new Int8Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]).buffer),d=new s(o,new Map([[\"a_position\",0],[\"a_texcoord\",1]]),{geometry:[{name:\"a_position\",count:2,type:5120,offset:0,stride:4,normalized:!1},{name:\"a_texcoord\",count:2,type:5121,offset:2,stride:4,normalized:!1}]},{geometry:g}),l=e(o,a),c=e(o,m);l.setUniform1i(\"u_texture\",i),l.setUniform1i(\"u_shade\",t),l.setUniform1f(\"u_sigma\",h),c.setUniform1i(\"u_texture\",i),c.setUniform1f(\"u_sigma\",h),this._resources={quadGeometry:g,quadVAO:d,highlightProgram:l,blurProgram:c}}setup(r,e,s){this._resources?(this._width=e,this._height=s):this._initialize(r,e,s)}}export{n as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../../webgl/BufferObject.js\";import e from\"../../../../../webgl/FramebufferObject.js\";import\"../../../../../../core/has.js\";import\"../../../../../webgl/checkWebGLError.js\";import\"../../../../../webgl/enums.js\";import\"../../../../../../chunks/builtins.js\";import r from\"../../../../../webgl/Texture.js\";import\"../../../../../webgl/VertexArrayObject.js\";function s(s,t,i){const h=new r(s,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:t,height:i,samplingMode:9729});return[h,new e(s,{colorTarget:0,depthStencilTarget:2},h)]}class t{constructor(){this._width=void 0,this._height=void 0,this._resources=null}dispose(){this._resources&&(this._resources.sharedBlur1Tex.dispose(),this._resources.sharedBlur1Fbo.dispose(),this._resources.sharedBlur2Tex.dispose(),this._resources.sharedBlur2Fbo.dispose(),this._resources=null)}_initialize(e,r,t){this._width=r,this._height=t;const[i,h]=s(e,r,t),[o,u]=s(e,r,t);this._resources={sharedBlur1Tex:i,sharedBlur1Fbo:h,sharedBlur2Tex:o,sharedBlur2Fbo:u}}setup(e,r,s){!this._resources||this._width===r&&this._height===s||this.dispose(),this._resources||this._initialize(e,r,s)}get sharedBlur1Tex(){return this._resources.sharedBlur1Tex}get sharedBlur1Fbo(){return this._resources.sharedBlur1Fbo}get sharedBlur2Tex(){return this._resources.sharedBlur2Tex}get sharedBlur2Fbo(){return this._resources.sharedBlur2Fbo}}export{t as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../../core/has.js\";import{BitBlitRenderer as e}from\"../BitBlitRenderer.js\";import{Effect as t}from\"./Effect.js\";import i from\"./highlight/HighlightGradient.js\";import s from\"./highlight/HighlightRenderer.js\";import h from\"./highlight/HighlightSurfaces.js\";const r=4,l=4/r;class d extends t{constructor(){super(...arguments),this.defines=[\"highlight\"],this._hlRenderer=new s,this._hlGradient=new i,this._width=void 0,this._height=void 0,this._hlSurfaces=new h,this._adjustedWidth=void 0,this._adjustedHeight=void 0,this._blitRenderer=new e}dispose(){this._hlSurfaces&&this._hlSurfaces.dispose(),this._hlRenderer&&this._hlRenderer.dispose(),this._hlGradient&&this._hlGradient.destroy(),this._boundFBO=null}bind(e){const{context:t,painter:i}=e,{width:s,height:h}=t.getViewport(),r=i.getFbos(s,h).effect0;this.setup(e,s,h),t.bindFramebuffer(r),t.setColorMask(!0,!0,!0,!0),t.setClearColor(0,0,0,0),t.clear(t.gl.COLOR_BUFFER_BIT)}unbind(){}setup({context:e},t,i){this._width=t,this._height=i;const s=t%r,h=i%r;t+=s<r/2?-s:r-s,i+=h<r/2?-h:r-h,this._adjustedWidth=t,this._adjustedHeight=i,this._boundFBO=e.getBoundFramebufferObject();const d=Math.round(t*l),n=Math.round(i*l);this._hlRenderer.setup(e,d,n),this._hlSurfaces.setup(e,d,n)}draw({context:e}){const t=e.getBoundFramebufferObject();e.setViewport(0,0,this._adjustedWidth*l,this._adjustedHeight*l),e.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),e.setStencilTestEnabled(!1),e.setClearColor(0,0,0,0),e.clear(e.gl.COLOR_BUFFER_BIT),this._blitRenderer.render(e,t.colorTexture,9728,1),e.setStencilTestEnabled(!1),e.setBlendingEnabled(!1),e.setColorMask(!1,!1,!1,!0),e.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo),e.setClearColor(0,0,0,0),e.clear(e.gl.COLOR_BUFFER_BIT),this._hlRenderer.preBlur(e,this._hlSurfaces.sharedBlur1Tex),e.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),e.setClearColor(0,0,0,0),e.clear(e.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(e,this._hlSurfaces.sharedBlur2Tex),e.bindFramebuffer(this._boundFBO),e.setBlendingEnabled(!0),e.setColorMask(!0,!0,!0,!0),e.setViewport(0,0,this._width,this._height),this._hlRenderer.renderHighlight(e,this._hlSurfaces.sharedBlur1Tex,this._hlGradient),this._boundFBO=null}setHighlightOptions(e){this._hlGradient.setHighlightOptions(e)}}export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../../core/maybe.js\";import{HITTEST_SEARCH_SIZE as e}from\"../definitions.js\";import{Effect as s}from\"./Effect.js\";class o extends s{constructor(){super(...arguments),this.name=this.constructor.name,this.defines=[\"id\"],this._lastSize=0}dispose(){t(this._fbo)&&this._fbo.dispose()}bind({context:t,painter:e}){const{width:s,height:o}=t.getViewport();this._boundFBO=t.getBoundFramebufferObject();const r=e.getFbos(s,o).effect0;t.bindFramebuffer(r),t.setColorMask(!0,!0,!0,!0),t.setClearColor(0,0,0,0),t.clear(t.gl.COLOR_BUFFER_BIT)}unbind({context:t}){t.bindFramebuffer(this._boundFBO),this._boundFBO=null}draw({context:t,state:s,pixelRatio:o},r,i=e){const n=t.getBoundFramebufferObject(),f=s.size[1]*o,a=Math.round(i*o),h=a/2,u=a/2;this._ensureBuffer(a),r.forEach(((t,e)=>{const s=new Map,i=Math.floor(e.x*o-a/2),b=Math.floor(f-e.y*o-a/2);n.readPixels(i,b,a,a,6408,5121,this._buf);for(let o=0;o<this._buf32.length;o++){const t=this._buf32[o];if(4294967295!==t&&0!==t){const e=o%a,r=a-Math.floor(o/a),i=(h-e)*(h-e)+(u-r)*(u-r),n=s.has(t)?s.get(t):4294967295;s.set(t,Math.min(i,n))}}const c=Array.from(s).sort(((t,e)=>t[1]-e[1])).map((t=>t[0]));t.resolve(c),r.delete(e)}))}_ensureBuffer(t){this._lastSize!==t&&(this._lastSize=t,this._buf=new Uint8Array(4*t*t),this._buf32=new Uint32Array(this._buf.buffer))}}export{o as HittestEffect};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../../webgl/BufferObject.js\";import t from\"../../../../../webgl/FramebufferObject.js\";import\"../../../../../../core/has.js\";import\"../../../../../webgl/checkWebGLError.js\";import\"../../../../../webgl/enums.js\";import\"../../../../../../chunks/builtins.js\";import\"../../../../../webgl/Texture.js\";import\"../../../../../webgl/VertexArrayObject.js\";import e from\"../../VertexStream.js\";const i=5,s=[1,0],r=[0,1],o=[1,.8,.6,.4,.2],n=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];class a{constructor(){this._intensityFBO=null,this._compositeFBO=null,this._mipsFBOs=new Array(i),this._nMips=i,this._kernelSizeArray=[3,5,7,9,11],this._size=[0,0],this._programDesc={luminosityHighPass:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/bloom/luminosityHighPass\",attributes:new Map([[\"a_position\",0]])},gaussianBlur:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/bloom/gaussianBlur\",attributes:new Map([[\"a_position\",0]])},composite:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/bloom/composite\",attributes:new Map([[\"a_position\",0]])},blit:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/blit\",attributes:new Map([[\"a_position\",0]])}}}dispose(){if(this._quad&&(this._quad.dispose(),this._quad=null),this._intensityFBO&&(this._intensityFBO.dispose(),this._intensityFBO=null),this._compositeFBO&&(this._compositeFBO.dispose(),this._compositeFBO=null),this._mipsFBOs){for(let t=0;t<this._nMips;t++)this._mipsFBOs[t]&&(this._mipsFBOs[t].horizontal.dispose(),this._mipsFBOs[t].vertical.dispose());this._mipsFBOs=null}}draw(t,a,l){const{width:h,height:u}=a,{context:p,painter:m}=t,{materialManager:c}=m,d=p.gl,_=this._programDesc,{strength:g,radius:f,threshold:b}=l;this._quad||(this._quad=new e(p,[-1,-1,1,-1,-1,1,1,1])),this._createOrResizeResources(t,h,u),p.setStencilTestEnabled(!1),p.setBlendingEnabled(!0),p.setBlendFunction(1,771),p.setStencilWriteMask(0);const F=this._quad;F.bind(),p.bindFramebuffer(this._intensityFBO);const B=c.getProgram(t,_.luminosityHighPass);p.useProgram(B),p.bindTexture(a.colorTexture,0),B.setUniform1i(\"u_texture\",0),B.setUniform3fv(\"u_defaultColor\",[0,0,0]),B.setUniform1f(\"u_defaultOpacity\",0),B.setUniform1f(\"u_luminosityThreshold\",b),B.setUniform1f(\"u_smoothWidth\",.01);const O=[Math.round(h/2),Math.round(u/2)];p.setViewport(0,0,O[0],O[1]),p.setClearColor(0,0,0,0),p.clear(d.COLOR_BUFFER_BIT),F.draw(),p.setBlendingEnabled(!1);let T=this._intensityFBO.colorTexture;for(let e=0;e<this._nMips;e++){const i=c.getProgram(t,_.gaussianBlur,[{name:\"radius\",value:this._kernelSizeArray[e]}]);p.useProgram(i),p.bindTexture(T,e+1),i.setUniform1i(\"u_colorTexture\",e+1),i.setUniform2fv(\"u_texSize\",O),i.setUniform2fv(\"u_direction\",s),p.setViewport(0,0,O[0],O[1]);const o=this._mipsFBOs[e];p.bindFramebuffer(o.horizontal),F.draw(),T=o.horizontal.colorTexture,p.bindFramebuffer(o.vertical),p.bindTexture(T,e+1),i.setUniform2fv(\"u_direction\",r),F.draw(),T=o.vertical.colorTexture,O[0]=Math.round(O[0]/2),O[1]=Math.round(O[1]/2)}p.setViewport(0,0,h,u);const x=c.getProgram(t,_.composite,[{name:\"nummips\",value:i}]);p.bindFramebuffer(this._compositeFBO),p.useProgram(x),x.setUniform1f(\"u_bloomStrength\",g),x.setUniform1f(\"u_bloomRadius\",f),x.setUniform1fv(\"u_bloomFactors\",o),x.setUniform3fv(\"u_bloomTintColors\",n),p.bindTexture(this._mipsFBOs[0].vertical.colorTexture,1),x.setUniform1i(\"u_blurTexture1\",1),p.bindTexture(this._mipsFBOs[1].vertical.colorTexture,2),x.setUniform1i(\"u_blurTexture2\",2),p.bindTexture(this._mipsFBOs[2].vertical.colorTexture,3),x.setUniform1i(\"u_blurTexture3\",3),p.bindTexture(this._mipsFBOs[3].vertical.colorTexture,4),x.setUniform1i(\"u_blurTexture4\",4),p.bindTexture(this._mipsFBOs[4].vertical.colorTexture,5),x.setUniform1i(\"u_blurTexture5\",5),F.draw(),p.bindFramebuffer(a),p.setBlendingEnabled(!0);const w=c.getProgram(t,_.blit);p.useProgram(w),p.bindTexture(this._compositeFBO.colorTexture,6),w.setUniform1i(\"u_texture\",6),p.setBlendFunction(1,1),F.draw(),F.unbind(),p.setBlendFunction(1,771),p.setStencilTestEnabled(!0)}_createOrResizeResources(e,i,s){const{context:r}=e;if(this._compositeFBO&&this._size[0]===i&&this._size[1]===s)return;this._size[0]=i,this._size[1]=s;const o=[Math.round(i/2),Math.round(s/2)];this._compositeFBO?this._compositeFBO.resize(i,s):this._compositeFBO=new t(r,{colorTarget:0,depthStencilTarget:0,width:i,height:s}),this._intensityFBO?this._intensityFBO.resize(o[0],o[1]):this._intensityFBO=new t(r,{colorTarget:0,depthStencilTarget:0,width:o[0],height:o[1]},{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:o[0],height:o[1]});for(let n=0;n<this._nMips;n++)this._mipsFBOs[n]?(this._mipsFBOs[n].horizontal.resize(o[0],o[1]),this._mipsFBOs[n].vertical.resize(o[0],o[1])):this._mipsFBOs[n]={horizontal:new t(r,{colorTarget:0,depthStencilTarget:0,width:o[0],height:o[1]},{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:o[0],height:o[1]}),vertical:new t(r,{colorTarget:0,depthStencilTarget:0,width:o[0],height:o[1]},{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:o[0],height:o[1]})},o[0]=Math.round(o[0]/2),o[1]=Math.round(o[1]/2)}}export{a as Bloom};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../../webgl/BufferObject.js\";import e from\"../../../../../webgl/FramebufferObject.js\";import\"../../../../../../core/has.js\";import\"../../../../../webgl/checkWebGLError.js\";import\"../../../../../webgl/enums.js\";import\"../../../../../../chunks/builtins.js\";import\"../../../../../webgl/Texture.js\";import\"../../../../../webgl/VertexArrayObject.js\";import t from\"../../VertexStream.js\";const r=[1,0],s=[0,1];class i{constructor(){this._blurFBO=null,this._size=[0,0],this._programDesc={gaussianBlur:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/blur/gaussianBlur\",attributes:new Map([[\"a_position\",0]])},radialBlur:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/blur/radial-blur\",attributes:new Map([[\"a_position\",0]])},blit:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/blit\",attributes:new Map([[\"a_position\",0]])}}}dispose(){this._blurFBO&&(this._blurFBO.dispose(),this._blurFBO=null)}draw(e,r,s){const{context:i}=e,{type:a,radius:n}=s;if(0===n)return;this._createOrResizeResources(e),this._quad||(this._quad=new t(i,[-1,-1,1,-1,-1,1,1,1]));const o=this._quad;o.bind(),\"blur\"===a?this._gaussianBlur(e,r,n):this._radialBlur(e,r),o.unbind()}_gaussianBlur(e,t,i){const{context:a,state:n,painter:o,pixelRatio:u}=e,{size:l}=n,{materialManager:d}=o,b=this._programDesc,p=this._quad,c=[Math.round(u*l[0]),Math.round(u*l[1])],h=this._blurFBO,g=d.getProgram(e,b.gaussianBlur,[{name:\"radius\",value:Math.ceil(i)}]);a.useProgram(g),a.setBlendingEnabled(!1),a.bindFramebuffer(h),a.bindTexture(t.colorTexture,4),g.setUniform1i(\"u_colorTexture\",4),g.setUniform2fv(\"u_texSize\",c),g.setUniform2fv(\"u_direction\",r),g.setUniform1f(\"u_sigma\",i),p.draw(),a.bindFramebuffer(t),a.setStencilWriteMask(0),a.setStencilTestEnabled(!1),a.setDepthWriteEnabled(!1),a.setDepthTestEnabled(!1),a.bindTexture(h.colorTexture,5),g.setUniform1i(\"u_colorTexture\",5),g.setUniform2fv(\"u_direction\",s),p.draw(),a.setBlendingEnabled(!0),a.setBlendFunction(1,771),a.setStencilTestEnabled(!0)}_radialBlur(e,t){const{context:r,painter:s}=e,{materialManager:i}=s,a=this._programDesc,n=this._quad,o=this._blurFBO;r.bindFramebuffer(o);const u=i.getProgram(e,a.radialBlur);r.useProgram(u),r.setBlendingEnabled(!1),r.bindTexture(t.colorTexture,4),u.setUniform1i(\"u_colorTexture\",4),n.draw(),r.bindFramebuffer(t),r.setStencilWriteMask(0),r.setStencilTestEnabled(!1),r.setDepthWriteEnabled(!1),r.setDepthTestEnabled(!1),r.setBlendingEnabled(!0);const l=i.getProgram(e,a.blit);r.useProgram(l),r.bindTexture(o.colorTexture,5),l.setUniform1i(\"u_texture\",5),r.setBlendFunction(1,771),n.draw()}_createOrResizeResources(t){const{context:r,state:s,pixelRatio:i}=t,{size:a}=s,n=Math.round(i*a[0]),o=Math.round(i*a[1]);this._blurFBO&&this._size[0]===n&&this._size[1]===o||(this._size[0]=n,this._size[1]=o,this._blurFBO?this._blurFBO.resize(n,o):this._blurFBO=new e(r,{colorTarget:0,depthStencilTarget:0,width:n,height:o},{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:n,height:o}))}}export{i as Blur};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../../webgl/BufferObject.js\";import\"../../../../../webgl/FramebufferObject.js\";import\"../../../../../../core/has.js\";import\"../../../../../webgl/checkWebGLError.js\";import\"../../../../../webgl/enums.js\";import\"../../../../../../chunks/builtins.js\";import e from\"../../../../../webgl/Texture.js\";import\"../../../../../webgl/VertexArrayObject.js\";import t from\"../../VertexStream.js\";class r{constructor(){this._size=[0,0],this._programDesc={vsPath:\"post-processing/pp\",fsPath:\"post-processing/filterEffect\",attributes:new Map([[\"a_position\",0]])}}dispose(){this._layerFBOTexture&&(this._layerFBOTexture.dispose(),this._layerFBOTexture=null)}draw(e,t,r){const{width:s,height:i}=t;this._createOrResizeResources(e,s,i);const{context:o,painter:a}=e,{materialManager:n}=a,l=this._programDesc,c=this._quad,u=r.colorMatrix;c.bind();const h=this._layerFBOTexture;o.bindFramebuffer(t),t.copyToTexture(0,0,s,i,0,0,h),o.setBlendingEnabled(!1),o.setStencilTestEnabled(!1);const p=n.getProgram(e,l);o.useProgram(p),o.bindTexture(h,2),p.setUniformMatrix4fv(\"u_coefficients\",u),p.setUniform1i(\"u_colorTexture\",2),c.draw(),o.setBlendingEnabled(!0),o.setBlendFunction(1,771),o.setStencilTestEnabled(!0),c.unbind()}_createOrResizeResources(r,s,i){const{context:o}=r;this._layerFBOTexture&&this._size[0]===s&&this._size[1]===i||(this._size[0]=s,this._size[1]=i,this._layerFBOTexture?this._layerFBOTexture.resize(s,i):this._layerFBOTexture=new e(o,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:s,height:i}),this._quad||(this._quad=new t(o,[-1,-1,1,-1,-1,1,1,1])))}}export{r as Colorize};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{pt2px as e}from\"../../../../../../core/screenUtils.js\";import\"../../../../../webgl/BufferObject.js\";import t from\"../../../../../webgl/FramebufferObject.js\";import\"../../../../../../core/has.js\";import\"../../../../../webgl/checkWebGLError.js\";import\"../../../../../webgl/enums.js\";import\"../../../../../../chunks/builtins.js\";import r from\"../../../../../webgl/Texture.js\";import\"../../../../../webgl/VertexArrayObject.js\";import i from\"../../VertexStream.js\";const s=[1,0],o=[0,1];class a{constructor(){this._horizontalBlurFBO=null,this._verticalBlurFBO=null,this._size=[0,0],this._programDesc={blur:{vsPath:\"post-processing/drop-shadow\",fsPath:\"post-processing/blur/gaussianBlur\",attributes:new Map([[\"a_position\",0]])},composite:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/drop-shadow/composite\",attributes:new Map([[\"a_position\",0]])},blit:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/blit\",attributes:new Map([[\"a_position\",0]])}}}dispose(){this._layerFBOTexture&&(this._layerFBOTexture.dispose(),this._layerFBOTexture=null),this._horizontalBlurFBO&&(this._horizontalBlurFBO.dispose(),this._horizontalBlurFBO=null),this._verticalBlurFBO&&(this._verticalBlurFBO.dispose(),this._verticalBlurFBO=null)}draw(t,r,a){const{context:l,state:n,painter:u}=t,{materialManager:h}=u,p=this._programDesc,d=r.width,c=r.height,m=[Math.round(d/2),Math.round(c/2)],{blurRadius:_,offsetX:f,offsetY:B,color:g}=a,b=[e(f/2),e(B/2)];this._createOrResizeResources(t,d,c,m);const F=this._horizontalBlurFBO,w=this._verticalBlurFBO;l.setStencilWriteMask(0),l.setStencilTestEnabled(!1),l.setDepthWriteEnabled(!1),l.setDepthTestEnabled(!1);const x=this._layerFBOTexture;r.copyToTexture(0,0,d,c,0,0,x),this._quad||(this._quad=new i(l,[-1,-1,1,-1,-1,1,1,1])),l.setViewport(0,0,m[0],m[1]);const T=this._quad;T.bind(),l.setBlendingEnabled(!1);const O=h.getProgram(t,p.blur,[{name:\"radius\",value:Math.ceil(_)}]);l.useProgram(O),l.bindFramebuffer(F),l.bindTexture(r.colorTexture,4),O.setUniformMatrix3fv(\"u_displayViewMat3\",n.displayMat3),O.setUniform2fv(\"u_offset\",b),O.setUniform1i(\"u_colorTexture\",4),O.setUniform2fv(\"u_texSize\",m),O.setUniform2fv(\"u_direction\",s),O.setUniform1f(\"u_sigma\",_),T.draw(),l.bindFramebuffer(w),l.bindTexture(F.colorTexture,5),O.setUniformMatrix3fv(\"u_displayViewMat3\",n.displayMat3),O.setUniform2fv(\"u_offset\",[0,0]),O.setUniform1i(\"u_colorTexture\",5),O.setUniform2fv(\"u_direction\",o),T.draw(),l.bindFramebuffer(r),l.setViewport(0,0,d,c);const v=h.getProgram(t,p.composite);l.useProgram(v),l.bindTexture(w.colorTexture,2),v.setUniform1i(\"u_blurTexture\",2),l.bindTexture(x,3),v.setUniform1i(\"u_layerFBOTexture\",3),v.setUniform4fv(\"u_shadowColor\",[g[3]*(g[0]/255),g[3]*(g[1]/255),g[3]*(g[2]/255),g[3]]),T.draw(),l.setBlendingEnabled(!0),l.setStencilTestEnabled(!0),l.setBlendFunction(1,771),T.unbind()}_createOrResizeResources(e,i,s,o){const{context:a}=e;this._horizontalBlurFBO&&this._size[0]===i&&this._size[1]===s||(this._size[0]=i,this._size[1]=s,this._horizontalBlurFBO?this._horizontalBlurFBO.resize(o[0],o[1]):this._horizontalBlurFBO=new t(a,{colorTarget:0,depthStencilTarget:0,width:o[0],height:o[1]},{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:o[0],height:o[1]}),this._verticalBlurFBO?this._verticalBlurFBO.resize(o[0],o[1]):this._verticalBlurFBO=new t(a,{colorTarget:0,depthStencilTarget:0,width:o[0],height:o[1]},{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:o[0],height:o[1]}),this._layerFBOTexture?this._layerFBOTexture.resize(i,s):this._layerFBOTexture=new r(a,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:i,height:s}))}}export{a as DropShadow};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../../webgl/BufferObject.js\";import\"../../../../../webgl/FramebufferObject.js\";import\"../../../../../../core/has.js\";import\"../../../../../webgl/checkWebGLError.js\";import\"../../../../../webgl/enums.js\";import\"../../../../../../chunks/builtins.js\";import e from\"../../../../../webgl/Texture.js\";import\"../../../../../webgl/VertexArrayObject.js\";class t{constructor(){this._size=[0,0]}dispose(){this._layerFBOTexture&&(this._layerFBOTexture.dispose(),this._layerFBOTexture=null)}draw(e,t,r){const{width:s,height:i}=t;this._createOrResizeResources(e,s,i);const{context:l,painter:o}=e,{amount:a}=r,h=l.gl,n=this._layerFBOTexture;l.bindFramebuffer(t),t.copyToTexture(0,0,s,i,0,0,n),l.setBlendingEnabled(!0),l.setStencilTestEnabled(!1),l.setDepthTestEnabled(!1),l.setClearColor(0,0,0,0),l.clear(h.COLOR_BUFFER_BIT),o.blitTexture(l,n,9728,a)}_createOrResizeResources(t,r,s){const{context:i}=t;this._layerFBOTexture&&this._size[0]===r&&this._size[1]===s||(this._size[0]=r,this._size[1]=s,this._layerFBOTexture?this._layerFBOTexture.resize(r,s):this._layerFBOTexture=new e(i,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9728,flipped:!1,width:r,height:s}))}}export{t as Opacity};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{Bloom as e}from\"./Bloom.js\";import{Blur as t}from\"./Blur.js\";import{Colorize as o}from\"./Colorize.js\";import{DropShadow as s}from\"./DropShadow.js\";import{Opacity as r}from\"./Opacity.js\";function c(e){switch(e){case\"bloom\":case\"blur\":case\"opacity\":case\"drop-shadow\":return e;default:return\"colorize\"}}const f={colorize:()=>new o,blur:()=>new t,bloom:()=>new e,opacity:()=>new r,\"drop-shadow\":()=>new s};class i{constructor(e){this._requestRender=e,this._effectMap=new Map}dispose(){this._requestRender&&(this._requestRender=null),this._effectMap.forEach((e=>e.dispose())),this._effectMap.clear()}getPostProcessingEffects(e){if(!e||0===e.length)return[];const t=[];for(const o of e){const e=c(o.type);let s=this._effectMap.get(e);s||(s=f[e](),this._effectMap.set(e,s)),t.push({postProcessingEffect:s,effect:o})}return t}}export{i as EffectManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isArrayLike as r}from\"../../../../../core/arrayUtils.js\";import{isNone as e}from\"../../../../../core/maybe.js\";import{WGLDrawPhase as t}from\"../enums.js\";class s{constructor(r,e){var s;this.brushes=r,this.name=e.name,this.drawPhase=e.drawPhase||t.MAP,this._targetFn=e.target,this.effects=e.effects||[],this.enableDefaultDraw=null!=(s=e.enableDefaultDraw)?s:()=>!0}render(r){const{context:e,profiler:t}=r,s=this._targetFn(),a=this.drawPhase&r.drawPhase;if(t.recordPassStart(this.name),a){this.enableDefaultDraw()&&this._doRender(r,s),t.recordPassEnd();for(const a of this.effects){if(!a.enable())continue;const o=a.apply;t.recordPassStart(this.name+\".\"+o.name),t.recordBrushStart(o.name);const n=a.args&&a.args(),{x:i,y:d,width:f,height:h}=e.getViewport(),c=e.getBoundFramebufferObject();o.bind(r,n),this._doRender(r,s,o.defines),o.draw(r,n),o.unbind(r,n),e.bindFramebuffer(c),e.setViewport(i,d,f,h),t.recordBrushEnd(),t.recordPassEnd()}}}_doRender(t,s,a){if(!e(s))if(r(s)){for(const r of s)if(r.visible)for(const e of this.brushes)t.profiler.recordBrushStart(e.name),e.prepareState(t,r,a),e.draw(t,r,a),t.profiler.recordBrushEnd()}else for(const r of this.brushes)t.profiler.recordBrushStart(r.name),r.prepareState(t,s,a),r.draw(t,s,a),t.profiler.recordBrushEnd()}}export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../../core/maybe.js\";import\"../../../webgl/BufferObject.js\";import s from\"../../../webgl/FramebufferObject.js\";import\"../../../../core/has.js\";import\"../../../webgl/checkWebGLError.js\";import\"../../../webgl/enums.js\";import\"../../../../chunks/builtins.js\";import r from\"../../../webgl/Renderbuffer.js\";import\"../../../webgl/Texture.js\";import\"../../../webgl/VertexArrayObject.js\";import{brushes as i}from\"../brushes.js\";import n from\"../vectorTiles/shaders/VTLMaterialManager.js\";import{BitBlitRenderer as a}from\"./BitBlitRenderer.js\";import{WGLGeometryType as o,WGLDrawPhase as h}from\"./enums.js\";import f from\"./MaterialManager.js\";import l from\"./TextureManager.js\";import{AnimationEffect as c}from\"./effects/AnimationEffect.js\";import{BlendEffect as b}from\"./effects/BlendEffect.js\";import{FeatureEffect as d}from\"./effects/FeatureEffect.js\";import u from\"./effects/HighlightEffect.js\";import{HittestEffect as g}from\"./effects/HittestEffect.js\";import{EffectManager as _}from\"./effects/post-processing/EffectManager.js\";import p from\"./painter/RenderPass.js\";const m={[o.FILL]:i.fill,[o.LINE]:i.line,[o.MARKER]:i.marker,[o.TEXT]:i.text};class M{constructor(e,t,s){this.context=e,this._blitRenderer=new a,this._brushCache=new Map,this._vtlMaterialManager=new n,this._blendEffect=new b,this.effects={highlight:new u,hittest:new g,integrate:new c,insideEffect:new d(\"inside\"),outsideEffect:new d(\"outside\")},this.materialManager=new f(e),this.textureManager=new l(t,s),this._effectsManager=new _(t)}get vectorTilesMaterialManager(){return this._vtlMaterialManager}getRenderTarget(){return this._renderTarget}setRenderTarget(e){this._renderTarget=e}getFbos(e,t){if(e!==this._lastWidth||t!==this._lastHeight){if(this._lastWidth=e,this._lastHeight=t,this._fbos){for(const s in this._fbos)this._fbos[s].resize(e,t);return this._fbos}const i={target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:e,height:t},n={colorTarget:0,depthStencilTarget:3},a=new r(this.context,{width:e,height:t,internalFormat:34041});this._stencilBuf=a,this._fbos={output:new s(this.context,n,i,a),blend:new s(this.context,n,i,a),effect0:new s(this.context,n,i,a)}}return this._fbos}getSharedStencilBuffer(){return this._stencilBuf}beforeRenderLayers(t,s=null){const{width:r,height:i}=t.getViewport();this._prevFBO=t.getBoundFramebufferObject();const n=this.getFbos(r,i);if(t.bindFramebuffer(n.output),t.setColorMask(!0,!0,!0,!0),t.setDepthWriteEnabled(!0),e(s)){const{r:e,g:r,b:i,a:n}=s.color;t.setClearColor(n*e/255,n*r/255,n*i/255,n)}else t.setClearColor(0,0,0,0);t.setClearDepth(1),t.clear(t.gl.COLOR_BUFFER_BIT|t.gl.DEPTH_BUFFER_BIT),t.setDepthWriteEnabled(!1)}beforeRenderLayer(e,t,s){const{context:r,blendMode:i,effects:n,requireFBO:a,drawPhase:o}=e;if(a||E(o,i,n,s))r.bindFramebuffer(this._fbos.blend),r.setColorMask(!0,!0,!0,!0),r.setClearColor(0,0,0,0),r.setDepthWriteEnabled(!0),r.setClearDepth(1),r.clear(r.gl.COLOR_BUFFER_BIT|r.gl.DEPTH_BUFFER_BIT),r.setDepthWriteEnabled(!1);else{const e=this._getOutputFBO();r.bindFramebuffer(e)}r.setDepthWriteEnabled(!1),r.setDepthTestEnabled(!1),r.setStencilTestEnabled(!0),r.setClearStencil(t),r.setStencilWriteMask(255),r.clear(r.gl.STENCIL_BUFFER_BIT)}compositeLayer(s,r){const{context:i,blendMode:n,effects:a,requireFBO:o,drawPhase:f}=s;if(o||E(f,n,a,r)){e(a)&&a.length>0&&f===h.MAP&&this._applyEffects(s,a);const o=this._getOutputFBO();i.bindFramebuffer(o),i.setStencilTestEnabled(!1),i.setStencilWriteMask(0),i.setBlendingEnabled(!0),i.setBlendFunctionSeparate(1,771,1,771),i.setColorMask(!0,!0,!0,!0);const l=t(n)||f===h.HIGHLIGHT?\"normal\":n;this._blendEffect.draw(s,this._fbos.blend.colorTexture,9728,l,r)}}renderLayers(e){if(e.bindFramebuffer(this._prevFBO),!this._fbos)return;const t=this._getOutputFBO();e.setStencilTestEnabled(!1),e.setStencilWriteMask(0),this.blitTexture(e,t.colorTexture,9728)}dispose(){if(this.materialManager.dispose(),this.textureManager.dispose(),this._blitRenderer&&(this._blitRenderer.dispose(),this._blitRenderer=null),this._brushCache&&(this._brushCache.forEach((e=>e.dispose())),this._brushCache.clear(),this._brushCache=null),this._fbos)for(const e in this._fbos)this._fbos[e]&&this._fbos[e].dispose();if(this.effects)for(const e in this.effects)this.effects[e]&&this.effects[e].dispose();this._effectsManager.dispose(),this._vtlMaterialManager&&(this._vtlMaterialManager.dispose(),this._vtlMaterialManager=null),this._prevFBO=null}getGeometryBrush(e){const t=m[e];let s=this._brushCache.get(t);return void 0===s&&(s=new t,this._brushCache.set(t,s)),this._brushCache.get(t)}renderObject(e,t,s,r){const n=i[s];if(!n)return null;let a=this._brushCache.get(n);void 0===a&&(a=new n,this._brushCache.set(n,a)),a.prepareState(e,t,r),a.draw(e,t,r)}renderObjects(e,t,s,r){const n=i[s];if(!n)return null;let a=this._brushCache.get(n);void 0===a&&(a=new n,this._brushCache.set(n,a)),a.drawMany(e,t,r)}registerRenderPass(e){const t=e.brushes.map((e=>(this._brushCache.has(e)||this._brushCache.set(e,new e),this._brushCache.get(e))));return new p(t,e)}setHighlightOptions(e){this.effects.highlight.setHighlightOptions(e)}blitTexture(e,t,s,r=1){e.setBlendingEnabled(!0),e.setBlendFunctionSeparate(1,771,1,771),e.setColorMask(!0,!0,!0,!0),this._blitRenderer.render(e,t,s,r)}getPostProcessingEffects(e){return this._effectsManager.getPostProcessingEffects(e)}_getOutputFBO(){return null!=this._renderTarget?this._renderTarget:this._fbos.output}_applyEffects(e,t){const{context:s}=e,r=this._effectsManager.getPostProcessingEffects(t);for(const{postProcessingEffect:i,effect:n}of r)s.bindFramebuffer(this._fbos.blend),i.draw(e,this._fbos.blend,n)}}function E(t,s,r,i){return t!==h.HIGHLIGHT&&(1!==i||e(s)&&\"normal\"!==s||e(r)&&r.length>0)}export{M as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"./isWebGL2Context.js\";class E{constructor(e,E,t,T,r,_,i,u){this.createQuery=e,this.resultAvailable=E,this.getResult=t,this.disjoint=T,this.beginTimeElapsed=r,this.endTimeElapsed=_,this.createTimestamp=i,this.timestampBits=u}}function t(t,T){if(T.disjointTimerQuery)return null;let r=t.getExtension(\"EXT_disjoint_timer_query_webgl2\");return r&&e(t)?new E((()=>t.createQuery()),(e=>t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE)),(e=>t.getQueryParameter(e,t.QUERY_RESULT)),(()=>t.getParameter(r.GPU_DISJOINT_EXT)),(e=>t.beginQuery(r.TIME_ELAPSED_EXT,e)),(()=>t.endQuery(r.TIME_ELAPSED_EXT)),(e=>r.queryCounterEXT(e,r.TIMESTAMP_EXT)),(()=>t.getQuery(r.TIMESTAMP_EXT,r.QUERY_COUNTER_BITS_EXT))):(r=t.getExtension(\"EXT_disjoint_timer_query\"),r?new E((()=>r.createQueryEXT()),(e=>r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT)),(e=>r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)),(()=>t.getParameter(r.GPU_DISJOINT_EXT)),(e=>r.beginQueryEXT(r.TIME_ELAPSED_EXT,e)),(()=>r.endQueryEXT(r.TIME_ELAPSED_EXT)),(e=>r.queryCounterEXT(e,r.TIMESTAMP_EXT)),(()=>r.getQueryEXT(r.TIMESTAMP_EXT,r.QUERY_COUNTER_BITS_EXT))):null)}export{E as DisjointTimerQuery,t as createDisjointTimerQuery};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/CircularArray.js\";import s from\"../../../../core/Evented.js\";import t from\"../../../../core/has.js\";import{isSome as r}from\"../../../../core/maybe.js\";import{createDisjointTimerQuery as n}from\"../../../webgl/capabilities/DisjointTimerQuery.js\";const i=t(\"esri-2d-profiler\");class o{constructor(t,r){if(this._events=new s,this._entries=new Map,this._timings=new e(10),!i)return;this._ext=n(t.gl,{}),this._debugOutput=r;const o=t.gl;if(this.enableCommandLogging)for(const e in o)if(\"function\"==typeof o[e]){const s=o[e],t=-1!==e.indexOf(\"draw\");o[e]=(...r)=>(this._events.emit(\"command\",{container:this._currentContainer,pass:this._currentPass,brush:this._currentBrush,method:e,args:r,isDrawCommand:t}),this._currentSummary&&(this._currentSummary.commands++,t&&this._currentSummary.drawCommands++),s.apply(o,r))}}get enableCommandLogging(){return!(\"object\"==typeof i&&i.disableCommands)}recordContainerStart(e){i&&(this._currentContainer=e)}recordContainerEnd(){i&&(this._currentContainer=null)}recordPassStart(e){i&&(this._currentPass=e,this._initSummary())}recordPassEnd(){i&&(this._currentPass=null,this._emitSummary())}recordBrushStart(e){i&&(this._currentBrush=e)}recordBrushEnd(){i&&(this._currentBrush=null)}recordStart(e){if(i&&r(this._ext)){if(this._entries.has(e)){const s=this._entries.get(e),t=this._ext.resultAvailable(s.query),n=this._ext.disjoint();if(t&&!n){const t=this._ext.getResult(s.query)/1e6;let n=0;if(r(this._timings.enqueue(t))){const e=this._timings.entries,s=e.length;let t=0;for(const r of e)t+=r;n=t/s}const i=t.toFixed(2),o=n?n.toFixed(2):\"--\";this.enableCommandLogging?(console.groupCollapsed(`Frame report for ${e}, ${i} ms (${o} last 10 avg)\\n${s.commandsLen} Commands (${s.drawCommands} draw)`),console.log(\"RenderPass breakdown: \"),console.table(s.summaries),console.log(\"Commands: \",s.commands),console.groupEnd()):console.log(`Frame report for ${e}, ${i} ms (${o} last 10 avg)`),this._debugOutput.innerHTML=`${i} (${o})`}for(const e of s.handles)e.remove();this._entries.delete(e)}const s={name:e,query:this._ext.createQuery(),commands:[],commandsLen:0,drawCommands:0,summaries:[],handles:[]};this.enableCommandLogging&&(s.handles.push(this._events.on(\"command\",(e=>{s.commandsLen++,s.commands.push(e),e.isDrawCommand&&s.drawCommands++}))),s.handles.push(this._events.on(\"summary\",(e=>{s.summaries.push(e)})))),this._ext.beginTimeElapsed(s.query),this._entries.set(e,s)}}recordEnd(e){i&&r(this._ext)&&this._entries.has(e)&&this._ext.endTimeElapsed()}_initSummary(){this.enableCommandLogging&&(this._currentSummary={container:this._currentContainer,pass:this._currentPass,drawCommands:0,commands:0})}_emitSummary(){this.enableCommandLogging&&this._events.emit(\"summary\",this._currentSummary)}}export{o as Profiler};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{resolveIncludes as e}from\"./sources/resolver.js\";const r={shaders:{vertexShader:e(\"stencil/stencil.vert\"),fragmentShader:e(\"stencil/stencil.frag\")},attributes:new Map([[\"a_pos\",0]])};export{r as stencil};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nclass o{constructor(o){this._allocations=new Map,o?Error.stackTraceLimit=1/0:(this.add=()=>{},this.remove=()=>{})}add(o){this._allocations.set(o,(new Error).stack)}remove(o){this._allocations.delete(o)}print(){if(this._allocations.size>0){console.log(`${this._allocations.size} live object allocations:`);const o=new Map;this._allocations.forEach((s=>{var t;o.set(s,(null!=(t=o.get(s))?t:0)+1)})),o.forEach(((o,s)=>{const t=s.split(\"\\n\");t.shift(),t.shift(),console.log(`${o}: ${t.shift()}`),t.forEach((o=>console.log(\"   \",o)))}))}}}export{o as AllocationTracer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{AllocationTracer as t}from\"../support/AllocationTracer.js\";import{ResourceType as r}from\"./enums.js\";const e=!1;class s{constructor(){for(this._current=new Array,this._max=new Array,this._allocations=new t(e);this._current.length<r.COUNT;)this._current.push(0),this._max.push(0)}resetMax(){for(this._max.length=0;this._max.length<this._current.length;)this._max.push(0)}increment(t,r){const e=++this._current[t];this._max[t]=Math.max(e,this._max[t]),this._allocations.add(r)}decrement(t,r){--this._current[t],this._allocations.remove(r)}get max(){return this._max}get current(){return this._current}get total(){return this.current.reduce(((t,r)=>t+r),0)}printResourceCount(){if(this.total>0){console.log(\"Live objects:\");for(let t=0;t<r.COUNT;++t){const e=this._current[t];e>0&&console.log(`${r[t]}: ${e}`)}}this._allocations.print()}}export{s as InstanceCounter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{unpackFloatRGBA as n}from\"../../core/floatRGBA.js\";import{f as e}from\"../../chunks/vec3f64.js\";import o from\"./BufferObject.js\";import{encodeDoubleArray as t}from\"./doublePrecisionUtils.js\";import r from\"./FramebufferObject.js\";import{Program as i}from\"./Program.js\";import a from\"./VertexArrayObject.js\";function c(c,s){const l=new r(c,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1});function v(n,e){const o=new i(c,`\\n\\n  precision highp float;\\n\\n  attribute vec2 position;\\n\\n  uniform vec3 u_highA;\\n  uniform vec3 u_lowA;\\n  uniform vec3 u_highB;\\n  uniform vec3 u_lowB;\\n\\n  varying vec4 v_color;\\n\\n  ${s?\"#define DOUBLE_PRECISION_REQUIRES_OBFUSCATION\":\"\"}\\n\\n  #ifdef DOUBLE_PRECISION_REQUIRES_OBFUSCATION\\n\\n  vec3 dpPlusFrc(vec3 a, vec3 b) {\\n    return mix(a, a + b, vec3(notEqual(b, vec3(0))));\\n  }\\n\\n  vec3 dpMinusFrc(vec3 a, vec3 b) {\\n    return mix(vec3(0), a - b, vec3(notEqual(a, b)));\\n  }\\n\\n  vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\\n    vec3 t1 = dpPlusFrc(hiA, hiB);\\n    vec3 e = dpMinusFrc(t1, hiA);\\n    vec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;\\n    return t1 + t2;\\n  }\\n\\n  #else\\n\\n  vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\\n    vec3 t1 = hiA + hiB;\\n    vec3 e = t1 - hiA;\\n    vec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;\\n    return t1 + t2;\\n  }\\n\\n  #endif\\n\\n  const float MAX_RGBA_FLOAT =\\n    255.0 / 256.0 +\\n    255.0 / 256.0 / 256.0 +\\n    255.0 / 256.0 / 256.0 / 256.0 +\\n    255.0 / 256.0 / 256.0 / 256.0 / 256.0;\\n\\n  const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);\\n\\n  vec4 float2rgba(const float value) {\\n    // Make sure value is in the domain we can represent\\n    float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);\\n\\n    // Decompose value in 32bit fixed point parts represented as\\n    // uint8 rgba components. Decomposition uses the fractional part after multiplying\\n    // by a power of 256 (this removes the bits that are represented in the previous\\n    // component) and then converts the fractional part to 8bits.\\n    vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);\\n\\n    // Convert uint8 values (from 0 to 255) to floating point representation for\\n    // the shader\\n    const float toU8AsFloat = 1.0 / 255.0;\\n\\n    return fixedPointU8 * toU8AsFloat;\\n  }\\n\\n  void main() {\\n    vec3 val = dpAdd(u_highA, u_lowA, -u_highB, -u_lowB);\\n\\n    v_color = float2rgba(val.z / 25.0);\\n\\n    gl_Position = vec4(position * 2.0 - 1.0, 0.0, 1.0);\\n  }\\n  `,\"\\n  precision highp float;\\n\\n  varying vec4 v_color;\\n\\n  void main() {\\n    gl_FragColor = v_color;\\n  }\\n  \",new Map([[\"position\",0]])),r=new Float32Array(6);t(n,r,3);const a=new Float32Array(6);return t(e,a,3),c.useProgram(o),o.setUniform3f(\"u_highA\",r[0],r[2],r[4]),o.setUniform3f(\"u_lowA\",r[1],r[3],r[5]),o.setUniform3f(\"u_highB\",a[0],a[2],a[4]),o.setUniform3f(\"u_lowB\",a[1],a[3],a[5]),o}const f=o.createVertex(c,35044,new Uint16Array([0,0,1,0,0,1,1,1])),p=new a(c,new Map([[\"position\",0]]),{geometry:[{name:\"position\",count:2,type:5123,offset:0,stride:4,normalized:!1}]},{geometry:f}),u=e(5633261.287538229,2626832.878767164,1434988.0495278358),d=e(5633271.46742708,2626873.6381334523,1434963.231608387),h=v(u,d),m=c.getBoundFramebufferObject(),{x:A,y:_,width:g,height:b}=c.getViewport();c.bindFramebuffer(l),c.setViewport(0,0,1,1),c.bindVAO(p),c.drawArrays(5,0,4);const B=new Uint8Array(4);l.readPixels(0,0,1,1,6408,5121,B),h.dispose(),p.dispose(!1),f.dispose(),l.dispose(),c.setViewport(A,_,g,b),c.bindFramebuffer(m);const F=(u[2]-d[2])/25,w=n(B);return Math.abs(F-w)}export{c as testDoublePrecisionArithmetic};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{blendingAlpha as e}from\"../3d/webgl-engine/lib/OrderIndependentTransparency.js\";import t from\"./BufferObject.js\";import r from\"./FramebufferObject.js\";import{Program as n}from\"./Program.js\";import{makePipelineState as o}from\"./renderState.js\";import i from\"./VertexArrayObject.js\";var a,u,f,l={exports:{}};function c(a){var u,f,c,s,d;if(!a.gl)return!1;if(\"webgl\"===a.webglVersion)return(null==(s=a.capabilities.textureFloat)?void 0:s.textureFloat)&&(null==(d=a.capabilities.colorBufferFloat)?void 0:d.textureFloat);if(!((null==(u=a.capabilities.textureFloat)?void 0:u.textureFloat)&&(null==(f=a.capabilities.colorBufferFloat)?void 0:f.textureFloat)&&(null==(c=a.capabilities.colorBufferFloat)?void 0:c.floatBlend)))return!1;const g=new r(a,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5126,internalFormat:34836,samplingMode:9728,width:1,height:1}),b=t.createVertex(a,35044,new Uint16Array([0,0,1,0,0,1,1,1])),p=new i(a,new Map([[\"a_pos\",0]]),{geometry:[{name:\"a_pos\",count:2,type:5123,offset:0,stride:4,normalized:!1}]},{geometry:b}),m=new n(a,\"\\n  precision highp float;\\n  attribute vec2 a_pos;\\n\\n  void main() {\\n    gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\\n  }\\n  \",\"\\n   precision highp float;\\n\\n   void main() {\\n    gl_FragColor = vec4(0.5, 0.5, 0.5, 0.5);\\n   }\\n  \",new Map([[\"a_pos\",0]]));a.useProgram(m);const E=a.getBoundFramebufferObject(),{x:v,y:T,width:F,height:_}=a.getViewport();a.bindFramebuffer(g),a.setViewport(0,0,1,1),a.bindVAO(p),a.drawArrays(5,0,4);const x=o({blending:e});a.setPipelineState(x),a.drawArrays(5,0,4),l.exports.init(a);const h=a.gl.getError();return a.setViewport(v,T,F,_),a.bindFramebuffer(E),m.dispose(),p.dispose(!1),b.dispose(),g.dispose(),1282!==h||(console.warn(\"Device claims support for WebGL extension EXT_float_blend but does not support it. Using fall back.\"),!1)}a=l,u=function(){var e=function(e){window.console&&window.console.log&&window.console.log(e)},t=function(t){window.console&&window.console.error?window.console.error(t):e(t)},r={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0}},bindBuffer:{2:{0:!0}},bufferData:{3:{0:!0,2:!0}},bufferSubData:{3:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},readPixels:{7:{4:!0,5:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:[\"COLOR_BUFFER_BIT\",\"DEPTH_BUFFER_BIT\",\"STENCIL_BUFFER_BIT\"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}}},n=null,o=null;function i(e){if(null==n)for(var t in n={},o={},e)\"number\"==typeof e[t]&&(n[e[t]]=t,o[t]=e[t])}function a(){if(null==n)throw\"WebGLDebugUtils.init(ctx) not called\"}function u(e){return a(),void 0!==n[e]}function f(e){a();var t=n[e];return void 0!==t?\"gl.\"+t:\"/*UNKNOWN WebGL ENUM*/ 0x\"+e.toString(16)}function l(e,t,n,i){var a;if(void 0!==(a=r[e])&&void 0!==(a=a[t])&&a[n]){if(\"object\"==typeof a[n]&&void 0!==a[n].enumBitwiseOr){for(var u=a[n].enumBitwiseOr,l=0,c=[],s=0;s<u.length;++s){var d=o[u[s]];0!=(i&d)&&(l|=d,c.push(f(d)))}return l===i?c.join(\" | \"):f(i)}return f(i)}return null===i?\"null\":void 0===i?\"undefined\":i.toString()}function c(e,t){for(var r=\"\",n=t.length,o=0;o<n;++o)r+=(0==o?\"\":\", \")+l(e,n,o,t[o]);return r}function s(e,t,r){e.__defineGetter__(r,(function(){return t[r]})),e.__defineSetter__(r,(function(e){t[r]=e}))}function d(e,r,n,o){o=o||e,i(e),r=r||function(e,r,n){for(var o=\"\",i=n.length,a=0;a<i;++a)o+=(0==a?\"\":\", \")+l(r,i,a,n[a]);t(\"WebGL error \"+f(e)+\" in \"+r+\"(\"+o+\")\")};var a={};function u(e,t){return function(){n&&n(t,arguments);var i=e[t].apply(e,arguments),u=o.getError();return 0!=u&&(a[u]=!0,r(u,t,arguments)),i}}var c={};for(var g in e)if(\"function\"==typeof e[g])if(\"getExtension\"!=g)c[g]=u(e,g);else{var b=u(e,g);c[g]=function(){return d(b.apply(e,arguments),r,n,o)}}else s(c,e,g);return c.getError=function(){for(var t in a)if(a.hasOwnProperty(t)&&a[t])return a[t]=!1,t;return e.NO_ERROR},c}function g(e){var t=e.getParameter(e.MAX_VERTEX_ATTRIBS),r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r);for(var n=0;n<t;++n)e.disableVertexAttribArray(n),e.vertexAttribPointer(n,4,e.FLOAT,!1,0,0),e.vertexAttrib1f(n,0);e.deleteBuffer(r);var o=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);for(n=0;n<o;++n)e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_CUBE_MAP,null),e.bindTexture(e.TEXTURE_2D,null);for(e.activeTexture(e.TEXTURE0),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.DITHER),e.disable(e.SCISSOR_TEST),e.blendColor(0,0,0,0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.clearColor(0,0,0,0),e.clearDepth(1),e.clearStencil(-1),e.colorMask(!0,!0,!0,!0),e.cullFace(e.BACK),e.depthFunc(e.LESS),e.depthMask(!0),e.depthRange(0,1),e.frontFace(e.CCW),e.hint(e.GENERATE_MIPMAP_HINT,e.DONT_CARE),e.lineWidth(1),e.pixelStorei(e.PACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.UNPACK_COLORSPACE_CONVERSION_WEBGL&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.BROWSER_DEFAULT_WEBGL),e.polygonOffset(0,0),e.sampleCoverage(1,!1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilMask(4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT);e.getError(););}function b(e){var t,r,n=[],o=[],i={},a=1,u=!1,f=[],l=0,c=0,d=!1,b=0,p={};function m(e){return\"function\"==typeof e?e:function(t){e.handleEvent(t)}}e.getContext=(r=e.getContext,function(){var n=r.apply(e,arguments);if(n instanceof WebGLRenderingContext){if(n!=t){if(t)throw\"got different context\";i=R(t=n)}return i}return n});var E=function(e){n.push(m(e))},v=function(e){o.push(m(e))};function T(e){var t=e.addEventListener;e.addEventListener=function(r,n,o){switch(r){case\"webglcontextlost\":E(n);break;case\"webglcontextrestored\":v(n);break;default:t.apply(e,arguments)}}}function F(){for(var e=Object.keys(p),t=0;t<e.length;++t)delete p[e]}function _(){++c,u||l==c&&e.loseContext()}function x(e,t){var r=e[t];return function(){if(_(),!u)return r.apply(e,arguments)}}function h(){for(var e=0;e<f.length;++e){var r=f[e];r instanceof WebGLBuffer?t.deleteBuffer(r):r instanceof WebGLFramebuffer?t.deleteFramebuffer(r):r instanceof WebGLProgram?t.deleteProgram(r):r instanceof WebGLRenderbuffer?t.deleteRenderbuffer(r):r instanceof WebGLShader?t.deleteShader(r):r instanceof WebGLTexture&&t.deleteTexture(r)}}function A(e){return{statusMessage:e,preventDefault:function(){d=!0}}}return T(e),e.loseContext=function(){if(!u){for(u=!0,l=0,++a;t.getError(););F(),p[t.CONTEXT_LOST_WEBGL]=!0;var r=A(\"context lost\"),o=n.slice();setTimeout((function(){for(var t=0;t<o.length;++t)o[t](r);b>=0&&setTimeout((function(){e.restoreContext()}),b)}),0)}},e.restoreContext=function(){u&&o.length&&setTimeout((function(){if(!d)throw\"can not restore. webglcontestlost listener did not call event.preventDefault\";h(),g(t),u=!1,c=0,d=!1;for(var e=o.slice(),r=A(\"context restored\"),n=0;n<e.length;++n)e[n](r)}),0)},e.loseContextInNCalls=function(e){if(u)throw\"You can not ask a lost contet to be lost\";l=c+e},e.getNumCalls=function(){return c},e.setRestoreTimeout=function(e){b=e},e;function R(e){for(var r in e)\"function\"==typeof e[r]?i[r]=x(e,r):s(i,e,r);i.getError=function(){if(_(),!u)for(;e=t.getError();)p[e]=!0;for(var e in p)if(p[e])return delete p[e],e;return i.NO_ERROR};for(var n=[\"createBuffer\",\"createFramebuffer\",\"createProgram\",\"createRenderbuffer\",\"createShader\",\"createTexture\"],o=0;o<n.length;++o){var l=n[o];i[l]=function(t){return function(){if(_(),u)return null;var r=t.apply(e,arguments);return r.__webglDebugContextLostId__=a,f.push(r),r}}(e[l])}var c=[\"getActiveAttrib\",\"getActiveUniform\",\"getBufferParameter\",\"getContextAttributes\",\"getAttachedShaders\",\"getFramebufferAttachmentParameter\",\"getParameter\",\"getProgramParameter\",\"getProgramInfoLog\",\"getRenderbufferParameter\",\"getShaderParameter\",\"getShaderInfoLog\",\"getShaderSource\",\"getTexParameter\",\"getUniform\",\"getUniformLocation\",\"getVertexAttrib\"];for(o=0;o<c.length;++o)l=c[o],i[l]=function(t){return function(){return _(),u?null:t.apply(e,arguments)}}(i[l]);var d=[\"isBuffer\",\"isEnabled\",\"isFramebuffer\",\"isProgram\",\"isRenderbuffer\",\"isShader\",\"isTexture\"];for(o=0;o<d.length;++o)l=d[o],i[l]=function(t){return function(){return _(),!u&&t.apply(e,arguments)}}(i[l]);return i.checkFramebufferStatus=function(t){return function(){return _(),u?i.FRAMEBUFFER_UNSUPPORTED:t.apply(e,arguments)}}(i.checkFramebufferStatus),i.getAttribLocation=function(t){return function(){return _(),u?-1:t.apply(e,arguments)}}(i.getAttribLocation),i.getVertexAttribOffset=function(t){return function(){return _(),u?0:t.apply(e,arguments)}}(i.getVertexAttribOffset),i.isContextLost=function(){return u},i}}return{init:i,mightBeEnum:u,glEnumToString:f,glFunctionArgToString:l,glFunctionArgsToString:c,makeDebugContext:d,makeLostContextSimulatingCanvas:b,resetToInitialState:g}},void 0!==(f=u())&&(a.exports=f);export{c as testFloatBufferBlend};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Logger.js\";import r from\"./BufferObject.js\";import t from\"./FramebufferObject.js\";import{Program as o}from\"./Program.js\";import\"./enums.js\";import i from\"./Texture.js\";import n from\"./VertexArrayObject.js\";const a=e.getLogger(\"esri.views.WebGLDriverTest\"),s=e=>{const s=new t(e,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1}),p=\"\\nprecision highp float;\\nattribute vec2 a_pos;\\nuniform highp sampler2D u_texture;\\nvarying vec4 v_color;\\n\\nfloat getBit(in float bitset, in int bitIndex) {\\n  float offset = pow(2.0, float(bitIndex));\\n  return mod(floor(bitset / offset), 2.0);\\n}\\n\\nvoid main() {\\n  vec4 value = texture2D(u_texture, vec2(0.0));\\n  float bit = getBit(value.x * 255.0, 1);\\n\\n  v_color = bit * vec4(1.0);\\n  gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\\n}\\n\",m=\"\\nprecision highp float;\\nvarying vec4 v_color;\\n\\nvoid main() {\\n  gl_FragColor = v_color;\\n}\\n\",d=new Uint8Array(4),l=r.createVertex(e,35044,new Uint16Array([0,0,1,0,0,1,1,1])),c=new n(e,new Map([[\"a_position\",0]]),{geometry:[{name:\"a_position\",count:2,type:5122,offset:0,stride:4,normalized:!1}]},{geometry:l}),g=new o(e,p,m,new Map([[\"a_pos\",0]])),u=new i(e,{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1},new Uint8Array([2,255,0,0]));g.setUniform1i(\"u_texture\",0),e.bindTexture(u,0);const f=e.getBoundFramebufferObject();e.bindFramebuffer(s),e.useProgram(g);const{x:w,y:h,width:v,height:b}=e.getViewport();e.setViewport(0,0,1,1),e.bindVAO(c),e.drawArrays(5,0,4),e.setViewport(w,h,v,b),s.readPixels(0,0,1,1,6408,5121,d),g.dispose(),c.dispose(!1),l.dispose(),s.dispose();const y=255!==d[0]||255!==d[1]||255!==d[2]||255!==d[3];return y&&a.warn(`A problem was detected with your graphics driver. Your driver does not appear to honor sampler precision specifiers, which may result in rendering issues due to numerical instability. We recommend ensuring that your drivers have been updated to the latest version. Applying lowp sampler workaround. [${d[0]}.${d[1]}.${d[2]}.${d[3]}]`),e.bindFramebuffer(f),y};export{s as testSamplerPrecision};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"./BufferObject.js\";import r from\"./FramebufferObject.js\";import{Program as t}from\"./Program.js\";import i from\"./Texture.js\";import n from\"./VertexArrayObject.js\";async function o(o){const a=new Image;if(a.src=\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A\",a.width=5,a.height=5,await a.decode(),!o.gl)return!0;const s=new r(o,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1}),p=e.createVertex(o,35044,new Uint16Array([0,0,1,0,0,1,1,1])),d=new n(o,new Map([[\"a_pos\",0]]),{geometry:[{name:\"a_pos\",count:2,type:5123,offset:0,stride:4,normalized:!1}]},{geometry:p}),m=new t(o,\"\\n  precision highp float;\\n\\n  attribute vec2 a_pos;\\n  varying vec2 v_uv;\\n\\n  void main() {\\n    v_uv = a_pos;\\n    gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\\n  }\\n  \",\"\\n  precision highp float;\\n\\n  varying vec2 v_uv;\\n  uniform sampler2D u_texture;\\n\\n  void main() {\\n    gl_FragColor = texture2D(u_texture, v_uv);\\n  }\\n  \",new Map([[\"a_pos\",0]]));o.useProgram(m);const g=new i(o,{dataType:5121,pixelFormat:6408,preMultiplyAlpha:!1,wrapMode:33071,samplingMode:9729},a);o.bindTexture(g,0),m.setUniform1i(\"u_texture\",0);const l=o.getBoundFramebufferObject(),{x:c,y:f,width:u,height:w}=o.getViewport();o.bindFramebuffer(s),o.setViewport(0,0,1,1),o.setClearColor(0,0,0,0),o.setBlendingEnabled(!1),o.clearSafe(16384),o.bindVAO(d),o.drawArrays(5,0,4);const v=new Uint8Array(4);return s.readPixels(0,0,1,1,6408,5121,v),m.dispose(),d.dispose(!1),p.dispose(),s.dispose(),g.dispose(),o.setViewport(c,f,u,w),o.bindFramebuffer(l),a.src=\"\",255===v[0]}export{o as testSVGPremultipliedAlpha};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../../core/maybe.js\";import{testDoublePrecisionArithmetic as t}from\"./testDoublePrecisionArithmetic.js\";import{testFloatBufferBlend as i}from\"./testFloatBufferBlend.js\";import{testSamplerPrecision as r}from\"./testSamplerPrecision.js\";import{testSVGPremultipliedAlpha as s}from\"./testSVGPremultipliedAlpha.js\";class o{constructor(e){this.context=e,this._floatBufferBlendWorking=i(e),s(e).then((e=>this._svgAlwaysPremultipliesAlpha=!e))}get floatBufferBlendWorking(){if(e(this._floatBufferBlendWorking))throw new Error(\"floatBufferBlendWorking test not yet available\");return this._floatBufferBlendWorking}get svgAlwaysPremultipliesAlpha(){if(e(this._svgAlwaysPremultipliesAlpha))throw new Error(\"svgAlwaysPremultipliesAlpha test not yet available\");return this._svgAlwaysPremultipliesAlpha}get doublePrecisionRequiresObfuscation(){if(e(this._doublePrecisionRequiresObfuscation)){const e=t(this.context,!1),i=t(this.context,!0);this._doublePrecisionRequiresObfuscation=0!==e&&(0===i||e/i>5)}return this._doublePrecisionRequiresObfuscation}get ignoresSamplerPrecision(){return e(this._ignoresSamplerPrecision)&&(this._ignoresSamplerPrecision=r(this.context)),this._ignoresSamplerPrecision}}export{o as WebGLDriverTest};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{createDisjointTimerQuery as t}from\"./DisjointTimerQuery.js\";import{load as e}from\"./DrawBuffers.js\";import{load as r}from\"./Instancing.js\";import _ from\"./isWebGL2Context.js\";import{load as n}from\"./LoseContext.js\";import{load as o}from\"./VertexArrayObjects.js\";function E(_,E){const s=E.disabledExtensions||{},x=E.debugWebGLExtensions||{};let C,G,A,O,F,B,M,c,D,X,d,g,P=null,L=null,H=null,p=null;return{get drawBuffers(){return d||(d=e(_,s)),d},get instancing(){return C||(C=r(_)),C},get vao(){return G||(G=o(_,s)),G},get compressedTextureETC(){return A||(A=l(_,s)),A},get compressedTextureS3TC(){return O||(O=u(_,s)),O},get textureFilterAnisotropic(){return F||(F=i(_,s)),F},get disjointTimerQuery(){return B||(B=t(_,s)),B},get textureFloat(){return M||(M=a(_,s)),M},get colorBufferFloat(){return c||(c=S(_,s)),c},get blendMinMax(){return D||(D=R(_,s)),D},get depthTexture(){return null===P&&(P=f(_,s,\"depthTexture\",!0,[\"WEBGL_depth_texture\",\"MOZ_WEBGL_depth_texture\",\"WEBKIT_WEBGL_depth_texture\"])),P},get standardDerivatives(){return null===L&&(L=f(_,s,\"standardDerivatives\",!0,[\"OES_standard_derivatives\"])),L},get shaderTextureLOD(){return null===H&&(H=f(_,s,\"shaderTextureLOD\",!0,[\"EXT_shader_texture_lod\"])),H},get fragDepth(){return null===p&&(p=f(_,s,\"fragDepth\",!0,[\"EXT_frag_depth\"])),p},get loseContext(){return X||(X=n(_,x)),X},get textureNorm16(){return g||(g=T(_,s)),g},enable(t){return this[t]}}}function l(t,e){if(e.compressedTextureETC)return null;const r=t.getExtension(\"WEBGL_compressed_texture_etc\");return r?{COMPRESSED_R11_EAC:r.COMPRESSED_R11_EAC,COMPRESSED_SIGNED_R11_EAC:r.COMPRESSED_SIGNED_R11_EAC,COMPRESSED_RG11_EAC:r.COMPRESSED_RG11_EAC,COMPRESSED_SIGNED_RG11_EAC:r.COMPRESSED_SIGNED_RG11_EAC,COMPRESSED_RGB8_ETC2:r.COMPRESSED_RGB8_ETC2,COMPRESSED_SRGB8_ETC2:r.COMPRESSED_SRGB8_ETC2,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_RGBA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC}:null}function u(t,e){if(e.compressedTextureS3TC)return null;const r=t.getExtension(\"WEBGL_compressed_texture_s3tc\");return r?{COMPRESSED_RGB_S3TC_DXT1:r.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:r.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:r.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:r.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null}function R(t,e){if(_(t))return{MIN:t.MIN,MAX:t.MAX};if(e.blendMinMax)return null;{const e=t.getExtension(\"EXT_blend_minmax\");return e?{MIN:e.MIN_EXT,MAX:e.MAX_EXT}:null}}function i(t,e){if(e.textureFilterAnisotropic)return null;const r=t.getExtension(\"EXT_texture_filter_anisotropic\")||t.getExtension(\"MOZ_EXT_texture_filter_anisotropic\")||t.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");return r?{MAX_TEXTURE_MAX_ANISOTROPY:r.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:r.TEXTURE_MAX_ANISOTROPY_EXT}:null}function a(t,e){if(_(t))return{textureFloat:!0,textureFloatLinear:!e.textureFloatLinear&&!!t.getExtension(\"OES_texture_float_linear\"),textureHalfFloat:!0,textureHalfFloatLinear:!e.textureHalfFloatLinear&&!!t.getExtension(\"OES_texture_half_float_linear\"),HALF_FLOAT:t.HALF_FLOAT};if(t instanceof WebGLRenderingContext){const r=!e.textureHalfFloat&&t.getExtension(\"OES_texture_half_float\");return{textureFloat:!e.textureFloat&&!!t.getExtension(\"OES_texture_float\"),textureFloatLinear:!e.textureFloatLinear&&!!t.getExtension(\"OES_texture_float_linear\"),textureHalfFloat:!!r,textureHalfFloatLinear:!e.textureHalfFloatLinear&&!!t.getExtension(\"OES_texture_half_float_linear\"),HALF_FLOAT:r?r.HALF_FLOAT_OES:void 0}}return null}function S(t,e){if(_(t)){const r=!e.colorBufferFloat&&t.getExtension(\"EXT_color_buffer_half_float\"),_=!e.colorBufferFloat&&t.getExtension(\"EXT_color_buffer_float\"),n=!e.colorBufferFloat&&t.getExtension(\"EXT_float_blend\");return r||_||n?{textureFloat:!!_,textureHalfFloat:!!r,floatBlend:!!n,R16F:t.R16F,RG16F:t.RG16F,RGBA16F:t.RGBA16F,R32F:t.R32F,RG32F:t.RG32F,RGBA32F:t.RGBA32F,R11F_G11F_B10F:t.R11F_G11F_B10F,RGB16F:t.RGB16F}:null}if(t instanceof WebGLRenderingContext){const r=!e.colorBufferFloat&&t.getExtension(\"EXT_color_buffer_half_float\"),_=!e.colorBufferFloat&&t.getExtension(\"WEBGL_color_buffer_float\"),n=!e.colorBufferFloat&&t.getExtension(\"EXT_float_blend\");return r||_||n?{textureFloat:!!_,textureHalfFloat:!!r,floatBlend:!!n,RGBA16F:r?r.RGBA16F_EXT:void 0,RGB16F:r?r.RGB16F_EXT:void 0,RGBA32F:_?_.RGBA32F_EXT:void 0}:null}return null}function f(t,e,r,n,o){if(n&&_(t))return!0;if(e[r])return!1;for(const _ of o)if(t.getExtension(_))return!0;return!1}function T(t,e){if(!_(t))return null;if(e.textureNorm16)return null;const r=t.getExtension(\"EXT_texture_norm16\");return r?{R16:r.R16,RG16:r.RG16,RGB16:r.RGB16,RGBA16:r.RGBA16,R16_SNORM:r.R16_SNORM,RG16_SNORM:r.RG16_SNORM,RGB16_SNORM:r.RGB16_SNORM,RGBA16_SNORM:r.RGBA16_SNORM}:null}export{E as loadCapabilities};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport r from\"./isWebGL2Context.js\";function A(A,_){if(_.disjointTimerQuery)return null;if(r(A))return{drawBuffers:A.drawBuffers.bind(A),MAX_DRAW_BUFFERS:A.MAX_DRAW_BUFFERS,MAX_COLOR_ATTACHMENTS:A.MAX_COLOR_ATTACHMENTS};if(_.drawBuffers)return null;const e=A.getExtension(\"WEBGL_draw_buffers\");return e?{drawBuffers:e.drawBuffersWEBGL.bind(e),MAX_DRAW_BUFFERS:e.MAX_DRAW_BUFFERS_WEBGL,MAX_COLOR_ATTACHMENTS:e.MAX_COLOR_ATTACHMENTS_WEBGL}:null}export{A as load};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport n from\"./isWebGL2Context.js\";function r(r){if(n(r))return{drawArraysInstanced:r.drawArraysInstanced.bind(r),drawElementsInstanced:r.drawElementsInstanced.bind(r),vertexAttribDivisor:r.vertexAttribDivisor.bind(r)};const t=r.getExtension(\"ANGLE_instanced_arrays\");return t?{drawArraysInstanced:t.drawArraysInstancedANGLE.bind(t),drawElementsInstanced:t.drawElementsInstancedANGLE.bind(t),vertexAttribDivisor:t.vertexAttribDivisorANGLE.bind(t)}:null}export{r as load};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"./isWebGL2Context.js\";function r(r,t){if(e(r))return{createVertexArray:r.createVertexArray.bind(r),deleteVertexArray:r.deleteVertexArray.bind(r),bindVertexArray:r.bindVertexArray.bind(r)};if(t.vao)return null;const n=r.getExtension(\"OES_vertex_array_object\")||r.getExtension(\"MOZ_OES_vertex_array_object\")||r.getExtension(\"WEBKIT_OES_vertex_array_object\");return n?{createVertexArray:n.createVertexArrayOES.bind(n),deleteVertexArray:n.deleteVertexArrayOES.bind(n),bindVertexArray:n.bindVertexArrayOES.bind(n)}:null}export{r as load};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction e(e,t){const n=t.loseContext&&e.getExtension(\"WEBGL_lose_context\");return n?{loseRenderingContext:()=>n.loseContext()}:null}export{e as load};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isNone as t,isSome as e}from\"../../core/maybe.js\";import{webglDebugEnabled as i}from\"./checkWebGLError.js\";import{BASE_TEXTURE_UNIT as s}from\"./enums.js\";import{InstanceCounter as a}from\"./InstanceCounter.js\";import{StateTracker as n}from\"./renderState.js\";import l from\"./Texture.js\";import{WebGLDriverTest as r}from\"./WebGLDriverTest.js\";import h from\"./capabilities/isWebGL2Context.js\";import{loadCapabilities as c}from\"./capabilities/load.js\";class o{constructor(t,e){this.gl=t,this.instanceCounter=new a,this._blendEnabled=!1,this._blendColorState={r:0,g:0,b:0,a:0},this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0},this._blendEquationState={mode:32774,modeAlpha:32774},this._colorMaskState={r:!0,g:!0,b:!0,a:!0},this._polygonCullingEnabled=!1,this._cullFace=1029,this._frontFace=2305,this._scissorTestEnabled=!1,this._scissorRect={x:0,y:0,width:0,height:0},this._depthTestEnabled=!1,this._depthFunction=513,this._clearDepth=1,this._depthWriteEnabled=!0,this._depthRange={zNear:0,zFar:1},this._viewport=null,this._stencilTestEnabled=!1,this._polygonOffsetFillEnabled=!1,this._polygonOffset=[0,0],this._stencilFunction={face:1032,func:519,ref:0,mask:1},this._clearStencil=0,this._stencilWriteMask=1,this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680},this._clearColor={r:0,g:0,b:0,a:0},this._activeShaderProgram=null,this._activeVertexBuffer=null,this._activeIndexBuffer=null,this._activeFramebuffer=null,this._activeRenderbuffer=null,this._activeTextureUnit=0,this._textureUnitMap=new Array,this._numOfDrawCalls=0,this._numOfTriangles=0,this.webglVersion=h(t)?\"webgl2\":\"webgl\",\"webgl\"===this.webglVersion&&this.gl.getExtension(\"OES_element_index_uint\"),this._capabilities=c(t,e),this._parameters=this._loadParameters(e);const i=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:i[0],y:i[1],width:i[2],height:i[3]},this._stateTracker=new n({setBlending:t=>{if(t){this.setBlendingEnabled(!0),this.setBlendEquationSeparate(t.opRgb,t.opAlpha),this.setBlendFunctionSeparate(t.srcRgb,t.dstRgb,t.srcAlpha,t.dstAlpha);const e=t.color;this.setBlendColor(e.r,e.g,e.b,e.a)}else this.setBlendingEnabled(!1)},setCulling:t=>{t?(this.setFaceCullingEnabled(!0),this.setCullFace(t.face),this.setFrontFace(t.mode)):this.setFaceCullingEnabled(!1)},setPolygonOffset:t=>{t?(this.setPolygonOffsetFillEnabled(!0),this.setPolygonOffset(t.factor,t.units)):this.setPolygonOffsetFillEnabled(!1)},setDepthTest:t=>{t?(this.setDepthTestEnabled(!0),this.setDepthFunction(t.func)):this.setDepthTestEnabled(!1)},setStencilTest:t=>{if(t){this.setStencilTestEnabled(!0);const e=t.function;this.setStencilFunction(e.func,e.ref,e.mask);const i=t.operation;this.setStencilOp(i.fail,i.zFail,i.zPass)}else this.setStencilTestEnabled(!1)},setDepthWrite:t=>{t?(this.setDepthWriteEnabled(!0),this.setDepthRange(t.zNear,t.zFar)):this.setDepthWriteEnabled(!1)},setColorWrite:t=>{t?this.setColorMask(t.r,t.g,t.b,t.a):this.setColorMask(!1,!1,!1,!1)},setStencilWrite:t=>{t?this.setStencilWriteMask(t.mask):this.setStencilWriteMask(0)}}),this.enforceState(),this.driverTest=new r(this)}get contextAttributes(){return this.gl.getContextAttributes()}get parameters(){return this._parameters}dispose(){this.bindVAO(null),this.unbindBuffer(34962),this.unbindBuffer(34963),this._textureUnitMap.length=0,i()&&this.instanceCounter.printResourceCount()}setPipelineState(t){this._stateTracker.setPipeline(t)}setBlendingEnabled(t){this._blendEnabled!==t&&(!0===t?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=t,this._stateTracker.invalidateBlending())}externalProgramUpdate(){var t;null==(t=this._activeShaderProgram)||t.stop(),this._activeShaderProgram=null}externalTextureUnitUpdate(t,e){for(let i=0;i<t.length;++i)this._textureUnitMap[t[i]]=null;e>=0&&(this._activeTextureUnit=e)}externalVertexArrayObjectUpdate(){const t=this.capabilities.vao;t&&(t.bindVertexArray(null),this._activeVertexArrayObject=null),this._activeVertexBuffer=null,this._activeIndexBuffer=null}externalVertexBufferUpdate(){this._activeVertexBuffer=null}externalIndexBufferUpdate(){this._activeIndexBuffer=null}setBlendColor(t,e,i,s){t===this._blendColorState.r&&e===this._blendColorState.g&&i===this._blendColorState.b&&s===this._blendColorState.a||(this.gl.blendColor(t,e,i,s),this._blendColorState.r=t,this._blendColorState.g=e,this._blendColorState.b=i,this._blendColorState.a=s,this._stateTracker.invalidateBlending())}setBlendFunction(t,e){t===this._blendFunctionState.srcRGB&&e===this._blendFunctionState.dstRGB||(this.gl.blendFunc(t,e),this._blendFunctionState.srcRGB=t,this._blendFunctionState.srcAlpha=t,this._blendFunctionState.dstRGB=e,this._blendFunctionState.dstAlpha=e,this._stateTracker.invalidateBlending())}setBlendFunctionSeparate(t,e,i,s){this._blendFunctionState.srcRGB===t&&this._blendFunctionState.srcAlpha===i&&this._blendFunctionState.dstRGB===e&&this._blendFunctionState.dstAlpha===s||(this.gl.blendFuncSeparate(t,e,i,s),this._blendFunctionState.srcRGB=t,this._blendFunctionState.srcAlpha=i,this._blendFunctionState.dstRGB=e,this._blendFunctionState.dstAlpha=s,this._stateTracker.invalidateBlending())}setBlendEquation(t){this._blendEquationState.mode!==t&&(this.gl.blendEquation(t),this._blendEquationState.mode=t,this._blendEquationState.modeAlpha=t,this._stateTracker.invalidateBlending())}setBlendEquationSeparate(t,e){this._blendEquationState.mode===t&&this._blendEquationState.modeAlpha===e||(this.gl.blendEquationSeparate(t,e),this._blendEquationState.mode=t,this._blendEquationState.modeAlpha=e,this._stateTracker.invalidateBlending())}setColorMask(t,e,i,s){this._colorMaskState.r===t&&this._colorMaskState.g===e&&this._colorMaskState.b===i&&this._colorMaskState.a===s||(this.gl.colorMask(t,e,i,s),this._colorMaskState.r=t,this._colorMaskState.g=e,this._colorMaskState.b=i,this._colorMaskState.a=s,this._stateTracker.invalidateColorWrite())}setClearColor(t,e,i,s){this._clearColor.r===t&&this._clearColor.g===e&&this._clearColor.b===i&&this._clearColor.a===s||(this.gl.clearColor(t,e,i,s),this._clearColor.r=t,this._clearColor.g=e,this._clearColor.b=i,this._clearColor.a=s)}setFaceCullingEnabled(t){this._polygonCullingEnabled!==t&&(!0===t?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=t,this._stateTracker.invalidateCulling())}setPolygonOffsetFillEnabled(t){this._polygonOffsetFillEnabled!==t&&(!0===t?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=t,this._stateTracker.invalidatePolygonOffset())}setPolygonOffset(t,e){this._polygonOffset[0]===t&&this._polygonOffset[1]===e||(this._polygonOffset[0]=t,this._polygonOffset[1]=e,this.gl.polygonOffset(t,e),this._stateTracker.invalidatePolygonOffset())}setCullFace(t){this._cullFace!==t&&(this.gl.cullFace(t),this._cullFace=t,this._stateTracker.invalidateCulling())}setFrontFace(t){this._frontFace!==t&&(this.gl.frontFace(t),this._frontFace=t,this._stateTracker.invalidateCulling())}setScissorTestEnabled(t){this._scissorTestEnabled!==t&&(!0===t?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=t)}setScissorRect(t,e,i,s){this._scissorRect.x===t&&this._scissorRect.y===e&&this._scissorRect.width===i&&this._scissorRect.height===s||(this.gl.scissor(t,e,i,s),this._scissorRect.x=t,this._scissorRect.y=e,this._scissorRect.width=i,this._scissorRect.height=s)}setDepthTestEnabled(t){this._depthTestEnabled!==t&&(!0===t?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=t,this._stateTracker.invalidateDepthTest())}setClearDepth(t){this._clearDepth!==t&&(this.gl.clearDepth(t),this._clearDepth=t)}setDepthFunction(t){this._depthFunction!==t&&(this.gl.depthFunc(t),this._depthFunction=t,this._stateTracker.invalidateDepthTest())}setDepthWriteEnabled(t){this._depthWriteEnabled!==t&&(this.gl.depthMask(t),this._depthWriteEnabled=t,this._stateTracker.invalidateDepthWrite())}setDepthRange(t,e){this._depthRange.zNear===t&&this._depthRange.zFar===e||(this.gl.depthRange(t,e),this._depthRange.zNear=t,this._depthRange.zFar=e,this._stateTracker.invalidateDepthWrite())}setStencilTestEnabled(t){this._stencilTestEnabled!==t&&(!0===t?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=t,this._stateTracker.invalidateStencilTest())}setClearStencil(t){t!==this._clearStencil&&(this.gl.clearStencil(t),this._clearStencil=t)}setStencilFunction(t,e,i){this._stencilFunction.func===t&&this._stencilFunction.ref===e&&this._stencilFunction.mask===i||(this.gl.stencilFunc(t,e,i),this._stencilFunction.face=1032,this._stencilFunction.func=t,this._stencilFunction.ref=e,this._stencilFunction.mask=i,this._stateTracker.invalidateStencilTest())}setStencilFunctionSeparate(t,e,i,s){this._stencilFunction.face===t&&this._stencilFunction.func===e&&this._stencilFunction.ref===i&&this._stencilFunction.mask===s||(this.gl.stencilFuncSeparate(t,e,i,s),this._stencilFunction.face=t,this._stencilFunction.func=e,this._stencilFunction.ref=i,this._stencilFunction.mask=s,this._stateTracker.invalidateStencilTest())}setStencilWriteMask(t){this._stencilWriteMask!==t&&(this.gl.stencilMask(t),this._stencilWriteMask=t,this._stateTracker.invalidateStencilWrite())}setStencilOp(t,e,i){this._stencilOperation.fail===t&&this._stencilOperation.zFail===e&&this._stencilOperation.zPass===i||(this.gl.stencilOp(t,e,i),this._stencilOperation.face=1032,this._stencilOperation.fail=t,this._stencilOperation.zFail=e,this._stencilOperation.zPass=i,this._stateTracker.invalidateStencilTest())}setStencilOpSeparate(t,e,i,s){this._stencilOperation.face===t&&this._stencilOperation.fail===e&&this._stencilOperation.zFail===i&&this._stencilOperation.zPass===s||(this.gl.stencilOpSeparate(t,e,i,s),this._stencilOperation.face=t,this._stencilOperation.face=t,this._stencilOperation.fail=e,this._stencilOperation.zFail=i,this._stencilOperation.zPass=s,this._stateTracker.invalidateStencilTest())}setActiveTexture(t,e=!1){const i=this._activeTextureUnit;return t>=0&&(e||t!==this._activeTextureUnit)&&(this.gl.activeTexture(s+t),this._activeTextureUnit=t),i}clear(t){t&&this.gl.clear(t)}clearSafe(t,e=255){t&&(16384&t&&this.setColorMask(!0,!0,!0,!0),256&t&&this.setDepthWriteEnabled(!0),1024&t&&this.setStencilWriteMask(e),this.gl.clear(t))}drawArrays(t,e,s){i()&&(this._numOfDrawCalls++,this._numOfTriangles+=d(t,s)),this.gl.drawArrays(t,e,s)}drawElements(t,e,s,a){i()&&(this._numOfDrawCalls++,this._numOfTriangles+=d(t,e)),this.gl.drawElements(t,e,s,a)}logIno(){i()&&console.log(`DrawCalls: ${this._numOfDrawCalls}, Triangles: ${this._numOfTriangles}`)}get capabilities(){return this._capabilities}setViewport(t,e,i,s){i=Math.max(Math.round(i),1),s=Math.max(Math.round(s),1);const a=this._viewport;a.x===t&&a.y===e&&a.width===i&&a.height===s||(a.x=t,a.y=e,a.width=i,a.height=s,this.gl.viewport(t,e,i,s))}getViewport(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}}useProgram(t){var e,i;this._activeShaderProgram!==t&&(null==(e=this._activeShaderProgram)||e.stop(),this._activeShaderProgram=t,this.gl.useProgram(null!=(i=null==t?void 0:t.glName)?i:null))}bindTexture(i,s,a=!1){(s>=this.parameters.maxTextureImageUnits||s<0)&&console.error(\"Input texture unit is out of range of available units!\");const n=this._textureUnitMap[s];return t(i)||null==i.glName?(e(n)&&(this.setActiveTexture(s,a),this.gl.bindTexture(n.descriptor.target,null)),this._textureUnitMap[s]=null,n):a||n!==i?(this.setActiveTexture(s,a),this.gl.bindTexture(i.descriptor.target,i.glName),i.applyChanges(),this._textureUnitMap[s]=i,n):(i.isDirty&&(this.setActiveTexture(s,a),i.applyChanges()),n)}unbindTextureAllUnits(t){for(let e=0;e<this.parameters.maxTextureImageUnits;e++)this._textureUnitMap[e]===t&&(this.bindTexture(null,e),this._textureUnitMap[e]=null)}bindFramebuffer(e,i=!1,s=3553){if(t(e))return this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),void(this._activeFramebuffer=null);(i||this._activeFramebuffer!==e)&&(e.initializeAndBind(s),this._activeFramebuffer=e)}bindBuffer(t){t&&(34962===t.bufferType?this._activeVertexBuffer=_(this.gl,t,t.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=_(this.gl,t,t.bufferType,this._activeIndexBuffer))}bindRenderbuffer(t){const e=this.gl;t||(e.bindRenderbuffer(e.RENDERBUFFER,null),this._activeRenderbuffer=null),this._activeRenderbuffer!==t&&(e.bindRenderbuffer(e.RENDERBUFFER,t.glName),this._activeRenderbuffer=t)}unbindBuffer(t){34962===t?this._activeVertexBuffer=_(this.gl,null,t,this._activeVertexBuffer):this._activeIndexBuffer=_(this.gl,null,t,this._activeIndexBuffer)}bindVAO(e=null){t(e)?this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null):this._activeVertexArrayObject!==e&&(e.bind(),this._activeVertexArrayObject=e)}getBoundFramebufferObject(){return this._activeFramebuffer}getBoundVAO(){return this._activeVertexArrayObject}resetState(){this.useProgram(null),this.bindVAO(null),this.bindFramebuffer(null),this.unbindBuffer(34962),this.unbindBuffer(34963);for(let t=0;t<this.parameters.maxTextureImageUnits;++t)this.bindTexture(null,t);this.setBlendingEnabled(!1),this.setBlendFunction(1,0),this.setBlendEquation(32774),this.setBlendColor(0,0,0,0),this.setFaceCullingEnabled(!1),this.setCullFace(1029),this.setFrontFace(2305),this.setPolygonOffsetFillEnabled(!1),this.setPolygonOffset(0,0),this.setScissorTestEnabled(!1),this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height),this.setDepthTestEnabled(!1),this.setDepthFunction(513),this.setDepthRange(0,1),this.setStencilTestEnabled(!1),this.setStencilFunction(519,0,0),this.setStencilOp(7680,7680,7680),this.setClearColor(0,0,0,0),this.setClearDepth(1),this.setClearStencil(0),this.setColorMask(!0,!0,!0,!0),this.setStencilWriteMask(4294967295),this.setDepthWriteEnabled(!0),this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)}enforceState(){var t,a,n,l;const r=this.gl,c=this.capabilities.vao;c&&c.bindVertexArray(null);for(let e=0;e<this.parameters.maxVertexAttributes;e++)r.disableVertexAttribArray(e);if(this._activeVertexBuffer?r.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):r.bindBuffer(34962,null),this._activeIndexBuffer?r.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):r.bindBuffer(34963,null),c&&this._activeVertexArrayObject){const t=this._activeVertexArrayObject;this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null),this.bindVAO(t)}r.bindFramebuffer(r.FRAMEBUFFER,null!=(t=null==(a=this._activeFramebuffer)?void 0:a.glName)?t:null),r.useProgram(null!=(n=null==(l=this._activeShaderProgram)?void 0:l.glName)?n:null),r.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a),r.bindRenderbuffer(r.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null),!0===this._blendEnabled?r.enable(this.gl.BLEND):r.disable(this.gl.BLEND),r.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha),r.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha),r.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a),r.clearDepth(this._clearDepth),r.clearStencil(this._clearStencil),r.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a),r.cullFace(this._cullFace),r.depthFunc(this._depthFunction),r.depthRange(this._depthRange.zNear,this._depthRange.zFar),!0===this._depthTestEnabled?r.enable(r.DEPTH_TEST):r.disable(r.DEPTH_TEST),r.depthMask(this._depthWriteEnabled),r.frontFace(this._frontFace),r.lineWidth(1),!0===this._polygonCullingEnabled?r.enable(r.CULL_FACE):r.disable(r.CULL_FACE),r.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]),!0===this._polygonOffsetFillEnabled?r.enable(r.POLYGON_OFFSET_FILL):r.disable(r.POLYGON_OFFSET_FILL),r.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height),!0===this._scissorTestEnabled?r.enable(r.SCISSOR_TEST):r.disable(r.SCISSOR_TEST),r.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask),r.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass),!0===this._stencilTestEnabled?r.enable(r.STENCIL_TEST):r.disable(r.STENCIL_TEST),r.stencilMask(this._stencilWriteMask);for(let i=0;i<this.parameters.maxTextureImageUnits;i++){r.activeTexture(s+i),r.bindTexture(3553,null),r.bindTexture(34067,null),h(r)&&r.bindTexture(32879,null);const t=this._textureUnitMap[i];e(t)&&r.bindTexture(t.descriptor.target,t.glName)}r.activeTexture(s+this._activeTextureUnit),r.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height),i()&&(this._numOfDrawCalls=0,this._numOfTriangles=0)}_loadParameters(t){var e;const i=this.capabilities.textureFilterAnisotropic,s=null!=(e=t.maxAnisotropy)?e:1/0,a={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:i?Math.min(this.gl.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY),s):1,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),maxTextureSize:this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE)};return l.TEXTURE_UNIT_FOR_UPDATES=a.maxTextureImageUnits-1,a}}function _(t,e,i,s){return e?s!==e&&t.bindBuffer(i,e.glName):t.bindBuffer(i,null),e}function d(t,e){switch(t){case 0:return 2*e;case 4:return e/3;case 5:case 6:return e-2;default:return 0}}export{o as RenderingContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import{on as t}from\"../../../core/events.js\";import i from\"../../../core/has.js\";import{isSome as r}from\"../../../core/maybe.js\";import{addFrameTask as s}from\"../../../core/scheduling.js\";import{init as n}from\"../../../core/watchUtils.js\";import{t as a}from\"../../../chunks/common.js\";import{i as o,t as h,r as l}from\"../../../chunks/mat2d.js\";import{c as d}from\"../../../chunks/mat2df64.js\";import{c}from\"../../../chunks/mat3f32.js\";import{s as p,t as m}from\"../../../chunks/vec2.js\";import{a as u}from\"../../../chunks/vec2f64.js\";import _ from\"../../../symbols/cim/CIMResourceManager.js\";import g from\"../../webgl/BufferObject.js\";import f from\"../../webgl/FramebufferObject.js\";import\"../../webgl/checkWebGLError.js\";import\"../../webgl/enums.js\";import\"../../../chunks/builtins.js\";import{createProgram as b}from\"../../webgl/programUtils.js\";import\"../../webgl/Texture.js\";import R from\"../../webgl/VertexArrayObject.js\";import{createContextOrErrorHTML as w}from\"../../webgl/context-util.js\";import{Container as O}from\"./Container.js\";import{WGLDrawPhase as y}from\"./webgl/enums.js\";import F from\"./webgl/Painter.js\";import{Profiler as x}from\"./webgl/Profiler.js\";import{stencil as C}from\"./webgl/shaders/StencilPrograms.js\";import{Timeline as T}from\"../support/Timeline.js\";import{resampleHermite as j,encodeResult as B,createEmptyImageData as P}from\"../../support/screenshotUtils.js\";import{RenderingContext as v}from\"../../webgl/RenderingContext.js\";const k=2e3;class S extends O{constructor(n,a){super(),this._trash=new Set,this._clipData=new Float32Array(8),this._upperLeft=u(),this._upperRight=u(),this._lowerLeft=u(),this._lowerRight=u(),this._mat2=d(),this._clipRendererInitialized=!1,this._renderRemainingTime=0,this._lastFrameRenderTime=0,this.renderRequested=!1,this.stage=this,this._stationary=!0;const{canvas:o=document.createElement(\"canvas\"),alpha:h=!0,stencil:l=!0,contextOptions:c={}}=a;this._canvas=o;const p=w(o,1,{alpha:h,antialias:!1,depth:!0,stencil:l});this.context=new v(r(p)?p:null,c),this.resourceManager=new _,this.painter=new F(this.context,this,this.resourceManager),i(\"esri-2d-profiler\")&&(this._debugOutput=document.createElement(\"div\"),this._debugOutput.setAttribute(\"style\",\"margin: 24px 64px; position: absolute; color: red;\"),n.appendChild(this._debugOutput)),this._renderParameters={drawPhase:0,state:this.state,pixelRatio:window.devicePixelRatio,stationary:!1,globalOpacity:1,blendMode:null,deltaTime:-1,time:0,inFadeTransition:!1,effects:null,context:this.context,painter:this.painter,timeline:a.timeline||new T,renderingOptions:a.renderingOptions,requireFBO:!1,profiler:new x(this.context,this._debugOutput),dataUploadCounter:0},this._taskHandle=s({render:e=>this.renderFrame(e)}),this._taskHandle.pause(),this._lostWebGLContextHandle=t(o,\"webglcontextlost\",(()=>{this.emit(\"webgl-error\",{error:new e(\"webgl-context-lost\")})})),o.setAttribute(\"style\",\"width: 100%; height:100%; display:block;\"),n.appendChild(o)}destroy(){this.removeAllChildren(),this._emptyTrash(),this._taskHandle.remove(),this._taskHandle=null,this._boundFBO=null,this._clipFBO&&(this._clipFBO.dispose(),this._clipFBO=null),this._clipVAO&&(this._clipVAO.dispose(),this._clipVAO=null,this._clipVBO=null),this._clipStencilProgram&&(this._clipStencilProgram.dispose(),this._clipStencilProgram=null),this._lostWebGLContextHandle&&(this._lostWebGLContextHandle.remove(),this._lostWebGLContextHandle=null),this._canvas.parentNode&&this._canvas.parentNode.removeChild(this._canvas),this._debugOutput&&this._debugOutput.parentNode&&this._debugOutput.parentNode.removeChild(this._debugOutput),this.highlightOptions=null,this.resourceManager.destroy(),this.painter.dispose(),this.context.dispose(),this._canvas=null}get background(){return this._background}set background(e){this._background=e,this.requestRender()}get highlightOptions(){return this._highlightOptions}set highlightOptions(e){this._highlightOptionsHandle&&(this._highlightOptionsHandle.remove(),this._highlightOptionsHandle=null),this._highlightOptions=e,this._highlightOptions&&(this._highlightOptionsHandle=n(this._highlightOptions,\"version\",(()=>{this.painter.setHighlightOptions(e),this.requestRender()})))}get renderingOptions(){return this._renderingOptions}set renderingOptions(e){this._renderingOptions=e,this.requestRender()}get state(){return this._state}set state(e){this._state=e,this.requestRender()}get stationary(){return this._stationary}set stationary(e){this._stationary!==e&&(this._stationary=e,this.requestRender())}trashDisplayObject(e){this._trash.add(e),this.requestRender()}untrashDisplayObject(e){return this._trash.delete(e)}requestRender(){this._renderRemainingTime=k,this.renderRequested||(this.renderRequested=!0,this.emit(\"will-render\"),this._taskHandle.resume())}renderFrame(e){const t=this._lastFrameRenderTime?e.time-this._lastFrameRenderTime:0;this._renderRemainingTime-=t,this._renderRemainingTime<=0&&this._taskHandle.pause(),this._lastFrameRenderTime=e.time,this.renderRequested=!1,this._renderParameters.state=this._state,this._renderParameters.stationary=this.stationary,this._renderParameters.pixelRatio=window.devicePixelRatio,this._renderParameters.globalOpacity=1,this._renderParameters.time=e.time,this._renderParameters.deltaTime=e.deltaTime,this._renderParameters.effects=null,this.processRender(this._renderParameters),this._emptyTrash(),this.emit(\"post-render\")}_createTransforms(){return{dvs:c()}}renderChildren(e){for(const t of this.children)t.beforeRender(e);this._renderChildren(this.children,e);for(const t of this.children)t.afterRender(e)}_renderChildren(e,t){const r=this.context;t.profiler.recordStart(\"drawLayers\"),t.dataUploadCounter=0,this._beforeRenderChildren(t),t.drawPhase=y.MAP,this.painter.beforeRenderLayers(r,this.background);for(const i of e)i.processRender(t);this.painter.renderLayers(r),t.drawPhase=y.HIGHLIGHT,this.painter.beforeRenderLayers(r);for(const i of e)i.processRender(t);this.painter.renderLayers(r);if(this._isLabelDrawPhaseRequired(e)){t.drawPhase=y.LABEL,this.painter.beforeRenderLayers(r);for(const i of e)i.processRender(t);this.painter.renderLayers(r)}if(i(\"esri-tiles-debug\")){t.drawPhase=y.DEBUG,this.painter.beforeRenderLayers(r);for(const i of e)i.processRender(t);this.painter.renderLayers(r)}t.profiler.recordEnd(\"drawLayers\"),this._afterRenderChildren()}_beforeRenderChildren(e){const{context:t}=this,{state:i,pixelRatio:r}=e;t.enforceState(),t.setClearDepth(1),t.setClearColor(0,0,0,0),t.clear(t.gl.COLOR_BUFFER_BIT|t.gl.DEPTH_BUFFER_BIT);const{size:s,rotation:n}=i,d=Math.round(s[0]*r),c=Math.round(s[1]*r);this._boundFBO=t.getBoundFramebufferObject();if(!(i.spatialReference&&(i.spatialReference._isWrappable?i.spatialReference._isWrappable():i.spatialReference.isWrappable)))return void(this._clipFrame=!1);const u=a(n),_=Math.abs(Math.cos(u)),g=Math.abs(Math.sin(u)),b=Math.round(d*_+c*g),R=Math.round(i.worldScreenWidth);if(b<=R)return void(this._clipFrame=!1);this._clipFBO&&this._clipFBO.width===d&&this._clipFBO.height===c||(this._clipFBO=new f(t,{colorTarget:0,depthStencilTarget:3,width:d,height:c}));const w=(this.state.padding.left-this.state.padding.right)/2,O=(this.state.padding.bottom-this.state.padding.top)/2,y=.5*d,F=.5*c,x=1/d,C=1/c,T=R*r*.5,j=.5*(d*g+c*_),B=this._upperLeft,P=this._upperRight,v=this._lowerLeft,k=this._lowerRight;p(B,-T,-j),p(P,T,-j),p(v,-T,j),p(k,T,j),o(this._mat2),h(this._mat2,this._mat2,[y+w,F-O]),0!==n&&l(this._mat2,this._mat2,u),m(B,B,this._mat2),m(P,P,this._mat2),m(v,v,this._mat2),m(k,k,this._mat2);const S=this._clipData;S.set([2*v[0]*x-1,2*(c-v[1])*C-1,2*k[0]*x-1,2*(c-k[1])*C-1,2*B[0]*x-1,2*(c-B[1])*C-1,2*P[0]*x-1,2*(c-P[1])*C-1]),this._clipRendererInitialized||this._initializeClipRenderer(t),this._clipVBO.setData(S),this._boundFBO=t.getBoundFramebufferObject(),t.bindFramebuffer(this._clipFBO),t.setDepthWriteEnabled(!0),t.setStencilWriteMask(255),t.setClearColor(0,0,0,0),t.setClearDepth(1),t.setClearStencil(0),t.clear(t.gl.COLOR_BUFFER_BIT|t.gl.DEPTH_BUFFER_BIT|t.gl.STENCIL_BUFFER_BIT),t.setDepthWriteEnabled(!1),this._clipFrame=!0}_afterRenderChildren(){const e=this.context;if(e.logIno(),this._clipFrame&&this._clipRendererInitialized){if(e.bindFramebuffer(this._boundFBO),this._boundFBO=null,e.bindVAO(this._clipVAO),e.useProgram(this._clipStencilProgram),e.setDepthWriteEnabled(!1),e.setDepthTestEnabled(!1),e.setStencilTestEnabled(!0),e.setBlendingEnabled(!1),e.setColorMask(!1,!1,!1,!1),e.setStencilOp(7680,7680,7681),e.setStencilWriteMask(255),e.setStencilFunction(519,1,255),e.drawElements(4,6,5123,0),e.bindVAO(),e.setColorMask(!0,!0,!0,!0),null!=this.background){const{r:t,g:i,b:r,a:s}=this.background.color;e.setClearColor(s*t/255,s*i/255,s*r/255,s)}else e.setClearColor(0,0,0,0);e.clear(e.gl.COLOR_BUFFER_BIT),e.setBlendingEnabled(!0),e.setStencilFunction(514,1,255),this.painter.blitTexture(e,this._clipFBO.colorTexture,9728,1),e.setStencilTestEnabled(!1)}}doRender(e){const t=this.context,{state:i,pixelRatio:r}=e;this._resizeCanvas(e),this.context.enforceState(),t.setViewport(0,0,r*i.size[0],r*i.size[1]),t.setDepthWriteEnabled(!0),t.setStencilWriteMask(255),super.doRender(e)}async takeScreenshot(e){const{framebufferWidth:t,framebufferHeight:i}={framebufferWidth:Math.round(this._renderParameters.state.size[0]*e.resolutionScale),framebufferHeight:Math.round(this._renderParameters.state.size[1]*e.resolutionScale)},r=1,s=this.context,n=this._state.clone();if(null!=e.rotation){const t=n.viewpoint;n.viewpoint.rotation=e.rotation,n.viewpoint=t}const a={...this._renderParameters,drawPhase:null,globalOpacity:1,stationary:!0,state:n,pixelRatio:r,time:Date.now(),deltaTime:0,blendMode:null,effects:null,inFadeTransition:!1},o=new f(s,{colorTarget:0,depthStencilTarget:3,width:t,height:i}),h=s.getBoundFramebufferObject(),l=s.getViewport();s.bindFramebuffer(o),s.setViewport(0,0,t,i),this._renderChildren(e.children,a);const d=this._readbackScreenshot({...e.cropArea,y:i-(e.cropArea.y+e.cropArea.height)});let c;s.bindFramebuffer(h),s.setViewport(l.x,l.y,l.width,l.height),this.requestRender(),1===e.outputScale?c=d:(c=new ImageData(Math.round(d.width*e.outputScale),Math.round(d.height*e.outputScale)),j(d,c,!0));return B(c,{format:e.format,quality:e.quality,rotation:0,disableDecorations:!1},document.createElement(\"canvas\"),{flipY:!0,premultipliedAlpha:!0})}_readbackScreenshot(e){const t=this.context.gl,i=P(e.width,e.height,document.createElement(\"canvas\"));return t.readPixels(e.x,e.y,e.width,e.height,6408,5121,new Uint8Array(i.data.buffer)),i}_resizeCanvas(e){const t=this._canvas,i=t.style,{state:{size:r},pixelRatio:s}=e,n=r[0],a=r[1],o=Math.round(n*s),h=Math.round(a*s);t.width===o&&t.height===h||(t.width=o,t.height=h),i.width=n+\"px\",i.height=a+\"px\"}_initializeClipRenderer(e){if(this._clipRendererInitialized)return!0;const t=C.attributes,i=b(e,C);if(!i)return!1;const r=g.createVertex(e,35040,32),s=new Uint16Array([0,1,2,2,1,3]),n=g.createIndex(e,35044,s),a=new R(e,t,{geometry:[{name:\"a_pos\",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:r},n);return this._clipStencilProgram=i,this._clipVBO=r,this._clipVAO=a,this._clipRendererInitialized=!0,!0}_emptyTrash(){for(;this._trash.size>0;){const e=Array.from(this._trash);this._trash.clear();for(const t of e)t.processDetach()}}_isLabelDrawPhaseRequired(e){let t=!1;for(const i of e){if(!(i instanceof O)){t=t||!1;break}if(i.hasLabels)return!0;t=t||this._isLabelDrawPhaseRequired(i.children)}return t}}export{k as EXTRA_RENDER_TIME,S as Stage};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../../../../core/mathUtils.js\";import{TILE_SIZE as s}from\"../definitions.js\";import{StaticBitSet as e}from\"../../../layers/features/support/StaticBitSet.js\";const i=2,o=1,h=0,r=1,n=2;class c{constructor(t,s){this.width=t,this.height=s;const i=Math.ceil(t/o),h=Math.ceil(s/o);this._cols=i,this._rows=h,this._cells=e.create(i*h)}insertMetrics(t){const s=this._hasCollision(t);return s===h&&this._markMetrics(t),s}getCellId(t,s){return t+s*this._cols}has(t){return this._cells.has(t)}hasRange(t,s){return this._cells.hasRange(t,s)}set(t){this._cells.set(t)}setRange(t,s){this._cells.setRange(t,s)}_hasCollision(t){const s=t.id;let e=0,o=0;t.save();do{const s=t.boundsCount;e+=s;for(let e=0;e<s;e++){const s=t.boundsComputedAnchorX(e),h=t.boundsComputedAnchorY(e),c=t.boundsWidth(e)+i,l=t.boundsHeight(e)+i;switch(this._collide(s,h,c,l)){case n:return n;case r:o++}}}while(t.peekId()===s&&t.next());return t.restore(),e===o?r:h}_collide(s,e,i,c){const l=s-i/2,_=e-c/2,a=l+i,u=_+c;if(a<0||u<0||l>this.width||_>this.height)return r;const d=t(Math.floor(l/o),0,this._cols),g=t(Math.floor(_/o),0,this._rows),f=t(Math.ceil(a/o),0,this._cols),m=t(Math.ceil(u/o),0,this._rows);for(let t=g;t<=m;t++)for(let s=d;s<=f;s++){const e=this.getCellId(s,t);if(this.has(e))return n}return h}_mark(s,e,i,h){const r=s-i/2,n=e-h/2,c=r+i,l=n+h,_=t(Math.floor(r/o),0,this._cols),a=t(Math.floor(n/o),0,this._rows),u=t(Math.ceil(c/o),0,this._cols),d=t(Math.ceil(l/o),0,this._rows);for(let t=a;t<=d;t++)for(let s=_;s<=u;s++){const e=this.getCellId(s,t);this.set(e)}return!1}_markMetrics(t){const s=t.id;do{const s=t.boundsCount;for(let e=0;e<s;e++){const s=t.boundsComputedAnchorX(e),o=t.boundsComputedAnchorY(e),h=t.boundsWidth(e)+i,r=t.boundsHeight(e)+i;this._mark(s,o,h,r)}}while(t.peekId()===s&&t.next())}}class l{constructor(t,e=2){this._bucketSize=t,this._rowsLength=s/t,this._colsLength=s/t,this._elementsPerBucket=e,this._grid=this._initGrid()}checkOverlap(t,s){const e=Math.floor(t/this._bucketSize),i=Math.floor(s/this._bucketSize);return e<0||e>=this._rowsLength||i<0||i>=this._colsLength||this._grid[i*this._colsLength+e]>=this._elementsPerBucket}markUsed(t,s){const e=Math.floor(t/this._bucketSize),i=Math.floor(s/this._bucketSize);this._grid[i*this._colsLength+e]+=1}reset(){this._grid=this._initGrid()}_initGrid(){return new Uint8Array(this._rowsLength*this._colsLength)}}export{c as CollisionBitsetGrid,l as CollisionGrid,n as HAS_COLLISION,h as NONE,r as OUTSIDE_EXTENT};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../../../../core/mathUtils.js\";import{meterIn as n}from\"../../../../../renderers/support/lengthUtils.js\";const e=Math.PI;function r(t,n){switch(n.transformationType){case\"additive\":return i(t,n);case\"constant\":return s(n,t);case\"clamped-linear\":return u(t,n);case\"proportional\":return o(t,n);case\"stops\":return c(t,n);case\"real-world-size\":return l(t,n);case\"identity\":return t;case\"unknown\":return null}}function a(t,n){return\"number\"==typeof t?t:r(n,t)}function i(t,n){return t+(a(n.minSize,t)||n.minDataValue)}function s(t,n){const e=t.stops;let r=e&&e.length&&e[0].size;return null==r&&(r=t.minSize),a(r,n)}function u(t,n){const e=(t-n.minDataValue)/(n.maxDataValue-n.minDataValue),r=a(n.minSize,t),i=a(n.maxSize,t);return t<=n.minDataValue?r:t>=n.maxDataValue?i:r+e*(i-r)}function o(n,e){const r=n/e.minDataValue,i=a(e.minSize,n),s=a(e.maxSize,n);let u=null;return u=r*i,t(u,i,s)}function c(t,n){const[e,r,i]=m(t,n.cache.ipData);if(e===r)return a(n.stops[e].size,t);{const s=a(n.stops[e].size,t);return s+(a(n.stops[r].size,t)-s)*i}}function l(r,i){const s=n[i.valueUnit],u=a(i.minSize,r),o=a(i.maxSize,r),{valueRepresentation:c}=i;let l=null;return l=\"area\"===c?2*Math.sqrt(r/e)/s:\"radius\"===c||\"distance\"===c?2*r/s:r/s,t(l,u,o)}function m(t,n){if(!n)return;let e=0,r=n.length-1;return n.some(((n,a)=>t<n?(r=a,!0):(e=a,!1))),[e,r,(t-n[e])/(n[r]-n[e])]}export{r as getSizeForValueSimple};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../../../core/maybe.js\";import{pt2px as i}from\"../../../../../core/screenUtils.js\";import{FILTER_FLAG_0 as o,EFFECT_FLAG_0 as r}from\"../definitions.js\";import{CollisionBitsetGrid as n,NONE as s,HAS_COLLISION as a,OUTSIDE_EXTENT as l}from\"./CollisionGrid.js\";import{getSizeForValueSimple as d}from\"./visualVariableSimpleUtils.js\";const c=254,u=255,f=0;function b(t,i){const o=[];t.forEachTile((e=>o.push(e))),o.sort(((e,t)=>e.instanceId-t.instanceId)),o.forEach((t=>{e(t.labelMetrics)&&t.isReady&&i(t,t.labelMetrics.getCursor())}))}function p(e){return\"feature\"===e.layer.type||\"csv\"===e.layer.type||\"geojson\"===e.layer.type||\"ogc-feature\"===e.layer.type||\"stream\"===e.layer.type||\"subtype-group\"===e.layer.type||\"wfs\"===e.layer.type}function y(e){return t=>i(d(t,e))}function m(e){const t=\"visualVariables\"in e&&e.visualVariables;if(!t)return null;for(const i of t)if(\"size\"===i.type)return y(i);return null}function h(e){for(const i of e){var t;const e=\"featureReduction\"in i&&\"cluster\"===(null==(t=i.featureReduction)?void 0:t.type)&&i.featureReduction,o=[...i.labelingInfo||[],...e.labelingInfo||[]];if(!i.labelsVisible||!o.length)continue;if(o.some((e=>\"none\"===e.deconflictionStrategy)))return!0}return!1}function M(e,i){if(!p(i))return;const o=\"subtype-group\"===i.layer.type?i.layer.sublayers.items:[i.layer],r=i.layer.geometryType,n=!h(o),s={};if(\"subtype-group\"!==i.layer.type){if(\"heatmap\"===i.layer.renderer.type)return;const e=m(i.layer.renderer);s[0]=e}const a=i.tileRenderer;if(t(a))return;const l=i.layer.visible&&!i.suspended;e.push({tileRenderer:a,vvEvaluators:s,deconflictionEnabled:n,geometryType:r,visible:l})}class g{run(e,t,i){const o=[];for(let r=e.length-1;r>=0;r--){M(o,e[r])}this._transformMetrics(o,t),this._runCollision(o,t,i)}_runCollision(e,t,i){const[o,r]=t.state.size,s=new n(o*t.pixelRatio,r*t.pixelRatio);for(const{tileRenderer:n,deconflictionEnabled:a,visible:l}of e){const e=n.featuresView.attributeView;a?l?(this._prepare(n),this._collideVisible(s,n,i),this._collideInvisible(s,n)):b(n,((t,i)=>{for(;i.nextId();)e.setLabelMinZoom(i.id,u)})):b(n,((t,i)=>{for(;i.nextId();)e.setLabelMinZoom(i.id,f)}))}}_isFiltered(t,i,n){const s=i.getFilterFlags(t),a=!n.hasFilter||!!(s&o),l=!e(n.featureEffect)||n.featureEffect.excludedLabelsVisible||!!(s&r);return!(a&&l)}_prepare(e){const t=e.featuresView.attributeView,i=new Set;b(e,((o,r)=>{for(;r.nextId();){if(i.has(r.id))continue;if(i.add(r.id),this._isFiltered(r.id,t,e.layerView)){t.setLabelMinZoom(r.id,c);continue}t.getLabelMinZoom(r.id)!==f?t.setLabelMinZoom(r.id,u):t.setLabelMinZoom(r.id,f)}}))}_collideVisible(e,t,i){const o=t.featuresView.attributeView,r=new Set;b(t,((t,n)=>{for(;n.nextId();)if(!r.has(n.id))if(t.key.level===i){if(0===o.getLabelMinZoom(n.id)){switch(e.insertMetrics(n)){case l:break;case a:o.setLabelMinZoom(n.id,c),r.add(n.id);break;case s:o.setLabelMinZoom(n.id,f),r.add(n.id)}}}else o.setLabelMinZoom(n.id,c)}))}_collideInvisible(e,t){const i=t.featuresView.attributeView,o=new Set;b(t,((t,r)=>{for(;r.nextId();)if(!o.has(r.id)&&i.getLabelMinZoom(r.id)===u){switch(e.insertMetrics(r)){case l:break;case a:i.setLabelMinZoom(r.id,u),o.add(r.id);break;case s:i.setLabelMinZoom(r.id,f),o.add(r.id)}}}))}_transformMetrics(t,i){for(const{tileRenderer:o,geometryType:r,vvEvaluators:n}of t)b(o,((t,s)=>{const a=o.featuresView.attributeView,l=t.transforms.labelMat2d;l[4]=Math.round(l[4]),l[5]=Math.round(l[5]);const d=l[4],c=l[5],u=\"polyline\"===r;for(;s.next();){const t=s.boundsCount,o=s.anchorX,r=s.anchorY;let f=s.size;const b=n[0];if(e(b)){const e=b(a.getVVSize(s.id));f=isNaN(e)||null==e||e===1/0?f:e}const p=s.directionX*(f/2),y=s.directionY*(f/2);for(let e=0;e<t;e++){let t=o,n=s.anchorY;if(u){let o=t+s.boundsX(e)+p,r=n+s.boundsY(e)+y;i.state.rotation?(o=l[0]*o+l[2]*r+l[4],r=l[1]*o+l[3]*r+l[5]):(o+=d,r+=c),s.setBoundsComputedAnchorX(e,Math.floor(o)),s.setBoundsComputedAnchorY(e,Math.floor(r))}else{i.state.rotation?(t=l[0]*o+l[2]*r+l[4],n=l[1]*o+l[3]*r+l[5]):(t+=d,n+=c);const a=t+s.boundsX(e)+p,u=n+s.boundsY(e)+y;s.setBoundsComputedAnchorX(e,a),s.setBoundsComputedAnchorY(e,u)}}}}))}}export{g as CollisionEngine};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import s from\"../../core/Error.js\";import{HandleOwnerMixin as i}from\"../../core/HandleOwner.js\";import r from\"../../core/Logger.js\";import{throttle as o}from\"../../core/throttle.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import{CollisionEngine as p}from\"./engine/webgl/collisions/CollisionEngine.js\";const n=32,d=r.getLogger(\"esri.views.2d.layers.labels.LabelManager\");let u=class extends(i(t)){constructor(e){super(e),this._applyVisibilityPassThrottled=o(this._applyVisibilityPass,n,this),this.lastUpdateId=-1,this.updateRequested=!1,this.view=null}initialize(){this.collisionEngine=new p}destroy(){this.collisionEngine=null,this._applyVisibilityPassThrottled.remove(),this._applyVisibilityPassThrottled=null}get updating(){return this.updateRequested}update(e){this._applyVisibilityPassThrottled(e)}viewChange(){this.requestUpdate()}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate())}processUpdate(e){this._set(\"updateParameters\",e),this.updateRequested&&(this.updateRequested=!1,this.update(e))}_applyVisibilityPass(e){try{const t=this.view.featuresTilingScheme.getClosestInfoForScale(e.state.scale).level;this.collisionEngine.run(this.view.allLayerViews.items,e,t)}catch(t){d.error(new s(\"mapview-labeling\",\"Encountered an error during label decluttering\",t))}}};e([a()],u.prototype,\"updateRequested\",void 0),e([a({readOnly:!0})],u.prototype,\"updateParameters\",void 0),e([a()],u.prototype,\"updating\",null),e([a()],u.prototype,\"view\",void 0),u=e([l(\"esri.views.2d.layers.labels.LabelManager\")],u);const c=u;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Accessor.js\";import{createScreenPoint as r}from\"../../../core/screenUtils.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{ViewEventPriorities as s}from\"../../input/InputManager.js\";const a={container:\"esri-zoom-box__container\",overlay:\"esri-zoom-box__overlay\",background:\"esri-zoom-box__overlay-background\",box:\"esri-zoom-box__outline\"},n={zoom:\"Shift\",counter:\"Ctrl\"};let h=class extends e{constructor(t){super(t),this._container=null,this._overlay=null,this._backgroundShape=null,this._boxShape=null,this._box={x:0,y:0,width:0,height:0},this._redraw=this._redraw.bind(this)}destroy(){this.view=null}set view(t){this._handles&&this._handles.forEach((t=>{t.remove()})),this._handles=null,this._destroyOverlay(),this._set(\"view\",t),t&&(t.on(\"drag\",[n.zoom],(t=>this._handleDrag(t,1)),s.INTERNAL),t.on(\"drag\",[n.zoom,n.counter],(t=>this._handleDrag(t,-1)),s.INTERNAL))}_start(){this._createContainer(),this._createOverlay(),this.navigation.begin()}_update(t,e,r,i){this._box.x=t,this._box.y=e,this._box.width=r,this._box.height=i,this._rafId||(this._rafId=requestAnimationFrame(this._redraw))}_end(t,e,i,o,s){const a=this.view,n=a.toMap(r(t+.5*i,e+.5*o));let h=Math.max(i/a.width,o/a.height);-1===s&&(h=1/h),this._destroyOverlay(),this.navigation.end(),a.goTo({center:n,scale:a.scale*h})}_updateBox(t,e,r,i){const o=this._boxShape;o.setAttributeNS(null,\"x\",\"\"+t),o.setAttributeNS(null,\"y\",\"\"+e),o.setAttributeNS(null,\"width\",\"\"+r),o.setAttributeNS(null,\"height\",\"\"+i),o.setAttributeNS(null,\"class\",a.box)}_updateBackground(t,e,r,i){this._backgroundShape.setAttributeNS(null,\"d\",this._toSVGPath(t,e,r,i,this.view.width,this.view.height))}_createContainer(){const t=document.createElement(\"div\");t.className=a.container,this.view.root.appendChild(t),this._container=t}_createOverlay(){const t=this.view.width,e=this.view.height,r=document.createElementNS(\"http://www.w3.org/2000/svg\",\"path\");r.setAttributeNS(null,\"d\",\"M 0 0 L \"+t+\" 0 L \"+t+\" \"+e+\" L 0 \"+e+\" Z\"),r.setAttributeNS(null,\"class\",a.background);const i=document.createElementNS(\"http://www.w3.org/2000/svg\",\"rect\"),o=document.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\");o.setAttributeNS(\"http://www.w3.org/2000/xmlns/\",\"xmlns:xlink\",\"http://www.w3.org/1999/xlink\"),o.setAttributeNS(null,\"class\",a.overlay),o.appendChild(r),o.appendChild(i),this._container.appendChild(o),this._backgroundShape=r,this._boxShape=i,this._overlay=o}_destroyOverlay(){this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container),this._container=this._backgroundShape=this._boxShape=this._overlay=null}_toSVGPath(t,e,r,i,o,s){const a=t+r,n=e+i;return\"M 0 0 L \"+o+\" 0 L \"+o+\" \"+s+\" L 0 \"+s+\" ZM \"+t+\" \"+e+\" L \"+t+\" \"+n+\" L \"+a+\" \"+n+\" L \"+a+\" \"+e+\" Z\"}_handleDrag(t,e){const r=t.x,i=t.y,o=t.origin.x,s=t.origin.y;let a,n,h,l;switch(r>o?(a=o,h=r-o):(a=r,h=o-r),i>s?(n=s,l=i-s):(n=i,l=s-i),t.action){case\"start\":this._start();break;case\"update\":this._update(a,n,h,l);break;case\"end\":this._end(a,n,h,l,e)}t.stopPropagation()}_redraw(){if(!this._rafId)return;if(this._rafId=null,!this._overlay)return;const{x:t,y:e,width:r,height:i}=this._box;this._updateBox(t,e,r,i),this._updateBackground(t,e,r,i),this._rafId=requestAnimationFrame(this._redraw)}};t([i()],h.prototype,\"navigation\",void 0),t([i()],h.prototype,\"view\",null),h=t([o(\"esri.views.2d.navigation.ZoomBox\")],h);const l=h;export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nclass t{constructor(t){this.gain=t}update(t){if(this.hasLastValue){const e=this.computeDelta(t);this.updateDelta(e)}this.lastValue=t}reset(){this.lastValue=void 0,this.filteredDelta=void 0}get hasLastValue(){return void 0!==this.lastValue}get hasFilteredDelta(){return void 0!==this.filteredDelta}computeDelta(t){return t-this.lastValue}updateDelta(t){this.hasFilteredDelta?this.filteredDelta=(1-this.gain)*this.filteredDelta+this.gain*t:this.filteredDelta=t}}export{t as FilteredFiniteDifference};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nclass t{constructor(t,i,o){this._initialVelocity=t,this._stopVelocity=i,this._friction=o,this._duration=Math.abs(Math.log(Math.abs(this._initialVelocity)/this._stopVelocity)/Math.log(1-this._friction))}get duration(){return this._duration}isFinished(t){return t>this.duration}get friction(){return this._friction}value(t){return this.valueFromInitialVelocity(this._initialVelocity,t)}valueDelta(t,i){const o=this.value(t);return this.value(t+i)-o}valueFromInitialVelocity(t,i){i=Math.min(i,this.duration);const o=1-this.friction;return t*(o**i-1)/Math.log(o)}}export{t as Momentum};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{s as e,l as t,a as i}from\"../../chunks/vec3.js\";import{c as s}from\"../../chunks/vec3f64.js\";import{FilteredFiniteDifference as n}from\"./FilteredFiniteDifference.js\";import{Momentum as r}from\"./Momentum.js\";class c extends r{constructor(e,t,i,s,n){super(e,t,i),this.sceneVelocity=s,this.direction=n}value(e){return super.valueFromInitialVelocity(this.sceneVelocity,e)}}class h{constructor(e=300,t=12,i=.84){this.minimumInitialVelocity=e,this.stopVelocity=t,this.friction=i,this.enabled=!0,this.time=new n(.6),this.screen=[new n(.4),new n(.4)],this.scene=[new n(.6),new n(.6),new n(.6)],this.tmpDirection=s()}add(e,t,i){if(this.enabled){if(this.time.hasLastValue){if(this.time.computeDelta(i)<.015)return}this.screen[0].update(e[0]),this.screen[1].update(e[1]),this.scene[0].update(t[0]),this.scene[1].update(t[1]),this.scene[2].update(t[2]),this.time.update(i)}}reset(){this.screen[0].reset(),this.screen[1].reset(),this.scene[0].reset(),this.scene[1].reset(),this.scene[2].reset(),this.time.reset()}evaluateMomentum(){if(!this.enabled||!this.screen[0].hasFilteredDelta)return null;const e=this.screen[0].filteredDelta,t=this.screen[1].filteredDelta,i=Math.sqrt(e*e+t*t)/this.time.filteredDelta;return Math.abs(i)<this.minimumInitialVelocity?null:this.createMomentum(i,this.stopVelocity,this.friction)}createMomentum(s,n,r){e(this.tmpDirection,this.scene[0].filteredDelta,this.scene[1].filteredDelta,this.scene[2].filteredDelta);const h=t(this.tmpDirection);h>0&&i(this.tmpDirection,this.tmpDirection,1/h);const a=h/this.time.filteredDelta;return new c(s,n,r,a,this.tmpDirection)}}export{c as PanPlanarMomentum,h as PanPlanarMomentumEstimator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import i from\"../../../../Viewpoint.js\";import o from\"../../../../core/Accessor.js\";import{createScreenPointArray as m}from\"../../../../core/screenUtils.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as e}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{a as n}from\"../../../../chunks/vec3.js\";import{c as r,f as a}from\"../../../../chunks/vec3f64.js\";import{translateBy as p}from\"../../viewpointUtils.js\";import{PanPlanarMomentumEstimator as h}from\"../../../navigation/PanPlanarMomentumEstimator.js\";import u from\"../../../../geometry/Point.js\";let c=class extends o{constructor(t){super(t),this.animationTime=0,this.momentumEstimator=new h(500,6,.92),this.momentum=null,this.tmpMomentum=r(),this.momentumFinished=!1,this.viewpoint=new i({targetGeometry:new u,scale:0,rotation:0}),this.watch(\"momentumFinished\",(t=>{t&&this.navigation.stop()}))}begin(t,i){this.navigation.begin(),this.momentumEstimator.reset(),this.addToEstimator(i),this.previousDrag=i}update(t,i){this.addToEstimator(i);let o=i.center.x,m=i.center.y;const s=this.previousDrag;o=s?s.center.x-o:-o,m=s?m-s.center.y:m,t.viewpoint=p(this.viewpoint,t.viewpoint,[o||0,m||0]),this.previousDrag=i}end(t,i){this.addToEstimator(i);const o=t.navigation.momentumEnabled;this.momentum=o?this.momentumEstimator.evaluateMomentum():null,this.animationTime=0,this.momentum&&this.onAnimationUpdate(t),this.previousDrag=null,this.navigation.end()}addToEstimator(t){const i=t.center.x,o=t.center.y,s=m(-i,o),e=a(-i,o,0);this.momentumEstimator.add(s,e,.001*t.timestamp)}onAnimationUpdate(t){this.navigation.animationManager.animateContinous(t.viewpoint,((i,o)=>{this.momentumFinished=!this.momentum||this.momentum.isFinished(this.animationTime);const m=.001*o;if(!this.momentumFinished){const o=this.momentum.valueDelta(this.animationTime,m);n(this.tmpMomentum,this.momentum.direction,o),p(i,i,this.tmpMomentum),t.constraints.constrainByGeometry(i)}this.animationTime+=m}))}stopMomentumNavigation(){this.momentum&&(this.momentumEstimator.reset(),this.momentum=null,this.navigation.stop())}};t([s()],c.prototype,\"momentumFinished\",void 0),t([s()],c.prototype,\"viewpoint\",void 0),t([s()],c.prototype,\"navigation\",void 0),c=t([e(\"esri.views.2d.navigation.actions.Pan\")],c);const d=c;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../core/mathUtils.js\";import{FilteredFiniteDifference as e}from\"./FilteredFiniteDifference.js\";import{Momentum as i}from\"./Momentum.js\";class s{constructor(t=2.5,i=.01,s=.95,l=12){this.minimumInitialVelocity=t,this.stopVelocity=i,this.friction=s,this.maxVelocity=l,this.enabled=!0,this.value=new e(.8),this.time=new e(.3)}add(t,e){if(this.enabled){if(this.time.hasLastValue){if(this.time.computeDelta(e)<.01)return;if(this.value.hasFilteredDelta){const e=this.value.computeDelta(t);this.value.filteredDelta*e<0&&this.value.reset()}}this.time.update(e),this.value.update(t)}}reset(){this.value.reset(),this.time.reset()}evaluateMomentum(){if(!this.enabled||!this.value.hasFilteredDelta)return null;let e=this.value.filteredDelta/this.time.filteredDelta;return e=t(e,-this.maxVelocity,this.maxVelocity),Math.abs(e)<this.minimumInitialVelocity?null:this.createMomentum(e,this.stopVelocity,this.friction)}createMomentum(t,e,s){return new i(t,e,s)}}export{s as MomentumEstimator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{MomentumEstimator as t}from\"./MomentumEstimator.js\";class a extends t{constructor(t=3,a=.01,s=.95,e=12){super(t,a,s,e)}add(t,a){if(this.value.hasLastValue){const a=this.value.lastValue;let s=t-a;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;t=a+s}super.add(t,a)}}export{a as RotationMomentumEstimator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{Momentum as e}from\"./Momentum.js\";import{MomentumEstimator as t}from\"./MomentumEstimator.js\";class r extends e{constructor(e,t,r){super(e,t,r)}value(e){const t=super.value(e);return Math.exp(t)}valueDelta(e,t){const r=super.value(e),s=super.value(e+t)-r;return Math.exp(s)}}class s extends t{constructor(e=2.5,t=.01,r=.95,s=12){super(e,t,r,s)}add(e,t){super.add(Math.log(e),t)}createMomentum(e,t,s){return new r(e,t,s)}}export{r as ZoomMomentum,s as ZoomMomentumEstimator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import o from\"../../../../Viewpoint.js\";import i from\"../../../../core/Accessor.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as e}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{s as n,m}from\"../../../../chunks/vec2.js\";import{a}from\"../../../../chunks/vec2f64.js\";import{getPaddingScreenTranslation as r,scaleAndRotateBy as h}from\"../../viewpointUtils.js\";import{RotationMomentumEstimator as u}from\"../../../navigation/RotationMomentumEstimator.js\";import{ZoomMomentumEstimator as p}from\"../../../navigation/ZoomMomentumEstimator.js\";import c from\"../../../../geometry/Point.js\";let l=class extends i{constructor(t){super(t),this._animationTime=0,this._momentumFinished=!1,this._rotationMomentumEstimator=new u(.6,.15,.95),this._rotationDirection=1,this._zoomDirection=1,this._zoomMomentumEstimator=new p,this._zoomOnly=null,this.zoomMomentum=null,this.rotateMomentum=null,this.viewpoint=new o({targetGeometry:new c,scale:0,rotation:0}),this.watch(\"_momentumFinished\",(t=>{t&&this.navigation.stop()}))}begin(t,o){this.navigation.begin(),this._rotationMomentumEstimator.reset(),this._zoomMomentumEstimator.reset(),this._zoomOnly=null,this._previousAngle=this._startAngle=o.angle,this._previousRadius=this._startRadius=o.radius,this._previousCenter=o.center,this._updateTimestamp=null,t.constraints.rotationEnabled&&this.addToRotateEstimator(0,o.timestamp),this.addToZoomEstimator(o,1)}update(t,o){null===this._updateTimestamp&&(this._updateTimestamp=o.timestamp);const i=o.angle,s=o.radius,e=o.center,n=Math.abs(180*(i-this._startAngle)/Math.PI),m=Math.abs(s-this._startRadius),a=this._startRadius/s;if(this._previousRadius){const r=s/this._previousRadius;let h=180*(i-this._previousAngle)/Math.PI;this._rotationDirection=h>=0?1:-1,this._zoomDirection=r>=1?1:-1,t.constraints.rotationEnabled?(null===this._zoomOnly&&o.timestamp-this._updateTimestamp>200&&(this._zoomOnly=m-n>0),null===this._zoomOnly||this._zoomOnly?h=0:this.addToRotateEstimator(i-this._startAngle,o.timestamp)):h=0,this.addToZoomEstimator(o,a),this.navigation.setViewpoint([e.x,e.y],1/r,h,[this._previousCenter.x-e.x,e.y-this._previousCenter.y])}this._previousAngle=i,this._previousRadius=s,this._previousCenter=e}end(t){this.rotateMomentum=this._rotationMomentumEstimator.evaluateMomentum(),this.zoomMomentum=this._zoomMomentumEstimator.evaluateMomentum(),this._animationTime=0,(this.rotateMomentum||this.zoomMomentum)&&this.onAnimationUpdate(t),this.navigation.end()}addToRotateEstimator(t,o){this._rotationMomentumEstimator.add(t,.001*o)}addToZoomEstimator(t,o){this._zoomMomentumEstimator.add(o,.001*t.timestamp)}canZoomIn(t){const o=t.scale,i=t.constraints.effectiveMaxScale;return 0===i||o>i}canZoomOut(t){const o=t.scale,i=t.constraints.effectiveMinScale;return 0===i||o<i}onAnimationUpdate(t){this.navigation.animationManager.animateContinous(t.viewpoint,((o,i)=>{const s=!this.canZoomIn(t)&&this._zoomDirection>1||!this.canZoomOut(t)&&this._zoomDirection<1,e=!this.rotateMomentum||this.rotateMomentum.isFinished(this._animationTime),u=s||!this.zoomMomentum||this.zoomMomentum.isFinished(this._animationTime),p=.001*i;if(this._momentumFinished=e&&u,!this._momentumFinished){const i=this.rotateMomentum?Math.abs(this.rotateMomentum.valueDelta(this._animationTime,p))*this._rotationDirection*180/Math.PI:0;let s=this.zoomMomentum?Math.abs(this.zoomMomentum.valueDelta(this._animationTime,p)):1;const e=a(),u=a();if(this._previousCenter){n(e,this._previousCenter.x,this._previousCenter.y),r(u,t.size,t.padding),m(e,e,u);const{constraints:a,scale:p}=t,c=p*s;s<1&&!a.canZoomInTo(c)?(s=p/a.effectiveMaxScale,this.zoomMomentum=null,this.rotateMomentum=null):s>1&&!a.canZoomOutTo(c)&&(s=p/a.effectiveMinScale,this.zoomMomentum=null,this.rotateMomentum=null),h(o,t.viewpoint,s,i,e,t.size),t.constraints.constrainByGeometry(o)}}this._animationTime+=p}))}stopMomentumNavigation(){(this.rotateMomentum||this.zoomMomentum)&&(this.rotateMomentum&&(this._rotationMomentumEstimator.reset(),this.rotateMomentum=null),this.zoomMomentum&&(this._zoomMomentumEstimator.reset(),this.zoomMomentum=null),this.navigation.stop())}};t([s()],l.prototype,\"_momentumFinished\",void 0),t([s()],l.prototype,\"viewpoint\",void 0),t([s()],l.prototype,\"navigation\",void 0),l=t([e(\"esri.views.2d.navigation.actions.Pinch\")],l);const _=l;export{_ as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import e from\"../../../../Viewpoint.js\";import o from\"../../../../core/Accessor.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{s as i,c as p}from\"../../../../chunks/vec2.js\";import{a as n}from\"../../../../chunks/vec2f64.js\";import{getAnchor as c,rotateBy as a,angleBetween as m}from\"../../viewpointUtils.js\";import v from\"../../../../geometry/Point.js\";const u=n(),d=n();let j=class extends o{constructor(t){super(t),this._previousCenter=n(),this.viewpoint=new e({targetGeometry:new v,scale:0,rotation:0})}begin(t,e){this.navigation.begin(),i(this._previousCenter,e.center.x,e.center.y)}update(t,e){const{state:{size:o,padding:r}}=t;i(u,e.center.x,e.center.y),c(d,o,r),t.viewpoint=a(this.viewpoint,t.state.paddedViewState.viewpoint,m(d,this._previousCenter,u)),p(this._previousCenter,u)}end(){this.navigation.end()}};t([r()],j.prototype,\"viewpoint\",void 0),t([r()],j.prototype,\"navigation\",void 0),j=t([s(\"esri.views.2d.actions.Rotate\")],j);const h=j;export{h as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import i from\"../../../Viewpoint.js\";import o from\"../../../core/Accessor.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"../../../geometry/Point.js\";import{rotateBy as a,translateBy as r,padAndScaleAndRotateBy as c}from\"../viewpointUtils.js\";import m from\"./ZoomBox.js\";import h from\"./actions/Pan.js\";import p from\"./actions/Pinch.js\";import u from\"./actions/Rotate.js\";const l=10,w=1,v=new i({targetGeometry:new s}),g=[0,0],d=250;let _=class extends o{constructor(t){super(t),this._endTimer=null,this.animationManager=null}initialize(){this.pan=new h({navigation:this}),this.rotate=new u({navigation:this}),this.pinch=new p({navigation:this}),this.zoomBox=new m({view:this.view,navigation:this})}destroy(){this.zoomBox.destroy(),this.zoomBox=null,this.animationManager=null}begin(){this._set(\"interacting\",!0)}end(){this._lastEventTimestamp=performance.now(),this._startTimer(d)}async zoom(t,i=this._getDefaultAnchor()){if(this.stop(),this.begin(),this.view.constraints.snapToZoom&&this.view.constraints.effectiveLODs)return t<1?this.zoomIn(i):this.zoomOut(i);this.setViewpoint(i,t,0,[0,0])}async zoomIn(t){const i=this.view,o=i.constraints.snapToNextScale(i.scale);return this._zoomToScale(o,t)}async zoomOut(t){const i=this.view,o=i.constraints.snapToPreviousScale(i.scale);return this._zoomToScale(o,t)}setViewpoint(t,i,o,n){this.begin(),this.view.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,t,i,o,n),this.end()}setViewpointImmediate(t,i=0,o=[0,0],n=this._getDefaultAnchor()){this.view.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,n,t,i,o)}continousRotateClockwise(){const t=this.get(\"view.viewpoint\");this.animationManager.animateContinous(t,(t=>{a(t,t,-w)}))}continousRotateCounterclockwise(){const t=this.get(\"view.viewpoint\");this.animationManager.animateContinous(t,(t=>{a(t,t,w)}))}resetRotation(){this.view.rotation=0}continousPanLeft(){this._continuousPan([-l,0])}continousPanRight(){this._continuousPan([l,0])}continousPanUp(){this._continuousPan([0,l])}continousPanDown(){this._continuousPan([0,-l])}stop(){this.pan.stopMomentumNavigation(),this.animationManager.stop(),this.end(),null!==this._endTimer&&(clearTimeout(this._endTimer),this._endTimer=null,this._set(\"interacting\",!1))}_continuousPan(t){const i=this.get(\"view.viewpoint\");this.animationManager.animateContinous(i,(i=>{r(i,i,t),this.view.constraints.constrainByGeometry(i)}))}_startTimer(t){return null!==this._endTimer||(this._endTimer=setTimeout((()=>{this._endTimer=null;const t=performance.now()-this._lastEventTimestamp;t<d?this._endTimer=this._startTimer(t):this._set(\"interacting\",!1)}),t)),this._endTimer}_getDefaultAnchor(){const{size:t,padding:{left:i,right:o,top:n,bottom:e}}=this.view;return g[0]=.5*(t[0]-o+i),g[1]=.5*(t[1]-e+n),g}async _zoomToScale(t,i=this._getDefaultAnchor()){const{view:o}=this,{constraints:n,scale:e,viewpoint:s,size:a,padding:r}=o,m=n.canZoomInTo(t),h=n.canZoomOutTo(t);if(!(t<e&&!m||t>e&&!h))return c(v,s,t/e,0,i,a,r),n.constrainByGeometry(v),o.goTo(v,{animate:!0})}_scaleRotateTranslateViewpoint(t,i,o,n,e){const{view:s}=this,{size:a,padding:m,constraints:h,scale:p,viewpoint:u}=s,l=p*o,w=h.canZoomInTo(l),v=h.canZoomOutTo(l);return(o<1&&!w||o>1&&!v)&&(o=1),r(u,u,e),c(t,u,o,n,i,a,m),h.constrainByGeometry(t)}};t([n()],_.prototype,\"animationManager\",void 0),t([n({type:Boolean,readOnly:!0})],_.prototype,\"interacting\",void 0),t([n()],_.prototype,\"pan\",void 0),t([n()],_.prototype,\"pinch\",void 0),t([n()],_.prototype,\"rotate\",void 0),t([n()],_.prototype,\"view\",void 0),t([n()],_.prototype,\"zoomBox\",void 0),_=t([e(\"esri.views.2d.navigation.MapViewNavigation\")],_);const T=_;export{T as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../webgl/BufferObject.js\";import\"../../../../webgl/FramebufferObject.js\";import\"../../../../../core/has.js\";import\"../../../../webgl/checkWebGLError.js\";import\"../../../../webgl/enums.js\";import\"../../../../../chunks/builtins.js\";import{createProgram as r}from\"../../../../webgl/programUtils.js\";import\"../../../../webgl/Texture.js\";import\"../../../../webgl/VertexArrayObject.js\";import{resolveIncludes as e}from\"./sources/resolver.js\";const t={shaders:{vertexShader:e(\"magnifier/magnifier.vert\"),fragmentShader:e(\"magnifier/magnifier.frag\")},attributes:new Map([[\"a_pos\",0]])};function i(e){return r(e,t)}export{i as createMagnifierProgram,t as magnifierProgramTemplate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{throwIfAborted as a}from\"../../core/promiseUtils.js\";import{requestImage as t}from\"../../support/requestImageUtils.js\";async function s(s){const r=import(\"./mask-svg.js\"),i=import(\"./overlay-svg.js\"),o=t((await r).default,{signal:s}),e=t((await i).default,{signal:s}),m={mask:await o,overlay:await e};return a(s),m}export{s as loadMagnifierResources};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../request.js\";import r from\"../../../core/Handles.js\";import{clamp as s}from\"../../../core/mathUtils.js\";import{isNone as t,isSome as i,disposeMaybe as a}from\"../../../core/maybe.js\";import{createTask as o}from\"../../../core/promiseUtils.js\";import{isSVG as n}from\"../../../core/urlUtils.js\";import{init as l}from\"../../../core/watchUtils.js\";import{c as h}from\"../../../chunks/mat3f32.js\";import m from\"../../webgl/BufferObject.js\";import\"../../webgl/FramebufferObject.js\";import\"../../../core/has.js\";import\"../../webgl/checkWebGLError.js\";import\"../../webgl/enums.js\";import\"../../../chunks/builtins.js\";import c from\"../../webgl/Texture.js\";import u from\"../../webgl/VertexArrayObject.js\";import{DisplayObject as d}from\"../engine/DisplayObject.js\";import{WGLDrawPhase as p}from\"../engine/webgl/enums.js\";import{createMagnifierProgram as _,magnifierProgramTemplate as f}from\"../engine/webgl/shaders/MagnifierPrograms.js\";import{loadMagnifierResources as g}from\"../../magnifier/resources.js\";class b extends d{constructor(){super(),this._handles=new r,this._resourcePixelRatio=1,this.visible=!1}destroy(){this._handles.destroy(),this._handles=null,this._disposeRenderResources(),this._resourcesTask&&(this._resourcesTask.abort(),this._resourcesTask=null)}get background(){return this._background}set background(e){this._background=e,this.requestRender()}get magnifier(){return this._magnifier}set magnifier(e){this._magnifier=e,this._handles.removeAll(),this._handles.add([l(e,\"version\",(()=>{this.visible=e.visible&&i(e.position)&&e.size>0,this.requestRender()})),e.watch([\"mask\",\"overlay\"],(()=>this._reloadResources())),e.watch(\"size\",(()=>{this._disposeRenderResources(),this.requestRender()}))])}_createTransforms(){return{dvs:h()}}doRender(e){var r;const i=e.context;if(!this._resourcesTask)return void this._reloadResources();if(e.drawPhase!==p.MAP||!this._canRender())return;this._updateResources(e);const a=this._magnifier;if(t(a.position))return;const o=e.pixelRatio,n=a.size*o,l=1/a.factor,h=Math.ceil(l*n);this._readbackTexture.resize(h,h);const{size:m}=e.state,c=o*m[0],u=o*m[1],d=.5*h,_=.5*h,f=s(o*a.position.x,d,c-d-1),g=s(u-o*a.position.y,_,u-_-1);i.setBlendingEnabled(!0);const b=f-d,x=g-_,y=this._readbackTexture;i.bindTexture(y,0),i.gl.copyTexImage2D(y.descriptor.target,0,y.descriptor.pixelFormat,b,x,h,h,0);const k=null==(r=this.background)?void 0:r.color,T=k?[k.a*k.r/255,k.a*k.g/255,k.a*k.b/255,k.a]:[1,1,1,1],v=(f+a.offset.x*o)/c*2-1,R=(g-a.offset.y*o)/u*2-1,j=n/c*2,w=n/u*2,A=this._program;i.bindVAO(this._vertexArrayObject),i.bindTexture(this._overlayTexture,6),i.bindTexture(this._maskTexture,7),i.useProgram(A),A.setUniform4fv(\"u_background\",T),A.setUniform1i(\"u_readbackTexture\",0),A.setUniform1i(\"u_overlayTexture\",6),A.setUniform1i(\"u_maskTexture\",7),A.setUniform4f(\"u_drawPos\",v,R,j,w),A.setUniform1i(\"u_maskEnabled\",a.maskEnabled?1:0),A.setUniform1i(\"u_overlayEnabled\",a.overlayEnabled?1:0),i.setStencilTestEnabled(!1),i.setColorMask(!0,!0,!0,!0),i.drawArrays(5,0,4),i.bindVAO()}_canRender(){return this.mask&&this.overlay&&null!=this._magnifier}_reloadResources(){this._resourcesTask&&this._resourcesTask.abort();const r=i(this._magnifier)?this._magnifier.maskUrl:null,s=i(this._magnifier)?this._magnifier.overlayUrl:null;this._resourcesTask=o((async a=>{const o=t(r)||t(s)?g(a):null,n=i(r)?e(r,{responseType:\"image\",signal:a}).then((e=>e.data)):o.then((e=>e.mask)),l=i(s)?e(s,{responseType:\"image\",signal:a}).then((e=>e.data)):o.then((e=>e.overlay)),[h,m]=await Promise.all([n,l]);this.mask=h,this.overlay=m,this._disposeRenderResources(),this.requestRender()}))}_disposeRenderResources(){this._readbackTexture=a(this._readbackTexture),this._overlayTexture=a(this._overlayTexture),this._maskTexture=a(this._maskTexture),this._vertexArrayObject=a(this._vertexArrayObject),this._program=a(this._program)}_updateResources(e){if(e.pixelRatio!==this._resourcePixelRatio&&this._disposeRenderResources(),this._readbackTexture)return;const r=e.context;this._resourcePixelRatio=e.pixelRatio;const s=Math.ceil(this._magnifier.size*e.pixelRatio);this._program=_(r);const t={geometry:[{name:\"a_pos\",count:2,type:5123,offset:0,stride:4,normalized:!1,divisor:0}]},i=new Uint16Array([0,1,0,0,1,1,1,0]),a=f.attributes;this._vertexArrayObject=new u(r,a,t,{geometry:m.createVertex(r,35044,i)}),this.overlay.width=s,this.overlay.height=s,this._overlayTexture=new c(r,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9728,flipped:!0,preMultiplyAlpha:!n(this.overlay.src)||!e.context.driverTest.svgAlwaysPremultipliesAlpha},this.overlay),this.mask.width=s,this.mask.height=s,this._maskTexture=new c(r,{target:3553,pixelFormat:6406,internalFormat:6406,dataType:5121,wrapMode:33071,samplingMode:9728,flipped:!0},this.mask);const o=1/this._magnifier.factor;this._readbackTexture=new c(r,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:Math.ceil(o*s),height:Math.ceil(o*s)})}}export{b as default};\n"],"sourceRoot":"webpack:///","file":"6390.01c0cb295702d7c7c82e.js"}