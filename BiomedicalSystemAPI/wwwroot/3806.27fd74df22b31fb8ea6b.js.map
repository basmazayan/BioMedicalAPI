{"version":3,"file":"3806.27fd74df22b31fb8ea6b.js","mappings":"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","sources":["./node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","./node_modules/@arcgis/core/views/2d/layers/TileLayerView2D.js","./node_modules/@arcgis/core/views/layers/TileLayerView.js","./node_modules/@arcgis/core/views/support/drapedUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import i from\"../../../core/Logger.js\";import{isAbortError as s}from\"../../../core/promiseUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{BitmapTileLayerView2D as l}from\"./BitmapTileLayerView2D.js\";import{LayerView2DMixin as o}from\"./LayerView2D.js\";import{createBlankImage as h,resampleImage as n}from\"./support/imageUtils.js\";import c from\"../tiling/TileInfoView.js\";import u from\"../tiling/TileKey.js\";import p from\"../tiling/TileQueue.js\";import f from\"../tiling/TileStrategy.js\";import m from\"../../layers/LayerView.js\";import{RefreshableLayerView as y}from\"../../layers/RefreshableLayerView.js\";import{TileLayerView as w}from\"../../layers/TileLayerView.js\";import{createQueryGeometry as g}from\"../../support/drapedUtils.js\";const d=i.getLogger(\"esri.views.2d.layers.TileLayerView2D\"),_=[0,0];let I=class extends(w(y(l(o(m))))){constructor(){super(...arguments),this._tileStrategy=null,this._fetchQueue=null,this.layer=null}initialize(){const e=this.layer.tileInfo,i=e&&e.spatialReference;let s;i||(s=new t(\"layerview:tiling-information-missing\",\"The layer doesn't provide tiling information\",{layer:this.layer})),i.equals(this.view.spatialReference)||(s=new t(\"layerview:spatial-reference-incompatible\",\"The spatial reference of this layer does not meet the requirements of the view\",{layer:this.layer})),this.watch(\"resampling\",(()=>{this.doRefresh()})),s&&this.addResolvingPromise(Promise.reject(s))}get resampling(){return!(\"resampling\"in this.layer)||!1!==this.layer.resampling}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume(),this.notifyChange(\"updating\")}attach(){const e=\"tileServers\"in this.layer?this.layer.tileServers:null;this._tileInfoView=new c(this.layer.tileInfo,this.layer.fullExtent),this._fetchQueue=new p({tileInfoView:this._tileInfoView,concurrency:e&&10*e.length||10,process:(e,t)=>this.fetchTile(e,t)}),this._tileStrategy=new f({cachePolicy:\"keep\",resampling:this.resampling,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView}),this.requestUpdate(),this.container.requestRender(),super.attach()}detach(){super.detach(),this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}createFetchPopupFeaturesQueryGeometry(e,t){return g(e,t,this.view)}async doRefresh(){this.updateRequested||this.suspended||(this._fetchQueue.reset(),this._tileStrategy.tiles.forEach((e=>this._enqueueTileFetch(e))),this.notifyChange(\"updating\"))}isUpdating(){var e;return(null==(e=this._fetchQueue)?void 0:e.length)>0}acquireTile(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return[i.x,i.y]=this._tileInfoView.getTileCoords(_,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._enqueueTileFetch(t),this._bitmapView.addChild(t),this.requestUpdate(),t}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once(\"detach\",(()=>e.destroy())),this.requestUpdate()}async fetchTile(e,t={}){const i=\"tilemapCache\"in this.layer?this.layer.tilemapCache:null,{signal:r,resamplingLevel:a=0}=t;if(!i)try{return await this._fetchImage(e,r)}catch(c){if(!s(c)&&!this.resampling)return h(this._tileInfoView.tileInfo.size);if(a<3){const i=this._tileInfoView.getTileParentId(e.id);if(i){const s=new u(i),r=await this.fetchTile(s,{...t,resamplingLevel:a+1});return n(this._tileInfoView,r,s,e)}}throw c}const l=new u(0,0,0,0);let o;try{if(await i.fetchAvailabilityUpsample(e.level,e.row,e.col,l,{signal:r}),l.level!==e.level&&!this.resampling)return h(this._tileInfoView.tileInfo.size);o=await this._fetchImage(l,r)}catch(c){if(s(c))throw c;o=await this._fetchImage(e,r)}return this.resampling?n(this._tileInfoView,o,l,e):o}async _enqueueTileFetch(e){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key);e.bitmap.source=t,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.once(\"attach\",(()=>this.requestUpdate()))}catch(t){s(t)||d.error(t)}this.requestUpdate()}}async _fetchImage(e,t){return this.layer.fetchTile(e.level,e.row,e.col,{signal:t})}};e([r()],I.prototype,\"resampling\",null),I=e([a(\"esri.views.2d.layers.TileLayerView2D\")],I);const T=I;export{T as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{isSome as t}from\"../../core/maybe.js\";import{eachAlways as o}from\"../../core/promiseUtils.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{calculateTolerance as p}from\"../../renderers/support/clickToleranceUtils.js\";const i=i=>{let c=class extends i{async fetchPopupFeatures(e,s){const{layer:a}=this;if(!e)return Promise.reject(new r(\"tilelayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:a}));if(\"tile\"!==a.type)return Promise.reject(new r(\"tilelayerview:fetchPopupFeatures\",\"Layer type should be 'tile'\",{type:a.type}));const i=this.get(\"view.scale\"),c=a.allSublayers.toArray().filter((e=>{const r=0===e.minScale||i<=e.minScale,t=0===e.maxScale||i>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&r&&t}));return o(c.map((async r=>{const o=r.createQuery(),a=t(s)?s.event:null,i=p({renderer:r.renderer,event:a});o.geometry=this.createFetchPopupFeaturesQueryGeometry(e,i),o.outFields=await r.popupTemplate.getRequiredFields();return(await r.queryFeatures(o)).features}))).then((e=>[].concat(...e.map((e=>e.value)).filter(Boolean))))}};return e([s()],c.prototype,\"layer\",void 0),c=e([a(\"esri.layers.mixins.TileLayerView\")],c),c};export{i as TileLayerView,i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{isSome as e,isNone as t}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as r}from\"../../core/unitUtils.js\";import{calculateTolerance as n}from\"../../renderers/support/clickToleranceUtils.js\";import i from\"../../geometry/Extent.js\";function a(t,n,a,o=new i){let s;if(\"2d\"===a.type)s=n*a.resolution;else if(\"3d\"===a.type){const i=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?r(o)/r(a.spatialReference):n*i}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,i){const o=i.toMap(e);if(t(o))return!1;return a(o,n(),i,s).intersects(r)}const s=new i;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n"],"names":["_","e","t","i","isAbortError","s","property","r","subclass","a","BitmapTileLayerView2D","l","LayerView2DMixin","o","createBlankImage","h","resampleImage","n","c","u","p","f","m","RefreshableLayerView","y","TileLayerView","w","createQueryGeometry","g","d","getLogger","I","constructor","arguments","_tileStrategy","_fetchQueue","layer","initialize","tileInfo","spatialReference","equals","view","watch","doRefresh","addResolvingPromise","Promise","reject","resampling","update","pause","state","resume","notifyChange","attach","tileServers","_tileInfoView","fullExtent","tileInfoView","concurrency","length","process","fetchTile","cachePolicy","acquireTile","releaseTile","requestUpdate","container","requestRender","detach","destroy","clear","removeAllChildren","moveStart","viewChange","moveEnd","createFetchPopupFeaturesQueryGeometry","updateRequested","suspended","reset","tiles","forEach","_enqueueTileFetch","isUpdating","_bitmapView","createTile","bitmap","x","getTileCoords","key","resolution","getTileResolution","width","height","size","addChild","abort","id","removeChild","once","tilemapCache","signal","resamplingLevel","_fetchImage","getTileParentId","fetchAvailabilityUpsample","level","row","col","has","push","source","error","prototype","T","default","isSome","eachAlways","calculateTolerance","fetchPopupFeatures","type","get","allSublayers","toArray","filter","minScale","maxScale","popupTemplate","popupEnabled","visible","map","createQuery","event","renderer","geometry","outFields","getRequiredFields","queryFeatures","features","then","concat","value","Boolean"],"sourceRoot":"webpack:///"}