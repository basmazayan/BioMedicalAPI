{"version":3,"mappings":"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","names":["R","constructor","super","renderChildren","this","createRenderParams","state","u","prepareRenderPasses","name","T","drawPhase","h","target","v","D","y","getStencilTarget","updateTransforms","setStencilReference","b","destroy","setTransform","k","X","o","e","_createTransforms","dvs","tileMat3","I","onAttach","onDetach","$","createTile","ne","destroyTile","O","N","doRender","_getTileBounds","S","tileInfo","i","resolution","t","arguments","_emptyTilePixelBlock","_tileStrategy","_tileInfoView","_fetchQueue","_blockCacheRegistryUrl","_blockCacheRegistryId","_srcResolutions","previousLOD","_needBlockCacheUpdate","_globalSymbolizerParams","_symbolizerParams","_abortController","_isCustomTilingScheme","_globalUpdateRequested","container","layer","redrawOrRefetch","a","layerView","suspended","Promise","resolve","doRefresh","_redrawImage","_get","_set","useProgressiveUpdate","removeAllChildren","_getCacheSize","C","cachePolicy","acquireTile","releaseTile","cacheSize","tileInfoView","requestUpdate","update","pause","resume","extent","scale","s","r","getClosestInfoForScale","raster","l","level","toJSON","V","d","ioConfig","sampling","hasTilingEffects","_updateSymbolizerParams","updateCacheSize","moveEnd","abort","AbortController","length","signal","then","updatingHandles","updating","attach","supportsTextureFloat","useWebGLForProcessing","_initializeTileInfo","fullExtent","_computeFetchConcurrency","P","concurrency","process","_fetchTile1","_updateBlockCacheRegistry","_enqueueTileFetch","key","id","removeChild","once","uninstall","clear","notifyChange","g","createEmptyTilePixelBlock","join","size","width","height","pixels","Uint8Array","mask","pixelType","canUseWebGLForProcessing","allowPartialFill","datumTransformation","interpolation","registryId","requestRawData","srcResolution","timeExtent","fetchTile","view","spatialReference","x","xmin","ymax","scales","srcResolutions","isCustomTilingScheme","w","rasterInfo","p","origin","set","blockBoundary","storageInfo","maxCol","minCol","maxRow","minRow","has","push","bandIds","moving","error","type","getTileCoords","getTileResolution","updateTileSource","source","symbolizerParams","globalSymbolizerParams","coords","addChild","children","addPromise","updateRenderer","_updateGlobalSymbolizerParams","map","updateTileSymbolizerParameters","local","global","n","requestRender","fetchPixels","pixelBlock","symbolizer","generateWebGLParameters","f","isGCS","isGeographic","renderer","factor","outMin","Math","round","outMax","url","multidimensionalDefinition","normalizeRasterFetchOptions","multidimensionalInfo","getSliceIndex","_","m","reset","tiles","forEach","prototype","c","canRenderInWebGL","row","col","_getLayerInterpolation","bitmap","rawPixelData","isRendereredSource","applyRenderer","symbolizerParameters","transformGrid","invalidateTexture","install","remove","colorRamp","Te","JSON","invalidateVAO","updateVectorFieldVAO","style","magdir","scalar","W","_createVectorFieldVAO","vertexData","ie","geometry","location","vao","we","Ie","symbolTileSize","Ce","Re","_handle","dataType","convertVectorFieldData","tileData","offset","_getTileSymbolOffset","_sampleVectorFieldData","_updateSymbolType","watch","symbolTypes","_rasterFieldPrefix","dynamicRangeAdjustment","fetchPopupFeatures","reject","popupEnabled","popupTemplate","value","magdirValue","identify","hasStandardTime","getStandardTimeValue","ObjectId","_formatAttributeValue","attributeTable","features","filter","attributes","Value","VALUE","String","hasOwnProperty","clone","sourceLayer","updateFullExtent","fieldInfos","_getFieldInfo","format","trim","indexOf","_formatDelimitedString","_formatNumberFromString","toLowerCase","some","fieldName","replace","split","Number","isNaN","readOnly","_useWebGLForProcessing","_useProgressiveUpdate","subview","initialize","addResolvingPromise","isUpdating","increaseRasterJobHandlerUsage","_updateSubview","handles","add","catch","blendMode","effect","detach","decreaseRasterJobHandlerUsage","moveStart","viewChange","hitTest","Xn","esriGeometryPoint","bandCount","getRequiredFields","fieldsIndex","lastEditInfoEnabled","objectIdField","typeIdField","globalIdField","relationships","includes","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate"],"sources":["./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js","./node_modules/@arcgis/core/views/2d/engine/webgl/TiledDisplayObject.js","./node_modules/@arcgis/core/views/2d/engine/RasterTile.js","./node_modules/@arcgis/core/views/2d/engine/RasterTileContainer.js","./node_modules/@arcgis/core/views/2d/layers/imagery/BaseImageryTileSubView2D.js","./node_modules/@arcgis/core/views/2d/layers/imagery/ImageryTileView2D.js","./node_modules/@arcgis/core/views/2d/engine/RasterVFDisplayObject.js","./node_modules/@arcgis/core/views/2d/engine/RasterVFTile.js","./node_modules/@arcgis/core/views/2d/engine/RasterVFTileContainer.js","./node_modules/@arcgis/core/views/2d/layers/imagery/VectorFieldTileView2D.js","./node_modules/@arcgis/core/views/layers/ImageryTileLayerView.js","./node_modules/@arcgis/core/views/2d/layers/ImageryTileLayerView2D.js","./node_modules/@arcgis/core/views/2d/layers/support/util.js","./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js","./node_modules/@arcgis/core/views/layers/support/popupUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/has.js\";import{WGLDrawPhase as r}from\"./enums.js\";import s from\"./WGLContainer.js\";import t from\"./brushes/WGLBrushInfo.js\";import n from\"./brushes/WGLBrushStencil.js\";const i=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;class o extends s{constructor(e){super(),this._tileInfoView=e}get requiresDedicatedFBO(){return!1}renderChildren(e){this.sortChildren(i),this.setStencilReference(),super.renderChildren(e)}createRenderParams(e){const{state:r}=e,s=super.createRenderParams(e);return s.requiredLevel=this._tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(r.scale),s}prepareRenderPasses(s){const i=super.prepareRenderPasses(s);return i.push(s.registerRenderPass({name:\"stencil\",brushes:[n],drawPhase:r.DEBUG|r.MAP|r.HIGHLIGHT,target:()=>this.getStencilTarget()})),e(\"esri-tiles-debug\")&&i.push(s.registerRenderPass({name:\"tileInfo\",brushes:[t],drawPhase:r.DEBUG,target:()=>this.children})),i}getStencilTarget(){return this.children}updateTransforms(e){for(const r of this.children){const s=this._tileInfoView.getTileResolution(r.key);r.setTransform(e,s)}}setStencilReference(){let e=1;for(const r of this.children)r.stencilRef=e++}}export{o as default,i as sortByLevel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{s as t,m as s}from\"../../../../chunks/mat3.js\";import{DisplayObject as i}from\"../DisplayObject.js\";import e from\"../../tiling/TileKey.js\";class r extends i{constructor(t,s,i,r,h,o=r,n=h){super(),this.triangleCountReportedInDebug=0,this.triangleCount=0,this.texture=null,this.key=new e(t),this.x=s,this.y=i,this.width=r,this.height=h,this.rangeX=o,this.rangeY=n}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}setTransform(i,e){const r=e/(i.resolution*i.pixelRatio),h=this.transforms.tileMat3,[o,n]=i.toScreenNoRotation([0,0],[this.x,this.y]),a=this.width/this.rangeX*r,l=this.height/this.rangeY*r;t(h,a,0,0,0,l,0,o,n,1),s(this.transforms.dvs,i.displayViewMat3,h)}}export{r as TiledDisplayObject};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{c as t}from\"../../../chunks/mat3f32.js\";import{RasterBitmap as s}from\"./RasterBitmap.js\";import{TiledDisplayObject as e}from\"./webgl/TiledDisplayObject.js\";class i extends e{constructor(t,e,i,r,a,n=null){super(t,e,i,r,a),this.bitmap=new s(n,null,null),this.bitmap.coordScale=[r,a],this.bitmap.once(\"isReady\",(()=>this.ready()))}destroy(){super.destroy(),this.bitmap.destroy(),this.bitmap=null,this.stage=null}set stencilRef(t){this.bitmap.stencilRef=t}get stencilRef(){return this.bitmap.stencilRef}setTransform(t,s){super.setTransform(t,s),this.bitmap.transforms.dvs=this.transforms.dvs}_createTransforms(){return{dvs:t(),tileMat3:t()}}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap.stage=null}}export{i as RasterTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../geometry/support/aaBoundingRect.js\";import{getWorldWidth as s}from\"../viewpointUtils.js\";import{brushes as r}from\"./brushes.js\";import{RasterTile as i}from\"./RasterTile.js\";import{WGLDrawPhase as t}from\"./webgl/enums.js\";import o from\"./webgl/TileContainer.js\";class n extends o{constructor(){super(...arguments),this.isCustomTilingScheme=!1}createTile(e){const s=this._getTileBounds(e),[r,t]=this._tileInfoView.tileInfo.size;return new i(e,s[0],s[3],r,t)}destroyTile(){}prepareRenderPasses(e){const s=e.registerRenderPass({name:\"imagery (tile)\",brushes:[r.raster],target:()=>this.children.map((e=>e.bitmap)),drawPhase:t.MAP});return[...super.prepareRenderPasses(e),s]}doRender(e){this.visible&&e.drawPhase===t.MAP&&super.doRender(e)}_getTileBounds(r){const i=this._tileInfoView.getTileBounds(e(),r);if(this.isCustomTilingScheme&&r.world){const{tileInfo:e}=this._tileInfoView,t=s(e.spatialReference);if(t){const{resolution:s}=e.lodAt(r.level),o=t/s%e.size[0],n=o?(e.size[0]-o)*s:0;i[0]-=n*r.world,i[2]-=n*r.world}}return i}}export{n as RasterTileContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import{HandleOwner as t}from\"../../../../core/HandleOwner.js\";import i from\"../../../../core/Logger.js\";import{isSome as s,isNone as r,unwrap as l}from\"../../../../core/maybe.js\";import{debounce as a,isAbortError as o,eachAlways as n}from\"../../../../core/promiseUtils.js\";import{property as h}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";import u from\"../../../../geometry/Point.js\";import y from\"../../../../layers/support/PixelBlock.js\";import p from\"../../../../layers/support/TileInfo.js\";import{update as d,unregister as g,register as m,getRasterId as _}from\"../../../../layers/support/rasterDatasets/RawBlockCache.js\";import{extractBands as f}from\"../../../../layers/support/rasterFunctions/pixelUtils.js\";import{computeProjectedScales as w}from\"../../../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import\"../../tiling/PagedTileQueue.js\";import b from\"../../tiling/TileInfoView.js\";import\"../../tiling/TileKey.js\";import P from\"../../tiling/TileQueue.js\";import C from\"../../tiling/TileStrategy.js\";import I from\"../../../webgl/capabilities.js\";import V from\"../../../../geometry/Extent.js\";const v=[0,0],R=i.getLogger(\"esri.views.2d.layers.ImageryTileLayerView2D\");let T=class extends t{constructor(){super(...arguments),this._emptyTilePixelBlock=null,this._tileStrategy=null,this._tileInfoView=null,this._fetchQueue=null,this._blockCacheRegistryUrl=null,this._blockCacheRegistryId=null,this._srcResolutions=null,this.previousLOD=null,this._needBlockCacheUpdate=!1,this._globalSymbolizerParams=null,this._symbolizerParams=null,this._abortController=null,this._isCustomTilingScheme=!1,this._globalUpdateRequested=!1,this.container=null,this.layer=null,this.redrawOrRefetch=a(((e,t)=>!this.previousLOD||this.layerView.suspended?Promise.resolve():e?this.doRefresh():this._redrawImage(t)))}get useWebGLForProcessing(){var e;return null==(e=this._get(\"useWebGLForProcessing\"))||e}set useWebGLForProcessing(e){this._set(\"useWebGLForProcessing\",e)}get useProgressiveUpdate(){return null==this._get(\"useProgressiveUpdate\")||this._get(\"useProgressiveUpdate\")}set useProgressiveUpdate(e){if(this._tileStrategy&&this.useProgressiveUpdate!==e){this._tileStrategy.destroy(),this.container.removeAllChildren();const t=this._getCacheSize(e);this._tileStrategy=new C({cachePolicy:\"purge\",acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),cacheSize:t,tileInfoView:this._tileInfoView}),this._set(\"useProgressiveUpdate\",e),this.layerView.requestUpdate()}}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume();const{extent:t,resolution:i,scale:s}=e.state,r=this._tileInfoView.getClosestInfoForScale(s);if(this.layer.raster){var l;if(!this.useProgressiveUpdate||this._needBlockCacheUpdate){const e=this._srcResolutions[r.level],s=t.toJSON?t:V.fromJSON(t);d(this._blockCacheRegistryUrl,this._blockCacheRegistryId,s,i,e,this.layer.raster.ioConfig.sampling)}this._needBlockCacheUpdate=!1,(null==(l=this.previousLOD)?void 0:l.level)!==r.level&&(this.previousLOD=r,null==this._symbolizerParams||this.layerView.hasTilingEffects||this._updateSymbolizerParams(),this._tileStrategy.updateCacheSize(0))}}moveEnd(){!this.layerView.hasTilingEffects&&this.useProgressiveUpdate||(this._abortController&&this._abortController.abort(),this._abortController=new AbortController,0===this._fetchQueue.length&&this._redrawImage(this._abortController.signal).then((()=>{this._globalUpdateRequested=!1,this.layerView.requestUpdate()})));const e=this._getCacheSize(this.useProgressiveUpdate);this._tileStrategy.updateCacheSize(e),this.layerView.requestUpdate()}get updating(){return this._fetchQueue.length>0||this._globalUpdateRequested||!(!this.updatingHandles||!this.updatingHandles.updating)}attach(){I().supportsTextureFloat||(this.useWebGLForProcessing=!1),this._initializeTileInfo(),this._tileInfoView=new b(this.layerView.tileInfo,this.layerView.fullExtent);const e=this._computeFetchConcurrency();this._fetchQueue=new P({tileInfoView:this._tileInfoView,concurrency:e,process:(e,t)=>this._fetchTile1(e,t)});const t=this._getCacheSize(this.useProgressiveUpdate);this._tileStrategy=new C({cachePolicy:\"purge\",acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),cacheSize:t,tileInfoView:this._tileInfoView}),this._updateBlockCacheRegistry()}acquireTile(e){const t=this.container.createTile(e);return this._enqueueTileFetch(t),this.layerView.requestUpdate(),this._needBlockCacheUpdate=!0,this._globalUpdateRequested=this.layerView.hasTilingEffects||!this.useProgressiveUpdate,t}releaseTile(e){this._fetchQueue.abort(e.key.id),this.container.removeChild(e),e.once(\"detach\",(()=>{e.destroy(),this.layerView.requestUpdate()})),this.layerView.requestUpdate()}uninstall(){this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null,this.notifyChange(\"updating\"),g(this._blockCacheRegistryUrl,this._blockCacheRegistryId)}createEmptyTilePixelBlock(e=null){const t=null==e||e.join(\",\")===this._tileInfoView.tileInfo.size.join(\",\");if(t&&s(this._emptyTilePixelBlock))return this._emptyTilePixelBlock;e=e||this._tileInfoView.tileInfo.size;const[i,r]=e,l=new y({width:i,height:r,pixels:[new Uint8Array(i*r)],mask:new Uint8Array(i*r),pixelType:\"u8\"});return t&&(this._emptyTilePixelBlock=l),l}_fetchTile1(e,t){const i=!r(t)&&t.signal,s=this.canUseWebGLForProcessing(),a={allowPartialFill:!0,datumTransformation:this.layerView.datumTransformation,interpolation:s?\"nearest\":this.layer.interpolation,registryId:this._blockCacheRegistryId,requestRawData:s,signal:l(i),srcResolution:this._srcResolutions[e.level],timeExtent:this.layerView.timeExtent,tileInfo:this.layerView.tileInfo};return this.fetchTile(e,a)}_getCacheSize(e){return e?40:0}_initializeTileInfo(){const e=this.layerView.view.spatialReference,t=new u({x:this.layerView.fullExtent.xmin,y:this.layerView.fullExtent.ymax,spatialReference:e}),{scales:i,srcResolutions:s,isCustomTilingScheme:r}=w(this.layer.rasterInfo,e),l=p.create({spatialReference:e,size:512,scales:i});(0===l.origin.x||l.origin.x>t.x)&&(l.origin=t),this._isCustomTilingScheme=r,this.layerView.set(\"tileInfo\",l),this._srcResolutions=null!=s?s:[]}_computeFetchConcurrency(){const{blockBoundary:e}=this.layer.rasterInfo.storageInfo,t=e[e.length-1];return(t.maxCol-t.minCol+1)*(t.maxRow-t.minRow+1)>64?2:10}async _enqueueTileFetch(e,t){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key);this.notifyChange(\"updating\");const{bandIds:s}=this.layer;let r=!this.useProgressiveUpdate||this.layerView.hasTilingEffects&&!this._globalSymbolizerParams;if(this._globalUpdateRequested&&!this.layerView.moving&&0===this._fetchQueue.length){r=!1;try{await this._redrawImage(this._abortController&&this._abortController.signal)}catch(i){o(i)&&R.error(i)}this._globalUpdateRequested=!1}!this.canUseWebGLForProcessing()&&\"rasterVF\"!==this.type||this.layerView.hasTilingEffects||null!=this._symbolizerParams||this._updateSymbolizerParams();const l=this._tileInfoView.getTileCoords(v,e.key),a=this._tileInfoView.getTileResolution(e.key);await this.updateTileSource(e,{source:t,symbolizerParams:this._symbolizerParams,globalSymbolizerParams:this._globalSymbolizerParams,suspended:r,bandIds:s,coords:l,resolution:a}),e.once(\"attach\",(()=>this.layerView.requestUpdate())),this.container.addChild(e)}catch(i){o(i)||R.error(i)}this.layerView.requestUpdate()}}async _redrawImage(e){if(0===this.container.children.length)return;await this.updatingHandles.addPromise(this.layer.updateRenderer()),this.layerView.hasTilingEffects?await this._updateGlobalSymbolizerParams(e):(this._updateSymbolizerParams(),this._globalSymbolizerParams=null);const t=this.container.children.map((async e=>this.updateTileSymbolizerParameters(e,{local:this._symbolizerParams,global:this._globalSymbolizerParams})));await n(t),this.container.requestRender()}async _updateGlobalSymbolizerParams(e){const t={srcResolution:this._srcResolutions[this.previousLOD.level],registryId:this._blockCacheRegistryId,signal:e},i=await this.layer.fetchPixels(this.layerView.view.extent,this.layerView.view.width,this.layerView.view.height,t);if(!i||!i.pixelBlock)return;const s=this.layer.symbolizer.generateWebGLParameters({pixelBlock:f(i.pixelBlock,this.layer.bandIds),isGCS:this.layerView.view.spatialReference.isGeographic,resolution:{x:this.previousLOD.resolution,y:this.previousLOD.resolution},bandIds:this.layer.bandIds});!this.canUseWebGLForProcessing()&&s&&\"stretch\"===s.type&&this.layer.renderer&&\"raster-stretch\"===this.layer.renderer.type&&(s.factor=s.factor.map((e=>255*e)),s.outMin=Math.round(255*s.outMin),s.outMax=Math.round(255*s.outMax)),this._globalSymbolizerParams=s}_updateSymbolizerParams(){this._symbolizerParams=this.layer.symbolizer.generateWebGLParameters({pixelBlock:null,isGCS:this.layerView.view.spatialReference.isGeographic,resolution:{x:this.previousLOD.resolution,y:this.previousLOD.resolution},bandIds:this.layer.bandIds})}_updateBlockCacheRegistry(e=!1){const{url:t,rasterInfo:i,raster:s}=this.layer,{multidimensionalDefinition:r}=this.layer.normalizeRasterFetchOptions({multidimensionalDefinition:this.layer.multidimensionalDefinition,timeExtent:this.layerView.timeExtent}),l=null!=i&&i.multidimensionalInfo?s.getSliceIndex(r):null,a=_(t,l);if(a!==this._blockCacheRegistryUrl){if(null!=this._blockCacheRegistryUrl&&g(this._blockCacheRegistryUrl,this._blockCacheRegistryId),this._blockCacheRegistryId=m(a,this.layer.raster.rasterInfo),e){const e=this._tileInfoView.getClosestInfoForScale(this.layerView.view.scale),t=this._srcResolutions[e.level];d(a,this._blockCacheRegistryId,this.layerView.view.extent,this.layerView.view.resolution,t,this.layer.raster.ioConfig.sampling)}this._blockCacheRegistryUrl=a}}async doRefresh(){await this.updatingHandles.addPromise(this.layer.updateRenderer()),this.layerView.hasTilingEffects||this._updateSymbolizerParams(),this._updateBlockCacheRegistry(!0),this._fetchQueue.reset(),this.notifyChange(\"updating\");const e=[];this._tileStrategy.tiles.forEach((t=>e.push(this._enqueueTileFetch(t)))),await n(e)}};e([h()],T.prototype,\"_globalUpdateRequested\",void 0),e([h()],T.prototype,\"container\",void 0),e([h()],T.prototype,\"layer\",void 0),e([h()],T.prototype,\"layerView\",void 0),e([h()],T.prototype,\"type\",void 0),e([h()],T.prototype,\"useWebGLForProcessing\",null),e([h()],T.prototype,\"useProgressiveUpdate\",null),e([h()],T.prototype,\"updating\",null),T=e([c(\"esri.views.2d.layers.imagery.BaseImageryTileSubView2D\")],T);export{T as BaseImageryTileSubView2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{isSome as r}from\"../../../../core/maybe.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{RasterTileContainer as i}from\"../../engine/RasterTileContainer.js\";import{BaseImageryTileSubView2D as o}from\"./BaseImageryTileSubView2D.js\";import{canUseMajorityInterpolationOnDataSource as l}from\"../support/util.js\";let n=class extends o{constructor(){super(...arguments),this.container=null,this.layer=null,this.type=\"raster\"}canUseWebGLForProcessing(){return this.useWebGLForProcessing&&this.layer.symbolizer.canRenderInWebGL&&!(\"majority\"===this.layer.interpolation&&l(this.layer))}fetchTile(e,r){return this.layer.fetchTile(e.level,e.row,e.col,r)}async updateTileSource(e,t){const{bandIds:s}=this.layer,i=this._getLayerInterpolation(),o=this.canUseWebGLForProcessing(),{source:l,symbolizerParams:n,globalSymbolizerParams:a,suspended:c,coords:p,resolution:u}=t,{bitmap:d}=e;if([d.x,d.y]=p,d.resolution=u,l&&r(l)&&r(l.pixelBlock)){const e={extent:l.extent,pixelBlock:l.pixelBlock};if(d.rawPixelData=e,o)d.source=l.pixelBlock,d.isRendereredSource=!1;else{const r=await this.layer.applyRenderer(e,\"stretch\"===(null==a?void 0:a.type)?a:null);d.source=r,d.isRendereredSource=!0}d.symbolizerParameters=o?n:null,o?d.transformGrid||(d.transformGrid=l.transformGrid):d.transformGrid=null}else{const e=this.createEmptyTilePixelBlock();d.source=e,d.symbolizerParameters=o?n:null,d.transformGrid=null}d.bandIds=o?s:null,d.width=this._tileInfoView.tileInfo.size[0],d.height=this._tileInfoView.tileInfo.size[1],d.interpolation=i,d.suspended=c,d.invalidateTexture()}async updateTileSymbolizerParameters(e,t){const{local:s,global:i}=t,{bandIds:o}=this.layer,l=this._getLayerInterpolation(),n=this.canUseWebGLForProcessing(),{bitmap:a}=e,{rawPixelData:c}=a;!n&&r(c)?(a.source=await this.layer.applyRenderer(c,\"stretch\"===(null==i?void 0:i.type)?i:null),a.isRendereredSource=!0):(a.isRendereredSource&&r(c)&&(a.source=c.pixelBlock),a.isRendereredSource=!1),a.symbolizerParameters=n?i||s:null,a.bandIds=n?o:null,a.interpolation=l,a.suspended=!1}install(e){this.container=new i(this._tileInfoView),this.container.isCustomTilingScheme=this._isCustomTilingScheme,e.addChild(this.container)}uninstall(){this.container.removeAllChildren(),this.container.remove(),super.uninstall()}_getLayerInterpolation(){const e=this.layer.renderer.type;if(\"raster-colormap\"===e||\"unique-value\"===e||\"class-breaks\"===e)return\"nearest\";const{interpolation:r}=this.layer,{renderer:t}=this.layer;return\"raster-stretch\"===t.type&&null!=t.colorRamp?\"bilinear\"===r||\"cubic\"===r?\"bilinear\":\"nearest\":r}};e([t()],n.prototype,\"container\",void 0),e([t()],n.prototype,\"layer\",void 0),e([t()],n.prototype,\"type\",void 0),n=e([s(\"esri.views.2d.layers.imagery.ImageryTileView2D\")],n);const a=n;export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../core/has.js\";import{isSome as e}from\"../../../core/maybe.js\";import{c as t}from\"../../../chunks/mat3f32.js\";import{createVFMesh as a,createVFMeshScalar as s}from\"../../../layers/support/rasterFunctions/vectorFieldUtils.js\";import r from\"../../webgl/BufferObject.js\";import\"../../webgl/FramebufferObject.js\";import\"../../webgl/checkWebGLError.js\";import\"../../webgl/enums.js\";import\"../../../chunks/builtins.js\";import\"../../webgl/Texture.js\";import i from\"../../webgl/VertexArrayObject.js\";import{DisplayObject as o}from\"./DisplayObject.js\";import{createProgramDescriptor as l}from\"./webgl/Utils.js\";class c extends o{constructor(e=null){super(),this._source=null,this._symbolizerParameters=null,this._vaoInvalidated=!0,this.coordScale=[1,1],this.height=null,this.stencilRef=0,this.rawPixelData=null,this.width=null,this.source=e}destroy(){var t,a;e(this.vaoData)&&(null==(t=this.vaoData.magdir)||t.vao.dispose(),null==(a=this.vaoData.scalar)||a.vao.dispose(),this.vaoData=null)}get symbolizerParameters(){return this._symbolizerParameters}set symbolizerParameters(e){JSON.stringify(this._symbolizerParameters)!==JSON.stringify(e)&&(this._symbolizerParameters=e,this.invalidateVAO())}get source(){return this._source}set source(e){this._source=e,this.invalidateVAO()}invalidateVAO(){var t,a;!this._vaoInvalidated&&e(this.vaoData)&&(null==(t=this.vaoData.magdir)||t.vao.dispose(),null==(a=this.vaoData.scalar)||a.vao.dispose(),this.vaoData=null,this._vaoInvalidated=!0,this.requestRender())}updateVectorFieldVAO(t){if(this._vaoInvalidated){if(this._vaoInvalidated=!1,e(this.source)&&!e(this.vaoData)){const{style:e}=this.symbolizerParameters;switch(e){case\"beaufort_ft\":case\"beaufort_km\":case\"beaufort_kn\":case\"beaufort_m\":case\"beaufort_mi\":case\"classified_arrow\":case\"ocean_current_kn\":case\"ocean_current_m\":case\"single_arrow\":{const e=a(this.source,this.symbolizerParameters),s=this._createVectorFieldVAO(t.context,e);this.vaoData={magdir:s}}break;case\"simple_scalar\":{const e=s(this.source,this.symbolizerParameters),a=this._createVectorFieldVAO(t.context,e);this.vaoData={scalar:a}}break;case\"wind_speed\":{const e=a(this.source,this.symbolizerParameters),r=this._createVectorFieldVAO(t.context,e),i=s(this.source,this.symbolizerParameters),o=this._createVectorFieldVAO(t.context,i);this.vaoData={magdir:r,scalar:o}}}}this.ready(),this.requestRender()}}_createTransforms(){return{dvs:t()}}onAttach(){this.invalidateVAO()}onDetach(){this.invalidateVAO()}_createVectorFieldVAO(e,t){const{vertexData:a,indexData:s}=t,o=r.createVertex(e,35044,new Float32Array(a)),c=r.createIndex(e,35044,new Uint32Array(s)),n=l(\"vector-field\",{geometry:[{location:0,name:\"a_pos\",count:2,type:5126,normalized:!1},{location:1,name:\"a_offset\",count:2,type:5126,normalized:!1},{location:2,name:\"a_vv\",count:2,type:5126,normalized:!1}]});return{vao:new i(e,n.attributes,n.bufferLayouts,{geometry:o},c),elementCount:s.length}}}export{c as RasterVFDisplayObject};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{s as t,m as s}from\"../../../chunks/mat3.js\";import{c as e}from\"../../../chunks/mat3f32.js\";import{RasterVFDisplayObject as a}from\"./RasterVFDisplayObject.js\";import{TiledDisplayObject as i}from\"./webgl/TiledDisplayObject.js\";class r extends i{constructor(t,s,e,i,r,o=null){super(t,s,e,i,r),this.tileData=new a(o),this.tileData.coordScale=[i,r],this.tileData.once(\"isReady\",(()=>this.ready()))}destroy(){super.destroy(),this.tileData.destroy(),this.tileData=null,this.stage=null}set stencilRef(t){this.tileData.stencilRef=t}get stencilRef(){return this.tileData.stencilRef}_createTransforms(){return{dvs:e(),tileMat3:e()}}setTransform(e,a){super.setTransform(e,a);const i=a/(e.resolution*e.pixelRatio),r=this.transforms.tileMat3,[o,l]=this.tileData.offset,h=[this.x+o*a,this.y-l*a],[n,f]=e.toScreenNoRotation([0,0],h),{symbolTileSize:m}=this.tileData.symbolizerParameters,c=Math.round((this.width-this.tileData.offset[0])/m)*m,D=Math.round((this.height-this.tileData.offset[1])/m)*m,d=c/this.rangeX*i,u=D/this.rangeY*i;t(r,d,0,0,0,u,0,n,f,1),s(this.transforms.dvs,e.displayViewMat3,r),this.tileData.transforms.dvs=this.transforms.dvs}onAttach(){this.tileData.stage=this.stage}onDetach(){this.tileData.stage=null}}export{r as RasterVFTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../geometry/support/aaBoundingRect.js\";import{RasterVFTile as s}from\"./RasterVFTile.js\";import{WGLDrawPhase as r}from\"./webgl/enums.js\";import t from\"./webgl/TileContainer.js\";import i from\"./webgl/brushes/raster/BrushVectorField.js\";class o extends t{constructor(){super(...arguments),this.isCustomTilingScheme=!1,this.symbolTypes=[\"triangle\"]}createTile(r){const t=this._tileInfoView.getTileBounds(e(),r),[i,o]=this._tileInfoView.tileInfo.size;return new s(r,t[0],t[3],i,o)}destroyTile(){}prepareRenderPasses(e){const s=e.registerRenderPass({name:\"imagery (vf tile)\",brushes:[i],target:()=>this.children.map((e=>e.tileData)),drawPhase:r.MAP});return[...super.prepareRenderPasses(e),s]}doRender(e){this.visible&&e.drawPhase===r.MAP&&this.symbolTypes.forEach((s=>{e.renderPass=s,super.doRender(e)}))}}export{o as RasterVFTileContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{isSome as t}from\"../../../../core/maybe.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{sampleVectorField as s}from\"../../../../layers/support/rasterFunctions/vectorFieldUtils.js\";import{RasterVFTileContainer as o}from\"../../engine/RasterVFTileContainer.js\";import{BaseImageryTileSubView2D as l}from\"./BaseImageryTileSubView2D.js\";let a=class extends l{constructor(){super(...arguments),this._handle=null,this.container=null,this.layer=null,this.type=\"rasterVF\"}canUseWebGLForProcessing(){return!1}async fetchTile(e,t){const i=await this.layer.fetchTile(e.level,e.row,e.col,t);return\"vector-magdir\"===this.layer.rasterInfo.dataType&&null!=i&&i.pixelBlock&&(i.pixelBlock=await this.layer.convertVectorFieldData(i.pixelBlock,t)),i}updateTileSource(e,i){const r=i.symbolizerParams,{tileData:s}=e;s.key=e.key,s.width=this._tileInfoView.tileInfo.size[0],s.height=this._tileInfoView.tileInfo.size[1];const{symbolTileSize:o}=r,{source:l}=i;if(s.offset=this._getTileSymbolOffset(s.key,o),t(l)&&t(l.pixelBlock)){const e={extent:l.extent,pixelBlock:l.pixelBlock};s.rawPixelData=e,s.source=this._sampleVectorFieldData(l.pixelBlock,r,s.offset),s.symbolizerParameters=r}else{const e=[Math.round((this._tileInfoView.tileInfo[0]-s.offset[0])/o),Math.round((this._tileInfoView.tileInfo[1]-s.offset[1])/o)],t=this.createEmptyTilePixelBlock(e);s.source=t,s.symbolizerParameters=r}return s.invalidateVAO(),Promise.resolve(null)}updateTileSymbolizerParameters(e,i){var r;const s=i.local,{symbolTileSize:o}=s,{tileData:l}=e;l.offset=this._getTileSymbolOffset(l.key,o);const a=l.symbolizerParameters.symbolTileSize;return l.symbolizerParameters=s,t(null==(r=l.rawPixelData)?void 0:r.pixelBlock)&&a!==o&&(l.source=this._sampleVectorFieldData(l.rawPixelData.pixelBlock,l.symbolizerParameters,l.offset)),Promise.resolve(null)}install(e){this.container=new o(this._tileInfoView),this.container.isCustomTilingScheme=this._isCustomTilingScheme,this._updateSymbolType(this.layer.renderer),this._handle=this.layer.watch(\"renderer\",(e=>this._updateSymbolType(e))),e.addChild(this.container)}uninstall(){this.container.removeAllChildren(),this._handle.remove(),this._handle=null,this.container.remove(),super.uninstall()}_getTileSymbolOffset(e,t){const i=e.col*this._tileInfoView.tileInfo.size[0]%t,r=e.row*this._tileInfoView.tileInfo.size[1]%t;return[i>t/2?t-i:-i,r>t/2?t-r:-r]}_sampleVectorFieldData(e,t,i){const{symbolTileSize:r}=t;return s(e,\"vector-uv\",r,i)}_updateSymbolType(e){\"vector-field\"===e.type&&(this.container.symbolTypes=\"wind-barb\"===e.style?[\"scalar\",\"triangle\"]:\"simple-scalar\"===e.style?[\"scalar\"]:[\"triangle\"])}};e([i()],a.prototype,\"container\",void 0),e([i()],a.prototype,\"layer\",void 0),e([i()],a.prototype,\"type\",void 0),a=e([r(\"esri.views.2d.layers.imagery.VectorFieldTileView2D\")],a);const n=a;export{n as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../Graphic.js\";import r from\"../../core/Error.js\";import{isSome as i,isNone as o}from\"../../core/maybe.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as n}from\"../../layers/support/commonProperties.js\";import{getDefaultDatumTransformationForDataset as l,projectExtent as u}from\"../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{getFetchPopupTemplate as p}from\"./support/popupUtils.js\";const m=m=>{let f=class extends m{constructor(){super(...arguments),this._rasterFieldPrefix=\"Raster.\",this.layer=null,this.view=null,this.fullExtent=null,this.tileInfo=null,this.datumTransformation=null}get hasTilingEffects(){return this.layer.renderer&&\"dynamicRangeAdjustment\"in this.layer.renderer&&this.layer.renderer.dynamicRangeAdjustment}async fetchPopupFeatures(e,o){const{layer:s}=this;if(!e)return Promise.reject(new r(\"imageryTileLayerView:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:s}));const{popupEnabled:a}=s,n=p(s,o);if(!a||!i(n))throw new r(\"imageryTileLayerView:fetchPopupFeatures\",\"Missing required popupTemplate or popupEnabled\",{popupEnabled:a,popupTemplate:n});const l=[],{value:u,magdirValue:m}=await s.identify(e,{timeExtent:this.timeExtent});let f=\"\";if(u&&u.length){var c,h;f=\"imagery-tile\"===s.type&&s.hasStandardTime()&&null!=u[0]?u.map((e=>s.getStandardTimeValue(e))).join(\", \"):u.join(\", \");const e={ObjectId:0},r=\"Raster.ServicePixelValue\";e[r]=this._formatAttributeValue(f,r);const i=null==(c=s.rasterInfo)||null==(h=c.attributeTable)?void 0:h.features;if(i&&i.length>0){const t=i.filter((e=>{const t=e.attributes.value||e.attributes.Value||e.attributes.VALUE;return String(t)===f}));if(t.length>0){const r=t[0];if(r)for(const t in r.attributes)if(r.attributes.hasOwnProperty(t)){const i=this._rasterFieldPrefix+t;e[i]=this._formatAttributeValue(r.attributes[t],i)}}}const o=s.rasterInfo.dataType;\"vector-magdir\"!==o&&\"vector-uv\"!==o||(e[\"Raster.Magnitude\"]=null==m?void 0:m[0],e[\"Raster.Direction\"]=null==m?void 0:m[1]);const a=new t(this.fullExtent.clone(),null,e);a.layer=s,a.sourceLayer=a.layer,l.push(a)}return l}updateFullExtent(){const e=this.layer.tileInfo;if(!(e&&e.spatialReference))return Promise.reject(new r(\"layerview:tiling-information-missing\",\"The layer doesn't provide tiling information\",{layer:this.layer}));if(o(this.layer.fullExtent))return Promise.reject(new r(\"layerview:extent-missing\",\"The layer doesn't provide a full extent.\",{layer:this.layer}));const t=l(this.layer.fullExtent,this.view.spatialReference,!1),i=u(this.layer.fullExtent,this.view.spatialReference,t);return null==i?Promise.reject(new r(\"layerview:projection-not-supported\",\"The layer extent cannot be projected to the view's spatial reference\",{layer:this.layer})):(this._set(\"fullExtent\",i),this.datumTransformation||(this.datumTransformation=l(this.layer.fullExtent,this.view.spatialReference,!0)),Promise.resolve())}_formatAttributeValue(e,t){if(\"string\"==typeof e){const r=this.layer.popupTemplate&&this.layer.popupTemplate.fieldInfos,i=this._getFieldInfo(r,t),o=i&&i.format;if(o){let t,r;return e.trim().indexOf(\",\")>-1?(t=\",\",r=t+\" \",this._formatDelimitedString(e,t,r,o)):e.trim().indexOf(\" \")>-1?(t=r=\" \",this._formatDelimitedString(e,t,r,o)):this._formatNumberFromString(e,o)}}return e}_getFieldInfo(e,t){if(!e||!e.length||!t)return;const r=t.toLowerCase();let i;return e.some((e=>!(!e.fieldName||e.fieldName.toLowerCase()!==r&&e.fieldName.toLowerCase()!==r.replace(/ /g,\"_\"))&&(i=e,!0))),i}_formatDelimitedString(e,t,r,i){return e&&t&&r&&i?e.trim().split(t).map((e=>this._formatNumberFromString(e,i))).join(r):e}_formatNumberFromString(e,t){if(!e||!t)return e;const r=Number(e);return isNaN(r)?e:t.format(r)}};return e([s()],f.prototype,\"layer\",void 0),e([s(n)],f.prototype,\"timeExtent\",void 0),e([s()],f.prototype,\"view\",void 0),e([s()],f.prototype,\"fullExtent\",void 0),e([s()],f.prototype,\"tileInfo\",void 0),e([s({readOnly:!0})],f.prototype,\"hasTilingEffects\",null),f=e([a(\"esri.views.layers.ImageryTileLayerView\")],f),f};export{m as ImageryTileLayerView,m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import s from\"../../../Graphic.js\";import r from\"../../../core/Logger.js\";import{isAbortError as i}from\"../../../core/promiseUtils.js\";import{watch as t,init as o}from\"../../../core/watchUtils.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as n}from\"../../../core/accessorSupport/decorators/subclass.js\";import u from\"../engine/flow/AnimatedFlowView2D.js\";import{LayerView2DMixin as h}from\"./LayerView2D.js\";import l from\"./imagery/ImageryTileView2D.js\";import p from\"./imagery/VectorFieldTileView2D.js\";import{canUseMajorityInterpolationOnDataSource as c}from\"./support/util.js\";import{ImageryTileLayerView as d}from\"../../layers/ImageryTileLayerView.js\";import m from\"../../layers/LayerView.js\";import{RefreshableLayerView as w}from\"../../layers/RefreshableLayerView.js\";const v=r.getLogger(\"esri.views.2d.layers.ImageryTileLayerView2D\");let b=class extends(d(w(h(m)))){constructor(){super(...arguments),this._useWebGLForProcessing=!0,this._useProgressiveUpdate=!0,this.subview=null}initialize(){const e=this.updateFullExtent();this.addResolvingPromise(e)}get useWebGLForProcessing(){return this._useWebGLForProcessing}set useWebGLForProcessing(e){this._useWebGLForProcessing=e,this.subview&&\"useWebGLForProcessing\"in this.subview&&(this.subview.useWebGLForProcessing=e)}get useProgressiveUpdate(){return this._useWebGLForProcessing}set useProgressiveUpdate(e){this._useProgressiveUpdate=e,this.subview&&\"useProgressiveUpdate\"in this.subview&&(this.subview.useProgressiveUpdate=e)}update(e){this.subview.update(e),this.notifyChange(\"updating\")}isUpdating(){return!this.subview||this.subview.updating}attach(){this.layer.increaseRasterJobHandlerUsage(),this._updateSubview(),this.handles.add([t(this.layer,[\"bandIds\",\"renderer\",\"interpolation\",\"multidimensionalDefinition\"],((e,s,r)=>{const t=\"multidimensionalDefinition\"===r,o=\"interpolation\"===r&&(\"majority\"===e||\"majority\"===s)&&c(this.layer),a=\"renderer\"===r&&s.type!==e.type;a&&this._updateSubview();const n=t||o||a;this.subview.redrawOrRefetch(n).catch((e=>{i(e)||v.error(e)})),this.notifyChange(\"updating\")})),o(this,[\"layer.blendMode\"],(e=>{this.subview&&(this.subview.container.blendMode=e)}),!0),o(this,[\"layer.effect\"],(e=>{this.subview&&(this.subview.container.effect=e)}),!0),o(this,\"timeExtent\",(()=>{this.subview.redrawOrRefetch(!0).catch((e=>{i(e)||v.error(e)}))}))],\"attach\")}detach(){this.handles.remove(\"attach\"),this.layer.decreaseRasterJobHandlerUsage(),this.subview.uninstall()}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.subview.moveEnd()}async hitTest(e,r){return[new s({attributes:{},geometry:e.clone()})]}doRefresh(){return this.subview.doRefresh()}_updateSubview(){const e=\"vector-field\"===this.layer.renderer.type?\"rasterVF\":\"animated-flow\"===this.layer.renderer.type?\"rasterAnimatedFlow\":\"raster\";if(this.subview){if(this.subview.type===e)return;this.subview.uninstall()}const{layer:s}=this;let r;r=\"rasterVF\"===e?new p({layer:s,layerView:this}):\"rasterAnimatedFlow\"===e?new u({layer:s,layerView:this}):new l({layer:s,layerView:this}),\"useWebGLForProcessing\"in r&&(r.useWebGLForProcessing=this._useWebGLForProcessing),\"useProgressiveUpdate\"in r&&(r.useProgressiveUpdate=this._useProgressiveUpdate),\"previousLOD\"in r&&(r.previousLOD=this.subview&&\"previousLOD\"in this.subview&&this.subview.previousLOD),r.attach(),r.install(this.container),r.container.blendMode=s.blendMode,r.container.effect=s.effect,this.subview=r,this.requestUpdate()}};e([a()],b.prototype,\"subview\",void 0),e([a()],b.prototype,\"useWebGLForProcessing\",null),e([a()],b.prototype,\"useProgressiveUpdate\",null),b=e([n(\"esri.views.2d.layers.ImageryTileLayerView2D\")],b);const y=b;export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{JSONMap as t}from\"../../../../core/jsonMap.js\";const o=new t({esriGeometryPoint:\"point\",esriGeometryMultipoint:\"multipoint\",esriGeometryPolyline:\"polyline\",esriGeometryPolygon:\"polygon\",esriGeometryMultiPatch:\"multipatch\",mesh:\"mesh\"});function e(t){return o.toJSON(t)}function n(t,o,e){const n=[],r=[];let l=0,i=0;for(const s of t){const t=i;let u=s[0][0],c=s[0][1];n[i++]=u,n[i++]=c;let p=0;for(let o=1;o<s.length;++o){const t=u,e=c;u=s[o][0],c=s[o][1],p+=c*t-u*e,n[i++]=u,n[i++]=c}o(p/2),p>0?(t-l>0&&(e(l,t,n,r),l=t),r.length=0):p<0&&t-l>0?r.push(.5*(t-l)):i=t}i-l>0&&e(l,i,n,r)}function r(t){const{bandCount:o,attributeTable:e,colormap:n,pixelType:r}=t.rasterInfo;return 1===o&&(null!=e||null!=n||\"u8\"===r||\"s8\"===r)}export{n as analyzeRings,r as canUseMajorityInterpolationOnDataSource,e as toJSONGeometryType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/watchUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";const i=i=>{let c=class extends i{initialize(){this.handles.add(o(this,\"layer\",\"refresh\",(r=>{this.doRefresh(r.dataChanged).catch((r=>{s(r)||e.getLogger(this.declaredClass).error(r)}))})),\"RefreshableLayerView\")}};return r([t()],c.prototype,\"layer\",void 0),c=r([a(\"esri.layers.mixins.RefreshableLayerView\")],c),c};export{i as RefreshableLayerView,i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function t(t,d=t.popupTemplate){if(!e(d))return[];const i=await d.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=d,{objectIdField:s,typeIdField:a,globalIdField:o,relationships:u}=t;if(i.includes(\"*\"))return[\"*\"];const f=n?await p(t):[],r=l(t.fieldsIndex,[...i,...f]);return a&&r.push(a),r&&s&&t.fieldsIndex.has(s)&&-1===r.indexOf(s)&&r.push(s),r&&o&&t.fieldsIndex.has(o)&&-1===r.indexOf(o)&&r.push(o),u&&u.forEach((e=>{const{keyField:p}=e;r&&p&&t.fieldsIndex.has(p)&&-1===r.indexOf(p)&&r.push(p)})),r}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,t as getRequiredFields};\n"],"sourceRoot":"webpack:///","file":"4190.127017af025c7ac36f44.js"}