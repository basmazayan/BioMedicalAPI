"use strict";var Ot=Object.defineProperty,Ct=Object.defineProperties,kt=Object.getOwnPropertyDescriptors,wt=Object.getOwnPropertySymbols,Tt=Object.prototype.hasOwnProperty,Ut=Object.prototype.propertyIsEnumerable,Pt=Math.pow,Et=(V,W,T)=>W in V?Ot(V,W,{enumerable:!0,configurable:!0,writable:!0,value:T}):V[W]=T,vt=(V,W)=>{for(var T in W||(W={}))Tt.call(W,T)&&Et(V,T,W[T]);if(wt)for(var T of wt(W))Ut.call(W,T)&&Et(V,T,W[T]);return V},Rt=(V,W)=>Ct(V,kt(W));(self.webpackChunkbio_medical=self.webpackChunkbio_medical||[]).push([[1642],{11057:(V,W,T)=>{T.d(W,{vF:()=>x,_D:()=>S,Qp:()=>u,P_:()=>e,ut:()=>g,Hq:()=>C,zD:()=>ft,tB:()=>P,nF:()=>q,VO:()=>H,Mk:()=>at,kZ:()=>m,kr:()=>f});var rt=T(49996),et=(T(61243),T(61414)),Z=T(18502),K=T(55612),F=T(19784),$=T(70157),B=T(36262);const Q=5e-4;function at(t,r,n){return!(0,F.Up)(t,r,n)}function N(t,r,n){const i=at(t,r,n);if(i&&!(0,F.kR)())throw new et.Z("rasterprojectionhelper-project","projection engine is not loaded");return i}const it=function(t,r,n){const i=(t[0]+t[4]+t[4*r.cols]+t[4*r.cols+4])/4,a=(t[1]+t[5]+t[4*r.rows+1]+t[4*r.rows+5])/4,o=(t[4*r.cols]-t[0]+t[4*r.cols+4]-t[4])/n[0]*.5,l=(t[4*r.cols+1]-t[1]+t[4*r.cols+5]-t[5])/n[1]*.5;return[0===o||isNaN(o)?0:Math.abs(i-t[2*r.rows+2])/Math.abs(o),0===l||isNaN(l)?0:Math.abs(a-t[2*r.rows+3])/Math.abs(l)]},st={3395:20037508.342789244,3410:17334193.943686873,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53034:20015086.79602057,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54034:20037508.342789244,54079:20037508.342789244,54080:20037508.342789244,54100:20037508.342789244,54101:20037508.342789244};function ft(){return ht.apply(this,arguments)}function ht(){return(ht=(0,rt.Z)(function*(){if((0,F.kR)())return null;yield(0,F.zD)()})).apply(this,arguments)}function S(t,r,n){return N(t.spatialReference,r)?n?(0,F.rS)(r,t.spatialReference,t):(0,F.rS)(t.spatialReference,r,t):null}function H(t,r,n,i=null){if(t.spatialReference.equals(r))return t;N(t.spatialReference,r,i);const a=n.center,o=new $.Z({xmin:a.x-t.x/2,xmax:a.x+t.x/2,ymin:a.y-t.y/2,ymax:a.y+t.y/2,spatialReference:t.spatialReference}),l=(0,F.iV)(o,r,i);return(0,Z.Wi)(l)?null:{x:l.xmax-l.xmin,y:l.ymax-l.ymin}}function ut(t,r=.01){return(0,K.c9)(t)?r/(0,K.c9)(t):0}function q(t,r,n=null,i=!0){const a=t.spatialReference;if(a.equals(r))return t;N(a,r,n);const o=(0,F.iV)(t,r,n);if(i&&r.isGeographic){const[l,h]=O(a,!0),p=ut(a);p&&null!=l&&null!=h&&(Math.abs(t.x-l)<p&&Math.abs(180-o.x)<Q?o.x-=360:Math.abs(t.x-h)<p&&Math.abs(180+o.x)<Q&&(o.x+=360))}return o}function ot(t){const r=g(t[0].spatialReference);if(t.length<2||!(0,Z.pC)(r))return t[0];let{xmin:n,xmax:i,ymin:a,ymax:o}=t[0];for(let l=1;l<t.length;l++){const h=t[l];i=h.xmax+r*l,a=Math.min(a,h.ymin),o=Math.max(o,h.ymax)}return new $.Z({xmin:n,xmax:i,ymin:a,ymax:o,spatialReference:t[0].spatialReference})}function P(t,r,n=null,i=!0){if(t.spatialReference.equals(r))return t;const a=C(t),o=g(t.spatialReference,!0);return(0,Z.pC)(o)&&0!==a?ot(t.clone().normalize().map(l=>d(l,r,n,i))):d(t,r,n,i)}function d(t,r,n=null,i=!0){const a=t.spatialReference;if(a.equals(r))return t;N(a,r,n);const o=(0,F.iV)(t,r,n);let[l,h]=O(a,!0);if(o&&i&&a.isWebMercator&&r.isGeographic&&null!=l&&null!=h){const R=.001,D=1e3;if(Math.abs(t.xmin-l)<R&&Math.abs(h-t.xmax)>D&&Math.abs(180-o.xmax)<Q){o.xmin=-180;const v=[];v.push(new B.Z(t.xmax,t.ymin,a)),v.push(new B.Z(t.xmax,(t.ymin+t.ymax)/2,a)),v.push(new B.Z(t.xmax,t.ymax,a));const _=v.map(I=>q(I,r,n)).filter(I=>!isNaN(null==I?void 0:I.x)).map(I=>I.x);o.xmax=Math.max.apply(null,_)}if(Math.abs(t.xmax-h)<R&&Math.abs(l-t.xmin)>D&&Math.abs(180+o.xmin)<Q){o.xmax=180;const v=[];v.push(new B.Z(t.xmin,t.ymin,a)),v.push(new B.Z(t.xmin,(t.ymin+t.ymax)/2,a)),v.push(new B.Z(t.xmin,t.ymax,a));const _=v.map(I=>q(I,r,n)).filter(I=>!isNaN(null==I?void 0:I.x)).map(I=>I.x);o.xmin=Math.min.apply(null,_)}}[l,h]=O(r,!0);const p=ut(r);return p&&null!=l&&null!=h&&o&&(Math.abs(o.xmin-l)<p&&(o.xmin=l),Math.abs(o.xmax-h)<p&&(o.xmax=h)),o}function g(t,r=!1){const n=r?20037508.342787:20037508.342788905;return t.isWebMercator?2*n:t.wkid&&t.isGeographic?360:2*st[t.wkid]||null}function O(t,r=!1){const n=[],i=g(t,r);return(0,Z.pC)(i)&&(n.push(-i/2),n.push(i/2)),n}function E(t,r,n,i){let a=(t-r)/n;return a-Math.floor(a)!=0?a=Math.floor(a):i&&(a-=1),a}function C(t,r=!1){const n=g(t.spatialReference);if(!(0,Z.pC)(n))return 0;const i=r?0:-n/2;return E(t.xmax,i,n,!0)-E(t.xmin,i,n,!1)}function e(t){const r=t.storageInfo.origin.x,n=g(t.spatialReference,!0);if(!(0,Z.pC)(n))return{originX:r,halfWorldWidth:null,pyramidsInfo:null};const i=n/2,{nativePixelSize:a,storageInfo:o,extent:l}=t,{maximumPyramidLevel:h,blockWidth:p,pyramidScalingFactor:R}=o;let D=a.x;const v=[],_=(0,Z.pC)(t.transform)&&"gcs-shift"===t.transform.type,I=r+(_?0:i),w=_?n-r:i-r;for(let y=0;y<=h;y++){const A=(l.xmax-r)/D/p,k=A-Math.floor(A)==0?A:Math.ceil(A),b=w/D/p,M=b-Math.floor(b)==0?b:Math.ceil(b),U=Math.floor(I/D/p),L=Math.round(I/D)%p,j=(p-Math.round(w/D)%p)%p;v.push({resolutionX:D,blockWidth:p,datsetColumnCount:k,worldColumnCountFromOrigin:M,leftMargin:L,rightPadding:j,originColumnOffset:U}),D*=R}return{originX:r,halfWorldWidth:i,pyramidsInfo:v,hasGCSSShiftTransform:_}}function u(t){const r=t.isAdaptive&&null==t.spacing,n=t.spacing||[32,32];let i=c(t),a={cols:i.size[0]+1,rows:i.size[1]+1},o=it(i.offsets,a,n);const l=(o[0]+o[1])/2,h=i.outofBoundPointCount>0&&i.outofBoundPointCount<i.offsets.length/2;return r&&(h||l>4)&&(i=c(Rt(vt({},t),{spacing:[4,4]})),a={cols:i.size[0]+1,rows:i.size[1]+1},o=it(i.offsets,a,n)),i.error=o,i.coefficients=function(t,r,n){const{cols:i,rows:a}=r,o=new Float32Array((i-1)*(a-1)*2*6),l=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),h=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let p=0;p<i-1;p++){for(let R=0;R<a-1;R++){let D=p*a*2+2*R;const v=t[D],_=t[D+1],I=t[D+2],w=t[D+3];D+=2*a;const y=t[D],A=t[D+1],k=t[D+2],b=t[D+3];let M=0,U=12*(R*(i-1)+p);for(let L=0;L<3;L++)o[U++]=l[M++]*v+l[M++]*I+l[M++]*k;M=0;for(let L=0;L<3;L++)o[U++]=l[M++]*_+l[M++]*w+l[M++]*b;M=0;for(let L=0;L<3;L++)o[U++]=h[M++]*v+h[M++]*y+h[M++]*k;M=0;for(let L=0;L<3;L++)o[U++]=h[M++]*_+h[M++]*A+h[M++]*b}if(n)for(let R=0;R<o.length;R++)isNaN(o[R])&&(o[R]=-1)}return o}(i.offsets,a,h),i}function c(t){const{projectedExtent:r,srcBufferExtent:n,pixelSize:i,datumTransformation:a,rasterTransform:o}=t,l=r.spatialReference,h=n.spatialReference;N(l,h);const{xmin:p,ymin:R,xmax:D,ymax:v}=r,_=g(h),I=t.hasWrapAround||"gcs-shift"===(null==o?void 0:o.type),w=t.spacing||[32,32],y={x:w[0]*i.x,y:w[1]*i.y},A_cols=Math.ceil((D-p)/y.x-.1/w[0])+1,A_rows=Math.ceil((v-R)/y.y-.1/w[1])+1,k=y.x,b=y.y,M=[];let U,L=0;const j=[];for(let z=0;z<A_cols;z++)for(let Y=0;Y<A_rows;Y++)j.push(new B.Z({x:p+k*z,y:v-b*Y,spatialReference:l}));const X=function(t,r,n=null){const i=t[0].spatialReference;return i.equals(r)?t:(N(i,r,n),(0,F.iV)(t,r,n))}(j,h,a);for(let z=0;z<A_cols;z++){const Y=[];for(let tt=0;tt<A_rows;tt++){let J=X[z*A_rows+tt];o&&(J=o.inverseTransform(J)),Y.push(J),z>0&&I&&J&&U[tt]&&(0,Z.pC)(_)&&J.x<U[tt].x&&(J.x+=_),J?(M.push((J.x-n.xmin)/(n.xmax-n.xmin)),M.push((n.ymax-J.y)/(n.ymax-n.ymin))):(M.push(NaN),M.push(NaN),L++)}U=Y}return{offsets:M,error:null,coefficients:null,outofBoundPointCount:L,spacing:w,size:[A_cols-1,A_rows-1]}}function m(t){const r=t.clone().normalize();return 1===r.length?r[0]:ot(r)}function f(t,r,n){const{storageInfo:i,pixelSize:a}=r;let o,l=!1;const{pyramidResolutions:h}=i;if((0,Z.pC)(h)&&h.length){const _=(t.x+t.y)/2,I=h[h.length-1],w=(I.x+I.y)/2,y=(a.x+a.y)/2;if(_<=y)o=0;else if(_>=w)o=h.length,l=_/w>8;else{let k,b=y;for(let M=1;M<=h.length;M++){if(k=(h[M-1].x+h[M-1].y)/2,_<=k){_===k?o=M:"down"===n?(o=M-1,l=_/b>8):o="up"===n||_-b>k-_||_/b>2?M:M-1;break}b=k}}const A=0===o?a:h[o-1];return{pyramidLevel:o,pyramidResolution:new B.Z({x:A.x,y:A.y,spatialReference:r.spatialReference}),excessiveReading:l}}const p=Math.log(t.x/a.x)/Math.LN2,R=Math.log(t.y/a.y)/Math.LN2,D=r.storageInfo.maximumPyramidLevel||0;o="down"===n?Math.floor(Math.min(p,R)):"up"===n?Math.ceil(Math.max(p,R)):Math.round((p+R)/2),o<0?o=0:o>D&&(l=o>D+3,o=D);const v=Pt(2,o);return{pyramidLevel:o,pyramidResolution:new B.Z({x:v*r.nativePixelSize.x,y:v*r.nativePixelSize.y,spatialReference:r.spatialReference}),excessiveReading:l}}function x(t,r,n=512,i=!0){const{extent:a,spatialReference:o,pixelSize:l}=t,h=H(new B.Z({x:l.x,y:l.y,spatialReference:o}),r,a);if(null==h)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const p=(h.x+h.y)/2,R=(0,K.c9)(r),D=p*R*96*39.37,v=r.isGeographic?256/n*295828763.7958547:256/n*591657527.591555;let _="vector-magdir"===t.dataType||"vector-uv"===t.dataType;const I=P(a,r);_||i&&(r.isGeographic||r.isWebMercator)&&(_=I.xmin*I.xmax<0);let w,y=D;const A=1.001;if(_){y=v;const L=r.isGeographic?1341104507446289e-21:.29858214164761665,j=L*(96*R*39.37),X=r.isGeographic?4326:3857;w=H(new B.Z({x:L,y:L,spatialReference:{wkid:X}}),o,I),w.x*=y/j,w.y*=y/j}else{w={x:l.x,y:l.y};const L=Math.ceil(Math.log(Math.min(t.width,t.height)/32)/Math.LN2);let j=0;for(;y<v*(A/2)&&j<L;)j++,y*=2,w.x*=2,w.y*=2;Math.max(y,v)/Math.min(y,v)<=A&&(y=v)}const k=[y],b=[{x:w.x,y:w.y}],U=Math.min(70.5310735,D)/A;for(;y>=U;)y/=2,w.x/=2,w.y/=2,k.push(y),b.push({x:w.x,y:w.y});return{projectedPixelSize:h,scales:k,srcResolutions:b,isCustomTilingScheme:!_}}},24384:(V,W,T)=>{T.d(W,{KC:()=>st,QI:()=>nt,wF:()=>E,K:()=>O,Yx:()=>Q,nb:()=>C,BH:()=>lt,NL:()=>B,Tg:()=>N});var rt=T(74856),mt=T(18502),et=T(77847),Z=T(85572);const K=new Map;K.set("meter-per-second",1),K.set("kilometer-per-hour",.277778),K.set("knots",.514444),K.set("feet-per-second",.3048),K.set("mile-per-hour",.44704);const F=180/Math.PI,B=new rt.Xn({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});function Q(e,u){return K.get(e)/K.get(u)||1}function at(e){return(450-e)%360}function N(e,u="geographic"){const[c,s]=e,m=Math.sqrt(c*c+s*s);let f=Math.atan2(s,c)*F;return f=(360+f)%360,"geographic"===u&&(f=at(f)),[m,f]}function it(e,u="geographic"){let c=e[1];"geographic"===u&&(c=at(c)),c%=360;const s=e[0];return[s*Math.cos(c/F),s*Math.sin(c/F)]}function st(e,u,c="geographic",s=1){if(!(0,Z.nk)(e))return e;const{pixels:m,width:f,height:x}=e,t=f*x,r=m[0],n=m[1],i=et.Z.createEmptyBand(e.pixelType,t),a=et.Z.createEmptyBand(e.pixelType,t);let o=0;for(let h=0;h<x;h++)for(let p=0;p<f;p++)"vector-uv"===u?([i[o],a[o]]=N([r[o],n[o]],c),i[o]*=s):([i[o],a[o]]=it([r[o],n[o]],c),i[o]*=s,a[o]*=s),o++;const l=new et.Z({pixelType:e.pixelType,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:[i,a]});return l.updateStatistics(),l}function nt(e,u,c=1){if(1===c||!(0,Z.nk)(e))return e;const s=e.clone(),{pixels:m,width:f,height:x}=s,t=m[0],r=m[1];let n=0;for(let i=0;i<x;i++)for(let a=0;a<f;a++)"vector-uv"===u?(t[n]*=c,r[n]*=c):t[n]*=c,n++;return s.updateStatistics(),s}function lt(e,u,c,s,m){if(!(0,mt.pC)(m)||!m.spatialReference.equals(e.spatialReference))return{extent:e,width:u,height:c,resolution:e.width/u};const f=m.xmin,x=m.ymax;s=Math.max(s||0,30);const t=Math.ceil(u*(1/s)),r=Math.ceil(c*(1/s)),n=((e.xmax-e.xmin)/t+(e.ymax-e.ymin)/r)/2;return e.xmin=f+Math.floor((e.xmin-f)/n)*n,e.xmax=f+Math.ceil((e.xmax-f)/n)*n,e.ymin=x+Math.floor((e.ymin-x)/n)*n,e.ymax=x+Math.ceil((e.ymax-x)/n)*n,{extent:e,width:Math.round(e.width/n),height:Math.round(e.height/n),resolution:n}}const ct=function(e=0,u=0,c=Math.PI,s=!0){s&&(c=(2*Math.PI-c)%(2*Math.PI));const m=s?-1:1,f=13*m,x=-7*m,t=-2*m,r=-16*m,n=29,[i,a]=S(0,u+f,c,n),[o,l]=S(e-5.5,u+x,c,n),[h,p]=S(e+5.5,u+x,c,n),[R,D]=S(e-1.5,u+t,c,n),[v,_]=S(e+1.5,u+t,c,n),[I,w]=S(e-1.5,u+r,c,n),[y,A]=S(e+1.5,u+r,c,n);return[i,a,o,l,R,D,v,_,h,p,I,w,y,A]}(0,0,0);function ht(e=0,u=Math.PI,c=!0){c&&(u=(2*Math.PI-u)%(2*Math.PI));const m=c?-1:1,f=5*m,x=20*m,t=25*m,r=45,l=2*m;let[h,p]=[5,0-x],[R,D]=[h+2,p],[v,_]=[R-0,D+l],[I,w]=[-5,0-t],[y,A]=[I+0,w-l],k=Math.ceil(e/5),b=Math.floor(k/10);k-=8*b;const M=[],U=[];for(let xt=0;xt<k/2;xt++,b--){b<=0&&k%2==1&&xt===(k-1)/2&&(I=0,y=I+0,w=(w+p)/2,A=w-l);const[yt,gt]=S(I,w,u,r);if(b>0){const[pt,dt]=S(R,w,u,r),[_t,Mt]=S(h,p,u,r);M.push(pt),M.push(dt),M.push(yt),M.push(gt),M.push(_t),M.push(Mt)}else{const[pt,dt]=S(R,D,u,r),[_t,Mt]=S(v,_,u,r),[At,bt]=S(y,A,u,r);U.push(yt),U.push(gt),U.push(At),U.push(bt),U.push(_t),U.push(Mt),U.push(pt),U.push(dt)}w+=f,p+=f,D+=f,_+=f,A+=f}const[L,j]=S(5,0+x,u,r),[z,Y]=S(7,0+x,u,r),[tt,J]=S(5,0-t,u,r),[Dt,It]=S(7,0-t,u,r);return{pennants:M,barbs:U,shaft:[L,j,z,Y,tt,J,Dt,It]}}function S(e,u,c,s=1){const m=Math.sqrt(e*e+u*u)/s,f=(2*Math.PI+Math.atan2(u,e))%(2*Math.PI);return[m,(2*Math.PI+f-c)%(2*Math.PI)]}const H=[0,1,3,6,10,16,21,27,33,40,47,55,63],ut=[0,.5,1,1.5,2],q=[0,.25,.5,1,1.5,2,2.5,3,3.5,4];function G(e,u,c,s){const m=Q(s||"knots",c);let f;for(f=1;f<u.length;f++)if(f===u.length-1){if(e<u[f]*m)break}else if(e<=u[f]*m)break;return Math.min(f-1,u.length-2)}function ot(e,u,c,s,m){let f=0;switch(u){case"beaufort_kn":f=G(e,H,"knots",c);break;case"beaufort_km":f=G(e,H,"kilometer-per-hour",c);break;case"beaufort_ft":f=G(e,H,"feet-per-second",c);break;case"beaufort_m":f=G(e,H,"meter-per-second",c);break;case"classified_arrow":f=G(e,m,s,c);break;case"ocean_current_m":f=G(e,ut,"meter-per-second",c);break;case"ocean_current_kn":f=G(e,q,"knots",c)}return f}const d=[];function O(e,u){let s=0,m=0;const{width:f,height:x,mask:t}=e,r=e.pixels[0],n=[],i=[],a="wind_speed"===u.style?5:Number.MAX_VALUE;for(let o=0;o<x;o++)for(let l=0;l<f;l++){const h=o*f+l;if((!t||t[o*f+l])&&r[h]<a){for(let R=0;R<4;R++)n[s++]=(l+.5)/f,n[s++]=(o+.5)/x,n[s++]=R<2?-.5:.5,n[s++]=R%2==0?-.5:.5,n[s++]=0,n[s++]=r[h];const p=4*(s/24-1);i[m++]=p,i[m++]=p+1,i[m++]=p+2,i[m++]=p+1,i[m++]=p+2,i[m++]=p+3}}return{vertexData:new Float32Array(n),indexData:new Uint32Array(i)}}function E(e,u){return"simple_scalar"===u.style?O(e,u):"wind_speed"===u.style?function(e,u){if(0===d.length)for(let h=0;h<30;h++)d.push(ht(5*h,0));const c=Q(B.fromJSON(u.inputUnit),"knots"),{width:s,height:m,mask:f}=e,x=e.pixels[0],t=e.pixels[1],n=[],i=[];let a=0,o=0;for(let h=0;h<m;h++)for(let p=0;p<s;p++){const R=h*s+p,D=x[R]*c;if((!f||f[h*s+p])&&D>=5){var l;const v=null!=(l=(t[R]+360)%360/180*Math.PI)?l:2*Math.PI*Math.random(),{pennants:_,barbs:I,shaft:w}=d[Math.min(Math.floor(D/5),29)];if(_.length+I.length===0)continue;let y=n.length/6;const A=(p+.5)/s,k=(h+.5)/m;for(let b=0;b<_.length;b+=2)n[a++]=A,n[a++]=k,n[a++]=_[b],n[a++]=_[b+1]+v,n[a++]=0,n[a++]=D;for(let b=0;b<I.length;b+=2)n[a++]=A,n[a++]=k,n[a++]=I[b],n[a++]=I[b+1]+v,n[a++]=0,n[a++]=D;for(let b=0;b<w.length;b+=2)n[a++]=A,n[a++]=k,n[a++]=w[b],n[a++]=w[b+1]+v,n[a++]=0,n[a++]=D;for(let b=0;b<_.length/6;b++)i[o++]=y,i[o++]=y+1,i[o++]=y+2,y+=3;for(let b=0;b<I.length/8;b++)i[o++]=y,i[o++]=y+1,i[o++]=y+2,i[o++]=y+1,i[o++]=y+2,i[o++]=y+3,y+=4;i[o++]=y+0,i[o++]=y+1,i[o++]=y+2,i[o++]=y+1,i[o++]=y+3,i[o++]=y+2,y+=4}}return{vertexData:new Float32Array(n),indexData:new Uint32Array(i)}}(e,u):function(e,u){const{style:c,inputUnit:s,outputUnit:m,breakValues:f}=u,x=B.fromJSON(s),t=B.fromJSON(m);let i=0,a=0;const{width:o,height:l,mask:h}=e,p=e.pixels[0],R=e.pixels[1],D=h?h.filter(w=>w>0).length:o*l,v=new Float32Array(42*D),_=new Uint32Array(15*D);for(let w=0;w<l;w++)for(let y=0;y<o;y++){const A=w*o+y;if(!h||h[w*o+y]){var I;const k=null!=(I=(R[A]+360)%360/180*Math.PI)?I:2*Math.PI*Math.random(),b=ot(p[A],c,x,t,f);for(let U=0;U<ct.length;U+=2)v[i++]=(y+.5)/o,v[i++]=(w+.5)/l,v[i++]=ct[U],v[i++]=ct[U+1]+k,v[i++]=b,v[i++]=p[A];const M=7*(i/42-1);_[a++]=M,_[a++]=M+1,_[a++]=M+2,_[a++]=M+0,_[a++]=M+4,_[a++]=M+3,_[a++]=M+0,_[a++]=M+2,_[a++]=M+3,_[a++]=M+2,_[a++]=M+5,_[a++]=M+3,_[a++]=M+5,_[a++]=M+6,_[a++]=M+3}}return{vertexData:v,indexData:_}}(e,u)}function C(e,u,c,s=[0,0],m=.5){const{width:f,height:x,mask:t}=e,[r,n]=e.pixels,[i,a]=s,o=Math.round((f-i)/c),l=Math.round((x-a)/c),h=o*l,p=new Float32Array(h),R=new Float32Array(h),D=new Uint8Array(h),v="vector-uv"===u;for(let I=0;I<l;I++)for(let w=0;w<o;w++){let y=0;const A=I*o+w,k=Math.max(0,I*c+a),b=Math.max(0,w*c+i),M=Math.min(x,k+c),U=Math.min(f,b+c);for(let L=k;L<M;L++)for(let j=b;j<U;j++){const X=L*f+j;if(!t||t[X]){y++;const z=v?[r[X],n[X]]:[r[X],(360+n[X])%360],[Y,tt]=v?z:it(z);p[A]+=Y,R[A]+=tt}}if(y>=(M-k)*(U-b)*(1-m)){D[A]=1;const[L,j]=N([p[A]/y,R[A]/y]);p[A]=L,R[A]=j}else D[A]=0,p[A]=0,R[A]=0}const _=new et.Z({width:o,height:l,pixels:[p,R],mask:D});return _.updateStatistics(),_}},62013:(V,W,T)=>{T.d(W,{z_:()=>it,KK:()=>ut});var rt=T(49996),et=(T(61243),T(22345)),Z=T(88415),K=T(18502),F=T(7808),$=T(46255),B=T(35169),Q=T(70157);const at=et.Z.getLogger("esri.views.2d.engine.flow.dataUtils");function it(P,d,g){return st.apply(this,arguments)}function st(){return(st=(0,rt.Z)(function*(P,d,g){const O=performance.now(),E=nt(P,d),C=performance.now(),e=ct(P,E,d.width,d.height),u=performance.now(),c=ht(e,!0),s=performance.now(),m=S(c),f=performance.now();if(P.profile){const x={"_createFlowFieldFromData()":Math.round(C-O),"_getStreamlines()":Math.round(u-C),"createAnimatedLinesData()":Math.round(s-u),"createLinesMesh()":Math.round(f-s),"Total elapsed time":Math.round(f-O)};at.info("createStreamlinesMesh profile",x)}return yield Promise.resolve(),(0,F.k_)(g),m})).apply(this,arguments)}function nt(P,d){const g=function(P,d,g,O){if(0===O)return P;const E=Math.round(3*O),C=new Array(2*E+1);let e=0;for(let s=-E;s<=E;s++){const m=Math.exp(-s*s/(O*O));C[s+E]=m,e+=m}for(let s=-E;s<=E;s++)C[s+E]/=e;const u=new Float32Array(P.length);for(let s=0;s<g;s++)for(let m=0;m<d;m++){let f=0,x=0;for(let t=-E;t<=E;t++){if(m+t<0||m+t>=d)continue;const r=C[t+E];f+=r*P[2*(s*d+(m+t))+0],x+=r*P[2*(s*d+(m+t))+1]}u[2*(s*d+m)+0]=f,u[2*(s*d+m)+1]=x}const c=new Float32Array(P.length);for(let s=0;s<d;s++)for(let m=0;m<g;m++){let f=0,x=0;for(let t=-E;t<=E;t++){if(m+t<0||m+t>=g)continue;const r=C[t+E];f+=r*u[2*((m+t)*d+s)+0],x+=r*u[2*((m+t)*d+s)+1]}c[2*(m*d+s)+0]=f,c[2*(m*d+s)+1]=x}return c}(d.data,d.width,d.height,P.smoothing);return P.interpolate?(O,E)=>{const C=Math.floor(O),e=Math.floor(E);if(C<0||C>=d.width)return[0,0];if(e<0||e>=d.height)return[0,0];const u=O-C,c=E-e,s=C,m=e,f=C<d.width-1?C+1:C,x=e<d.height-1?e+1:e,t=g[2*(m*d.width+s)],r=g[2*(m*d.width+f)],n=g[2*(x*d.width+s)],i=g[2*(x*d.width+f)],a=g[2*(m*d.width+s)+1],o=g[2*(m*d.width+f)+1];return[(t*(1-c)+n*c)*(1-u)+(r*(1-c)+i*c)*u,(a*(1-c)+g[2*(x*d.width+s)+1]*c)*(1-u)+(o*(1-c)+g[2*(x*d.width+f)+1]*c)*u]}:(O,E)=>{const C=Math.round(O),e=Math.round(E);return C<0||C>=d.width||e<0||e>=d.height?[0,0]:[g[2*(e*d.width+C)+0],g[2*(e*d.width+C)+1]]}}function lt(P,d,g,O,E,C,e,u,c){const s=[];let m,f,x=g,t=O,r=0;s.push({x,y:t,t:r});for(let n=0;n<P.verticesPerLine;n++){let[i,a]=d(x,t);i*=P.velocityScale,a*=P.velocityScale;const o=Math.sqrt(i*i+a*a);if(o<P.minSpeedThreshold)return s;const l=i/o,h=a/o;if(x+=l*P.segmentLength,t+=h*P.segmentLength,r+=P.segmentLength/o,Math.acos(l*m+h*f)>P.maxTurnAngle)return s;if(P.mergeLines){const p=Math.round(x*c),R=Math.round(t*c);if(p<0||p>e-1||R<0||R>u-1)return s;const D=C[R*e+p];if(-1!==D&&D!==E)return s;C[R*e+p]=E}s.push({x,y:t,t:r}),m=l,f=h}return s}function ct(P,d,g,O){const E=[],C=new $.Z,e=1/Math.max(P.lineCollisionWidth,1),u=Math.round(g*e),c=Math.round(O*e),s=new Int32Array(u*c);for(let f=0;f<s.length;f++)s[f]=-1;const m=[];for(let f=0;f<O;f+=P.lineSpacing)for(let x=0;x<g;x+=P.lineSpacing)m.push({x,y:f,sort:C.getFloat()});m.sort((f,x)=>f.sort-x.sort);for(const{x:f,y:x}of m)if(C.getFloat()<P.density){const t=lt(P,d,f,x,E.length,s,u,c,e);if(t.length<2)continue;E.push(t)}return E}function ht(P,d){const g=new $.Z,O=P.reduce((c,s)=>c+s.length,0),E=new Float32Array(3*O),C=new Array(P.length);let e=0,u=0;for(const c of P){const s=e;for(const m of c)E[3*e+0]=m.x,E[3*e+1]=m.y,E[3*e+2]=m.t,e++;C[u++]={startVertex:s,numberOfVertices:c.length,totalTime:c[c.length-1].t,timeSeed:d?g.getFloat():0}}return{lineVertices:E,lineDescriptors:C}}function S(P,d=10){const{lineVertices:g,lineDescriptors:O}=P;let E=0,C=0;for(const x of O)E+=2*x.numberOfVertices,C+=6*(x.numberOfVertices-1);const e=new Float32Array(8*E),u=new Uint32Array(C);let c=0,s=0;function f(x,t,r,n,i,a,o){const l=8*c;let h=0;e[l+h++]=x,e[l+h++]=t,e[l+h++]=1,e[l+h++]=r,e[l+h++]=a,e[l+h++]=o,e[l+h++]=n,e[l+h++]=i,c++,e[l+h++]=x,e[l+h++]=t,e[l+h++]=-1,e[l+h++]=r,e[l+h++]=a,e[l+h++]=o,e[l+h++]=-n,e[l+h++]=-i,c++}for(const x of O){const{totalTime:t,timeSeed:r}=x;let n=null,i=null,a=null,o=null,l=null;for(let h=0;h<x.numberOfVertices;h++){const p=g[3*(x.startVertex+h)+0],R=g[3*(x.startVertex+h)+1],D=g[3*(x.startVertex+h)+2];let v=null,_=null,I=null,w=null;if(h>0){v=p-n,_=R-i;const y=Math.sqrt(v*v+_*_);if(v/=y,_/=y,h>1){let A=v+o,k=_+l;const b=Math.sqrt(A*A+k*k);A/=b,k/=b;const M=Math.min(1/(A*v+k*_),d);A*=M,k*=M,I=-k,w=A}else I=-_,w=v;null!==I&&null!==w&&(f(n,i,a,I,w,t,r),u[s++]=c-2,u[s++]=c,u[s++]=c-1,u[s++]=c,u[s++]=c+1,u[s++]=c-1)}n=p,i=R,a=D,o=v,l=_}f(n,i,a,-l,o,t,r)}return{vertexData:e,indexData:u}}function H(P,d){const g=d.pixels,{width:O,height:E}=d,C=new Float32Array(O*E*2);if("vector-uv"===P)for(let e=0;e<O*E;e++)C[2*e+0]=g[0][e],C[2*e+1]=-g[1][e];else if("vector-magdir"===P)for(let e=0;e<O*E;e++){const u=g[0][e],c=(0,Z.Vl)(g[1][e]),s=Math.cos(c-Math.PI/2),m=Math.sin(c-Math.PI/2);C[2*e+0]=s*u,C[2*e+1]=m*u}return{data:C,width:O,height:E}}function ut(P,d,g,O,E){return q.apply(this,arguments)}function q(){return(q=(0,rt.Z)(function*(P,d,g,O,E){const C=(0,B.C5)(d.spatialReference);if(!C)return G(P,d,g,O,E);const[e,u]=C.valid,c=u-e,s=Math.ceil(d.width/c),m=d.width/s,f=Math.round(g/s);let x=d.xmin;const t=[];for(let a=0;a<s;a++){const o=new Q.Z({xmin:x,xmax:x+m,ymin:d.ymin,ymax:d.ymax,spatialReference:d.spatialReference});t.push(G(P,o,f,O,E)),x+=m}const r=yield Promise.all(t),n={data:new Float32Array(g*O*2),width:g,height:O};let i=0;for(const a of r){for(let o=0;o<a.height;o++)for(let l=0;l<a.width;l++)i+l>=g||(n.data[2*(o*g+i+l)+0]=a.data[2*(o*a.width+l)+0],n.data[2*(o*g+i+l)+1]=a.data[2*(o*a.width+l)+1]);i+=a.width}return n})).apply(this,arguments)}function G(P,d,g,O,E){return ot.apply(this,arguments)}function ot(){return(ot=(0,rt.Z)(function*(P,d,g,O,E){if("imagery"===P.type){yield P.load({signal:E});const u=P.rasterInfo.dataType,c=yield P.fetchImage(d,g,O,{signal:E});return!c||(0,K.Wi)(c.pixelData)||(0,K.Wi)(c.pixelData.pixelBlock)?{data:new Float32Array(g*O*2),width:g,height:O}:H(u,c.pixelData.pixelBlock)}yield P.load({signal:E});const C=P.rasterInfo.dataType,e=yield P.fetchPixels(d,g,O,{signal:E});return!e||(0,K.Wi)(e.pixelBlock)?{data:new Float32Array(g*O*2),width:g,height:O}:H(C,e.pixelBlock)})).apply(this,arguments)}}}]);
//# sourceMappingURL=1642.7bcb8da5c041cf47b3ac.js.map