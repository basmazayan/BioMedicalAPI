{"version":3,"file":"2948.7d06c2e5aa96e07b18a2.js","mappings":"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","sources":["./node_modules/@arcgis/core/views/2d/layers/ImageryLayerView2D.js","./node_modules/@arcgis/core/views/2d/layers/imagery/ImageryGraphicsView2D.js","./node_modules/@arcgis/core/views/2d/layers/imagery/ImageryView2D.js","./node_modules/@arcgis/core/views/layers/ImageryLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{init as t,watch as i}from\"../../../core/watchUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import a from\"../engine/flow/AnimatedFlowView2D.js\";import{LayerView2DMixin as h}from\"./LayerView2D.js\";import o from\"./imagery/ImageryGraphicsView2D.js\";import n from\"./imagery/ImageryView2D.js\";import{ImageryLayerView as l}from\"../../layers/ImageryLayerView.js\";import u from\"../../layers/LayerView.js\";import{RefreshableLayerView as w}from\"../../layers/RefreshableLayerView.js\";let p=class extends(l(w(h(u)))){constructor(){super(...arguments),this._exportImageVersion=-1}initialize(){this.handles.add([t(this,[\"layer.blendMode\",\"layer.effects\"],(e=>{this.subview&&(this.subview.container.blendMode=e)}),!0),t(this,\"layer.effect\",(e=>{this.subview&&(this.subview.container.effect=e)}),!0)])}get pixelData(){return this.updating?null:\"getPixelData\"in this.subview?this.subview.getPixelData():null}get updating(){return!!(!this.subview||\"updating\"in this.subview&&this.subview.updating)}async hitTest(e,t){return this.subview?\"hitTest\"in this.subview?[this.subview.hitTest(e)]:[]:null}update(e){var t;null==(t=this.subview)||t.update(e)}attach(){this.layer.increaseRasterJobHandlerUsage(),this._setSubView(),this.handles.add([t(this,\"layer.exportImageServiceParameters.version\",(e=>{this._exportImageVersion!==e&&(this._exportImageVersion=e,this.requestUpdate())})),this.watch(\"timeExtent\",(()=>{\"timeExtent\"in this.subview&&(this.subview.timeExtent=this.timeExtent),this.requestUpdate()})),this.layer.on(\"redraw\",(()=>{\"redraw\"in this.subview?this.subview.redraw():this.subview.redrawOrRefetch()})),i(this.layer,\"renderer\",(()=>this._setSubView()))],\"imagerylayerview-update\")}detach(){this.layer.decreaseRasterJobHandlerUsage(),this.subview.destroy(),this.handles.remove(\"imagerylayerview-update\"),this._exportImageVersion=-1}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}async doRefresh(){this.requestUpdate()}isUpdating(){return!this.subview||!this.suspended&&this.subview.updating}_setSubView(){var e,t;let i=\"Imagery\";\"vector-field\"===(null==(e=this.layer.renderer)?void 0:e.type)&&\"lerc\"===this.layer.format&&(i=\"Graphics\");var s,r;(\"animated-flow\"===(null==(t=this.layer.renderer)?void 0:t.type)&&(i=\"Flow\"),this.subview&&this.subview.type===i)||(null==(s=this.subview)||s.uninstall(this.container),null==(r=this.subview)||r.destroy(),this.subview=\"Imagery\"===i?new n({layer:this.layer,view:this.view,timeExtent:this.timeExtent}):\"Graphics\"===i?new o({layer:this.layer,view:this.view,timeExtent:this.timeExtent}):new a({layer:this.layer,layerView:this}),this.subview.attach(),this.subview.install(this.container),this.subview.container.blendMode=this.layer.blendMode,this.subview.container.effect=this.layer.effect);this.requestUpdate()}};e([s()],p.prototype,\"pixelData\",null),e([s({readOnly:!0})],p.prototype,\"updating\",null),e([s()],p.prototype,\"subview\",void 0),p=e([r(\"esri.views.2d.layers.ImageryLayerView2D\")],p);const d=p;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../Graphic.js\";import r from\"../../../../request.js\";import i from\"../../../../core/Accessor.js\";import s from\"../../../../core/Logger.js\";import{isSome as a}from\"../../../../core/maybe.js\";import{debounce as o,isAbortError as n}from\"../../../../core/promiseUtils.js\";import{property as c}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{enumeration as p}from\"../../../../core/accessorSupport/decorators/enumeration.js\";import{subclass as h}from\"../../../../core/accessorSupport/decorators/subclass.js\";import l from\"../../../../geometry/Extent.js\";import{projectExtent as m}from\"../../../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{snapImageToSymbolTile as u}from\"../../../../layers/support/rasterFunctions/vectorFieldUtils.js\";import{GraphicsCollection as d}from\"../../../../support/GraphicsCollection.js\";import{Container as y}from\"../../engine/Container.js\";import g from\"../graphics/GraphicContainer.js\";import x from\"../graphics/GraphicsView2D.js\";const f=s.getLogger(\"esri.views.2d.layers.imagery.ImageryGraphicsView2D\");let _=class extends i{constructor(){super(...arguments),this.attached=!1,this.container=new y,this.updateRequested=!1,this._graphicsView=null,this._projectFullExtentPromise=null,this._dataParameters={exportParametersVersion:0,extents:[],tileResolution:0,time:\"\",isOceanStyle:!1,isOceanographic:!1},this.type=\"Graphics\",this._graphics=new d,this._updateGraphics=o((async(e,t)=>{if(!e.stationary)return;const r=e.state,i=new l({xmin:r.extent.xmin,ymin:r.extent.ymin,xmax:r.extent.xmax,ymax:r.extent.ymax,spatialReference:r.spatialReference}),[s,o]=e.state.size,n={};n.timeExtent=this.timeExtent,n.requestAsImageElement=!1,n.signal=t,null==this._projectFullExtentPromise&&(this._projectFullExtentPromise=this._getProjectedFullExtent(i.spatialReference));const c=\"vector-field\"===this.layer.renderer.type?this.layer.renderer.symbolTileSize:50,p=await this._projectFullExtentPromise,{extent:h,resolution:m,width:d,height:y}=u(i,s,o,c,p),g=await this.layer.fetchImage(h,d,y,n),x=this.layer.renderer;if(\"vector-field\"===x.type){const t=g.pixelData.pixelBlock,r=x.sizeVariables[0];!a(t)||r.minDataValue&&r.maxDataValue||(r.minDataValue=t.statistics[0].minValue,r.maxDataValue=t.statistics[0].maxValue),this._pixelData={extent:h,pixelBlock:t};const i=h.clone().normalize(),s={exportParametersVersion:this.layer.exportImageServiceParameters.version,extents:i,tileResolution:m,time:JSON.stringify(this.timeExtent||\"\"),isOceanStyle:\"flow-to\"===x.flowRepresentation,isOceanographic:\"ocean-current-kn\"===x.style||\"ocean-current-m\"===x.style},o=this._canReuseVectorFieldData(s)?this._dataParameters.extents:[],n=await x.getGraphicsFromPixelData(g.pixelData,\"vector-uv\"===this.layer.rasterInfo.dataType,o);if(o.length){const e=this._graphics.items.filter((e=>a(e.geometry)&&o.some((t=>t.intersects(e.geometry)))&&!i.some((t=>t.intersects(e.geometry)))));this._graphics.removeMany(e),this._graphics.addMany(n)}else this._graphics.set(\"items\",n);this._graphicsView.update(e),this._dataParameters=s}}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.updateRequested=!1}get updating(){return!this.attached||this.isUpdating()}update(e){this._updateGraphics(e).catch((e=>{n(e)||f.error(e)}))}hitTest(e){return new t({attributes:{},geometry:e.clone(),layer:this.layer})}attach(){this._graphicsView=new x({view:this.view,graphics:this._graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new g(this.view.featuresTilingScheme)}),this.attached=!0}detach(){this._graphics.destroy(),this._graphicsView.destroy(),this.container.removeChild(this._graphicsView.container),this._graphicsView=null}install(e){this.container.addChild(this._graphicsView.container),e.addChild(this.container)}uninstall(e){this.container.removeChild(this._graphicsView.container),e.removeChild(this.container)}isUpdating(){return this._graphicsView.updating||this.updateRequested}getPixelData(){return this.updating?null:this._pixelData}redraw(){}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate())}async _getProjectedFullExtent(e){try{return await m(this.layer.fullExtent,e)}catch(t){try{const t=(await r(this.layer.url,{query:{option:\"footprints\",outSR:e.wkid||JSON.stringify(e.toJSON()),f:\"json\"}})).data.featureCollection.layers[0].layerDefinition.extent;return t?l.fromJSON(t):null}catch{return null}}}_canReuseVectorFieldData(e){const t=this._dataParameters.exportParametersVersion===e.exportParametersVersion,r=this._dataParameters.time===e.time,i=Math.abs(this._dataParameters.tileResolution-e.tileResolution)/e.tileResolution<.01,s=this._dataParameters.extents.some((t=>e.extents.some((e=>t.intersects(e))))),a=this._dataParameters.isOceanStyle===e.isOceanStyle,o=this._dataParameters.isOceanographic===e.isOceanographic;return t&&r&&i&&s&&a&&o}};e([c()],_.prototype,\"attached\",void 0),e([c()],_.prototype,\"container\",void 0),e([c()],_.prototype,\"layer\",void 0),e([c()],_.prototype,\"timeExtent\",void 0),e([c()],_.prototype,\"view\",void 0),e([c()],_.prototype,\"updateRequested\",void 0),e([c()],_.prototype,\"updating\",null),e([p({graphics:\"Graphics\"})],_.prototype,\"type\",void 0),_=e([h(\"esri.views.2d.layers.imagery.ImageryGraphicsView2D\")],_);const w=_;export{w as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../Graphic.js\";import r from\"../../../../core/Accessor.js\";import i from\"../../../../core/Logger.js\";import{isSome as s}from\"../../../../core/maybe.js\";import{isAbortError as o}from\"../../../../core/promiseUtils.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{enumeration as n}from\"../../../../core/accessorSupport/decorators/enumeration.js\";import{subclass as p}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{mosaicPixelData as l}from\"../../../../layers/support/rasterFunctions/pixelUtils.js\";import{BitmapContainer as c}from\"../../engine/BitmapContainer.js\";import{Container as h}from\"../../engine/Container.js\";import m from\"../../engine/ImageryBitmapSource.js\";import d from\"../support/ExportStrategy.js\";const u=i.getLogger(\"esri.views.2d.layers.imagery.ImageryView2D\");let y=class extends r{constructor(){super(...arguments),this.attached=!1,this.container=new h,this.updateRequested=!1,this.type=\"Imagery\",this._bitmapView=null}destroy(){this.attached&&(this.detach(),this.attached=!1),this.updateRequested=!1}get updating(){return!this.attached||this.isUpdating()}update(e){this.strategy.update(e).catch((e=>{o(e)||u.error(e)}))}detach(){this.strategy.destroy(),this._bitmapView.removeAllChildren(),this.container.removeAllChildren()}hitTest(e){return new t({attributes:{},geometry:e.clone(),layer:this.layer})}attach(){const e=this.layer.version>=10,t=this.layer.version>=10.1?this.layer.imageMaxHeight:2048,r=this.layer.version>=10.1?this.layer.imageMaxWidth:2048;this._bitmapView=new c,this.strategy=new d({container:this._bitmapView,imageNormalizationSupported:e,imageMaxHeight:t,imageMaxWidth:r,fetchSource:this._fetchImage.bind(this),requestUpdate:()=>this.requestUpdate()}),this.attached=!0}install(e){this.container.addChild(this._bitmapView),e.addChild(this.container)}uninstall(e){this.container.removeChild(this._bitmapView),e.removeChild(this.container)}redraw(){this.strategy.updateExports((e=>{e.source instanceof HTMLImageElement?e.requestRender():this.layer.applyRenderer({pixelBlock:e.source.pixelBlock}).then((t=>{const r=e.source;r.pixelBlock=t.pixelBlock,r.filter=e=>this.layer.applyFilter(e),this.container.requestRender()}))}))}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate())}isUpdating(){return this.strategy.updating||this.updateRequested}getPixelData(){if(this.updating)return null;const e=this.strategy.bitmaps;if(1===e.length&&e[0].source)return{extent:e[0].source.extent,pixelBlock:e[0].source.originalPixelBlock};if(e.length>1){const t=this.view.extent,r=e.map((e=>e.source)).filter((e=>e.extent&&e.extent.intersects(t))).map((e=>({extent:e.extent,pixelBlock:e.originalPixelBlock}))),i=l(r,t);return s(i)?{extent:i.extent,pixelBlock:i.pixelBlock}:null}return null}_fetchImage(e,t,r,i){return(i=i||{}).timeExtent=this.timeExtent,i.requestAsImageElement=!0,this.layer.fetchImage(e,t,r,i).then((e=>e.imageElement?e.imageElement:this.layer.applyRenderer(e.pixelData,{signal:i.signal}).then((t=>{const r=new m(t.pixelBlock,t.extent.clone(),e.pixelData.pixelBlock);return r.filter=e=>this.layer.applyFilter(e),r}))))}};e([a()],y.prototype,\"attached\",void 0),e([a()],y.prototype,\"container\",void 0),e([a()],y.prototype,\"layer\",void 0),e([a()],y.prototype,\"strategy\",void 0),e([a()],y.prototype,\"timeExtent\",void 0),e([a()],y.prototype,\"view\",void 0),e([a()],y.prototype,\"updateRequested\",void 0),e([a()],y.prototype,\"updating\",null),e([n({imagery:\"Imagery\"})],y.prototype,\"type\",void 0),y=e([p(\"esri.views.2d.layers.imagery.ImageryView2D\")],y);const g=y;export{g as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{isSome as t}from\"../../core/maybe.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import p from\"../../geometry/Point.js\";import{combinedViewLayerTimeExtentProperty as i}from\"../../layers/support/commonProperties.js\";import a from\"../../rest/support/Query.js\";import{getFetchPopupTemplate as n}from\"./support/popupUtils.js\";const u=u=>{let m=class extends u{constructor(){super(...arguments),this.view=null}async fetchPopupFeatures(e,o){const{layer:s}=this;if(!e)throw new r(\"imagerylayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:s});const{popupEnabled:i}=s,u=n(s,o);if(!i||!t(u))throw new r(\"imagerylayerview:fetchPopupFeatures\",\"Missing required popupTemplate or popupEnabled\",{popupEnabled:i,popupTemplate:u});const m=await u.getRequiredFields(),c=new a;c.timeExtent=this.timeExtent,c.geometry=e,c.outFields=m,c.outSpatialReference=e.spatialReference;const l=this.view.resolution,y=\"2d\"===this.view.type?new p(l,l,this.view.spatialReference):new p(.5*l,.5*l,this.view.spatialReference),{returnTopmostRaster:h,showNoDataRecords:w}=u.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},d={returnDomainValues:!0,returnTopmostRaster:h,pixelSize:y,showNoDataRecords:w,signal:t(o)?o.signal:null};return s.queryVisibleRasters(c,d).then((e=>e))}canResume(){var e;return!!super.canResume()&&(null==(e=this.timeExtent)||!e.isEmpty)}};return e([o()],m.prototype,\"layer\",void 0),e([o()],m.prototype,\"suspended\",void 0),e([o(i)],m.prototype,\"timeExtent\",void 0),e([o()],m.prototype,\"view\",void 0),m=e([s(\"esri.views.layers.ImageryLayerView\")],m),m};export{u as ImageryLayerView,u as default};\n"],"names":["_","e","init","t","watch","i","property","s","subclass","r","a","LayerView2DMixin","h","o","n","ImageryLayerView","l","u","RefreshableLayerView","w","p","constructor","arguments","_exportImageVersion","initialize","handles","add","subview","container","blendMode","effect","pixelData","updating","getPixelData","hitTest","update","attach","layer","increaseRasterJobHandlerUsage","_setSubView","requestUpdate","timeExtent","on","redraw","redrawOrRefetch","detach","decreaseRasterJobHandlerUsage","destroy","remove","moveStart","viewChange","moveEnd","doRefresh","isUpdating","suspended","renderer","type","format","uninstall","view","layerView","install","prototype","readOnly","d","default","isSome","debounce","isAbortError","c","enumeration","projectExtent","m","snapImageToSymbolTile","GraphicsCollection","Container","y","g","x","f","getLogger","attached","updateRequested","_graphicsView","_projectFullExtentPromise","_dataParameters","exportParametersVersion","extents","tileResolution","time","isOceanStyle","isOceanographic","_graphics","_updateGraphics","stationary","state","xmin","extent","ymin","xmax","ymax","spatialReference","size","requestAsImageElement","signal","_getProjectedFullExtent","symbolTileSize","resolution","width","height","fetchImage","pixelBlock","sizeVariables","minDataValue","maxDataValue","statistics","minValue","maxValue","_pixelData","clone","normalize","exportImageServiceParameters","version","JSON","stringify","flowRepresentation","style","_canReuseVectorFieldData","getGraphicsFromPixelData","rasterInfo","dataType","length","items","filter","geometry","some","intersects","removeMany","addMany","set","catch","error","attributes","graphics","requestUpdateCallback","featuresTilingScheme","removeChild","addChild","fullExtent","url","query","option","outSR","wkid","toJSON","data","featureCollection","layers","layerDefinition","fromJSON","Math","abs","combinedViewLayerTimeExtentProperty","getFetchPopupTemplate","fetchPopupFeatures","popupEnabled","popupTemplate","getRequiredFields","outFields","outSpatialReference","returnTopmostRaster","showNoDataRecords","layerOptions","returnDomainValues","pixelSize","queryVisibleRasters","then","canResume","isEmpty"],"sourceRoot":"webpack:///"}