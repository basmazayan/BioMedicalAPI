{"version":3,"file":"4485.b0e33ea87e9e377cea17.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAAoD;AAA4C;AAAmF;AAAuC;AAAgC;AAAuD;AAAmF;AAA6C;AAAkC;AAAiC;AAA8B,IAAIY,CAAC,GAAC,cAAcV,sDAAd,CAAe;AAACW,EAAAA,WAAW,GAAE;AAAA;;AAAC,WAAM,GAAGC,SAAT,kBAAoB,KAAKC,YAAL,GAAkB,CAACd,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAOE,CAAP,KAAWE,0DAAC,CAAC,KAAKQ,KAAN,EAAYf,CAAZ,EAAcC,CAAd,EAAgBE,CAAhB,EAAkBE,CAAlB,CAAlD,EAAuE,KAAKW,sBAAL,GAA4B,CAAChB,CAAD,EAAGC,CAAH,EAAKE,CAAL,KAAS,KAAKY,KAAL,CAAWE,qBAAX,CAAiC;AAACC,MAAAA,QAAQ,EAACjB,CAAV;AAAYkB,MAAAA,gBAAgB,EAACnB;AAA7B,KAAjC,EAAiE;AAACoB,MAAAA,MAAM,EAACjB;AAAR,KAAjE,CAA5G,EAAyL,KAAKkB,SAAL,GAAe,IAAxM,EAA6M,KAAKN,KAAL,GAAW,IAAxN,EAA6N,KAAKO,IAAL,GAAU,oBAAvO,EAA4P,KAAKC,eAAL,mJAAqB,aAAS;AAAC,WAAI,CAACC,gBAAL;AAAwB,KAAvD,CAA5P;AAAoT;;AAAY,MAARC,QAAQ,GAAE;AAAC,WAAM,CAAC,KAAKC,SAAN,IAAiB,KAAKA,SAAL,CAAeD,QAAtC;AAA+C;;AAAAE,EAAAA,MAAM,CAAC3B,CAAD,EAAG;AAACA,IAAAA,CAAC,CAAC4B,UAAF,GAAa,KAAKF,SAAL,CAAeC,MAAf,CAAsB3B,CAAtB,CAAb,GAAsC,KAAK6B,SAAL,CAAeC,aAAf,EAAtC;AAAqE;;AAAAC,EAAAA,OAAO,CAAC/B,CAAD,EAAG;AAAC,SAAKqB,SAAL,GAAe,IAAIb,sDAAJ,EAAf,EAAqBR,CAAC,CAACgC,QAAF,CAAW,KAAKX,SAAhB,CAArB,EAAgD,KAAKK,SAAL,GAAe,IAAIjB,sDAAJ,CAAM;AAACwB,MAAAA,aAAa,EAAC,KAAKZ;AAApB,KAAN,CAA/D,EAAqG,KAAKG,gBAAL,EAArG;AAA6H;;AAAAU,EAAAA,SAAS,GAAE;AAAC,SAAKR,SAAL,CAAeS,OAAf,IAAyB,KAAKd,SAAL,CAAee,iBAAf,EAAzB,EAA4D,KAAKf,SAAL,CAAegB,MAAf,EAA5D;AAAoF;;AAAAC,EAAAA,OAAO,GAAE,CAAE;;AAAMC,EAAAA,SAAS,GAAE;AAAA;AAAE;;AAAAC,EAAAA,MAAM,GAAE,CAAE;;AAAAhB,EAAAA,gBAAgB,GAAE;AAAC,QAAG,oBAAkB,KAAKT,KAAL,CAAW0B,QAAX,CAAoBnB,IAAzC,EAA8C;AAAO,UAAMtB,CAAC,GAAC,IAAIU,mDAAJ,CAAM,KAAKI,YAAX,EAAwB,KAAKE,sBAA7B,EAAoD,KAAKD,KAAL,CAAW0B,QAA/D,CAAR;AAAiF,SAAKpB,SAAL,CAAeqB,SAAf,GAAyB1C,CAAzB,EAA2B,KAAK6B,SAAL,CAAeC,aAAf,EAA3B;AAA0D;;AAAn7B,CAArB;AAA08B9B,uDAAC,CAAC,CAACG,sFAAC,EAAF,CAAD,EAAOQ,CAAC,CAACgC,SAAT,EAAmB,WAAnB,EAA+B,KAAK,CAApC,CAAD,EAAwC3C,uDAAC,CAAC,CAACG,sFAAC,EAAF,CAAD,EAAOQ,CAAC,CAACgC,SAAT,EAAmB,WAAnB,EAA+B,KAAK,CAApC,CAAzC,EAAgF3C,uDAAC,CAAC,CAACG,sFAAC,EAAF,CAAD,EAAOQ,CAAC,CAACgC,SAAT,EAAmB,OAAnB,EAA2B,KAAK,CAAhC,CAAjF,EAAoH3C,uDAAC,CAAC,CAACG,sFAAC,EAAF,CAAD,EAAOQ,CAAC,CAACgC,SAAT,EAAmB,WAAnB,EAA+B,KAAK,CAApC,CAArH,EAA4J3C,uDAAC,CAAC,CAACG,sFAAC,EAAF,CAAD,EAAOQ,CAAC,CAACgC,SAAT,EAAmB,MAAnB,EAA0B,KAAK,CAA/B,CAA7J,EAA+L3C,uDAAC,CAAC,CAACG,sFAAC,EAAF,CAAD,EAAOQ,CAAC,CAACgC,SAAT,EAAmB,UAAnB,EAA8B,IAA9B,CAAhM,EAAoOhC,CAAC,GAACX,uDAAC,CAAC,CAACK,sFAAC,CAAC,8CAAD,CAAF,CAAD,EAAqDM,CAArD,CAAvO;AAA+R,MAAMiC,CAAC,GAACjC,CAAR;;;;;;;;;;;;;;;;;;ACJ3vD;AACA;AACA;AACA;AACuH,gBAAgB,2DAAC,CAAC,cAAc,wCAAwC,2BAA2B,SAAS,YAAY,kBAAkB,uBAAuB,8BAA8B,qBAAqB,kDAAC,qCAAqC,6DAAK,CAAC,EAAE,2CAAgE;;;;;;;;;;;;;;;;;;;ACJzb;AACA;AACA;AACA;AACA;AAA0C,MAAMV,CAAC,GAACD,8DAAA,CAAY,2CAAZ,CAAR;;AAAiE,MAAMK,CAAN,CAAO;AAACO,EAAAA,WAAW,CAACZ,CAAD,EAAGC,CAAH,EAAKI,CAAL,EAAOI,CAAP,EAAS;AAAC,SAAKsC,KAAL,GAAW;AAACC,MAAAA,IAAI,EAAC;AAAN,KAAX,EAA4B,KAAKN,SAAL,GAAe1C,CAA3C,EAA6C,KAAKiD,MAAL,GAAYhD,CAAzD,EAA2D,KAAKiD,IAAL,GAAU7C,CAArE,EAAuE,KAAK8C,UAAL,GAAgB1C,CAAvF;AAAyF;;AAAM2C,EAAAA,IAAI,GAAE;AAAA;;AAAA;AAAC,YAAMpD,CAAC,GAAC,IAAIqD,eAAJ,EAAR;AAA4B,WAAI,CAACN,KAAL,GAAW;AAACC,QAAAA,IAAI,EAAC,SAAN;AAAgBM,QAAAA,eAAe,EAACtD;AAAhC,OAAX;AAA8C,YAAMC,CAAC,SAAO,KAAI,CAACyC,SAAL,CAAea,aAAf,CAA6B;AAACN,QAAAA,MAAM,EAAC,KAAI,CAACA,MAAb;AAAoBC,QAAAA,IAAI,EAAC,KAAI,CAACA,IAA9B;AAAmCC,QAAAA,UAAU,EAAC,KAAI,CAACA;AAAnD,OAA7B,EAA4FnD,CAAC,CAACoB,MAA9F,CAAd;AAAoH,WAAI,CAAC2B,KAAL,GAAW;AAACC,QAAAA,IAAI,EAAC,QAAN;AAAeQ,QAAAA,SAAS,EAACvD;AAAzB,OAAX;AAA/L;AAAsO;;AAAAwD,EAAAA,mBAAmB,CAACzD,CAAD,EAAGK,CAAH,EAAKI,CAAL,EAAO;AAAC,QAAG,aAAW,KAAKsC,KAAL,CAAWC,IAAzB,EAA8B,OAAO,KAAK/C,CAAC,CAACyD,KAAF,CAAQ,wCAAR,CAAZ;AAA8D,UAAMlD,CAAC,GAAC,KAAKuC,KAAL,CAAWS,SAAnB;AAA6BhD,IAAAA,CAAC,CAACiD,mBAAF,CAAsBzD,CAAtB,EAAwBK,CAAxB,EAA0BI,CAA1B,GAA6B,KAAKsC,KAAL,GAAW;AAACC,MAAAA,IAAI,EAAC,UAAN;AAAiBQ,MAAAA,SAAS,EAAChD;AAA3B,KAAxC;AAAsE;;AAAA2B,EAAAA,OAAO,GAAE;AAAC,QAAG,cAAY,KAAKY,KAAL,CAAWC,IAA1B,EAA+B,OAAO,KAAKD,KAAL,CAAWO,eAAX,CAA2BK,KAA3B,IAAmC,MAAK,KAAKZ,KAAL,GAAW;AAACC,MAAAA,IAAI,EAAC;AAAN,KAAhB,CAA1C;AAA6E,mBAAa,KAAKD,KAAL,CAAWC,IAAxB,KAA+B,KAAKD,KAAL,CAAWS,SAAX,CAAqBI,MAArB,IAA8B,KAAKb,KAAL,GAAW;AAACC,MAAAA,IAAI,EAAC;AAAN,KAAxE;AAA2F;;AAAArB,EAAAA,MAAM,CAAC3B,CAAD,EAAG;AAAC,QAAG,CAAC,KAAK0C,SAAL,CAAemB,sBAAf,CAAsC7D,CAAC,CAAC0C,SAAxC,CAAJ,EAAuD,OAAM,CAAC,CAAP;AAAS,WAAM,EAAE,CAAC,KAAKO,MAAL,CAAYa,MAAZ,CAAmB9D,CAAC,CAACiD,MAArB,CAAD,IAA+B,KAAKC,IAAL,CAAU,CAAV,MAAelD,CAAC,CAACkD,IAAF,CAAO,CAAP,CAA9C,IAAyD,KAAKA,IAAL,CAAU,CAAV,MAAelD,CAAC,CAACkD,IAAF,CAAO,CAAP,CAAxE,IAAmF,KAAKC,UAAL,KAAkBnD,CAAC,CAACmD,UAAzG,MAAuH,KAAKT,SAAL,GAAe1C,CAAC,CAAC0C,SAAjB,EAA2B,CAAC,CAAnJ,CAAN;AAA4J;;AAAl/B;;;;;;;;;;;;;;;;;;;;;ACJlH;AACA;AACA;AACA;AACiS,gBAAgB,4DAAC,CAAC,cAAc,2CAA2C,kBAAkB,yBAAyB,mBAAmB,yCAAyC,QAAQ,sDAAC,+FAA+F,gBAAgB,MAAM,cAAc,MAAM,GAAG,sDAAC,WAAW,8CAA8C,oBAAoB,+DAA+D,2DAAC,cAAc,MAAM,iBAAiB,kDAAC,IAAI,kDAAC,eAAe,kDAAC,iEAAiE,kDAAC,oBAAoB,kDAAC,QAAQ,kDAAC,wCAAwC,oBAAoB,OAAO,IAAI,qDAAC,KAAoC;;;;;;;;;;;;;;;;;;;;;;;ACJ7/B;AACA;AACA;AACA;AACgU,QAAQ,iBAAiB,qCAAqC,2BAA2B,QAAQ,wEAAc,6BAA6B,uEAAa,gCAAgC,gEAAC,QAAQ,WAAW,IAAI,qGAAqG,SAAS,mFAAwG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJvuB;AACA;AACA;AACA;AAC+zB,eAAe,8DAAW,2CAA2C,oBAAoB,sDAAC,CAAC,eAAe,qCAAqC,qEAAC,oBAAoB,aAAa,qDAAqD,UAAU,qDAAqD,eAAe,2BAA2B,UAAU,MAAM,YAAY,oBAAoB,GAAG,sDAAC,8BAA8B,MAAM,8CAA8C,kBAAkB,YAAY,4EAA4E,yDAAC,UAAU,GAAG,sDAAC,iBAAiB,kCAAkC,2CAA2C,CAAC,sDAAC,2GAA2G,qGAAqG,OAAO,mEAAC,kEAAkE,oBAAoB,SAAS,gCAAgC,sDAAC,gEAAgE,uDAAC,EAAE,sFAAC,mCAAmC,uDAAC,EAAE,sFAAC,wCAAwC,uDAAC,EAAE,sFAAC,mCAAmC,uDAAC,EAAE,uFAAC,+CAA+C,UAAU,gBAAgB,YAAY,wDAAC,EAAE,4EAA4E,sDAAsD,2DAAC,0BAA0B,2DAAC,gCAAgC,yDAAC,EAAE,wFAAwF,EAAE,uBAA4C;;;;;;;;;;;;;;;;;;;;;ACJl6E;AACA;AACA;AACA;AACA;AAAkE;AAAoF;;AAAoC,MAAMhC,CAAN,CAAO;AAACE,EAAAA,WAAW,CAACZ,CAAD,EAAGC,CAAH,EAAKS,CAAL,EAAO;AAAC,SAAKI,YAAL,GAAkBd,CAAlB,EAAoB,KAAKgB,sBAAL,GAA4Bf,CAAhD,EAAkD,KAAKgE,iBAAL,GAAuB9D,iGAAC,CAACO,CAAD,CAA1E;AAA8E;;AAAY,MAARwD,QAAQ,GAAE;AAAC,WAAO,KAAKD,iBAAL,CAAuBE,SAAvB,GAAiC,CAAxC;AAA0C;;AAAkB,MAAdC,cAAc,GAAE;AAAC,WAAO,KAAKH,iBAAZ;AAA8B;;AAAAJ,EAAAA,sBAAsB,CAAC7D,CAAD,EAAG;AAAC,QAAIG,CAAC,GAAC,CAAC,CAAP;AAAS,WAAOA,CAAC,GAACA,CAAC,IAAEH,CAAC,CAACc,YAAF,KAAiB,KAAKA,YAA3B,EAAwCX,CAAC,GAACA,CAAC,IAAEH,CAAC,CAACgB,sBAAF,KAA2B,KAAKA,sBAA7E,EAAoGb,CAAC,GAACA,CAAC,IAAEH,CAAC,CAACiE,iBAAF,CAAoBI,eAApB,KAAsC,KAAKJ,iBAAL,CAAuBI,eAAtK,EAAsLlE,CAAC,GAACA,CAAC,IAAEH,CAAC,CAACiE,iBAAF,CAAoBK,aAApB,KAAoC,KAAKL,iBAAL,CAAuBK,aAAtP,EAAoQnE,CAAC,GAACA,CAAC,IAAEH,CAAC,CAACiE,iBAAF,CAAoBM,WAApB,KAAkC,KAAKN,iBAAL,CAAuBM,WAAlU,EAA8UpE,CAAC,GAACA,CAAC,IAAEH,CAAC,CAACiE,iBAAF,CAAoBO,OAApB,KAA8B,KAAKP,iBAAL,CAAuBO,OAAxY,EAAgZrE,CAAC,GAACA,CAAC,IAAEH,CAAC,CAACiE,iBAAF,CAAoBQ,SAApB,KAAgC,KAAKR,iBAAL,CAAuBQ,SAA5c,EAAsdtE,CAAC,GAACA,CAAC,IAAEH,CAAC,CAACiE,iBAAF,CAAoBS,aAApB,KAAoC,KAAKT,iBAAL,CAAuBS,aAAthB,EAAoiBvE,CAAC,GAACA,CAAC,IAAEH,CAAC,CAACiE,iBAAF,CAAoBU,kBAApB,KAAyC,KAAKV,iBAAL,CAAuBU,kBAAzmB,EAA4nBxE,CAAC,GAACA,CAAC,IAAEH,CAAC,CAACiE,iBAAF,CAAoBW,iBAApB,KAAwC,KAAKX,iBAAL,CAAuBW,iBAAhsB,EAAktBzE,CAAC,GAACA,CAAC,IAAEH,CAAC,CAACiE,iBAAF,CAAoBY,UAApB,KAAiC,KAAKZ,iBAAL,CAAuBY,UAA/wB,EAA0xB1E,CAAC,GAACA,CAAC,IAAEH,CAAC,CAACiE,iBAAF,CAAoBa,WAApB,KAAkC,KAAKb,iBAAL,CAAuBa,WAAx1B,EAAo2B3E,CAAC,IAAE,KAAK8D,iBAAL,CAAuBY,UAA1B,KAAuC1E,CAAC,GAACH,CAAC,CAACiE,iBAAF,CAAoBc,kBAApB,KAAyC,KAAKd,iBAAL,CAAuBc,kBAAzG,CAAp2B,EAAi+B,CAAC,CAAC5E,CAA1+B;AAA4+B;;AAAMoD,EAAAA,aAAa,CAACpD,CAAD,EAAGO,CAAH,EAAK;AAAA;;AAAA;AAAC,YAAK;AAACuC,QAAAA,MAAM,EAACzC,CAAR;AAAU0C,QAAAA,IAAI,EAAC7C;AAAf,UAAkBF,CAAvB;AAAyBH,MAAAA,qEAAC,CAACU,CAAD,CAAD;AAAK,YAAMsE,CAAC,SAAO,KAAI,CAAClE,YAAL,CAAkBN,CAAlB,EAAoBH,CAAC,CAAC,CAAD,CAArB,EAAyBA,CAAC,CAAC,CAAD,CAA1B,EAA8BK,CAA9B,CAAd;AAAA,YAA+C;AAACuE,QAAAA,UAAU,EAACC,CAAZ;AAAcC,QAAAA,SAAS,EAACC;AAAxB,gBAAiC,KAAI,CAACpE,sBAAL,CAA4B,KAAI,CAACiD,iBAAjC,EAAmDe,CAAnD,EAAqDtE,CAArD,CAAhF;AAAwI,aAAO,IAAIT,wDAAJ,CAAMiF,CAAN,EAAQE,CAAR,CAAP;AAAvK;AAAyL;;AAA96C;;;;;;;;;;;;;;;;;ACJjM;AACA;AACA;AACA;AACwD,cAAc,QAAQ,2DAAC,iCAAiC,2DAAC,yFAAyF,qCAAqC,GAAG,OAAO,kJAAkJ,2DAAC,qIAAqL;;;;;;;;;;;;;;;;;;;;;ACJjkB;AACA;AACA;AACA;AACA;AAAgD;;SAA2GnF;;;;;0IAAf,WAAiBA,CAAjB,EAAmB+E,CAAC,GAAC/E,CAAC,CAACuF,aAAvB,EAAqC;AAAC,QAAG,CAACxF,sDAAC,CAACgF,CAAD,CAAL,EAAS,OAAM,EAAN;AAAS,UAAMxE,CAAC,SAAOwE,CAAC,CAACS,iBAAF,CAAoBxF,CAAC,CAACyF,WAAtB,CAAd;AAAA,UAAiD;AAACC,MAAAA,mBAAmB,EAACjF;AAArB,QAAwBsE,CAAzE;AAAA,UAA2E;AAACY,MAAAA,aAAa,EAACvF,CAAf;AAAiBwF,MAAAA,WAAW,EAACpF,CAA7B;AAA+BqF,MAAAA,aAAa,EAACvF,CAA7C;AAA+CwF,MAAAA,aAAa,EAACC;AAA7D,QAAgE/F,CAA3I;AAA6I,QAAGO,CAAC,CAACyF,QAAF,CAAW,GAAX,CAAH,EAAmB,OAAM,CAAC,GAAD,CAAN;AAAY,UAAMC,CAAC,GAACxF,CAAC,SAAOkC,mFAAC,CAAC3C,CAAD,CAAR,GAAY,EAArB;AAAA,UAAwBE,CAAC,GAACQ,wEAAC,CAACV,CAAC,CAACyF,WAAH,EAAe,CAAC,GAAGlF,CAAJ,EAAM,GAAG0F,CAAT,CAAf,CAA3B;AAAuD,WAAOzF,CAAC,IAAEN,CAAC,CAACgG,IAAF,CAAO1F,CAAP,CAAH,EAAaN,CAAC,IAAEE,CAAH,IAAMJ,CAAC,CAACyF,WAAF,CAAcU,GAAd,CAAkB/F,CAAlB,CAAN,IAA4B,CAAC,CAAD,KAAKF,CAAC,CAACkG,OAAF,CAAUhG,CAAV,CAAjC,IAA+CF,CAAC,CAACgG,IAAF,CAAO9F,CAAP,CAA5D,EAAsEF,CAAC,IAAEI,CAAH,IAAMN,CAAC,CAACyF,WAAF,CAAcU,GAAd,CAAkB7F,CAAlB,CAAN,IAA4B,CAAC,CAAD,KAAKJ,CAAC,CAACkG,OAAF,CAAU9F,CAAV,CAAjC,IAA+CJ,CAAC,CAACgG,IAAF,CAAO5F,CAAP,CAArH,EAA+HyF,CAAC,IAAEA,CAAC,CAACM,OAAF,CAAWtG,CAAC,IAAE;AAAC,YAAK;AAACuG,QAAAA,QAAQ,EAAC3D;AAAV,UAAa5C,CAAlB;AAAoBG,MAAAA,CAAC,IAAEyC,CAAH,IAAM3C,CAAC,CAACyF,WAAF,CAAcU,GAAd,CAAkBxD,CAAlB,CAAN,IAA4B,CAAC,CAAD,KAAKzC,CAAC,CAACkG,OAAF,CAAUzD,CAAV,CAAjC,IAA+CzC,CAAC,CAACgG,IAAF,CAAOvD,CAAP,CAA/C;AAAyD,KAA5F,CAAlI,EAAiOzC,CAAxO;AAA0O;;;;AAAA,SAAS6E,CAAT,CAAWpC,CAAX,EAAajC,CAAb,EAAe;AAAC,SAAOiC,CAAC,CAAC4C,aAAF,GAAgB5C,CAAC,CAAC4C,aAAlB,GAAgCxF,sDAAC,CAACW,CAAD,CAAD,IAAMA,CAAC,CAAC6F,2BAAR,IAAqCxG,sDAAC,CAAC4C,CAAC,CAAC6D,oBAAH,CAAtC,GAA+D7D,CAAC,CAAC6D,oBAAjE,GAAsF,IAA7H;AAAkI","sources":["./node_modules/@arcgis/core/views/2d/engine/flow/AnimatedFlowView2D.js","./node_modules/@arcgis/core/views/2d/engine/flow/FlowContainer.js","./node_modules/@arcgis/core/views/2d/engine/flow/FlowDisplayData.js","./node_modules/@arcgis/core/views/2d/engine/flow/FlowDisplayObject.js","./node_modules/@arcgis/core/views/2d/engine/flow/FlowGLResources.js","./node_modules/@arcgis/core/views/2d/engine/flow/FlowStrategy.js","./node_modules/@arcgis/core/views/2d/engine/flow/FlowStyle.js","./node_modules/@arcgis/core/views/2d/engine/flow/animatedFlowRendererUtils.js","./node_modules/@arcgis/core/views/layers/support/popupUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{loadImagery as o}from\"./dataUtils.js\";import i from\"./FlowContainer.js\";import a from\"./FlowStrategy.js\";import n from\"./FlowStyle.js\";let l=class extends t{constructor(){super(...arguments),this._loadImagery=(e,t,r,s)=>o(this.layer,e,t,r,s),this._createStreamlinesMesh=(e,t,r)=>this.layer.createStreamlinesMesh({flowData:t,rendererSettings:e},{signal:r}),this.container=null,this.layer=null,this.type=\"rasterAnimatedFlow\",this.redrawOrRefetch=async()=>{this._rendererChanged()}}get updating(){return!this._strategy||this._strategy.updating}update(e){e.stationary?this._strategy.update(e):this.layerView.requestUpdate()}install(e){this.container=new i,e.addChild(this.container),this._strategy=new a({flowContainer:this.container}),this._rendererChanged()}uninstall(){this._strategy.destroy(),this.container.removeAllChildren(),this.container.remove()}moveEnd(){}async doRefresh(){}attach(){}_rendererChanged(){if(\"animated-flow\"!==this.layer.renderer.type)return;const e=new n(this._loadImagery,this._createStreamlinesMesh,this.layer.renderer);this.container.flowStyle=e,this.layerView.requestUpdate()}};e([r()],l.prototype,\"_strategy\",void 0),e([r()],l.prototype,\"container\",void 0),e([r()],l.prototype,\"layer\",void 0),e([r()],l.prototype,\"layerView\",void 0),e([r()],l.prototype,\"type\",void 0),e([r()],l.prototype,\"updating\",null),l=e([s(\"esri.views.2d.engine.flow.AnimatedFlowView2D\")],l);const p=l;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"./BrushFlow.js\";import{WGLDrawPhase as r}from\"../webgl/enums.js\";import s from\"../webgl/WGLContainer.js\";class t extends s{constructor(){super(...arguments),this.flowStyle=null}get requiresDedicatedFBO(){return!1}doRender(e){super.doRender(e)}prepareRenderPasses(s){const t=s.registerRenderPass({name:\"flow\",brushes:[e],target:()=>this.children,drawPhase:r.MAP});return[...super.prepareRenderPasses(s),t]}}export{t as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";const t=e.getLogger(\"esri.views.2d.engine.flow.FlowDisplayData\");class s{constructor(e,t,s,a){this.state={name:\"created\"},this.flowStyle=e,this.extent=t,this.size=s,this.pixelRatio=a}async load(){const e=new AbortController;this.state={name:\"loading\",abortController:e};const t=await this.flowStyle.loadResources({extent:this.extent,size:this.size,pixelRatio:this.pixelRatio},e.signal);this.state={name:\"loaded\",resources:t}}prepareForRendering(e,s,a){if(\"loaded\"!==this.state.name)return void t.error(\"Only loaded resources can be attached.\");const i=this.state.resources;i.prepareForRendering(e,s,a),this.state={name:\"attached\",resources:i}}destroy(){if(\"loading\"===this.state.name)return this.state.abortController.abort(),void(this.state={name:\"detached\"});\"attached\"===this.state.name&&(this.state.resources.detach(),this.state={name:\"detached\"})}update(e){if(!this.flowStyle.areResourcesCompatible(e.flowStyle))return!1;return!(!this.extent.equals(e.extent)||this.size[0]!==e.size[0]||this.size[1]!==e.size[1]||this.pixelRatio!==e.pixelRatio)&&(this.flowStyle=e.flowStyle,!0)}}export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{deg2rad as t}from\"../../../../core/mathUtils.js\";import{isSome as s,isNone as a}from\"../../../../core/maybe.js\";import{b as e,c as i,d as r,r as o}from\"../../../../chunks/mat3.js\";import{c as n}from\"../../../../chunks/mat3f32.js\";import{DisplayObject as l}from\"../DisplayObject.js\";class m extends l{constructor(){super(...arguments),this._displayData=null}get displayData(){return this._displayData}set displayData(t){this._displayData=t,this.requestRender()}clear(){s(this._displayData)&&(this._displayData.destroy(),this._displayData=null,this.requestRender())}setTransform(s){const{displayData:n}=this;if(a(n))return;const l=n.extent.xmin,m=n.extent.ymax,p=[0,0];s.toScreen(p,[l,m]);const c=(n.extent.xmax-n.extent.xmin)/n.size[0]/s.resolution,d=t(s.rotation),{dvs:x}=this.transforms;e(x),i(x,x,[-1,1,0]),r(x,x,[2/(s.size[0]*s.pixelRatio),-2/(s.size[1]*s.pixelRatio),1]),i(x,x,[p[0],p[1],0]),o(x,x,d),r(x,x,[c*s.pixelRatio,c*s.pixelRatio,1])}_createTransforms(){return{dvs:n()}}}export{m as FlowDisplayObject};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../webgl/BufferObject.js\";import\"../../../webgl/FramebufferObject.js\";import\"../../../../core/has.js\";import\"../../../webgl/checkWebGLError.js\";import\"../../../webgl/enums.js\";import\"../../../../chunks/builtins.js\";import\"../../../webgl/Texture.js\";import t from\"../../../webgl/VertexArrayObject.js\";class r{constructor(e,t){this._vertexData=e,this._indexData=t}prepareForRendering(r,s,i){const a=e.createVertex(r,35044,this._vertexData),o=e.createIndex(r,35044,this._indexData),x=new t(r,s,i,{geometry:a},o);this.vertexBuffer=a,this.indexBuffer=o,this.vertexArray=x,this._vertexData=null,this._indexData=null}detach(){this.vertexArray.dispose(),this.vertexBuffer.dispose(),this.indexBuffer.dispose()}}export{r as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import o from\"../../../../core/Accessor.js\";import e from\"../../../../core/Logger.js\";import{deg2rad as i}from\"../../../../core/mathUtils.js\";import{isNone as r,isSome as s}from\"../../../../core/maybe.js\";import{isAbortError as a}from\"../../../../core/promiseUtils.js\";import{property as l}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import p from\"../../../../geometry/Point.js\";import c from\"./FlowDisplayData.js\";import{FlowDisplayObject as m}from\"./FlowDisplayObject.js\";import d from\"../../../../geometry/Extent.js\";const y=1.15,h=e.getLogger(\"esri.views.2d.engine.flow.FlowStrategy\");let f=class extends o{constructor(t){super(t),this._flowDisplayObject=new m,this._loading=null}initialize(){this.flowContainer.addChild(this._flowDisplayObject)}destroy(){this._clear(),this.flowContainer.removeAllChildren()}get updating(){return null!=this._loading}update(t){const{flowStyle:o}=this.flowContainer;if(r(o))return void this._clear();const{extent:e,rotation:i,resolution:l,pixelRatio:n}=t.state,p=g(e,i);p.expand(y);const m=[Math.round((p.xmax-p.xmin)/l),Math.round((p.ymax-p.ymin)/l)],d=new c(o,p,m,n);if(s(this._loading)){if(this._loading.update(d))return;this._loading.destroy(),this._loading=null}!r(this._flowDisplayObject.displayData)&&this._flowDisplayObject.displayData.update(d)||(d.load().then((()=>{this._flowDisplayObject.clear(),this._flowDisplayObject.displayData=this._loading,this._loading=null}),(t=>{a(t)||(h.error(\"A resource failed to load.\",t),this._loading=null)})),this._loading=d)}_clear(){this._flowDisplayObject.clear(),s(this._loading)&&(this._loading.destroy(),this._loading=null)}};t([l()],f.prototype,\"_loading\",void 0),t([l()],f.prototype,\"flowContainer\",void 0),t([l()],f.prototype,\"updating\",null),f=t([n(\"esri.views.2d.engine.flow.FlowStrategy\")],f);const u=f;function g(t,o){const e=new p({x:(t.xmax+t.xmin)/2,y:(t.ymax+t.ymin)/2,spatialReference:t.spatialReference}),r=t.xmax-t.xmin,s=t.ymax-t.ymin,a=Math.abs(Math.cos(i(o))),l=Math.abs(Math.sin(i(o))),n=a*r+l*s,c=l*r+a*s,m=new d({xmin:e.x-n/2,ymin:e.y-c/2,xmax:e.x+n/2,ymax:e.y+c/2,spatialReference:t.spatialReference});return m.centerAt(e),m}export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{throwIfAborted as e}from\"../../../../core/promiseUtils.js\";import{createAnimatedFlowRendererSettings as r}from\"./animatedFlowRendererUtils.js\";import t from\"./FlowGLResources.js\";class n{constructor(e,t,n){this._loadImagery=e,this._createStreamlinesMesh=t,this._rendererSettings=r(n)}get animated(){return this._rendererSettings.lineSpeed>0}get renderSettings(){return this._rendererSettings}areResourcesCompatible(e){let r=!0;return r=r&&e._loadImagery===this._loadImagery,r=r&&e._createStreamlinesMesh===this._createStreamlinesMesh,r=r&&e._rendererSettings.verticesPerLine===this._rendererSettings.verticesPerLine,r=r&&e._rendererSettings.segmentLength===this._rendererSettings.segmentLength,r=r&&e._rendererSettings.lineSpacing===this._rendererSettings.lineSpacing,r=r&&e._rendererSettings.density===this._rendererSettings.density,r=r&&e._rendererSettings.smoothing===this._rendererSettings.smoothing,r=r&&e._rendererSettings.velocityScale===this._rendererSettings.velocityScale,r=r&&e._rendererSettings.minWeightThreshold===this._rendererSettings.minWeightThreshold,r=r&&e._rendererSettings.minSpeedThreshold===this._rendererSettings.minSpeedThreshold,r=r&&e._rendererSettings.mergeLines===this._rendererSettings.mergeLines,r=r&&e._rendererSettings.interpolate===this._rendererSettings.interpolate,r&&this._rendererSettings.mergeLines&&(r=e._rendererSettings.lineCollisionWidth===this._rendererSettings.lineCollisionWidth),!!r}async loadResources(r,n){const{extent:i,size:s}=r;e(n);const d=await this._loadImagery(i,s[0],s[1],n),{vertexData:g,indexData:h}=await this._createStreamlinesMesh(this._rendererSettings,d,n);return new t(g,h)}}export{n as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{pt2px as e}from\"../../../../core/screenUtils.js\";function n(n){const i=e(n.lineWidth),o=2*i,t=Math.round(e(n.lineLength)/o)+1,l=i,r=10,d=n.lineColor.toRgba(),s=[d[0]/255,d[1]/255,d[2]/255,d[3]],{lineSpeed:h,fadeDuration:a,density:g}=n;return{lineRenderWidth:i,segmentLength:o,verticesPerLine:t,lineCollisionWidth:l,lineSpacing:r,lineColor:s,lineSpeed:h,fadeDuration:a,density:g,smoothing:e(n.smoothing),velocityScale:1,minWeightThreshold:.001,minSpeedThreshold:.001,maxTurnAngle:1,mergeLines:!0,interpolate:!0,profile:!1}}export{n as createAnimatedFlowRendererSettings};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function t(t,d=t.popupTemplate){if(!e(d))return[];const i=await d.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=d,{objectIdField:s,typeIdField:a,globalIdField:o,relationships:u}=t;if(i.includes(\"*\"))return[\"*\"];const f=n?await p(t):[],r=l(t.fieldsIndex,[...i,...f]);return a&&r.push(a),r&&s&&t.fieldsIndex.has(s)&&-1===r.indexOf(s)&&r.push(s),r&&o&&t.fieldsIndex.has(o)&&-1===r.indexOf(o)&&r.push(o),u&&u.forEach((e=>{const{keyField:p}=e;r&&p&&t.fieldsIndex.has(p)&&-1===r.indexOf(p)&&r.push(p)})),r}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,t as getRequiredFields};\n"],"names":["_","e","t","property","r","subclass","s","loadImagery","o","i","a","n","l","constructor","arguments","_loadImagery","layer","_createStreamlinesMesh","createStreamlinesMesh","flowData","rendererSettings","signal","container","type","redrawOrRefetch","_rendererChanged","updating","_strategy","update","stationary","layerView","requestUpdate","install","addChild","flowContainer","uninstall","destroy","removeAllChildren","remove","moveEnd","doRefresh","attach","renderer","flowStyle","prototype","p","default","getLogger","state","name","extent","size","pixelRatio","load","AbortController","abortController","loadResources","resources","prepareForRendering","error","abort","detach","areResourcesCompatible","equals","throwIfAborted","createAnimatedFlowRendererSettings","_rendererSettings","animated","lineSpeed","renderSettings","verticesPerLine","segmentLength","lineSpacing","density","smoothing","velocityScale","minWeightThreshold","minSpeedThreshold","mergeLines","interpolate","lineCollisionWidth","d","vertexData","g","indexData","h","isSome","getFeatureEditFields","fixFields","popupTemplate","getRequiredFields","fieldsIndex","lastEditInfoEnabled","objectIdField","typeIdField","globalIdField","relationships","u","includes","f","push","has","indexOf","forEach","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate","getFetchPopupTemplate"],"sourceRoot":"webpack:///"}