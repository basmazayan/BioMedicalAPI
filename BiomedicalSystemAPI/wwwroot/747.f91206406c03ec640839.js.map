{"version":3,"mappings":"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","names":["e","layers","some","layerDefinition","visibilityField","G","T","name","alias","type","nullable","editable","_","P","w","constructor","super","arguments","this","visibilityMode","initialize","graphics","sourceLayer","layer","on","item","y","readOnly","prototype","u","k","geometryType","geometryTypeJSON","layerId","title","identifyingSymbol","C","toJSON","M","I","R","z","v","x","L","J","n","j","capabilities","operations","supportsMapNotesEditing","featureCollections","featureCollectionJSON","featureCollectionType","legendEnabled","minScale","maxScale","spatialReference","E","sublayers","r","map","id","readCapabilities","t","F","origin","readFeatureCollections","o","i","O","read","items","readLegacyfeatureCollectionJSON","featureCollection","readFullExtent","length","every","extent","D","xmin","ymin","xmax","ymax","reduce","union","readMinScale","readMaxScale","_findSublayer","readSpatialReference","readSublayers","l","a","featureSet","s","find","drawingInfo","renderer","symbol","features","geometry","attributes","popupInfo","popupTemplate","push","writeSublayers","p","m","messages","c","_writeMapNoteSublayer","load","addResolvingPromise","loadFromPortal","supportedTypes","Promise","resolve","Object","assign","beforeSave","h","f","d","g","b","S","forEach","_writeMapNote","_normalizeObjectIds","objectIdField","fields","graphic","A","N","Set","has","add","json","origins","write","enabled","target","ignoreOrigin","overridePolicy","Number","nonNullable","value","B"],"sources":["./node_modules/@arcgis/core/layers/MapNotesLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../geometry.js\";import t from\"../Graphic.js\";import\"../symbols.js\";import r from\"../core/Collection.js\";import o from\"../core/Error.js\";import{clone as i}from\"../core/lang.js\";import{isNone as l,isSome as a}from\"../core/maybe.js\";import{MultiOriginJSONMixin as n}from\"../core/MultiOriginJSONSupport.js\";import{setDeepValue as s}from\"../core/object.js\";import p from\"../core/Warning.js\";import{property as y}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import{reader as m}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as u}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as c}from\"../core/accessorSupport/decorators/writer.js\";import{canProjectWithoutEngine as f,isLoaded as d,load as g,project as b}from\"../geometry/projection.js\";import{normalizeCentralMeridian as S}from\"../geometry/support/normalizeUtils.js\";import{equals as h}from\"../geometry/support/spatialReferenceUtils.js\";import O from\"./FeatureLayer.js\";import w from\"./GraphicsLayer.js\";import j from\"./Layer.js\";import{findLastObjectIdFromFeatures as N}from\"./graphics/objectIdUtils.js\";import{BlendLayer as v}from\"./mixins/BlendLayer.js\";import{OperationalLayer as L}from\"./mixins/OperationalLayer.js\";import{PortalLayer as J}from\"./mixins/PortalLayer.js\";import{ScaleRangeLayer as x}from\"./mixins/ScaleRangeLayer.js\";import T from\"./support/Field.js\";import C from\"../symbols/SimpleFillSymbol.js\";import M from\"../symbols/SimpleLineSymbol.js\";import I from\"../symbols/SimpleMarkerSymbol.js\";import R from\"../symbols/TextSymbol.js\";import E from\"../geometry/SpatialReference.js\";import D from\"../geometry/Extent.js\";function F(e){return e.layers.some((e=>null!=e.layerDefinition.visibilityField))}const G=new T({name:\"OBJECTID\",alias:\"OBJECTID\",type:\"oid\",nullable:!1,editable:!1}),_=new T({name:\"title\",alias:\"Title\",type:\"string\",nullable:!0,editable:!0});let P=class extends w{constructor(){super(...arguments),this.visibilityMode=\"inherited\"}initialize(){for(const e of this.graphics)e.sourceLayer=this.layer;this.graphics.on(\"after-add\",(e=>{e.item.sourceLayer=this.layer})),this.graphics.on(\"after-remove\",(e=>{e.item.sourceLayer=null}))}get sublayers(){return this.graphics}};e([y({readOnly:!0})],P.prototype,\"sublayers\",null),e([y()],P.prototype,\"layer\",void 0),e([y({readOnly:!0})],P.prototype,\"visibilityMode\",void 0),P=e([u(\"esri.layers.MapNotesLayer.MapNotesSublayer\")],P);const k=[{geometryType:\"polygon\",geometryTypeJSON:\"esriGeometryPolygon\",layerId:\"polygonLayer\",title:\"Polygons\",identifyingSymbol:(new C).toJSON()},{geometryType:\"polyline\",geometryTypeJSON:\"esriGeometryPolyline\",layerId:\"polylineLayer\",title:\"Polylines\",identifyingSymbol:(new M).toJSON()},{geometryType:\"multipoint\",geometryTypeJSON:\"esriGeometryMultipoint\",layerId:\"multipointLayer\",title:\"Multipoints\",identifyingSymbol:(new I).toJSON()},{geometryType:\"point\",geometryTypeJSON:\"esriGeometryPoint\",layerId:\"pointLayer\",title:\"Points\",identifyingSymbol:(new I).toJSON()},{geometryType:\"point\",geometryTypeJSON:\"esriGeometryPoint\",layerId:\"textLayer\",title:\"Text\",identifyingSymbol:(new R).toJSON()}];let z=class extends(v(x(L(J(n(j)))))){constructor(e){super(e),this.capabilities={operations:{supportsMapNotesEditing:!0}},this.featureCollections=null,this.featureCollectionJSON=null,this.featureCollectionType=\"notes\",this.legendEnabled=!1,this.minScale=0,this.maxScale=0,this.spatialReference=E.WGS84,this.sublayers=new r(k.map((e=>new P({id:e.layerId,title:e.title,layer:this})))),this.title=\"Map Notes\",this.type=\"map-notes\",this.visibilityMode=\"inherited\"}readCapabilities(e,t,r){return{operations:{supportsMapNotesEditing:!F(t)&&\"portal-item\"!==(null==r?void 0:r.origin)}}}readFeatureCollections(e,t,o){if(!F(t))return null;const i=t.layers.map((e=>{const t=new O;return t.read(e,o),t}));return new r({items:i})}readLegacyfeatureCollectionJSON(e,t){return F(t)?i(t.featureCollection):null}readFullExtent(e,t){if(!t.layers.length||t.layers.every((e=>!e.layerDefinition.extent)))return new D({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:E.WGS84});const r=E.fromJSON(t.layers[0].layerDefinition.spatialReference);return t.layers.reduce(((e,t)=>{const r=t.layerDefinition.extent;return r?D.fromJSON(r).union(e):e}),new D({spatialReference:r}))}readMinScale(e,t){for(const r of t.layers)if(null!=r.layerDefinition.minScale)return r.layerDefinition.minScale;return 0}readMaxScale(e,t){for(const r of t.layers)if(null!=r.layerDefinition.maxScale)return r.layerDefinition.maxScale;return 0}get multipointLayer(){return this._findSublayer(\"multipointLayer\")}get pointLayer(){return this._findSublayer(\"pointLayer\")}get polygonLayer(){return this._findSublayer(\"polygonLayer\")}get polylineLayer(){return this._findSublayer(\"polylineLayer\")}readSpatialReference(e,t){return t.layers.length?E.fromJSON(t.layers[0].layerDefinition.spatialReference):E.WGS84}readSublayers(e,o,i){if(F(o))return null;const l=[];for(let r=0;r<o.layers.length;r++){var a;const{layerDefinition:e,featureSet:i}=o.layers[r],n=null!=(a=e.geometryType)?a:i.geometryType,s=k.find((t=>{var r,o,i;return n===t.geometryTypeJSON&&(null==(r=e.drawingInfo)||null==(o=r.renderer)||null==(i=o.symbol)?void 0:i.type)===t.identifyingSymbol.type}));if(s){const r=new P({id:s.layerId,title:e.name,layer:this,graphics:i.features.map((({geometry:e,symbol:r,attributes:o,popupInfo:i})=>t.fromJSON({attributes:o,geometry:e,symbol:r,popupTemplate:i})))});l.push(r)}}return new r(l)}writeSublayers(e,t,r,i){const{minScale:n,maxScale:p}=this;if(l(e))return;const y=e.some((e=>e.graphics.length>0));if(!this.capabilities.operations.supportsMapNotesEditing){var m;if(y)null==i||null==(m=i.messages)||m.push(new o(\"map-notes-layer:editing-not-supported\",\"New map notes cannot be added to this layer\"));return}const u=[];let c=this.spatialReference.toJSON();e:for(const o of e)for(const e of o.graphics)if(a(e.geometry)){c=e.geometry.spatialReference.toJSON();break e}for(const o of k){const t=e.find((e=>o.layerId===e.id));this._writeMapNoteSublayer(u,t,o,n,p,c,i)}s(\"featureCollection.layers\",u,t)}get textLayer(){return this._findSublayer(\"textLayer\")}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Feature Collection\"]},e)),Promise.resolve(this)}read(e,t){\"featureCollection\"in e&&(e=i(e),Object.assign(e,e.featureCollection)),super.read(e,t)}async beforeSave(){if(l(this.sublayers))return;let e=null;const t=[];for(const o of this.sublayers)for(const r of o.graphics)if(a(r.geometry)){const o=r.geometry;e?h(o.spatialReference,e)||(f(o.spatialReference,e)||d()||await g(),r.geometry=b(o,e)):e=o.spatialReference,t.push(r)}const r=await S(t.map((e=>e.geometry)));t.forEach(((e,t)=>e.geometry=r[t]))}_findSublayer(e){var t,r;return l(this.sublayers)?null:null!=(t=null==(r=this.sublayers)?void 0:r.find((t=>t.id===e)))?t:null}_writeMapNoteSublayer(e,t,r,o,a,n,s){const p=[];if(!l(t)){for(const e of t.graphics)this._writeMapNote(p,e,r.geometryType,s);this._normalizeObjectIds(p,G),e.push({layerDefinition:{name:t.title,drawingInfo:{renderer:{type:\"simple\",symbol:i(r.identifyingSymbol)}},geometryType:r.geometryTypeJSON,minScale:o,maxScale:a,objectIdField:\"OBJECTID\",fields:[G.toJSON(),_.toJSON()],spatialReference:n},featureSet:{features:p,geometryType:r.geometryTypeJSON}})}}_writeMapNote(e,t,r,o){if(l(t))return;const{geometry:i,symbol:n,popupTemplate:s}=t;if(l(i))return;var y,m;if(i.type!==r)return void(null==o||null==(y=o.messages)||y.push(new p(\"map-notes-layer:invalid-geometry-type\",`Geometry \"${i.type}\" cannot be saved in \"${r}\" layer`,{graphic:t})));if(l(n))return void(null==o||null==(m=o.messages)||m.push(new p(\"map-notes-layer:no-symbol\",\"Skipping map notes with no symbol\",{graphic:t})));const u={attributes:{...t.attributes},geometry:i.toJSON(),symbol:n.toJSON()};a(s)&&(u.popupInfo=s.toJSON()),e.push(u)}_normalizeObjectIds(e,t){const r=t.name;let o=N(r,e)+1;const i=new Set;for(const l of e){l.attributes||(l.attributes={});const{attributes:e}=l;(null==e[r]||i.has(e[r]))&&(e[r]=o++),i.add(e[r])}}};e([y({readOnly:!0})],z.prototype,\"capabilities\",void 0),e([m([\"portal-item\",\"web-map\"],\"capabilities\",[\"layers\"])],z.prototype,\"readCapabilities\",null),e([y({readOnly:!0})],z.prototype,\"featureCollections\",void 0),e([m([\"web-map\",\"portal-item\"],\"featureCollections\",[\"layers\"])],z.prototype,\"readFeatureCollections\",null),e([y({readOnly:!0,json:{origins:{\"web-map\":{write:{enabled:!0,target:\"featureCollection\"}}}}})],z.prototype,\"featureCollectionJSON\",void 0),e([m([\"web-map\",\"portal-item\"],\"featureCollectionJSON\",[\"featureCollection\"])],z.prototype,\"readLegacyfeatureCollectionJSON\",null),e([y({readOnly:!0,json:{read:!1,write:{enabled:!0,ignoreOrigin:!0}}})],z.prototype,\"featureCollectionType\",void 0),e([y({json:{write:!1}})],z.prototype,\"fullExtent\",void 0),e([m([\"web-map\",\"portal-item\"],\"fullExtent\",[\"layers\"])],z.prototype,\"readFullExtent\",null),e([y({readOnly:!0,json:{origins:{\"web-map\":{write:{target:\"featureCollection.showLegend\",overridePolicy(){return{enabled:null!=this.featureCollectionJSON}}}}}}})],z.prototype,\"legendEnabled\",void 0),e([y({type:[\"show\",\"hide\"]})],z.prototype,\"listMode\",void 0),e([y({type:Number,nonNullable:!0,json:{write:!1}})],z.prototype,\"minScale\",void 0),e([m([\"web-map\",\"portal-item\"],\"minScale\",[\"layers\"])],z.prototype,\"readMinScale\",null),e([y({type:Number,nonNullable:!0,json:{write:!1}})],z.prototype,\"maxScale\",void 0),e([m([\"web-map\",\"portal-item\"],\"maxScale\",[\"layers\"])],z.prototype,\"readMaxScale\",null),e([y({readOnly:!0})],z.prototype,\"multipointLayer\",null),e([y({value:\"ArcGISFeatureLayer\",type:[\"ArcGISFeatureLayer\"]})],z.prototype,\"operationalLayerType\",void 0),e([y({readOnly:!0})],z.prototype,\"pointLayer\",null),e([y({readOnly:!0})],z.prototype,\"polygonLayer\",null),e([y({readOnly:!0})],z.prototype,\"polylineLayer\",null),e([y({type:E})],z.prototype,\"spatialReference\",void 0),e([m([\"web-map\",\"portal-item\"],\"spatialReference\",[\"layers\"])],z.prototype,\"readSpatialReference\",null),e([y({readOnly:!0,json:{origins:{\"web-map\":{write:{ignoreOrigin:!0}}}}})],z.prototype,\"sublayers\",void 0),e([m(\"web-map\",\"sublayers\",[\"layers\"])],z.prototype,\"readSublayers\",null),e([c(\"web-map\",\"sublayers\")],z.prototype,\"writeSublayers\",null),e([y({readOnly:!0})],z.prototype,\"textLayer\",null),e([y()],z.prototype,\"title\",void 0),e([y({readOnly:!0,json:{read:!1}})],z.prototype,\"type\",void 0),z=e([u(\"esri.layers.MapNotesLayer\")],z);const B=z;export{B as default};\n"],"sourceRoot":"webpack:///","file":"747.f91206406c03ec640839.js"}