{"version":3,"file":"8438.4d709333417f85769a5d.js","mappings":"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","sources":["./node_modules/@arcgis/core/core/CircularArray.js","./node_modules/@arcgis/core/views/2d/LabelManager.js","./node_modules/@arcgis/core/views/2d/engine/Stage.js","./node_modules/@arcgis/core/views/2d/engine/vectorTiles/shaders/Programs.js","./node_modules/@arcgis/core/views/2d/engine/vectorTiles/shaders/VTLMaterialManager.js","./node_modules/@arcgis/core/views/2d/engine/vectorTiles/shaders/sources/resolver.js","./node_modules/@arcgis/core/views/2d/engine/vectorTiles/shaders/sources/shaderRepository.js","./node_modules/@arcgis/core/views/2d/engine/webgl/BitBlitRenderer.js","./node_modules/@arcgis/core/views/2d/engine/webgl/GlyphMosaic.js","./node_modules/@arcgis/core/views/2d/engine/webgl/GlyphSource.js","./node_modules/@arcgis/core/views/2d/engine/webgl/MaterialManager.js","./node_modules/@arcgis/core/views/2d/engine/webgl/Painter.js","./node_modules/@arcgis/core/views/2d/engine/webgl/Profiler.js","./node_modules/@arcgis/core/views/2d/engine/webgl/RectangleBinPack.js","./node_modules/@arcgis/core/views/2d/engine/webgl/SDFConverter.js","./node_modules/@arcgis/core/views/2d/engine/webgl/SpriteMosaic.js","./node_modules/@arcgis/core/views/2d/engine/webgl/TextureManager.js","./node_modules/@arcgis/core/views/2d/engine/webgl/animatedFormats/apng.js","./node_modules/@arcgis/core/views/2d/engine/webgl/animatedFormats/gif.js","./node_modules/@arcgis/core/views/2d/engine/webgl/collisions/CollisionEngine.js","./node_modules/@arcgis/core/views/2d/engine/webgl/collisions/CollisionGrid.js","./node_modules/@arcgis/core/views/2d/engine/webgl/collisions/visualVariableSimpleUtils.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/AnimationEffect.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/BlendEffect.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/Effect.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/FeatureEffect.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/HighlightEffect.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/HittestEffect.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/highlight/HighlightGradient.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/highlight/HighlightRenderer.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/highlight/HighlightSurfaces.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/highlight/parameters.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Bloom.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Blur.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Colorize.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/DropShadow.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/EffectManager.js","./node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Opacity.js","./node_modules/@arcgis/core/views/2d/engine/webgl/fontUtils.js","./node_modules/@arcgis/core/views/2d/engine/webgl/painter/RenderPass.js","./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/BitBlitPrograms.js","./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/BlendPrograms.js","./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/HighlightPrograms.js","./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/MagnifierPrograms.js","./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/MaterialPrograms.js","./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/StencilPrograms.js","./node_modules/@arcgis/core/views/2d/engine/webgl/util/symbolUtils.js","./node_modules/@arcgis/core/views/2d/magnifier/MagnifierView2D.js","./node_modules/@arcgis/core/views/2d/mapViewDeps.js","./node_modules/@arcgis/core/views/2d/navigation/MapViewNavigation.js","./node_modules/@arcgis/core/views/2d/navigation/ZoomBox.js","./node_modules/@arcgis/core/views/2d/navigation/actions/Pan.js","./node_modules/@arcgis/core/views/2d/navigation/actions/Pinch.js","./node_modules/@arcgis/core/views/2d/navigation/actions/Rotate.js","./node_modules/@arcgis/core/views/magnifier/resources.js","./node_modules/@arcgis/core/views/navigation/FilteredFiniteDifference.js","./node_modules/@arcgis/core/views/navigation/Momentum.js","./node_modules/@arcgis/core/views/navigation/MomentumEstimator.js","./node_modules/@arcgis/core/views/navigation/PanPlanarMomentumEstimator.js","./node_modules/@arcgis/core/views/navigation/RotationMomentumEstimator.js","./node_modules/@arcgis/core/views/navigation/ZoomMomentumEstimator.js","./node_modules/@arcgis/core/views/support/AllocationTracer.js","./node_modules/@arcgis/core/views/webgl/InstanceCounter.js","./node_modules/@arcgis/core/views/webgl/RenderingContext.js","./node_modules/@arcgis/core/views/webgl/WebGLDriverTest.js","./node_modules/@arcgis/core/views/webgl/capabilities/DisjointTimerQuery.js","./node_modules/@arcgis/core/views/webgl/capabilities/DrawBuffers.js","./node_modules/@arcgis/core/views/webgl/capabilities/Instancing.js","./node_modules/@arcgis/core/views/webgl/capabilities/LoseContext.js","./node_modules/@arcgis/core/views/webgl/capabilities/VertexArrayObjects.js","./node_modules/@arcgis/core/views/webgl/capabilities/load.js","./node_modules/@arcgis/core/views/webgl/testDoublePrecisionArithmetic.js","./node_modules/@arcgis/core/views/webgl/testFloatBufferBlend.js","./node_modules/@arcgis/core/views/webgl/testSVGPremultipliedAlpha.js","./node_modules/@arcgis/core/views/webgl/testSamplerPrecision.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"./maybe.js\";class s{constructor(t){this.size=0,this._start=0,this.maxSize=t,this._buffer=new Array(t)}get entries(){return this._buffer}enqueue(t){if(this.size===this.maxSize){const s=this._buffer[this._start];return this._buffer[this._start]=t,this._start=(this._start+1)%this.maxSize,s}return this._buffer[(this._start+this.size++)%this.maxSize]=t,null}dequeue(){if(0===this.size)return null;const t=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,t}peek(){return 0===this.size?null:this._buffer[this._start]}find(s){if(0===this.size)return null;for(const e of this._buffer)if(t(e)&&s(e))return e;return null}clear(s){let e=this.dequeue();for(;t(e);)s&&s(e),e=this.dequeue()}}export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import s from\"../../core/Error.js\";import{HandleOwnerMixin as i}from\"../../core/HandleOwner.js\";import r from\"../../core/Logger.js\";import{throttle as o}from\"../../core/throttle.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import{CollisionEngine as p}from\"./engine/webgl/collisions/CollisionEngine.js\";const n=32,d=r.getLogger(\"esri.views.2d.layers.labels.LabelManager\");let u=class extends(i(t)){constructor(e){super(e),this._applyVisibilityPassThrottled=o(this._applyVisibilityPass,n,this),this.lastUpdateId=-1,this.updateRequested=!1,this.view=null}initialize(){this.collisionEngine=new p}destroy(){this.collisionEngine=null,this._applyVisibilityPassThrottled.remove(),this._applyVisibilityPassThrottled=null}get updating(){return this.updateRequested}update(e){this._applyVisibilityPassThrottled(e)}viewChange(){this.requestUpdate()}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate())}processUpdate(e){this._set(\"updateParameters\",e),this.updateRequested&&(this.updateRequested=!1,this.update(e))}_applyVisibilityPass(e){try{const t=this.view.featuresTilingScheme.getClosestInfoForScale(e.state.scale).level;this.collisionEngine.run(this.view.allLayerViews.items,e,t)}catch(t){d.error(new s(\"mapview-labeling\",\"Encountered an error during label decluttering\",t))}}};e([a()],u.prototype,\"updateRequested\",void 0),e([a({readOnly:!0})],u.prototype,\"updateParameters\",void 0),e([a()],u.prototype,\"updating\",null),e([a()],u.prototype,\"view\",void 0),u=e([l(\"esri.views.2d.layers.labels.LabelManager\")],u);const c=u;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import{on as t}from\"../../../core/events.js\";import i from\"../../../core/has.js\";import{isSome as r}from\"../../../core/maybe.js\";import{addFrameTask as s}from\"../../../core/scheduling.js\";import{init as n}from\"../../../core/watchUtils.js\";import{t as a}from\"../../../chunks/common.js\";import{i as o,t as h,r as l}from\"../../../chunks/mat2d.js\";import{c as d}from\"../../../chunks/mat2df64.js\";import{c}from\"../../../chunks/mat3f32.js\";import{s as p,t as m}from\"../../../chunks/vec2.js\";import{a as u}from\"../../../chunks/vec2f64.js\";import _ from\"../../../symbols/cim/CIMResourceManager.js\";import g from\"../../webgl/BufferObject.js\";import f from\"../../webgl/FramebufferObject.js\";import\"../../webgl/checkWebGLError.js\";import\"../../webgl/enums.js\";import\"../../../chunks/builtins.js\";import{createProgram as b}from\"../../webgl/programUtils.js\";import\"../../webgl/Texture.js\";import R from\"../../webgl/VertexArrayObject.js\";import{createContextOrErrorHTML as w}from\"../../webgl/context-util.js\";import{Container as O}from\"./Container.js\";import{WGLDrawPhase as y}from\"./webgl/enums.js\";import F from\"./webgl/Painter.js\";import{Profiler as x}from\"./webgl/Profiler.js\";import{stencil as C}from\"./webgl/shaders/StencilPrograms.js\";import{Timeline as T}from\"../support/Timeline.js\";import{resampleHermite as j,encodeResult as B,createEmptyImageData as P}from\"../../support/screenshotUtils.js\";import{RenderingContext as v}from\"../../webgl/RenderingContext.js\";const k=2e3;class S extends O{constructor(n,a){super(),this._trash=new Set,this._clipData=new Float32Array(8),this._upperLeft=u(),this._upperRight=u(),this._lowerLeft=u(),this._lowerRight=u(),this._mat2=d(),this._clipRendererInitialized=!1,this._renderRemainingTime=0,this._lastFrameRenderTime=0,this.renderRequested=!1,this.stage=this,this._stationary=!0;const{canvas:o=document.createElement(\"canvas\"),alpha:h=!0,stencil:l=!0,contextOptions:c={}}=a;this._canvas=o;const p=w(o,1,{alpha:h,antialias:!1,depth:!0,stencil:l});this.context=new v(r(p)?p:null,c),this.resourceManager=new _,this.painter=new F(this.context,this,this.resourceManager),i(\"esri-2d-profiler\")&&(this._debugOutput=document.createElement(\"div\"),this._debugOutput.setAttribute(\"style\",\"margin: 24px 64px; position: absolute; color: red;\"),n.appendChild(this._debugOutput)),this._renderParameters={drawPhase:0,state:this.state,pixelRatio:window.devicePixelRatio,stationary:!1,globalOpacity:1,blendMode:null,deltaTime:-1,time:0,inFadeTransition:!1,effects:null,context:this.context,painter:this.painter,timeline:a.timeline||new T,renderingOptions:a.renderingOptions,requireFBO:!1,profiler:new x(this.context,this._debugOutput),dataUploadCounter:0},this._taskHandle=s({render:e=>this.renderFrame(e)}),this._taskHandle.pause(),this._lostWebGLContextHandle=t(o,\"webglcontextlost\",(()=>{this.emit(\"webgl-error\",{error:new e(\"webgl-context-lost\")})})),o.setAttribute(\"style\",\"width: 100%; height:100%; display:block;\"),n.appendChild(o)}destroy(){this.removeAllChildren(),this._emptyTrash(),this._taskHandle.remove(),this._taskHandle=null,this._boundFBO=null,this._clipFBO&&(this._clipFBO.dispose(),this._clipFBO=null),this._clipVAO&&(this._clipVAO.dispose(),this._clipVAO=null,this._clipVBO=null),this._clipStencilProgram&&(this._clipStencilProgram.dispose(),this._clipStencilProgram=null),this._lostWebGLContextHandle&&(this._lostWebGLContextHandle.remove(),this._lostWebGLContextHandle=null),this._canvas.parentNode&&this._canvas.parentNode.removeChild(this._canvas),this._debugOutput&&this._debugOutput.parentNode&&this._debugOutput.parentNode.removeChild(this._debugOutput),this.highlightOptions=null,this.resourceManager.destroy(),this.painter.dispose(),this.context.dispose(),this._canvas=null}get background(){return this._background}set background(e){this._background=e,this.requestRender()}get highlightOptions(){return this._highlightOptions}set highlightOptions(e){this._highlightOptionsHandle&&(this._highlightOptionsHandle.remove(),this._highlightOptionsHandle=null),this._highlightOptions=e,this._highlightOptions&&(this._highlightOptionsHandle=n(this._highlightOptions,\"version\",(()=>{this.painter.setHighlightOptions(e),this.requestRender()})))}get renderingOptions(){return this._renderingOptions}set renderingOptions(e){this._renderingOptions=e,this.requestRender()}get state(){return this._state}set state(e){this._state=e,this.requestRender()}get stationary(){return this._stationary}set stationary(e){this._stationary!==e&&(this._stationary=e,this.requestRender())}trashDisplayObject(e){this._trash.add(e),this.requestRender()}untrashDisplayObject(e){return this._trash.delete(e)}requestRender(){this._renderRemainingTime=k,this.renderRequested||(this.renderRequested=!0,this.emit(\"will-render\"),this._taskHandle.resume())}renderFrame(e){const t=this._lastFrameRenderTime?e.time-this._lastFrameRenderTime:0;this._renderRemainingTime-=t,this._renderRemainingTime<=0&&this._taskHandle.pause(),this._lastFrameRenderTime=e.time,this.renderRequested=!1,this._renderParameters.state=this._state,this._renderParameters.stationary=this.stationary,this._renderParameters.pixelRatio=window.devicePixelRatio,this._renderParameters.globalOpacity=1,this._renderParameters.time=e.time,this._renderParameters.deltaTime=e.deltaTime,this._renderParameters.effects=null,this.processRender(this._renderParameters),this._emptyTrash(),this.emit(\"post-render\")}_createTransforms(){return{dvs:c()}}renderChildren(e){for(const t of this.children)t.beforeRender(e);this._renderChildren(this.children,e);for(const t of this.children)t.afterRender(e)}_renderChildren(e,t){const r=this.context;t.profiler.recordStart(\"drawLayers\"),t.dataUploadCounter=0,this._beforeRenderChildren(t),t.drawPhase=y.MAP,this.painter.beforeRenderLayers(r,this.background);for(const i of e)i.processRender(t);this.painter.renderLayers(r),t.drawPhase=y.HIGHLIGHT,this.painter.beforeRenderLayers(r);for(const i of e)i.processRender(t);this.painter.renderLayers(r);if(this._isLabelDrawPhaseRequired(e)){t.drawPhase=y.LABEL,this.painter.beforeRenderLayers(r);for(const i of e)i.processRender(t);this.painter.renderLayers(r)}if(i(\"esri-tiles-debug\")){t.drawPhase=y.DEBUG,this.painter.beforeRenderLayers(r);for(const i of e)i.processRender(t);this.painter.renderLayers(r)}t.profiler.recordEnd(\"drawLayers\"),this._afterRenderChildren()}_beforeRenderChildren(e){const{context:t}=this,{state:i,pixelRatio:r}=e;t.enforceState(),t.setClearDepth(1),t.setClearColor(0,0,0,0),t.clear(t.gl.COLOR_BUFFER_BIT|t.gl.DEPTH_BUFFER_BIT);const{size:s,rotation:n}=i,d=Math.round(s[0]*r),c=Math.round(s[1]*r);this._boundFBO=t.getBoundFramebufferObject();if(!(i.spatialReference&&(i.spatialReference._isWrappable?i.spatialReference._isWrappable():i.spatialReference.isWrappable)))return void(this._clipFrame=!1);const u=a(n),_=Math.abs(Math.cos(u)),g=Math.abs(Math.sin(u)),b=Math.round(d*_+c*g),R=Math.round(i.worldScreenWidth);if(b<=R)return void(this._clipFrame=!1);this._clipFBO&&this._clipFBO.width===d&&this._clipFBO.height===c||(this._clipFBO=new f(t,{colorTarget:0,depthStencilTarget:3,width:d,height:c}));const w=(this.state.padding.left-this.state.padding.right)/2,O=(this.state.padding.bottom-this.state.padding.top)/2,y=.5*d,F=.5*c,x=1/d,C=1/c,T=R*r*.5,j=.5*(d*g+c*_),B=this._upperLeft,P=this._upperRight,v=this._lowerLeft,k=this._lowerRight;p(B,-T,-j),p(P,T,-j),p(v,-T,j),p(k,T,j),o(this._mat2),h(this._mat2,this._mat2,[y+w,F-O]),0!==n&&l(this._mat2,this._mat2,u),m(B,B,this._mat2),m(P,P,this._mat2),m(v,v,this._mat2),m(k,k,this._mat2);const S=this._clipData;S.set([2*v[0]*x-1,2*(c-v[1])*C-1,2*k[0]*x-1,2*(c-k[1])*C-1,2*B[0]*x-1,2*(c-B[1])*C-1,2*P[0]*x-1,2*(c-P[1])*C-1]),this._clipRendererInitialized||this._initializeClipRenderer(t),this._clipVBO.setData(S),this._boundFBO=t.getBoundFramebufferObject(),t.bindFramebuffer(this._clipFBO),t.setDepthWriteEnabled(!0),t.setStencilWriteMask(255),t.setClearColor(0,0,0,0),t.setClearDepth(1),t.setClearStencil(0),t.clear(t.gl.COLOR_BUFFER_BIT|t.gl.DEPTH_BUFFER_BIT|t.gl.STENCIL_BUFFER_BIT),t.setDepthWriteEnabled(!1),this._clipFrame=!0}_afterRenderChildren(){const e=this.context;if(e.logIno(),this._clipFrame&&this._clipRendererInitialized){if(e.bindFramebuffer(this._boundFBO),this._boundFBO=null,e.bindVAO(this._clipVAO),e.useProgram(this._clipStencilProgram),e.setDepthWriteEnabled(!1),e.setDepthTestEnabled(!1),e.setStencilTestEnabled(!0),e.setBlendingEnabled(!1),e.setColorMask(!1,!1,!1,!1),e.setStencilOp(7680,7680,7681),e.setStencilWriteMask(255),e.setStencilFunction(519,1,255),e.drawElements(4,6,5123,0),e.bindVAO(),e.setColorMask(!0,!0,!0,!0),null!=this.background){const{r:t,g:i,b:r,a:s}=this.background.color;e.setClearColor(s*t/255,s*i/255,s*r/255,s)}else e.setClearColor(0,0,0,0);e.clear(e.gl.COLOR_BUFFER_BIT),e.setBlendingEnabled(!0),e.setStencilFunction(514,1,255),this.painter.blitTexture(e,this._clipFBO.colorTexture,9728,1),e.setStencilTestEnabled(!1)}}doRender(e){const t=this.context,{state:i,pixelRatio:r}=e;this._resizeCanvas(e),this.context.enforceState(),t.setViewport(0,0,r*i.size[0],r*i.size[1]),t.setDepthWriteEnabled(!0),t.setStencilWriteMask(255),super.doRender(e)}async takeScreenshot(e){const{framebufferWidth:t,framebufferHeight:i}={framebufferWidth:Math.round(this._renderParameters.state.size[0]*e.resolutionScale),framebufferHeight:Math.round(this._renderParameters.state.size[1]*e.resolutionScale)},r=1,s=this.context,n=this._state.clone();if(null!=e.rotation){const t=n.viewpoint;n.viewpoint.rotation=e.rotation,n.viewpoint=t}const a={...this._renderParameters,drawPhase:null,globalOpacity:1,stationary:!0,state:n,pixelRatio:r,time:Date.now(),deltaTime:0,blendMode:null,effects:null,inFadeTransition:!1},o=new f(s,{colorTarget:0,depthStencilTarget:3,width:t,height:i}),h=s.getBoundFramebufferObject(),l=s.getViewport();s.bindFramebuffer(o),s.setViewport(0,0,t,i),this._renderChildren(e.children,a);const d=this._readbackScreenshot({...e.cropArea,y:i-(e.cropArea.y+e.cropArea.height)});let c;s.bindFramebuffer(h),s.setViewport(l.x,l.y,l.width,l.height),this.requestRender(),1===e.outputScale?c=d:(c=new ImageData(Math.round(d.width*e.outputScale),Math.round(d.height*e.outputScale)),j(d,c,!0));return B(c,{format:e.format,quality:e.quality,rotation:0,disableDecorations:!1},document.createElement(\"canvas\"),{flipY:!0,premultipliedAlpha:!0})}_readbackScreenshot(e){const t=this.context.gl,i=P(e.width,e.height,document.createElement(\"canvas\"));return t.readPixels(e.x,e.y,e.width,e.height,6408,5121,new Uint8Array(i.data.buffer)),i}_resizeCanvas(e){const t=this._canvas,i=t.style,{state:{size:r},pixelRatio:s}=e,n=r[0],a=r[1],o=Math.round(n*s),h=Math.round(a*s);t.width===o&&t.height===h||(t.width=o,t.height=h),i.width=n+\"px\",i.height=a+\"px\"}_initializeClipRenderer(e){if(this._clipRendererInitialized)return!0;const t=C.attributes,i=b(e,C);if(!i)return!1;const r=g.createVertex(e,35040,32),s=new Uint16Array([0,1,2,2,1,3]),n=g.createIndex(e,35044,s),a=new R(e,t,{geometry:[{name:\"a_pos\",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:r},n);return this._clipStencilProgram=i,this._clipVBO=r,this._clipVAO=a,this._clipRendererInitialized=!0,!0}_emptyTrash(){for(;this._trash.size>0;){const e=Array.from(this._trash);this._trash.clear();for(const t of e)t.processDetach()}}_isLabelDrawPhaseRequired(e){let t=!1;for(const i of e){if(!(i instanceof O)){t=t||!1;break}if(i.hasLabels)return!0;t=t||this._isLabelDrawPhaseRequired(i.children)}return t}}export{k as EXTRA_RENDER_TIME,S as Stage};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../webgl/BufferObject.js\";import\"../../../../webgl/FramebufferObject.js\";import\"../../../../../core/has.js\";import\"../../../../webgl/checkWebGLError.js\";import\"../../../../webgl/enums.js\";import\"../../../../../chunks/builtins.js\";import{glslifyDefineMap as e}from\"../../../../webgl/programUtils.js\";import\"../../../../webgl/Texture.js\";import\"../../../../webgl/VertexArrayObject.js\";import{resolveIncludes as r}from\"./sources/resolver.js\";const t=r=>e({ID:r.id,PATTERN:r.pattern}),a={shaders:e=>({vertexShader:t(e)+r(\"background/background.vert\"),fragmentShader:t(e)+r(\"background/background.frag\")})},i=r=>e({ID:r.id}),s={shaders:e=>({vertexShader:i(e)+r(\"circle/circle.vert\"),fragmentShader:i(e)+r(\"circle/circle.frag\")})},d=r=>e({ID:r.id,PATTERN:r.pattern}),o={shaders:e=>({vertexShader:d(e)+r(\"fill/fill.vert\"),fragmentShader:d(e)+r(\"fill/fill.frag\")})},l=r=>e({ID:r.id}),n={shaders:e=>({vertexShader:l(e)+r(\"outline/outline.vert\"),fragmentShader:l(e)+r(\"outline/outline.frag\")})},f=r=>e({ID:r.id,SDF:r.sdf}),g={shaders:e=>({vertexShader:f(e)+r(\"icon/icon.vert\"),fragmentShader:f(e)+r(\"icon/icon.frag\")})},c=r=>e({ID:r.id,PATTERN:r.pattern,SDF:r.sdf}),h={shaders:e=>({vertexShader:c(e)+r(\"line/line.vert\"),fragmentShader:c(e)+r(\"line/line.frag\")})},m=r=>e({ID:r.id}),b={shaders:e=>({vertexShader:m(e)+r(\"text/text.vert\"),fragmentShader:m(e)+r(\"text/text.frag\")})};export{a as background,s as circle,o as fill,g as icon,h as line,n as outline,b as text};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../webgl/BufferObject.js\";import\"../../../../webgl/FramebufferObject.js\";import{Program as e}from\"../../../../webgl/Program.js\";import\"../../../../webgl/enums.js\";import\"../../../../webgl/Texture.js\";import\"../../../../webgl/VertexArrayObject.js\";import{text as r,outline as t,line as a,icon as s,fill as n,circle as i,background as o}from\"./Programs.js\";class c{constructor(){this._programByKey=new Map}dispose(){this._programByKey.forEach((e=>e.dispose())),this._programByKey.clear()}getMaterialProgram(r,t,a){const s=t.key<<3|this._getMaterialOptionsValue(t.type,a);if(this._programByKey.has(s))return this._programByKey.get(s);const n=this._getProgramTemplate(t.type),{shaders:i}=n,{vertexShader:o,fragmentShader:c}=i(a),p=t.getShaderHeader(),u=t.getShaderMain(),g=o.replace(\"#pragma header\",p).replace(\"#pragma main\",u),m=new e(r,g,c,t.getAttributeLocations());return this._programByKey.set(s,m),m}_getMaterialOptionsValue(e,r){switch(e){case 0:{const e=r;return(e.pattern?1:0)<<1|(e.id?1:0)}case 1:{const e=r;return(e.pattern?1:0)<<1|(e.id?1:0)}case 2:return r.id?1:0;case 3:{const e=r;return(e.sdf?1:0)<<2|(e.pattern?1:0)<<1|(e.id?1:0)}case 4:{const e=r;return(e.sdf?1:0)<<1|(e.id?1:0)}case 5:return r.id?1:0;case 6:return r.id?1:0;default:return 0}}_getProgramTemplate(e){switch(e){case 0:return o;case 5:return i;case 1:return n;case 4:return s;case 3:return a;case 2:return t;case 6:return r;default:return null}}}export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../../webgl/BufferObject.js\";import\"../../../../../webgl/FramebufferObject.js\";import\"../../../../../../core/has.js\";import\"../../../../../webgl/checkWebGLError.js\";import\"../../../../../webgl/enums.js\";import\"../../../../../../chunks/builtins.js\";import r from\"../../../../../webgl/ShaderCompiler.js\";import\"../../../../../webgl/Texture.js\";import\"../../../../../webgl/VertexArrayObject.js\";import e from\"./shaderRepository.js\";function t(r){let t=e;return r.split(\"/\").forEach((r=>{t&&(t=t[r])})),t}const o=new r(t);function s(r){return o.resolveIncludes(r)}export{s as resolveIncludes};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nconst e={background:{\"background.frag\":\"#ifdef PATTERN\\nuniform lowp float u_opacity;\\nuniform lowp sampler2D u_texture;\\nvarying mediump vec4 v_tlbr;\\nvarying mediump vec2 v_tileTextureCoord;\\n#else\\nuniform lowp vec4 u_color;\\n#endif\\n#ifdef ID\\nvarying mediump vec4 v_id;\\n#endif\\nvoid main() {\\n#ifdef PATTERN\\nmediump vec2 normalizedTextureCoord = mod(v_tileTextureCoord, 1.0);\\nmediump vec2 samplePos = mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\\nlowp vec4 color = texture2D(u_texture, samplePos);\\ngl_FragColor = u_opacity * color;\\n#else\\ngl_FragColor = u_color;\\n#endif\\n#ifdef ID\\nif (gl_FragColor.a < 1.0 / 255.0) {\\ndiscard;\\n}\\ngl_FragColor = v_id;\\n#endif\\n}\",\"background.vert\":\"precision mediump float;\\nattribute vec2 a_pos;\\n#ifdef ID\\nuniform mediump vec4 u_id;\\nvarying mediump vec4 v_id;\\n#endif\\nuniform highp mat3 u_dvsMat3;\\nuniform mediump float u_coord_range;\\nuniform mediump float u_depth;\\n#ifdef PATTERN\\nuniform mediump mat3 u_pattern_matrix;\\nvarying mediump vec2 v_tileTextureCoord;\\nuniform mediump vec4 u_tlbr;\\nuniform mediump vec2 u_mosaicSize;\\nvarying mediump vec4 v_tlbr;\\n#endif\\nvoid main() {\\ngl_Position = vec4((u_dvsMat3 * vec3(u_coord_range * a_pos, 1.0)).xy, u_depth, 1.0);\\n#ifdef PATTERN\\nv_tileTextureCoord = (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\\nv_tlbr             = u_tlbr / u_mosaicSize.xyxy;\\n#endif\\n#ifdef ID\\nv_id = u_id / 255.0;\\n#endif\\n}\"},circle:{\"circle.frag\":\"precision lowp float;\\nvarying lowp vec4 v_color;\\nvarying lowp vec4 v_stroke_color;\\nvarying mediump float v_blur;\\nvarying mediump float v_stroke_width;\\nvarying mediump float v_radius;\\nvarying mediump vec2 v_offset;\\n#ifdef ID\\nvarying mediump vec4 v_id;\\n#endif\\nvoid main()\\n{\\nmediump float dist = length(v_offset);\\nmediump float alpha = smoothstep(0.0, -v_blur, dist - 1.0);\\nlowp float color_mix_ratio = v_stroke_width < 0.01 ? 0.0 : smoothstep(-v_blur, 0.0, dist - v_radius / (v_radius + v_stroke_width));\\ngl_FragColor = alpha * mix(v_color, v_stroke_color, color_mix_ratio);\\n#ifdef ID\\nif (gl_FragColor.a < 1.0 / 255.0) {\\ndiscard;\\n}\\ngl_FragColor = v_id;\\n#endif\\n}\",\"circle.vert\":\"precision mediump float;\\nattribute vec2 a_pos;\\n#pragma header\\nvarying lowp vec4 v_color;\\nvarying lowp vec4 v_stroke_color;\\nvarying mediump float v_blur;\\nvarying mediump float v_stroke_width;\\nvarying mediump float v_radius;\\nvarying mediump vec2 v_offset;\\n#ifdef ID\\nuniform mediump vec4 u_id;\\nvarying mediump vec4 v_id;\\n#endif\\nuniform highp mat3 u_dvsMat3;\\nuniform highp mat3 u_displayMat3;\\nuniform mediump vec2 u_circleTranslation;\\nuniform mediump float u_depth;\\nuniform mediump float u_antialiasingWidth;\\nvoid main()\\n{\\n#pragma main\\nv_color = color * opacity;\\nv_stroke_color = stroke_color * stroke_opacity;\\nv_stroke_width = stroke_width;\\nv_radius = radius;\\nv_blur = max(blur, u_antialiasingWidth / (radius + stroke_width));\\nmediump vec2 offset = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\\nv_offset = offset;\\n#ifdef ID\\nv_id = u_id / 255.0;\\n#endif\\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos * 0.5, 1.0) + u_displayMat3 * vec3((v_radius + v_stroke_width) * offset + u_circleTranslation, 0.0);\\ngl_Position = vec4(pos.xy, u_depth, 1.0);\\n}\"},fill:{\"fill.frag\":\"precision lowp float;\\n#ifdef PATTERN\\nuniform lowp sampler2D u_texture;\\nvarying mediump vec2 v_tileTextureCoord;\\nvarying mediump vec4 v_tlbr;\\n#endif\\n#ifdef ID\\nvarying mediump vec4 v_id;\\n#endif\\nvarying lowp vec4 v_color;\\nvec4 mixColors(vec4 color1, vec4 color2) {\\nfloat compositeAlpha = color2.a + color1.a * (1.0 - color2.a);\\nvec3 compositeColor = color2.rgb + color1.rgb * (1.0 - color2.a);\\nreturn vec4(compositeColor, compositeAlpha);\\n}\\nvoid main()\\n{\\n#ifdef PATTERN\\nmediump vec2 normalizedTextureCoord = fract(v_tileTextureCoord);\\nmediump vec2 samplePos = mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\\nlowp vec4 color = texture2D(u_texture, samplePos);\\ngl_FragColor = v_color[3] * color;\\n#else\\ngl_FragColor = v_color;\\n#endif\\n#ifdef ID\\nif (gl_FragColor.a < 1.0 / 255.0) {\\ndiscard;\\n}\\ngl_FragColor = v_id;\\n#endif\\n}\",\"fill.vert\":\"precision mediump float;\\nattribute vec2 a_pos;\\n#pragma header\\nuniform highp mat3 u_dvsMat3;\\nuniform highp mat3 u_displayMat3;\\nuniform mediump float u_depth;\\nuniform mediump vec2 u_fillTranslation;\\n#ifdef PATTERN\\n#include <util/util.glsl>\\nuniform mediump vec2 u_mosaicSize;\\nuniform mediump float u_patternFactor;\\nvarying mediump vec2 v_tileTextureCoord;\\nvarying mediump vec4 v_tlbr;\\n#endif\\n#ifdef ID\\nuniform mediump vec4 u_id;\\nvarying mediump vec4 v_id;\\n#endif\\nvarying lowp vec4 v_color;\\nvoid main()\\n{\\n#pragma main\\nv_color = color * opacity;\\n#ifdef ID\\nv_id = u_id / 255.0;\\n#endif\\n#ifdef PATTERN\\nfloat patternWidth = nextPOT(tlbr.z - tlbr.x);\\nfloat patternHeight = nextPOT(tlbr.w - tlbr.y);\\nfloat scaleX = 1.0 / (patternWidth * u_patternFactor);\\nfloat scaleY = 1.0 / (patternHeight * u_patternFactor);\\nmat3 patterMat = mat3(scaleX, 0.0,    0.0,\\n0.0,    -scaleY, 0.0,\\n0.0,    0.0,    1.0);\\nv_tileTextureCoord = (patterMat * vec3(a_pos, 1.0)).xy;\\nv_tlbr             = tlbr / u_mosaicSize.xyxy;\\n#endif\\nvec3 pos = u_dvsMat3 * vec3(a_pos, 1.0) + u_displayMat3 * vec3(u_fillTranslation, 0.0);\\ngl_Position = vec4(pos.xy, u_depth, 1.0);\\n}\"},icon:{\"icon.frag\":\"precision mediump float;\\nuniform lowp sampler2D u_texture;\\n#ifdef SDF\\nuniform lowp vec4 u_color;\\nuniform lowp vec4 u_outlineColor;\\n#endif\\nvarying mediump vec2 v_tex;\\nvarying lowp float v_opacity;\\nvarying mediump vec2 v_size;\\nvarying lowp vec4 v_color;\\n#ifdef SDF\\nvarying mediump flaot v_halo_width;\\n#endif\\n#ifdef ID\\nvarying mediump vec4 v_id;\\n#endif\\n#include <util/encoding.glsl>\\nvec4 mixColors(vec4 color1, vec4 color2) {\\nfloat compositeAlpha = color2.a + color1.a * (1.0 - color2.a);\\nvec3 compositeColor = color2.rgb + color1.rgb * (1.0 - color2.a);\\nreturn vec4(compositeColor, compositeAlpha);\\n}\\nvoid main()\\n{\\n#ifdef SDF\\nlowp vec4 fillPixelColor = v_color;\\nfloat d = rgba2float(texture2D(u_texture, v_tex)) - 0.5;\\nconst float softEdgeRatio = 0.248062016;\\nfloat size = max(v_size.x, v_size.y);\\nfloat dist = d * softEdgeRatio * size;\\nfillPixelColor *= clamp(0.5 - dist, 0.0, 1.0);\\nif (v_halo_width > 0.25) {\\nlowp vec4 outlinePixelColor = u_outlineColor;\\nconst float outlineLimitRatio = (16.0 / 86.0);\\nfloat clampedOutlineSize = softEdgeRatio * min(v_halo_width, outlineLimitRatio * max(v_size.x, v_size.y));\\noutlinePixelColor *= clamp(0.5 - (abs(dist) - clampedOutlineSize), 0.0, 1.0);\\ngl_FragColor = v_opacity * mixColors(fillPixelColor, outlinePixelColor);\\n}\\nelse {\\ngl_FragColor = v_opacity * fillPixelColor;\\n}\\n#else\\nlowp vec4 texColor = texture2D(u_texture, v_tex);\\ngl_FragColor = v_opacity * texColor;\\n#endif\\n#ifdef ID\\nif (gl_FragColor.a < 1.0 / 255.0) {\\ndiscard;\\n}\\ngl_FragColor = v_id;\\n#endif\\n}\",\"icon.vert\":\"attribute vec2 a_pos;\\nattribute vec2 a_vertexOffset;\\nattribute vec4 a_texAngleRange;\\nattribute vec4 a_levelInfo;\\nattribute float a_opacityInfo;\\n#pragma header\\n#ifdef ID\\nuniform mediump vec4 u_id;\\nvarying mediump vec4 v_id;\\n#endif\\nvarying lowp vec4 v_color;\\n#ifdef SDF\\nvarying mediump float v_halo_width;\\n#endif\\nuniform highp mat3 u_dvsMat3;\\nuniform highp mat3 u_displayMat3;\\nuniform highp mat3 u_displayViewMat3;\\nuniform mediump vec2 u_iconTranslation;\\nuniform vec2 u_mosaicSize;\\nuniform mediump float u_depth;\\nuniform mediump float u_mapRotation;\\nuniform mediump float u_level;\\nuniform lowp float u_keepUpright;\\nuniform mediump float u_fadeDuration;\\nvarying mediump vec2 v_tex;\\nvarying lowp float v_opacity;\\nvarying mediump vec2 v_size;\\nconst float C_OFFSET_PRECISION = 1.0 / 8.0;\\nconst float C_256_TO_RAD = 3.14159265359 / 128.0;\\nconst float C_DEG_TO_RAD = 3.14159265359 / 180.0;\\nconst float tileCoordRatio = 1.0 / 8.0;\\nuniform highp float u_time;\\nvoid main()\\n{\\n#pragma main\\nv_color = color;\\nv_opacity = opacity;\\n#ifdef SDF\\nv_halo_width = halo_width;\\n#endif\\nfloat modded = mod(a_opacityInfo, 128.0);\\nfloat targetOpacity = (a_opacityInfo - modded) / 128.0;\\nfloat startOpacity = modded / 127.0;\\nfloat interpolatedOpacity = clamp(startOpacity + 2.0 * (targetOpacity - 0.5) * u_time / u_fadeDuration, 0.0, 1.0);\\nv_opacity *= interpolatedOpacity;\\nmediump float a_angle         = a_levelInfo[1];\\nmediump float a_minLevel      = a_levelInfo[2];\\nmediump float a_maxLevel      = a_levelInfo[3];\\nmediump vec2 a_tex            = a_texAngleRange.xy;\\nmediump float delta_z = 0.0;\\nmediump float rotated = mod(a_angle + u_mapRotation, 256.0);\\ndelta_z += (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated));\\ndelta_z += 1.0 - step(a_minLevel, u_level);\\ndelta_z += step(a_maxLevel, u_level);\\ndelta_z += step(v_opacity, 0.0);\\nvec2 offset = C_OFFSET_PRECISION * a_vertexOffset;\\nv_size = abs(offset);\\n#ifdef SDF\\noffset = (120.0 / 86.0) * offset;\\n#endif\\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos, 1.0) + u_displayViewMat3 * vec3(size * offset, 0.0) + u_displayMat3 * vec3(u_iconTranslation, 0.0);\\ngl_Position = vec4(pos.xy, u_depth + delta_z, 1.0);\\n#ifdef ID\\nv_id = u_id / 255.0;\\n#endif\\nv_tex = a_tex.xy / u_mosaicSize;\\n}\"},line:{\"line.frag\":\"precision lowp float;\\nvarying mediump vec2 v_normal;\\nvarying highp float v_accumulatedDistance;\\nvarying mediump float v_lineHalfWidth;\\nvarying lowp vec4 v_color;\\nvarying mediump float v_blur;\\n#if defined (PATTERN) || defined(SDF)\\nvarying mediump vec4 v_tlbr;\\nvarying mediump vec2 v_patternSize;\\nvarying mediump float v_widthRatio;\\nuniform sampler2D u_texture;\\nuniform mediump float u_antialiasing;\\n#endif\\n#ifdef SDF\\n#include <util/encoding.glsl>\\n#endif\\n#ifdef ID\\nvarying mediump vec4 v_id;\\n#endif\\nvoid main()\\n{\\nmediump float fragDist = length(v_normal) * v_lineHalfWidth;\\nlowp float alpha = clamp((v_lineHalfWidth - fragDist) / v_blur, 0.0, 1.0);\\n#ifdef PATTERN\\nmediump float relativeTexX = mod(v_accumulatedDistance / (v_patternSize.x * v_widthRatio), 1.0);\\nmediump float relativeTexY = 0.5 + v_normal.y * v_lineHalfWidth / (v_patternSize.y * v_widthRatio);\\nmediump vec2 texCoord = mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\\nlowp vec4 color = texture2D(u_texture, texCoord);\\ngl_FragColor = alpha * v_color[3] * color;\\n#elif defined(SDF)\\nmediump float relativeTexX = mod((v_accumulatedDistance * 0.5) / (v_patternSize.x * v_widthRatio), 1.0);\\nmediump float relativeTexY =  0.5 + 0.25 * v_normal.y;\\nmediump vec2 texCoord = mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\\nmediump float d = rgba2float(texture2D(u_texture, texCoord)) - 0.5;\\nfloat dist = d * v_lineHalfWidth;\\ngl_FragColor = alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\\n#else\\ngl_FragColor = alpha * v_color;\\n#endif\\n#ifdef ID\\nif (gl_FragColor.a < 1.0 / 255.0) {\\ndiscard;\\n}\\ngl_FragColor = v_id;\\n#endif\\n}\",\"line.vert\":\"precision mediump float;\\nattribute vec2 a_pos;\\nattribute vec4 a_extrude_offset;\\nattribute vec4 a_dir_normal;\\nattribute vec2 a_accumulatedDistance;\\n#pragma header\\nuniform highp mat3 u_dvsMat3;\\nuniform highp mat3 u_displayMat3;\\nuniform highp mat3 u_displayViewMat3;\\nuniform mediump float u_zoomFactor;\\nuniform mediump vec2 u_lineTranslation;\\nuniform mediump float u_antialiasing;\\nuniform mediump float u_depth;\\nvarying mediump vec2 v_normal;\\nvarying highp float v_accumulatedDistance;\\nconst float scale = 1.0 / 31.0;\\nconst mediump float tileCoordRatio = 8.0;\\n#if defined (SDF)\\nconst mediump float sdfPatternHalfWidth = 15.5;\\n#endif\\n#if defined (PATTERN) || defined(SDF)\\nuniform mediump vec2 u_mosaicSize;\\nvarying mediump vec4 v_tlbr;\\nvarying mediump vec2 v_patternSize;\\nvarying mediump float v_widthRatio;\\n#endif\\n#ifdef ID\\nuniform mediump vec4 u_id;\\nvarying mediump vec4 v_id;\\n#endif\\nvarying lowp vec4 v_color;\\nvarying mediump float v_lineHalfWidth;\\nvarying mediump float v_blur;\\nvoid main()\\n{\\n#pragma main\\nv_color = color * opacity;\\nv_blur = blur + u_antialiasing;\\nv_normal = a_dir_normal.zw * scale;\\n#if defined (PATTERN) || defined(SDF)\\nv_tlbr          = tlbr / u_mosaicSize.xyxy;\\nv_patternSize   = vec2(tlbr.z - tlbr.x, tlbr.y - tlbr.w);\\n#if defined (PATTERN)\\nv_widthRatio = width / v_patternSize.y;\\n#else\\nv_widthRatio = width / sdfPatternHalfWidth / 2.0;\\n#endif\\n#endif\\nv_lineHalfWidth = (width + u_antialiasing) * 0.5;\\nmediump vec2 dir = a_dir_normal.xy * scale;\\nmediump vec2 offset_ = a_extrude_offset.zw * scale * offset;\\nmediump vec2 dist = v_lineHalfWidth * scale * a_extrude_offset.xy;\\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos + offset_ * tileCoordRatio / u_zoomFactor, 1.0) + u_displayViewMat3 * vec3(dist, 0.0) + u_displayMat3 * vec3(u_lineTranslation, 0.0);\\ngl_Position = vec4(pos.xy, u_depth, 1.0);\\n#if defined (PATTERN) || defined(SDF)\\nv_accumulatedDistance = a_accumulatedDistance.x * u_zoomFactor / tileCoordRatio + dot(dir, dist + offset_);\\n#endif\\n#ifdef ID\\nv_id = u_id / 255.0;\\n#endif\\n}\"},outline:{\"outline.frag\":\"varying lowp vec4 v_color;\\nvarying mediump vec2 v_normal;\\n#ifdef ID\\nvarying mediump vec4 v_id;\\n#endif\\nvoid main()\\n{\\nlowp float dist = abs(v_normal.y);\\nlowp float alpha = smoothstep(1.0, 0.0, dist);\\ngl_FragColor = alpha * v_color;\\n#ifdef ID\\nif (gl_FragColor.a < 1.0 / 255.0) {\\ndiscard;\\n}\\ngl_FragColor = v_id;\\n#endif\\n}\",\"outline.vert\":\"attribute vec2 a_pos;\\nattribute vec2 a_offset;\\nattribute vec2 a_xnormal;\\n#pragma header\\nvarying lowp vec4 v_color;\\n#ifdef ID\\nuniform mediump vec4 u_id;\\nvarying mediump vec4 v_id;\\n#endif\\nuniform highp mat3 u_dvsMat3;\\nuniform highp mat3 u_displayMat3;\\nuniform mediump vec2 u_fillTranslation;\\nuniform mediump float u_depth;\\nuniform mediump float u_outline_width;\\nvarying lowp vec2 v_normal;\\nconst float scale = 1.0 / 15.0;\\nvoid main()\\n{\\n#pragma main\\nv_color = color * opacity;\\n#ifdef ID\\nv_id = u_id / 255.0;\\n#endif\\nv_normal = a_xnormal;\\nmediump vec2 dist = u_outline_width * scale * a_offset;\\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos, 1.0) + u_displayMat3 * vec3(dist + u_fillTranslation, 0.0);\\ngl_Position = vec4(pos.xy, u_depth, 1.0);\\n}\"},text:{\"text.frag\":\"uniform lowp sampler2D u_texture;\\nvarying lowp vec2 v_tex;\\nvarying lowp vec4 v_color;\\nvarying mediump float v_edgeWidth;\\nvarying mediump float v_edgeDistance;\\n#ifdef ID\\nvarying mediump vec4 v_id;\\n#endif\\nvoid main()\\n{\\nlowp float dist = texture2D(u_texture, v_tex).a;\\nmediump float alpha = smoothstep(v_edgeDistance - v_edgeWidth, v_edgeDistance + v_edgeWidth, dist);\\ngl_FragColor = alpha * v_color;\\n#ifdef ID\\nif (gl_FragColor.a < 1.0 / 255.0) {\\ndiscard;\\n}\\ngl_FragColor = v_id;\\n#endif\\n}\",\"text.vert\":\"attribute vec2 a_pos;\\nattribute vec2 a_vertexOffset;\\nattribute vec4 a_texAngleRange;\\nattribute vec4 a_levelInfo;\\nattribute float a_opacityInfo;\\n#pragma header\\nvarying lowp vec4 v_color;\\n#ifdef ID\\nuniform mediump vec4 u_id;\\nvarying mediump vec4 v_id;\\n#endif\\nuniform highp mat3 u_dvsMat3;\\nuniform highp mat3 u_displayMat3;\\nuniform highp mat3 u_displayViewMat3;\\nuniform mediump vec2 u_textTranslation;\\nuniform vec2 u_mosaicSize;\\nuniform mediump float u_depth;\\nuniform mediump float u_mapRotation;\\nuniform mediump float u_level;\\nuniform lowp float u_keepUpright;\\nuniform mediump float u_fadeDuration;\\nvarying lowp vec2 v_tex;\\nconst float offsetPrecision = 1.0 / 8.0;\\nconst mediump float edgePos = 0.75;\\nuniform mediump float u_antialiasingWidth;\\nvarying mediump float v_edgeDistance;\\nvarying mediump float v_edgeWidth;\\nuniform lowp float u_halo;\\nconst float sdfFontScale = 1.0 / 24.0;\\nconst float sdfPixel = 3.0;\\nuniform highp float u_time;\\nvoid main()\\n{\\n#pragma main\\nif (u_halo > 0.5)\\n{\\nv_color = halo_color * opacity;\\nhalo_width *= sdfPixel;\\nhalo_blur *= sdfPixel;\\n}\\nelse\\n{\\nv_color = color * opacity;\\nhalo_width = 0.0;\\nhalo_blur = 0.0;\\n}\\nfloat modded = mod(a_opacityInfo, 128.0);\\nfloat targetOpacity = (a_opacityInfo - modded) / 128.0;\\nfloat startOpacity = modded / 127.0;\\nfloat interpolatedOpacity = clamp(startOpacity + 2.0 * (targetOpacity - 0.5) * u_time / u_fadeDuration, 0.0, 1.0);\\nv_color *= interpolatedOpacity;\\nmediump float a_angle       = a_levelInfo[1];\\nmediump float a_minLevel    = a_levelInfo[2];\\nmediump float a_maxLevel    = a_levelInfo[3];\\nmediump vec2 a_tex          = a_texAngleRange.xy;\\nmediump float a_visMinAngle    = a_texAngleRange.z;\\nmediump float a_visMaxAngle    = a_texAngleRange.w;\\nmediump float delta_z = 0.0;\\nmediump float angle = mod(a_angle + u_mapRotation, 256.0);\\nif (a_visMinAngle < a_visMaxAngle)\\n{\\ndelta_z += (1.0 - step(u_keepUpright, 0.0)) * (step(a_visMaxAngle, angle) + (1.0 - step(a_visMinAngle, angle)));\\n}\\nelse\\n{\\ndelta_z += (1.0 - step(u_keepUpright, 0.0)) * (step(a_visMaxAngle, angle) * (1.0 - step(a_visMinAngle, angle)));\\n}\\ndelta_z += 1.0 - step(a_minLevel, u_level);\\ndelta_z += step(a_maxLevel, u_level);\\ndelta_z += step(v_color[3], 0.0);\\nv_tex = a_tex.xy / u_mosaicSize;\\n#ifdef ID\\nv_id = u_id / 255.0;\\n#endif\\nv_edgeDistance = edgePos - halo_width / size;\\nv_edgeWidth = (u_antialiasingWidth + halo_blur) / size;\\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos, 1.0) + sdfFontScale * u_displayViewMat3 * vec3(offsetPrecision * size * a_vertexOffset, 0.0) + u_displayMat3 * vec3(u_textTranslation, 0.0);\\ngl_Position = vec4(pos.xy, u_depth + delta_z, 1.0);\\n}\"},util:{\"encoding.glsl\":\"const vec4 rgba2float_factors = vec4(\\n255.0 / (256.0),\\n255.0 / (256.0 * 256.0),\\n255.0 / (256.0 * 256.0 * 256.0),\\n255.0 / (256.0 * 256.0 * 256.0 * 256.0)\\n);\\nfloat rgba2float(vec4 rgba) {\\nreturn dot(rgba, rgba2float_factors);\\n}\",\"util.glsl\":\"float nextPOT(in float x) {\\nreturn pow(2.0, ceil(log2(abs(x))));\\n}\"}};export{e as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport r from\"../../../webgl/BufferObject.js\";import\"../../../webgl/FramebufferObject.js\";import\"../../../../core/has.js\";import\"../../../webgl/checkWebGLError.js\";import\"../../../webgl/enums.js\";import\"../../../../chunks/builtins.js\";import{createProgram as e}from\"../../../webgl/programUtils.js\";import\"../../../webgl/Texture.js\";import t from\"../../../webgl/VertexArrayObject.js\";import{bitBlit as i}from\"./shaders/BitBlitPrograms.js\";class s{constructor(){this._initialized=!1}dispose(){this._program&&(this._program.dispose(),this._program=null),this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=null)}render(r,e,t,i){r&&(this._initialized||this._initialize(r),r.setBlendFunctionSeparate(1,771,1,771),r.bindVAO(this._vertexArrayObject),r.useProgram(this._program),e.setSamplingMode(t),r.bindTexture(e,0),this._program.setUniform1i(\"u_tex\",0),this._program.setUniform1f(\"u_opacity\",i),r.drawArrays(5,0,4),r.bindTexture(null,0),r.bindVAO())}_initialize(s){if(this._initialized)return!0;const o=i.attributes,a=e(s,i);if(!a)return!1;const n={geometry:[{name:\"a_pos\",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:\"a_tex\",count:2,type:5120,offset:2,stride:4,normalized:!1,divisor:0}]},m=new Int8Array(16);m[0]=-1,m[1]=-1,m[2]=0,m[3]=0,m[4]=1,m[5]=-1,m[6]=1,m[7]=0,m[8]=-1,m[9]=1,m[10]=0,m[11]=1,m[12]=1,m[13]=1,m[14]=1,m[15]=1;const p=new t(s,o,n,{geometry:r.createVertex(s,35044,m)});return this._program=a,this._vertexArrayObject=p,this._initialized=!0,!0}}export{s as BitBlitRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/has.js\";import{throwIfNotAbortError as e}from\"../../../../core/promiseUtils.js\";import i from\"./Rect.js\";import h from\"./RectangleBinPack.js\";import s from\"../../../webgl/Texture.js\";const r=256,a=t=>Math.floor(t/256);function n(t){const e=new Set;for(const i of t)e.add(a(i));return e}function c(t,i,h){return t.has(i)||t.set(i,h().then((()=>{t.delete(i)})).catch((h=>{t.delete(i),e(h)}))),t.get(i)}const o=t=>({rect:new i(0,0,0,0),page:0,metrics:{left:0,width:0,height:0,advance:0,top:0},code:t,sdf:!0});class l{constructor(t,e,i){this.width=0,this.height=0,this._dirties=[],this._glyphData=[],this._currentPage=0,this._glyphCache={},this._textures=[],this._rangePromises=new Map,this.width=t,this.height=e,this._glyphSource=i,this._binPack=new h(t-4,e-4),this._glyphData.push(new Uint8Array(t*e)),this._dirties.push(!0),this._textures.push(null),this._initDecorationGlyph()}dispose(){this._binPack=null;for(const t of this._textures)t&&t.dispose();this._textures.length=0,this._glyphData.length=0}_initDecorationGlyph(){const t=[117,149,181,207,207,181,149,117],e=[];for(let h=0;h<t.length;h++){const i=t[h];for(let t=0;t<11;t++)e.push(i)}const i={metrics:{width:5,height:2,left:0,top:0,advance:0},bitmap:new Uint8Array(e)};this._recordGlyph(i)}async getGlyphItems(t,e,i){const h=this._getGlyphCache(t);return await this._fetchRanges(t,e,i),e.map((e=>this._getMosaicItem(h,t,e)))}bind(t,e,i,h){const s=this._getTexture(t,i);s.setSamplingMode(e),this._dirties[i]&&(s.setData(this._glyphData[i]),this._dirties[i]=!1),t.bindTexture(s,h)}_getGlyphCache(t){return this._glyphCache[t]||(this._glyphCache[t]={}),this._glyphCache[t]}_getTexture(t,e){return this._textures[e]||(this._textures[e]=new s(t,{pixelFormat:6406,dataType:5121,width:this.width,height:this.height},new Uint8Array(this.width*this.height))),this._textures[e]}_invalidate(){this._dirties[this._currentPage]=!0}async _fetchRanges(t,e,i){const h=n(e),s=[];h.forEach((e=>{s.push(this._fetchRange(t,e,i))})),await Promise.all(s)}async _fetchRange(t,e,i){if(e>r)return null;const h=t+e;return c(this._rangePromises,h,(()=>this._glyphSource.getRange(t,e,i)))}_getMosaicItem(t,e,i){if(!t[i]){const h=this._glyphSource.getGlyph(e,i);if(!h||!h.metrics)return o(i);const s=this._recordGlyph(h),r=this._currentPage,a=h.metrics;t[i]={rect:s,page:r,metrics:a,code:i,sdf:!0},this._invalidate()}return t[i]}_recordGlyph(e){const s=e.metrics;let r;if(0===s.width)r=new i(0,0,0,0);else{const i=3,a=s.width+2*i,n=s.height+2*i;r=this._binPack.allocate(a,n),r.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(null),this._initDecorationGlyph(),this._binPack=new h(this.width-4,this.height-4),r=this._binPack.allocate(a,n));const c=this._glyphData[this._currentPage],o=e.bitmap;let l,g;if(o)for(let t=0;t<n;t++){l=a*t,g=this.width*(r.y+t)+r.x;for(let t=0;t<a;t++)c[g+t]=o[l+t]}t(\"esri-glyph-debug\")&&this._showDebugPage(c)}return r}_showDebugPage(t){const e=document.createElement(\"canvas\"),i=e.getContext(\"2d\"),h=new ImageData(this.width,this.height),s=h.data;e.width=this.width,e.height=this.height,e.style.border=\"1px solid black\";for(let r=0;r<t.length;++r)s[4*r+0]=t[r],s[4*r+1]=0,s[4*r+2]=0,s[4*r+3]=255;i.putImageData(h,0,0),document.body.appendChild(e)}}export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../../request.js\";import e from\"../../../../core/pbf.js\";class s{constructor(t){for(this._metrics=[],this._bitmaps=[];t.next();)switch(t.tag()){case 1:{const e=t.getMessage();for(;e.next();)switch(e.tag()){case 3:{const t=e.getMessage();let s,a,r,n,i,c,g;for(;t.next();)switch(t.tag()){case 1:s=t.getUInt32();break;case 2:a=t.getBytes();break;case 3:r=t.getUInt32();break;case 4:n=t.getUInt32();break;case 5:i=t.getSInt32();break;case 6:c=t.getSInt32();break;case 7:g=t.getUInt32();break;default:t.skip()}t.release(),s&&(this._metrics[s]={width:r,height:n,left:i,top:c,advance:g},this._bitmaps[s]=a);break}default:e.skip()}e.release();break}default:t.skip()}}getMetrics(t){return this._metrics[t]}getBitmap(t){return this._bitmaps[t]}}class a{constructor(){this._ranges=[]}getRange(t){return this._ranges[t]}addRange(t,e){this._ranges[t]=e}}class r{constructor(t){this._glyphInfo={},this._baseURL=t}getRange(a,r,n){const i=this._getFontStack(a);if(i.getRange(r))return Promise.resolve();const c=256*r,g=c+255,o=this._baseURL.replace(\"{fontstack}\",a).replace(\"{range}\",c+\"-\"+g);return t(o,{responseType:\"array-buffer\",...n}).then((t=>{i.addRange(r,new s(new e(new Uint8Array(t.data),new DataView(t.data))))}))}getGlyph(t,e){const s=this._getFontStack(t);if(!s)return;const a=Math.floor(e/256);if(a>256)return;const r=s.getRange(a);return r?{metrics:r.getMetrics(e),bitmap:r.getBitmap(e)}:void 0}_getFontStack(t){let e=this._glyphInfo[t];return e||(e=this._glyphInfo[t]=new a),e}}export{r as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as r}from\"../../../../core/maybe.js\";import\"../../../webgl/BufferObject.js\";import\"../../../webgl/FramebufferObject.js\";import\"../../../../core/has.js\";import\"../../../webgl/checkWebGLError.js\";import\"../../../webgl/enums.js\";import\"../../../../chunks/builtins.js\";import e from\"../../../webgl/ProgramCache.js\";import\"../../../webgl/Texture.js\";import\"../../../webgl/VertexArrayObject.js\";import{WGLDrawPhase as t}from\"./enums.js\";import{createProgramTemplate as o}from\"./shaders/MaterialPrograms.js\";const a=r=>r===t.HITTEST||r===t.LABEL_ALPHA,s=r=>(a(r)?1:0)|(r===t.HIGHLIGHT?2:0),i=({rendererInfo:e,drawPhase:t},o,a,i)=>`${o.getVariationHash()}-${i.join(\".\")}-${s(t)}-${e.getVariationHash()}-${r(a)&&a.join(\".\")}`,g=(e,o,s,i)=>{const g=i.reduce(((r,t)=>({...r,[t]:e.context.driverTest[t]})),{}),m={...o.getVariation(),...e.rendererInfo.getVariation(),highlight:e.drawPhase===t.HIGHLIGHT,id:a(e.drawPhase),...g};if(r(s))for(const r of s)m[r]=!0;return m};class m{constructor(r){this._programByKey=new Map,this._programCache=new e(r)}dispose(){this._programCache&&this._programCache.dispose()}getProgram(r,e,t=[],a=[]){const s=e.vsPath+\".\"+e.fsPath+JSON.stringify(t)+a.join(\".\");if(this._programByKey.has(s))return this._programByKey.get(s);const i=a.reduce(((e,t)=>({...e,[t]:r.context.driverTest[t]})),{}),g={...t.map((r=>\"string\"==typeof r?{name:r,value:!0}:r)).reduce(((r,e)=>({...r,[e.name]:e.value})),{}),...i},{vsPath:m,fsPath:n,attributes:h}=e,p=this._programCache.getProgram(o(m,n,h),g);if(!p)throw new Error(\"Unable to get program for key: ${key}\");return this._programByKey.set(s,p),p}getMaterialProgram(r,e,t,a,s,m=[\"ignoresSamplerPrecision\"]){const n=i(r,e,s,m);if(this._programByKey.has(n))return this._programByKey.get(n);const h=g(r,e,s,m),p=this._programCache.getProgram(o(t,t,a),h);if(!p)throw new Error(\"Unable to get program for key: ${key}\");return this._programByKey.set(n,p),p}}export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../../core/maybe.js\";import\"../../../webgl/BufferObject.js\";import s from\"../../../webgl/FramebufferObject.js\";import\"../../../../core/has.js\";import\"../../../webgl/checkWebGLError.js\";import\"../../../webgl/enums.js\";import\"../../../../chunks/builtins.js\";import r from\"../../../webgl/Renderbuffer.js\";import\"../../../webgl/Texture.js\";import\"../../../webgl/VertexArrayObject.js\";import{brushes as i}from\"../brushes.js\";import n from\"../vectorTiles/shaders/VTLMaterialManager.js\";import{BitBlitRenderer as a}from\"./BitBlitRenderer.js\";import{WGLGeometryType as o,WGLDrawPhase as h}from\"./enums.js\";import f from\"./MaterialManager.js\";import l from\"./TextureManager.js\";import{AnimationEffect as c}from\"./effects/AnimationEffect.js\";import{BlendEffect as b}from\"./effects/BlendEffect.js\";import{FeatureEffect as d}from\"./effects/FeatureEffect.js\";import u from\"./effects/HighlightEffect.js\";import{HittestEffect as g}from\"./effects/HittestEffect.js\";import{EffectManager as _}from\"./effects/post-processing/EffectManager.js\";import p from\"./painter/RenderPass.js\";const m={[o.FILL]:i.fill,[o.LINE]:i.line,[o.MARKER]:i.marker,[o.TEXT]:i.text};class M{constructor(e,t,s){this.context=e,this._blitRenderer=new a,this._brushCache=new Map,this._vtlMaterialManager=new n,this._blendEffect=new b,this.effects={highlight:new u,hittest:new g,integrate:new c,insideEffect:new d(\"inside\"),outsideEffect:new d(\"outside\")},this.materialManager=new f(e),this.textureManager=new l(t,s),this._effectsManager=new _(t)}get vectorTilesMaterialManager(){return this._vtlMaterialManager}getRenderTarget(){return this._renderTarget}setRenderTarget(e){this._renderTarget=e}getFbos(e,t){if(e!==this._lastWidth||t!==this._lastHeight){if(this._lastWidth=e,this._lastHeight=t,this._fbos){for(const s in this._fbos)this._fbos[s].resize(e,t);return this._fbos}const i={target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:e,height:t},n={colorTarget:0,depthStencilTarget:3},a=new r(this.context,{width:e,height:t,internalFormat:34041});this._stencilBuf=a,this._fbos={output:new s(this.context,n,i,a),blend:new s(this.context,n,i,a),effect0:new s(this.context,n,i,a)}}return this._fbos}getSharedStencilBuffer(){return this._stencilBuf}beforeRenderLayers(t,s=null){const{width:r,height:i}=t.getViewport();this._prevFBO=t.getBoundFramebufferObject();const n=this.getFbos(r,i);if(t.bindFramebuffer(n.output),t.setColorMask(!0,!0,!0,!0),t.setDepthWriteEnabled(!0),e(s)){const{r:e,g:r,b:i,a:n}=s.color;t.setClearColor(n*e/255,n*r/255,n*i/255,n)}else t.setClearColor(0,0,0,0);t.setClearDepth(1),t.clear(t.gl.COLOR_BUFFER_BIT|t.gl.DEPTH_BUFFER_BIT),t.setDepthWriteEnabled(!1)}beforeRenderLayer(e,t,s){const{context:r,blendMode:i,effects:n,requireFBO:a,drawPhase:o}=e;if(a||E(o,i,n,s))r.bindFramebuffer(this._fbos.blend),r.setColorMask(!0,!0,!0,!0),r.setClearColor(0,0,0,0),r.setDepthWriteEnabled(!0),r.setClearDepth(1),r.clear(r.gl.COLOR_BUFFER_BIT|r.gl.DEPTH_BUFFER_BIT),r.setDepthWriteEnabled(!1);else{const e=this._getOutputFBO();r.bindFramebuffer(e)}r.setDepthWriteEnabled(!1),r.setDepthTestEnabled(!1),r.setStencilTestEnabled(!0),r.setClearStencil(t),r.setStencilWriteMask(255),r.clear(r.gl.STENCIL_BUFFER_BIT)}compositeLayer(s,r){const{context:i,blendMode:n,effects:a,requireFBO:o,drawPhase:f}=s;if(o||E(f,n,a,r)){e(a)&&a.length>0&&f===h.MAP&&this._applyEffects(s,a);const o=this._getOutputFBO();i.bindFramebuffer(o),i.setStencilTestEnabled(!1),i.setStencilWriteMask(0),i.setBlendingEnabled(!0),i.setBlendFunctionSeparate(1,771,1,771),i.setColorMask(!0,!0,!0,!0);const l=t(n)||f===h.HIGHLIGHT?\"normal\":n;this._blendEffect.draw(s,this._fbos.blend.colorTexture,9728,l,r)}}renderLayers(e){if(e.bindFramebuffer(this._prevFBO),!this._fbos)return;const t=this._getOutputFBO();e.setStencilTestEnabled(!1),e.setStencilWriteMask(0),this.blitTexture(e,t.colorTexture,9728)}dispose(){if(this.materialManager.dispose(),this.textureManager.dispose(),this._blitRenderer&&(this._blitRenderer.dispose(),this._blitRenderer=null),this._brushCache&&(this._brushCache.forEach((e=>e.dispose())),this._brushCache.clear(),this._brushCache=null),this._fbos)for(const e in this._fbos)this._fbos[e]&&this._fbos[e].dispose();if(this.effects)for(const e in this.effects)this.effects[e]&&this.effects[e].dispose();this._effectsManager.dispose(),this._vtlMaterialManager&&(this._vtlMaterialManager.dispose(),this._vtlMaterialManager=null),this._prevFBO=null}getGeometryBrush(e){const t=m[e];let s=this._brushCache.get(t);return void 0===s&&(s=new t,this._brushCache.set(t,s)),this._brushCache.get(t)}renderObject(e,t,s,r){const n=i[s];if(!n)return null;let a=this._brushCache.get(n);void 0===a&&(a=new n,this._brushCache.set(n,a)),a.prepareState(e,t,r),a.draw(e,t,r)}renderObjects(e,t,s,r){const n=i[s];if(!n)return null;let a=this._brushCache.get(n);void 0===a&&(a=new n,this._brushCache.set(n,a)),a.drawMany(e,t,r)}registerRenderPass(e){const t=e.brushes.map((e=>(this._brushCache.has(e)||this._brushCache.set(e,new e),this._brushCache.get(e))));return new p(t,e)}setHighlightOptions(e){this.effects.highlight.setHighlightOptions(e)}blitTexture(e,t,s,r=1){e.setBlendingEnabled(!0),e.setBlendFunctionSeparate(1,771,1,771),e.setColorMask(!0,!0,!0,!0),this._blitRenderer.render(e,t,s,r)}getPostProcessingEffects(e){return this._effectsManager.getPostProcessingEffects(e)}_getOutputFBO(){return null!=this._renderTarget?this._renderTarget:this._fbos.output}_applyEffects(e,t){const{context:s}=e,r=this._effectsManager.getPostProcessingEffects(t);for(const{postProcessingEffect:i,effect:n}of r)s.bindFramebuffer(this._fbos.blend),i.draw(e,this._fbos.blend,n)}}function E(t,s,r,i){return t!==h.HIGHLIGHT&&(1!==i||e(s)&&\"normal\"!==s||e(r)&&r.length>0)}export{M as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/CircularArray.js\";import s from\"../../../../core/Evented.js\";import t from\"../../../../core/has.js\";import{isSome as r}from\"../../../../core/maybe.js\";import{createDisjointTimerQuery as n}from\"../../../webgl/capabilities/DisjointTimerQuery.js\";const i=t(\"esri-2d-profiler\");class o{constructor(t,r){if(this._events=new s,this._entries=new Map,this._timings=new e(10),!i)return;this._ext=n(t.gl,{}),this._debugOutput=r;const o=t.gl;if(this.enableCommandLogging)for(const e in o)if(\"function\"==typeof o[e]){const s=o[e],t=-1!==e.indexOf(\"draw\");o[e]=(...r)=>(this._events.emit(\"command\",{container:this._currentContainer,pass:this._currentPass,brush:this._currentBrush,method:e,args:r,isDrawCommand:t}),this._currentSummary&&(this._currentSummary.commands++,t&&this._currentSummary.drawCommands++),s.apply(o,r))}}get enableCommandLogging(){return!(\"object\"==typeof i&&i.disableCommands)}recordContainerStart(e){i&&(this._currentContainer=e)}recordContainerEnd(){i&&(this._currentContainer=null)}recordPassStart(e){i&&(this._currentPass=e,this._initSummary())}recordPassEnd(){i&&(this._currentPass=null,this._emitSummary())}recordBrushStart(e){i&&(this._currentBrush=e)}recordBrushEnd(){i&&(this._currentBrush=null)}recordStart(e){if(i&&r(this._ext)){if(this._entries.has(e)){const s=this._entries.get(e),t=this._ext.resultAvailable(s.query),n=this._ext.disjoint();if(t&&!n){const t=this._ext.getResult(s.query)/1e6;let n=0;if(r(this._timings.enqueue(t))){const e=this._timings.entries,s=e.length;let t=0;for(const r of e)t+=r;n=t/s}const i=t.toFixed(2),o=n?n.toFixed(2):\"--\";this.enableCommandLogging?(console.groupCollapsed(`Frame report for ${e}, ${i} ms (${o} last 10 avg)\\n${s.commandsLen} Commands (${s.drawCommands} draw)`),console.log(\"RenderPass breakdown: \"),console.table(s.summaries),console.log(\"Commands: \",s.commands),console.groupEnd()):console.log(`Frame report for ${e}, ${i} ms (${o} last 10 avg)`),this._debugOutput.innerHTML=`${i} (${o})`}for(const e of s.handles)e.remove();this._entries.delete(e)}const s={name:e,query:this._ext.createQuery(),commands:[],commandsLen:0,drawCommands:0,summaries:[],handles:[]};this.enableCommandLogging&&(s.handles.push(this._events.on(\"command\",(e=>{s.commandsLen++,s.commands.push(e),e.isDrawCommand&&s.drawCommands++}))),s.handles.push(this._events.on(\"summary\",(e=>{s.summaries.push(e)})))),this._ext.beginTimeElapsed(s.query),this._entries.set(e,s)}}recordEnd(e){i&&r(this._ext)&&this._entries.has(e)&&this._ext.endTimeElapsed()}_initSummary(){this.enableCommandLogging&&(this._currentSummary={container:this._currentContainer,pass:this._currentPass,drawCommands:0,commands:0})}_emitSummary(){this.enableCommandLogging&&this._events.emit(\"summary\",this._currentSummary)}}export{o as Profiler};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport h from\"./Rect.js\";class t{constructor(t,e){this._width=0,this._height=0,this._free=[],this._width=t,this._height=e,this._free.push(new h(0,0,t,e))}get width(){return this._width}get height(){return this._height}allocate(t,e){if(t>this._width||e>this._height)return new h;let i=null,s=-1;for(let h=0;h<this._free.length;++h){const r=this._free[h];t<=r.width&&e<=r.height&&(null===i||r.y<=i.y&&r.x<=i.x)&&(i=r,s=h)}return null===i?new h:(this._free.splice(s,1),i.width<i.height?(i.width>t&&this._free.push(new h(i.x+t,i.y,i.width-t,e)),i.height>e&&this._free.push(new h(i.x,i.y+e,i.width,i.height-e))):(i.width>t&&this._free.push(new h(i.x+t,i.y,i.width-t,i.height)),i.height>e&&this._free.push(new h(i.x,i.y+e,t,i.height-e))),new h(i.x,i.y,t,e))}release(h){for(let t=0;t<this._free.length;++t){const e=this._free[t];if(e.y===h.y&&e.height===h.height&&e.x+e.width===h.x)e.width+=h.width;else if(e.x===h.x&&e.width===h.width&&e.y+e.height===h.y)e.height+=h.height;else if(h.y===e.y&&h.height===e.height&&h.x+h.width===e.x)e.x=h.x,e.width+=h.width;else{if(h.x!==e.x||h.width!==e.width||h.y+h.height!==e.y)continue;e.y=h.y,e.height+=h.height}this._free.splice(t,1),this.release(h)}this._free.push(h)}}export{t as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{packFloatRGBA as t}from\"../../../../core/floatRGBA.js\";import{onAbort as s,createAbortError as e}from\"../../../../core/promiseUtils.js\";const i=1e20;class r{constructor(t){this.size=t;const s=document.createElement(\"canvas\");s.width=s.height=t,this._context=s.getContext(\"2d\"),this._gridOuter=new Float64Array(t*t),this._gridInner=new Float64Array(t*t),this._f=new Float64Array(t),this._d=new Float64Array(t),this._z=new Float64Array(t+1),this._v=new Int16Array(t)}dispose(){this._context=this._gridOuter=this._gridInner=this._f=this._d=this._z=this._v=null,this._svg&&(document.body.removeChild(this._svg),this._svg=null)}draw(r,h,n=31){this._initSVG();const o=this.createSVGString(r);return new Promise(((r,a)=>{const d=new Image;d.src=\"data:image/svg+xml; charset=utf8, \"+encodeURIComponent(o),d.onload=()=>{d.onload=null,this._context.clearRect(0,0,this.size,this.size),this._context.drawImage(d,0,0,this.size,this.size);const s=this._context.getImageData(0,0,this.size,this.size),e=new Uint8Array(this.size*this.size*4);for(let t=0;t<this.size*this.size;t++){const e=s.data[4*t+3]/255;this._gridOuter[t]=1===e?0:0===e?i:Math.max(0,.5-e)**2,this._gridInner[t]=1===e?i:0===e?0:Math.max(0,e-.5)**2}this._edt(this._gridOuter,this.size,this.size),this._edt(this._gridInner,this.size,this.size);for(let i=0;i<this.size*this.size;i++){const s=this._gridOuter[i]-this._gridInner[i];t(.5-s/(2*n),e,4*i)}r(e)};const l=h&&h.signal;l&&s(l,(()=>a(e())))}))}_initSVG(){if(!this._svg){const t=document.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\");t.setAttribute(\"style\",\"position: absolute;\"),t.setAttribute(\"width\",\"0\"),t.setAttribute(\"height\",\"0\"),t.setAttribute(\"aria-hidden\",\"true\"),t.setAttribute(\"role\",\"presentation\"),document.body.appendChild(t),this._svg=t}}createSVGString(t){this._initSVG();const s=document.createElementNS(\"http://www.w3.org/2000/svg\",\"path\");s.setAttribute(\"d\",t),this._svg.appendChild(s);const e=s.getBBox(),i=e.width/e.height,r=this.size/2;let h,n,o,a;if(i>1){n=h=r/e.width;const t=r*(1/i);o=this.size/4,a=r-t/2}else{h=n=r/e.height;o=r-r*i/2,a=this.size/4}const d=-e.x*h+o,l=-e.y*n+a;s.setAttribute(\"style\",`transform: matrix(${h}, 0, 0, ${n}, ${d}, ${l})`);const _=`<svg style=\"fill:red;\" height=\"${this.size}\" width=\"${this.size}\" xmlns=\"http://www.w3.org/2000/svg\">${this._svg.innerHTML}</svg>`;return this._svg.removeChild(s),_}_edt(t,s,e){const i=this._f,r=this._d,h=this._v,n=this._z;for(let o=0;o<s;o++){for(let r=0;r<e;r++)i[r]=t[r*s+o];this._edt1d(i,r,h,n,e);for(let i=0;i<e;i++)t[i*s+o]=r[i]}for(let o=0;o<e;o++){for(let e=0;e<s;e++)i[e]=t[o*s+e];this._edt1d(i,r,h,n,s);for(let e=0;e<s;e++)t[o*s+e]=Math.sqrt(r[e])}}_edt1d(t,s,e,r,h){e[0]=0,r[0]=-i,r[1]=+i;for(let n=1,o=0;n<h;n++){let s=(t[n]+n*n-(t[e[o]]+e[o]*e[o]))/(2*n-2*e[o]);for(;s<=r[o];)o--,s=(t[n]+n*n-(t[e[o]]+e[o]*e[o]))/(2*n-2*e[o]);o++,e[o]=n,r[o]=s,r[o+1]=+i}for(let i=0,n=0;i<h;i++){for(;r[n+1]<i;)n++;s[i]=(i-e[n])*(i-e[n])+t[e[n]]}}}export{r as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/Error.js\";import{isSome as e}from\"../../../../core/maybe.js\";import\"../../../webgl/BufferObject.js\";import\"../../../webgl/FramebufferObject.js\";import\"../../../../core/has.js\";import\"../../../webgl/checkWebGLError.js\";import\"../../../webgl/enums.js\";import\"../../../../chunks/builtins.js\";import i from\"../../../webgl/Texture.js\";import\"../../../webgl/VertexArrayObject.js\";import{SPRITE_PADDING as s}from\"./definitions.js\";import{log2 as a}from\"./GeometryUtils.js\";import r from\"./Rect.js\";import o from\"./RectangleBinPack.js\";function h(t){return t&&\"static\"===t.type}class c{constructor(t,e,i,s=0){this._mosaicPages=[],this._maxItemSize=0,this._currentPage=0,this._pageWidth=0,this._pageHeight=0,this._mosaicRects=new Map,this._spriteCopyQueue=[],this.pixelRatio=1,(e<=0||i<=0)&&console.error(\"Sprites mosaic defaultWidth and defaultHeight must be greater than zero!\"),this._pageWidth=e,this._pageHeight=i,this._requestRender=t,s>0&&(this._maxItemSize=s),this.pixelRatio=window.devicePixelRatio||1,this._binPack=new o(this._pageWidth,this._pageHeight);const a=Math.floor(this._pageWidth),r=Math.floor(this._pageHeight);this._mosaicPages.push({mosaicsData:{type:\"static\",data:new Uint32Array(a*r)},size:[this._pageWidth,this._pageHeight],dirty:!0,texture:void 0})}getWidth(t){return t>=this._mosaicPages.length?-1:this._mosaicPages[t].size[0]}getHeight(t){return t>=this._mosaicPages.length?-1:this._mosaicPages[t].size[1]}getPageTexture(t){return t<this._mosaicPages.length?this._mosaicPages[t].texture:null}has(t){return this._mosaicRects.has(t)}get itemCount(){return this._mosaicRects.size}getSpriteItem(t){return this._mosaicRects.get(t)}addSpriteItem(t,e,i,s,a,o){if(this._mosaicRects.has(t))return this._mosaicRects.get(t);let c,n,g;if(h(i))[c,n,g]=this._allocateImage(e[0],e[1]);else{c=new r(0,0,e[0],e[1]),n=this._mosaicPages.length;const t=void 0;this._mosaicPages.push({mosaicsData:i,size:e,dirty:!0,texture:t})}if(c.width<=0||c.height<=0)return null;const m={rect:c,width:e[0],height:e[1],sdf:a,simplePattern:o,pixelRatio:1,page:n};return this._mosaicRects.set(t,m),h(i)&&this._copy({rect:c,spriteSize:e,spriteData:i.data,page:n,pageSize:g,repeat:s,sdf:a}),m}hasItemsToProcess(){return 0!==this._spriteCopyQueue.length}processNextItem(){const t=this._spriteCopyQueue.pop();t&&this._copy(t)}getSpriteItems(t){const e={};for(const i of t)e[i]=this.getSpriteItem(i);return e}getMosaicItemPosition(t){const e=this.getSpriteItem(t),i=e&&e.rect;if(!i)return null;i.width=e.width,i.height=e.height;const a=e.width,r=e.height,o=s,h=this._mosaicPages[e.page];return{size:[e.width,e.height],tl:[(i.x+o)/h[0],(i.y+o)/h[1]],br:[(i.x+o+a)/h[0],(i.y+o+r)/h[1]],page:e.page}}bind(t,i,s=0,a=0){const r=this._mosaicPages[s],o=r.mosaicsData;let c=r.texture;if(c||(c=n(t,o,r.size),r.texture=c),c.setSamplingMode(i),h(o))t.bindTexture(c,a),r.dirty&&(c.setData(new Uint8Array(o.data.buffer)),c.generateMipmap());else{const i=o.data,s=i.bindFrame(t,c,a);e(this._requestRender)&&s&&i.frameCount>0&&this._requestRender.requestRender(),i.bindFrame(t,c,a)}r.dirty=!1}static _copyBits(t,e,i,s,a,r,o,h,c,n,g){let m=s*e+i,p=h*r+o;if(g){p-=r;for(let o=-1;o<=n;o++,m=((o+n)%n+s)*e+i,p+=r)for(let e=-1;e<=c;e++)a[p+e]=t[m+(e+c)%c]}else for(let u=0;u<n;u++){for(let e=0;e<c;e++)a[p+e]=t[m+e];m+=e,p+=r}}_copy(e){if(e.page>=this._mosaicPages.length)return;const i=this._mosaicPages[e.page],a=i.mosaicsData;if(!h(i.mosaicsData))throw new t(\"mapview-invalid-resource\",\"unsuitable data type!\");const r=e.spriteData,o=a.data;o&&r||console.error(\"Source or target images are uninitialized!\"),c._copyBits(r,e.spriteSize[0],0,0,o,e.pageSize[0],e.rect.x+s,e.rect.y+s,e.spriteSize[0],e.spriteSize[1],e.repeat),i.dirty=!0}_allocateImage(t,e){t+=2*s,e+=2*s;const i=Math.max(t,e);if(this._maxItemSize&&this._maxItemSize<i){const i=2**Math.ceil(a(t)),s=2**Math.ceil(a(e)),o=new r(0,0,t,e);return this._mosaicPages.push({mosaicsData:{type:\"static\",data:new Uint32Array(i*s)},size:[i,s],dirty:!0,texture:void 0}),[o,this._mosaicPages.length-1,[i,s]]}const c=this._binPack.allocate(t,e);if(c.width<=0){const i=this._mosaicPages[this._currentPage];return!i.dirty&&h(i.mosaicsData)&&(i.mosaicsData.data=null),this._currentPage=this._mosaicPages.length,this._mosaicPages.push({mosaicsData:{type:\"static\",data:new Uint32Array(this._pageWidth*this._pageHeight)},size:[this._pageWidth,this._pageHeight],dirty:!0,texture:void 0}),this._binPack=new o(this._pageWidth,this._pageHeight),this._allocateImage(t,e)}return[c,this._currentPage,[this._pageWidth,this._pageHeight]]}dispose(){this._binPack=null;for(const t of this._mosaicPages){const e=t.texture;e&&e.dispose();const i=t.mosaicsData;if(!h(i)){i.data.pause()}}this._mosaicPages=null,this._mosaicRects.clear()}}function n(t,e,s){return h(e)?new i(t,{pixelFormat:6408,dataType:5121,width:s[0],height:s[1]},new Uint8Array(e.data.buffer)):new i(t,{pixelFormat:6408,dataType:5121,samplingMode:9729,wrapMode:33071,width:s[0],height:s[1]},null)}export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../config.js\";import t from\"../../../../request.js\";import{bidiText as i}from\"../../../../core/BidiText.js\";import s from\"../../../../core/Error.js\";import r from\"../../../../core/Logger.js\";import{isNone as n,isSome as o}from\"../../../../core/maybe.js\";import{throwIfAborted as a,isAbortError as h}from\"../../../../core/promiseUtils.js\";import{pt2px as c}from\"../../../../core/screenUtils.js\";import{s as u}from\"../../../../chunks/vec2.js\";import{c as d}from\"../../../../chunks/vec2f32.js\";import l from\"../../../../symbols/cim/Rasterizer.js\";import{TEXTURE_BINDING_GLYPH_ATLAS as m,TEXTURE_BINDING_SPRITE_ATLAS as g}from\"./definitions.js\";import{MosaicType as p}from\"./enums.js\";import{getFullyQualifiedFontName as f}from\"./fontUtils.js\";import _ from\"./GlyphMosaic.js\";import w from\"./GlyphSource.js\";import y from\"./SDFConverter.js\";import M from\"./SpriteMosaic.js\";import{is3D as v,charCodes as I,isSimple as b,isSVGResource as z,isImageResource as R,shouldRepeat as T,getPMSResourceSize as j,isGIF as x,isPNG as S,getUrl as U,isSVGImage as B}from\"./Utils.js\";import G,{isPNG as C,isAnimatedPNG as F}from\"./animatedFormats/apng.js\";import P,{isGIF as q,isAnimatedGIF as L}from\"./animatedFormats/gif.js\";import{ok as $}from\"./util/Result.js\";import{keyFromSymbol as k}from\"./util/symbolUtils.js\";import{QueueProcessor as A}from\"../../../support/QueueProcessor.js\";const O=d(),N=\"arial-unicode-ms-regular\",Q=126,E=r.getLogger(\"esri.views.2d.engine.webgl.TextureManager\");async function H(e,i){const r=U(e);let n;const o=\";base64,\";if(r.includes(o)){const e=r.indexOf(o)+o.length,t=r.substring(e),i=atob(t),s=new Uint8Array(i.length);for(let r=0;r<i.length;r++)s[r]=i.charCodeAt(r);n=s.buffer}else try{const{data:e}=await t(r,{responseType:\"array-buffer\",...i});n=e}catch(a){if(!h(a))return new s(\"mapview-invalid-resource\",`Could not fetch requested resource at ${r}`)}return n}function V(e,t){const i=Math.round(c(t)*window.devicePixelRatio),s=i>=128?2:4;return Math.min(e,i*s)}const Y=(e,t,i)=>E.error(new s(e,t,i));class D{constructor(e,t,i){this.mosaicType=e,this.page=t,this.sdf=i}static fromMosaic(e,t){return new D(e,t.page,t.sdf)}}class J{constructor(i,r){this.resourceManager=r,this._invalidFontsMap=new Map,this._sdfConverter=new y(Q),this._bindingInfos=new Array,this._hashToBindingIndex=new Map,this._ongoingRasterizations=new Map,this._imageRequestQueue=new A({concurrency:10,process:async(e,i)=>{a(i);try{return await t(e,{responseType:\"image\",signal:i})}catch(r){if(!h(r))throw new s(\"mapview-invalid-resource\",`Could not fetch requested resource at ${e}`,r);throw r}}}),this._spriteMosaic=new M(i,2048,2048,500),this._glyphSource=new w(`${e.fontsUrl}/{fontstack}/{range}.pbf`),this._glyphMosaic=new _(1024,1024,this._glyphSource),this._rasterizer=new l(r)}dispose(){this._spriteMosaic.dispose(),this._glyphMosaic.dispose(),this._rasterizer.dispose(),this._sdfConverter.dispose(),this._spriteMosaic=null,this._glyphMosaic=null,this._sdfConverter=null,this._hashToBindingIndex.clear(),this._hashToBindingIndex=null,this._bindingInfos=null,this._ongoingRasterizations.clear(),this._ongoingRasterizations=null,this._imageRequestQueue.clear(),this._imageRequestQueue=null}get sprites(){return this._spriteMosaic}get glyphs(){return this._glyphMosaic}async rasterizeItem(e,t,i,s){if(n(e))return Y(\"mapview-null-resource\",\"Unable to rasterize null resource\"),null;switch(e.type){case\"text\":case\"esriTS\":{const t=await this._rasterizeText(e,i,s);return t.forEach((e=>this._setTextureBinding(p.GLYPH,e))),{glyphMosaicItems:t}}default:{if(v(e))return Y(\"mapview-invalid-type\",`MapView does not support symbol type: ${e.type}`,e),null;const i=await this._rasterizeSpriteSymbol(e,t,s);return $(i)&&i&&this._setTextureBinding(p.SPRITE,i),{spriteMosaicItem:i}}}}bindTextures(e,t,i,s=!1){if(0===i.textureBinding)return;const r=this._bindingInfos[i.textureBinding-1],n=r.page,o=s?9987:9729;switch(r.mosaicType){case p.SPRITE:{const i=this.sprites.getWidth(n),s=this.sprites.getHeight(n),r=u(O,i,s);return this._spriteMosaic.bind(e,o,n,g),t.setUniform1i(\"u_texture\",g),void t.setUniform2fv(\"u_mosaicSize\",r)}case p.GLYPH:{const i=this.glyphs.width,s=this.glyphs.height,r=u(O,i,s);return this._glyphMosaic.bind(e,o,n,m),t.setUniform1i(\"u_texture\",m),void t.setUniform2fv(\"u_mosaicSize\",r)}default:E.error(\"mapview-texture-manager\",`Cannot handle unknown type ${r.mosaicType}`)}}_hashMosaic(e,t){return 1|e<<1|(t.sdf?1:0)<<2|t.page<<3}_setTextureBinding(e,t){const i=this._hashMosaic(e,t);if(!this._hashToBindingIndex.has(i)){const s=D.fromMosaic(e,t),r=this._bindingInfos.length+1;this._hashToBindingIndex.set(i,r),this._bindingInfos.push(s)}t.textureBinding=this._hashToBindingIndex.get(i)}async _rasterizeText(e,t,s){let r,n;if(\"cim\"in e){const t=e;r=t.fontName,n=t.text}else{const t=e;r=f(t.font),n=t.text}const o=this._invalidFontsMap.has(r),a=t||I(i(n)[0]);try{return await this._glyphMosaic.getGlyphItems(o?N:r,a,s)}catch(h){return Y(\"mapview-invalid-resource\",`Couldn't find font ${r}. Falling back to Arial Unicode MS Regular`),this._invalidFontsMap.set(r,!0),this._glyphMosaic.getGlyphItems(N,a,s)}}async _rasterizeSpriteSymbol(e,t,i){if(b(e))return null;const r=k(e);if(this._spriteMosaic.has(r))return this._spriteMosaic.getSpriteItem(r);if(z(e)||R(e))return this._handleAsyncResource(r,e,i);const n=1,o=this._rasterizer.rasterizeJSONResource(e,n);if(o){const{size:t,image:i,sdf:s,simplePattern:n}=o;return this._addItemToMosaic(r,t,{type:\"static\",data:i},T(e),s,n)}return new s(\"TextureManager\",\"unrecognized or null rasterized image\")}async _handleAsyncResource(e,t,i){if(this._ongoingRasterizations.has(e))return this._ongoingRasterizations.get(e);let s;s=z(t)?this._handleSVG(t,e,i):this._handleImage(t,e,i),this._ongoingRasterizations.set(e,s);try{await s,this._ongoingRasterizations.delete(e)}catch{this._ongoingRasterizations.delete(e)}return s}async _handleSVG(e,t,i){const s=[Q,Q],r=await this._sdfConverter.draw(e.path,i);return this._addItemToMosaic(t,s,{type:\"static\",data:new Uint32Array(r.buffer)},!1,!0,!0)}async _handleGIFOrPNG(e,t,i){const r=await H(e,i);if($(r)){const o=q(r),a=C(r);if(!o&&!a)return new s(\"mapview-invalid-resource\",\"Image data is neither GIF nor PNG!\");let c;try{o&&L(r)?c=await P.create(r,i):a&&F(r)&&(c=await G.create(r,i))}catch(n){if(!h(n))return new s(\"mapview-invalid-resource\",\"Could not fetch requested resource!\")}if(c&&$(c))return this._addItemToMosaic(t,[c.width,c.height],{type:\"animated\",data:c},T(e),!1,!1);const u=new Blob([r],{type:o?\"image/gif\":\"image/png\"}),d=await this._imageFromBlob(u);if(d&&d instanceof HTMLImageElement){let i=d.width,s=d.height;\"esriPMS\"===e.type&&(i=Math.round(V(d.width,j(e))),s=Math.round(d.height*(i/d.width)));const r=\"cim\"in e?e.cim.colorSubstitutions:void 0,{size:n,sdf:o,image:a}=this._rasterizer.rasterizeImageResource(i,s,d,r);return this._addItemToMosaic(t,n,{type:\"static\",data:a},T(e),o,!1)}}return new s(\"mapview-invalid-resource\",\"Could not handle resource!\")}async _handleImage(e,t,i){if(x(e)||S(e))return this._handleGIFOrPNG(e,t,i);const r=U(e);try{let s;const a=this.resourceManager.getResource(r);if(o(a))s=a;else{const{data:e}=await this._imageRequestQueue.push(r,{...i});s=e}if(B(r))if(\"width\"in e&&\"height\"in e)s.width=c(e.width),s.height=c(e.height);else if(\"cim\"in e){var n;const t=e.cim;s.width=c(null!=(n=t.width)?n:t.scaleX*t.size),s.height=c(t.size)}if(!s.width||!s.height)return null;let h=s.width,u=s.height;\"esriPMS\"===e.type&&(h=Math.round(V(s.width,j(e))),u=Math.round(s.height*(h/s.width)));const d=\"cim\"in e?e.cim.colorSubstitutions:void 0,{size:l,sdf:m,image:g}=this._rasterizer.rasterizeImageResource(h,u,s,d);return this._addItemToMosaic(t,l,{type:\"static\",data:g},T(e),m,!1)}catch(a){if(!h(a))return new s(\"mapview-invalid-resource\",`Could not fetch requested resource at ${r}. ${a.message}`)}}async _imageFromBlob(e){const t=window.URL.createObjectURL(e);try{const{data:e}=await this._imageRequestQueue.push(t);return window.URL.revokeObjectURL(t),e}catch(i){if(window.URL.revokeObjectURL(t),!h(i))return new s(\"mapview-invalid-resource\",`Could not fetch requested resource at ${t}`);throw i}}_addItemToMosaic(e,t,i,s,r,n){return this._spriteMosaic.addSpriteItem(e,t,i,s,r,n)}}export{J as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/Error.js\";import{isAbortError as e}from\"../../../../../core/promiseUtils.js\";const r=new Uint32Array(256);for(let b=0;b<256;b++){let t=b;for(let e=0;e<8;e++)t=0!=(1&t)?3988292384^t>>>1:t>>>1;r[b]=t}function a(t,e=0,a=t.length-e){let i=-1;for(let s=e,n=e+a;s<n;s++)i=i>>>8^r[255&(i^t[s])];return-1^i}const i=new t(\"Not a PNG\"),s=new t(\"Not an animated PNG\"),n=new Uint8Array([137,80,78,71,13,10,26,10]);function h(t){const e=t.constructor===Uint8Array?t:new Uint8Array(t);return!n.some(((t,r)=>t!==e[r]))}function u(t){let e,r;return p(new Uint8Array(t),((t,a,i)=>{const s=new DataView(a.buffer);\"IHDR\"===t&&(e=s.getUint32(i+8),r=s.getUint32(i+12))})),[e,r]}function l(t){const e=new Uint8Array(t);if(!h(e))return!1;let r=!1;return p(e,(t=>!(r=\"acTL\"===t))),r}class o{constructor(){this.width=0,this.height=0,this.numPlays=0,this.playTime=0,this.frames=[],this.paused=!1,this.playing=!1,this.playSpeed=1,this.currentFrameNumber=0,this._lastUsedFrame=-1}static async create(r,a){const i=new o;try{await i._load(r,a)}catch(s){if(!e(s))return new t(\"invalid-resource\",`Could not load PNG: ${s.message}`)}return i}play(){this.playing||(this.paused=!1,this.playing=!0,this._play())}pause(){this.paused=!0,this.playing=!1,clearTimeout(this.timerID)}togglePlay(){this.paused||!this.playing?this.play():this.pause()}bindFrame(t,e,r){t.bindTexture(e,r);const a=this.frameChanged();if(!a)return!1;const i=this.currentFrame,s=i.frameData,n=e.descriptor;return(i.left||i.top||i.width!==n.width||i.height!==n.height)&&e.setData(null),e.updateData(0,i.left,i.top,i.width,i.height,s),this.updateUsedFrame(),a}frameChanged(){return this._lastUsedFrame!==this.currentFrameNumber}updateUsedFrame(){this._lastUsedFrame=this.currentFrameNumber}async _load(r,a){try{const t=d(this,r);if(t!==this)return t;this._resizeCanvas=document.createElement(\"canvas\"),this._resizeCanvas.width=this.width,this._resizeCanvas.height=this.height,await Promise.all(this.frames.map((t=>t.createImage(this._resizeCanvas))))}catch(i){if(!e(i))return new t(\"invalid-resource\",\"Could not parse PNG\")}this.play()}_play(){let t,e;if(0===this.playSpeed)return void this.pause();this.playSpeed<0?(this.currentFrameNumber-=1,this.currentFrameNumber<0&&(this.currentFrameNumber=this.frames.length-1),e=this.currentFrameNumber,e-=1,e<0&&(e=this.frames.length-1),t=1*-this.frames[e].delay/this.playSpeed):(this.currentFrameNumber+=1,this.currentFrameNumber%=this.frames.length,t=1*this.frames[this.currentFrameNumber].delay/this.playSpeed);const r=this.frames[this.currentFrameNumber];this.currentFrame={frameData:r.imageData,top:r.top,left:r.left,width:r.width,height:r.height},this.timerID=window.setTimeout((()=>this._play()),t)}}class c{constructor(){this.left=0,this.top=0,this.width=0,this.height=0,this.delay=0,this.disposeOp=0,this.blendOp=0,this.data=null,this.imageData=null}async createImage(t){if(null===this.imageData)return new Promise(((e,r)=>{const a=URL.createObjectURL(this.data),i=document.createElement(\"img\");i.onload=()=>{URL.revokeObjectURL(a),this.imageData=m(i,t),e()},i.onerror=()=>{URL.revokeObjectURL(a),this.imageData=null,r(new Error(\"Image creation error\"))},i.src=a}))}}function m(t,e){e.width=t.width,e.height=t.height;const r=e.getContext(\"2d\");r.drawImage(t,0,0,t.width,t.height);const a=r.getImageData(0,0,t.width,t.height),i=new Uint8Array(a.data);let s;for(let n=0;n<i.length;n+=4)s=i[n+3]/255,i[n]=i[n]*s,i[n+1]=i[n+1]*s,i[n+2]=i[n+2]*s;return new ImageData(new Uint8ClampedArray(i.buffer),t.width,t.height)}function d(t,e){const r=new Uint8Array(e);if(n.some(((t,e)=>t!==r[e])))return i;let a=!1;if(p(r,(t=>!(a=\"acTL\"===t))),!a)return s;const h=[],u=[];let l=null,o=null,m=0;if(p(r,((e,r,a,i)=>{const s=new DataView(r.buffer);switch(e){case\"IHDR\":l=r.subarray(a+8,a+8+i),t.width=s.getUint32(a+8),t.height=s.getUint32(a+12);break;case\"acTL\":t.numPlays=s.getUint32(a+8+4);break;case\"fcTL\":{o&&(t.frames.push(o),m++),o=new c,o.width=s.getUint32(a+8+4),o.height=s.getUint32(a+8+8),o.left=s.getUint32(a+8+12),o.top=s.getUint32(a+8+16);const e=s.getUint16(a+8+20);let r=s.getUint16(a+8+22);0===r&&(r=100),o.delay=1e3*e/r,o.delay<=10&&(o.delay=100),t.playTime+=o.delay,o.disposeOp=s.getUint8(a+8+24),o.blendOp=s.getUint8(a+8+25),o.dataParts=[],0===m&&2===o.disposeOp&&(o.disposeOp=1);break}case\"fdAT\":o&&o.dataParts.push(r.subarray(a+8+4,a+8+i));break;case\"IDAT\":o&&o.dataParts.push(r.subarray(a+8,a+8+i));break;case\"IEND\":u.push(w(r,a,12+i));break;default:h.push(w(r,a,12+i))}})),0===t.frames.length)return s;t.frameCount=t.frames.length;const d=new Blob(h),g=new Blob(u);return t.frames.forEach((t=>{let e=[];e.push(n),l.set(U(t.width),0),l.set(U(t.height),4),e.push(y(\"IHDR\",l)),e.push(d),t.dataParts.forEach((t=>e.push(y(\"IDAT\",t)))),e.push(g),t.data=new Blob(e,{type:\"image/png\"}),delete t.dataParts,e=null})),t}function p(t,e){const r=new DataView(t.buffer);let a,i,s,n=8;do{i=r.getUint32(n),a=g(t,n+4,4),s=e(a,t,n,i),n+=12+i}while(!1!==s&&\"IEND\"!==a&&n<t.length)}function g(t,e,r){const a=Array.prototype.slice.call(t.subarray(e,e+r));return String.fromCharCode.apply(String,a)}function f(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}function w(t,e,r){const a=new Uint8Array(r);return a.set(t.subarray(e,e+r)),a}function y(t,e){const r=t.length+e.length,i=new Uint8Array(r+8),s=new DataView(i.buffer);s.setUint32(0,e.length),i.set(f(t),4),i.set(e,8);const n=a(i,4,r);return s.setUint32(r+4,n),i}function U(t){return new Uint8Array([t>>>24&255,t>>>16&255,t>>>8&255,255&t])}export{o as default,u as getPNGSize,l as isAnimatedPNG,h as isPNG};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/Error.js\";import{isAbortError as e,isAborted as s,createAbortError as i}from\"../../../../../core/promiseUtils.js\";const a={GCExt:249,COMMENT:254,APPExt:255,UNKNOWN:1,IMAGE:44,EOF:59,EXT:33};function r(t){if(!t||0===t.byteLength)return!1;const e=t.constructor===Uint8Array?t:new Uint8Array(t);return 71===e[0]&&73===e[1]&&70===e[2]&&56===e[3]}function h(t){const e=new Uint8ClampedArray(t);let s=6;return[e[s++]+(e[s++]<<8),e[s++]+(e[s++]<<8)]}function o(t){if(!t||0===t.byteLength)return!1;const e=new Uint8Array(t);if(!r(e))return!1;let s=0;for(let i=0,a=e.length-9;i<a&&(0!==e[i]||33!==e[i+1]||249!==e[i+2]||4!==e[i+3]||0!==e[i+8]||44!==e[i+9]&&33!==e[i+9]||(s++,!(s>1)));++i);return s>1}class n{constructor(){this.paused=!1,this.playing=!1,this.waitTillDone=!0,this.loading=!1,this.firstFrameOnly=!1,this.frames=[],this.comment=\"\",this.length=0,this.currentFrameNumber=0,this.frameCount=0,this.playSpeed=1,this.lastFrame=null,this.playOnLoad=!0,this.complete=!1,this.interlaceOffsets=[0,4,2,1],this.interlaceSteps=[8,8,4,2],this._lastUsedFrame=-1}static async create(s,i){const a=new n;try{await a._load(s,i)}catch(r){if(!e(r))return new t(\"invalid-resource\",`Could not load PNG: ${r.message}`)}return a}play(){this.playing||(this.paused=!1,this.playing=!0,this._play())}pause(){this.paused=!0,this.playing=!1,clearTimeout(this.timerID)}togglePlay(){this.paused||!this.playing?this.play():this.pause()}bindFrame(t,e,s){t.bindTexture(e,s);const i=this.frameChanged();if(i){const t=this.currentFrame,s=t.frameData;e.updateData(0,0,0,t.width,t.height,s),this.updateUsedFrame()}return i}seekFrame(t){clearTimeout(this.timerID),this.currentFrameNumber=t%this.frames.length,this.playing?this._play():this._setCurrentFrame(this.currentFrameNumber)}seek(t){clearTimeout(this.timerID),t<0&&(t=0),t*=1e3,t%=this.length;let e=0;for(;t>this.frames[e].time+this.frames[e].delay&&e<this.frames.length;)e+=1;this.currentFrameNumber=e,this.playing?this._play():this._setCurrentFrame(this.currentFrameNumber)}frameChanged(){return this._lastUsedFrame!==this.currentFrameNumber}updateUsedFrame(){this._lastUsedFrame=this.currentFrameNumber}async _load(s,i){try{this.loading=!0,await this._parse(s,i),this.loading=!1,this.play()}catch(a){if(!e(a))return new t(\"invalid-resource\",\"Could not parse gif!\")}}_parse(t,e){const s=new l(t);s.pos+=6,this.width=s.data[s.pos++]+(s.data[s.pos++]<<8),this.height=s.data[s.pos++]+(s.data[s.pos++]<<8);const i=s.data[s.pos++];return this.globalColourCount=1<<1+(7&i),s.pos++,s.pos++,128&i&&(this.globalColourTable=this._parseColourTable(this.globalColourCount,s)),new Promise(((t,i)=>{setTimeout((()=>this._parseBlock(s,t,i,e)),0)}))}async _parseBlock(t,e,r,h){if(h&&h.signal&&s(h.signal))return void r(i());const o=t.data[t.pos++];if(o===a.IMAGE){if(this._parseImg(t),this.firstFrameOnly)return this._finishedLoading(),void e()}else{if(o===a.EOF)return this._finishedLoading(),void e();this._parseExt(t)}\"function\"==typeof this.onprogress&&this.onprogress({bytesRead:t.pos,totalBytes:t.data.length,frame:this.frames.length}),setTimeout((()=>this._parseBlock(t,e,r,h)),0)}_parseColourTable(t,e){const s=[];for(let i=0;i<t;i++)s.push([e.data[e.pos++],e.data[e.pos++],e.data[e.pos++]]);return s}_parseImg(t){const e=t=>{const e=this.pixelBufSize/t;this.interlacedBufSize!==this.pixelBufSize&&(this.deinterlaceBuf=new Uint8Array(this.pixelBufSize),this.interlacedBufSize=this.pixelBufSize);let s=0;for(let i=0;i<4;i++)for(let a=this.interlaceOffsets[i];a<e;a+=this.interlaceSteps[i])this.deinterlaceBuf.set(this.pixelBuf.subarray(s,s+t),a*t),s+=t},s={};this.frames.push(s),s.disposalMethod=this.disposalMethod,s.time=this.length,s.delay=10*this.delayTime,this.length+=s.delay,this.transparencyGiven?s.transparencyIndex=this.transparencyIndex:s.transparencyIndex=void 0,s.leftPos=t.data[t.pos++]+(t.data[t.pos++]<<8),s.topPos=t.data[t.pos++]+(t.data[t.pos++]<<8),s.width=t.data[t.pos++]+(t.data[t.pos++]<<8),s.height=t.data[t.pos++]+(t.data[t.pos++]<<8);const i=t.data[t.pos++];s.localColourTableFlag=!!(128&i),s.localColourTableFlag&&(s.localColourTable=this._parseColourTable(1<<1+(7&i),t)),this.pixelBufSize!==s.width*s.height&&(this.pixelBuf=new Uint8Array(s.width*s.height),this.pixelBufSize=s.width*s.height),this._lzwDecode(t.data[t.pos++],t.readSubBlocksB()),64&i?(s.interlaced=!0,e(s.width)):s.interlaced=!1,this._processFrame(s)}_lzwDecode(t,e){let s,i,a,r,h,o,n,l,d;a=i=0;let p=[];const u=1<<t,m=u+1;for(r=t+1,d=!1;!d;){for(o=h,h=0,s=0;s<r;s++)e[a>>3]&1<<(7&a)&&(h|=1<<s),a++;if(h===u){for(p=[],r=t+1,s=0;s<u;s++)p[s]=[s];p[u]=[],p[m]=null}else{if(h===m)return void(d=!0);for(h>=p.length?p.push(p[o].concat(p[o][0])):o!==u&&p.push(p[o].concat(p[h][0])),n=p[h],l=n.length,s=0;s<l;s++)this.pixelBuf[i++]=n[s];p.length===1<<r&&r<12&&r++}}}_processFrame(t){t.image=document.createElement(\"canvas\"),t.image.width=this.width,t.image.height=this.height,t.ctx=t.image.getContext(\"2d\");const e=t.localColourTableFlag?t.localColourTable:this.globalColourTable;null===this.lastFrame&&(this.lastFrame=t);const s=2===this.lastFrame.disposalMethod||3===this.lastFrame.disposalMethod;s||t.ctx.drawImage(this.lastFrame.image,0,0,this.width,this.height);const i=t.ctx.getImageData(t.leftPos,t.topPos,t.width,t.height),a=t.transparencyIndex,r=i.data,h=t.interlaced?this.deinterlaceBuf:this.pixelBuf,o=h.length;let n,l,d=0;for(let p=0;p<o;p++)n=h[p],l=e[n],a!==n?(r[d++]=l[0],r[d++]=l[1],r[d++]=l[2],r[d++]=255):s?(r[d+3]=0,d+=4):d+=4;t.ctx.putImageData(i,t.leftPos,t.topPos),this.lastFrame=t}_parseExt(t){const e=t.data[t.pos++];e===a.GCExt?this._parseGCExt(t):e===a.COMMENT?this.comment+=t.readSubBlocks():e===a.APPExt?this._parseAppExt(t):(e===a.UNKNOWN&&(t.pos+=13),t.readSubBlocks())}_parseAppExt(t){t.pos+=1,\"NETSCAPE\"===t.getString(8)?t.pos+=8:(t.pos+=3,t.readSubBlocks())}_parseGCExt(t){t.pos++;const e=t.data[t.pos++];this.disposalMethod=(28&e)>>2,this.transparencyGiven=!!(1&e),this.delayTime=t.data[t.pos++]+(t.data[t.pos++]<<8),this.transparencyIndex=t.data[t.pos++],t.pos++}_finishedLoading(){this.loading=!1,this.frameCount=this.frames.length,this.lastFrame=null,this.complete=!0,this.disposalMethod=void 0,this.transparencyGiven=void 0,this.delayTime=void 0,this.transparencyIndex=void 0,this.waitTillDone=void 0,this.pixelBuf=void 0,this.deinterlaceBuf=void 0,this.pixelBufSize=void 0,this.deinterlaceBuf=void 0,this.currentFrameNumber=0,this.frames.length>0&&this._setCurrentFrame(0),this.playOnLoad&&this.play()}_play(){let t,e;0!==this.playSpeed?(this.playSpeed<0?(this.currentFrameNumber-=1,this.currentFrameNumber<0&&(this.currentFrameNumber=this.frames.length-1),e=this.currentFrameNumber,e-=1,e<0&&(e=this.frames.length-1),t=1*-this.frames[e].delay/this.playSpeed):(this.currentFrameNumber+=1,this.currentFrameNumber%=this.frames.length,t=1*this.frames[this.currentFrameNumber].delay/this.playSpeed),this._setCurrentFrame(this.currentFrameNumber),this.timerID=window.setTimeout((()=>this._play()),t)):this.pause()}_setCurrentFrame(t){const e=this.frames[t];this.currentFrame={frameData:e.image,top:0,left:0,width:this.width,height:this.height}}}class l{constructor(t){this.pos=0,this.data=new Uint8ClampedArray(t),this.len=this.data.length}getString(t){let e=\"\";for(;t--;)e+=String.fromCharCode(this.data[this.pos++]);return e}readSubBlocks(){let t,e,s=\"\";do{for(e=t=this.data[this.pos++];e--;)s+=String.fromCharCode(this.data[this.pos++])}while(0!==t&&this.pos<this.len);return s}readSubBlocksB(){let t,e;const s=[];do{for(e=t=this.data[this.pos++];e--;)s.push(this.data[this.pos++])}while(0!==t&&this.pos<this.len);return s}}export{n as default,h as getGIFSize,o as isAnimatedGIF,r as isGIF};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../../../core/maybe.js\";import{pt2px as i}from\"../../../../../core/screenUtils.js\";import{FILTER_FLAG_0 as o,EFFECT_FLAG_0 as r}from\"../definitions.js\";import{CollisionBitsetGrid as n,NONE as s,HAS_COLLISION as a,OUTSIDE_EXTENT as l}from\"./CollisionGrid.js\";import{getSizeForValueSimple as d}from\"./visualVariableSimpleUtils.js\";const c=254,u=255,f=0;function b(t,i){const o=[];t.forEachTile((e=>o.push(e))),o.sort(((e,t)=>e.instanceId-t.instanceId)),o.forEach((t=>{e(t.labelMetrics)&&t.isReady&&i(t,t.labelMetrics.getCursor())}))}function p(e){return\"feature\"===e.layer.type||\"csv\"===e.layer.type||\"geojson\"===e.layer.type||\"ogc-feature\"===e.layer.type||\"stream\"===e.layer.type||\"subtype-group\"===e.layer.type||\"wfs\"===e.layer.type}function y(e){return t=>i(d(t,e))}function m(e){const t=\"visualVariables\"in e&&e.visualVariables;if(!t)return null;for(const i of t)if(\"size\"===i.type)return y(i);return null}function h(e){for(const i of e){var t;const e=\"featureReduction\"in i&&\"cluster\"===(null==(t=i.featureReduction)?void 0:t.type)&&i.featureReduction,o=[...i.labelingInfo||[],...e.labelingInfo||[]];if(!i.labelsVisible||!o.length)continue;if(o.some((e=>\"none\"===e.deconflictionStrategy)))return!0}return!1}function M(e,i){if(!p(i))return;const o=\"subtype-group\"===i.layer.type?i.layer.sublayers.items:[i.layer],r=i.layer.geometryType,n=!h(o),s={};if(\"subtype-group\"!==i.layer.type){if(\"heatmap\"===i.layer.renderer.type)return;const e=m(i.layer.renderer);s[0]=e}const a=i.tileRenderer;if(t(a))return;const l=i.layer.visible&&!i.suspended;e.push({tileRenderer:a,vvEvaluators:s,deconflictionEnabled:n,geometryType:r,visible:l})}class g{run(e,t,i){const o=[];for(let r=e.length-1;r>=0;r--){M(o,e[r])}this._transformMetrics(o,t),this._runCollision(o,t,i)}_runCollision(e,t,i){const[o,r]=t.state.size,s=new n(o*t.pixelRatio,r*t.pixelRatio);for(const{tileRenderer:n,deconflictionEnabled:a,visible:l}of e){const e=n.featuresView.attributeView;a?l?(this._prepare(n),this._collideVisible(s,n,i),this._collideInvisible(s,n)):b(n,((t,i)=>{for(;i.nextId();)e.setLabelMinZoom(i.id,u)})):b(n,((t,i)=>{for(;i.nextId();)e.setLabelMinZoom(i.id,f)}))}}_isFiltered(t,i,n){const s=i.getFilterFlags(t),a=!n.hasFilter||!!(s&o),l=!e(n.featureEffect)||n.featureEffect.excludedLabelsVisible||!!(s&r);return!(a&&l)}_prepare(e){const t=e.featuresView.attributeView,i=new Set;b(e,((o,r)=>{for(;r.nextId();){if(i.has(r.id))continue;if(i.add(r.id),this._isFiltered(r.id,t,e.layerView)){t.setLabelMinZoom(r.id,c);continue}t.getLabelMinZoom(r.id)!==f?t.setLabelMinZoom(r.id,u):t.setLabelMinZoom(r.id,f)}}))}_collideVisible(e,t,i){const o=t.featuresView.attributeView,r=new Set;b(t,((t,n)=>{for(;n.nextId();)if(!r.has(n.id))if(t.key.level===i){if(0===o.getLabelMinZoom(n.id)){switch(e.insertMetrics(n)){case l:break;case a:o.setLabelMinZoom(n.id,c),r.add(n.id);break;case s:o.setLabelMinZoom(n.id,f),r.add(n.id)}}}else o.setLabelMinZoom(n.id,c)}))}_collideInvisible(e,t){const i=t.featuresView.attributeView,o=new Set;b(t,((t,r)=>{for(;r.nextId();)if(!o.has(r.id)&&i.getLabelMinZoom(r.id)===u){switch(e.insertMetrics(r)){case l:break;case a:i.setLabelMinZoom(r.id,u),o.add(r.id);break;case s:i.setLabelMinZoom(r.id,f),o.add(r.id)}}}))}_transformMetrics(t,i){for(const{tileRenderer:o,geometryType:r,vvEvaluators:n}of t)b(o,((t,s)=>{const a=o.featuresView.attributeView,l=t.transforms.labelMat2d;l[4]=Math.round(l[4]),l[5]=Math.round(l[5]);const d=l[4],c=l[5],u=\"polyline\"===r;for(;s.next();){const t=s.boundsCount,o=s.anchorX,r=s.anchorY;let f=s.size;const b=n[0];if(e(b)){const e=b(a.getVVSize(s.id));f=isNaN(e)||null==e||e===1/0?f:e}const p=s.directionX*(f/2),y=s.directionY*(f/2);for(let e=0;e<t;e++){let t=o,n=s.anchorY;if(u){let o=t+s.boundsX(e)+p,r=n+s.boundsY(e)+y;i.state.rotation?(o=l[0]*o+l[2]*r+l[4],r=l[1]*o+l[3]*r+l[5]):(o+=d,r+=c),s.setBoundsComputedAnchorX(e,Math.floor(o)),s.setBoundsComputedAnchorY(e,Math.floor(r))}else{i.state.rotation?(t=l[0]*o+l[2]*r+l[4],n=l[1]*o+l[3]*r+l[5]):(t+=d,n+=c);const a=t+s.boundsX(e)+p,u=n+s.boundsY(e)+y;s.setBoundsComputedAnchorX(e,a),s.setBoundsComputedAnchorY(e,u)}}}}))}}export{g as CollisionEngine};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../../../../core/mathUtils.js\";import{TILE_SIZE as s}from\"../definitions.js\";import{StaticBitSet as e}from\"../../../layers/features/support/StaticBitSet.js\";const i=2,o=1,h=0,r=1,n=2;class c{constructor(t,s){this.width=t,this.height=s;const i=Math.ceil(t/o),h=Math.ceil(s/o);this._cols=i,this._rows=h,this._cells=e.create(i*h)}insertMetrics(t){const s=this._hasCollision(t);return s===h&&this._markMetrics(t),s}getCellId(t,s){return t+s*this._cols}has(t){return this._cells.has(t)}hasRange(t,s){return this._cells.hasRange(t,s)}set(t){this._cells.set(t)}setRange(t,s){this._cells.setRange(t,s)}_hasCollision(t){const s=t.id;let e=0,o=0;t.save();do{const s=t.boundsCount;e+=s;for(let e=0;e<s;e++){const s=t.boundsComputedAnchorX(e),h=t.boundsComputedAnchorY(e),c=t.boundsWidth(e)+i,l=t.boundsHeight(e)+i;switch(this._collide(s,h,c,l)){case n:return n;case r:o++}}}while(t.peekId()===s&&t.next());return t.restore(),e===o?r:h}_collide(s,e,i,c){const l=s-i/2,_=e-c/2,a=l+i,u=_+c;if(a<0||u<0||l>this.width||_>this.height)return r;const d=t(Math.floor(l/o),0,this._cols),g=t(Math.floor(_/o),0,this._rows),f=t(Math.ceil(a/o),0,this._cols),m=t(Math.ceil(u/o),0,this._rows);for(let t=g;t<=m;t++)for(let s=d;s<=f;s++){const e=this.getCellId(s,t);if(this.has(e))return n}return h}_mark(s,e,i,h){const r=s-i/2,n=e-h/2,c=r+i,l=n+h,_=t(Math.floor(r/o),0,this._cols),a=t(Math.floor(n/o),0,this._rows),u=t(Math.ceil(c/o),0,this._cols),d=t(Math.ceil(l/o),0,this._rows);for(let t=a;t<=d;t++)for(let s=_;s<=u;s++){const e=this.getCellId(s,t);this.set(e)}return!1}_markMetrics(t){const s=t.id;do{const s=t.boundsCount;for(let e=0;e<s;e++){const s=t.boundsComputedAnchorX(e),o=t.boundsComputedAnchorY(e),h=t.boundsWidth(e)+i,r=t.boundsHeight(e)+i;this._mark(s,o,h,r)}}while(t.peekId()===s&&t.next())}}class l{constructor(t,e=2){this._bucketSize=t,this._rowsLength=s/t,this._colsLength=s/t,this._elementsPerBucket=e,this._grid=this._initGrid()}checkOverlap(t,s){const e=Math.floor(t/this._bucketSize),i=Math.floor(s/this._bucketSize);return e<0||e>=this._rowsLength||i<0||i>=this._colsLength||this._grid[i*this._colsLength+e]>=this._elementsPerBucket}markUsed(t,s){const e=Math.floor(t/this._bucketSize),i=Math.floor(s/this._bucketSize);this._grid[i*this._colsLength+e]+=1}reset(){this._grid=this._initGrid()}_initGrid(){return new Uint8Array(this._rowsLength*this._colsLength)}}export{c as CollisionBitsetGrid,l as CollisionGrid,n as HAS_COLLISION,h as NONE,r as OUTSIDE_EXTENT};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../../../../core/mathUtils.js\";import{meterIn as n}from\"../../../../../renderers/support/lengthUtils.js\";const e=Math.PI;function r(t,n){switch(n.transformationType){case\"additive\":return i(t,n);case\"constant\":return s(n,t);case\"clamped-linear\":return u(t,n);case\"proportional\":return o(t,n);case\"stops\":return c(t,n);case\"real-world-size\":return l(t,n);case\"identity\":return t;case\"unknown\":return null}}function a(t,n){return\"number\"==typeof t?t:r(n,t)}function i(t,n){return t+(a(n.minSize,t)||n.minDataValue)}function s(t,n){const e=t.stops;let r=e&&e.length&&e[0].size;return null==r&&(r=t.minSize),a(r,n)}function u(t,n){const e=(t-n.minDataValue)/(n.maxDataValue-n.minDataValue),r=a(n.minSize,t),i=a(n.maxSize,t);return t<=n.minDataValue?r:t>=n.maxDataValue?i:r+e*(i-r)}function o(n,e){const r=n/e.minDataValue,i=a(e.minSize,n),s=a(e.maxSize,n);let u=null;return u=r*i,t(u,i,s)}function c(t,n){const[e,r,i]=m(t,n.cache.ipData);if(e===r)return a(n.stops[e].size,t);{const s=a(n.stops[e].size,t);return s+(a(n.stops[r].size,t)-s)*i}}function l(r,i){const s=n[i.valueUnit],u=a(i.minSize,r),o=a(i.maxSize,r),{valueRepresentation:c}=i;let l=null;return l=\"area\"===c?2*Math.sqrt(r/e)/s:\"radius\"===c||\"distance\"===c?2*r/s:r/s,t(l,u,o)}function m(t,n){if(!n)return;let e=0,r=n.length-1;return n.some(((n,a)=>t<n?(r=a,!0):(e=a,!1))),[e,r,(t-n[e])/(n[r]-n[e])]}export{r as getSizeForValueSimple};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../../../../../core/maybe.js\";import{ATTRIBUTE_DATA_ANIMATION as t,TEXTURE_BINDING_ATTRIBUTE_DATA_0 as r,TEXTURE_BINDING_ATTRIBUTE_DATA_1 as i}from\"../definitions.js\";import s from\"../VertexStream.js\";import{Effect as a}from\"./Effect.js\";class o extends a{constructor(){super(...arguments),this.defines=[],this._desc={vsPath:\"fx/integrate\",fsPath:\"fx/integrate\",attributes:new Map([[\"a_position\",0]])}}dispose(){this._quad&&this._quad.dispose()}bind(){}unbind(){}draw(r,i){if(!i.size)return;const{context:a,renderingOptions:o}=r;this._quad||(this._quad=new s(a,[0,0,1,0,0,1,1,1]));const n=a.getBoundFramebufferObject(),{x:u,y:m,width:d,height:f}=a.getViewport();i.bindTextures(a);const c=i.getBlock(t);if(e(c))return;const _=c.getFBO(a),l=c.getFBO(a,1);a.setViewport(0,0,i.size,i.size),this._computeDelta(r,l,o.labelsAnimationTime),this._updateAnimationState(r,l,_),a.bindFramebuffer(n),a.setViewport(u,m,d,f)}_computeDelta(e,t,s){const{context:a,painter:o,displayLevel:n}=e,u=o.materialManager.getProgram(e,this._desc,[\"delta\"]);a.bindFramebuffer(t),a.setClearColor(0,0,0,0),a.clear(a.gl.COLOR_BUFFER_BIT),a.useProgram(u),u.setUniform1i(\"u_maskTexture\",r),u.setUniform1i(\"u_sourceTexture\",i),u.setUniform1f(\"u_timeDelta\",e.deltaTime),u.setUniform1f(\"u_animationTime\",s),u.setUniform1f(\"u_zoomLevel\",Math.round(10*n)),this._quad.draw()}_updateAnimationState(e,t,r){const{context:i,painter:s}=e,a=s.materialManager.getProgram(e,this._desc,[\"update\"]);i.bindTexture(t.colorTexture,1),i.useProgram(a),a.setUniform1i(\"u_sourceTexture\",1),i.bindFramebuffer(r),i.setClearColor(0,0,0,0),i.clear(i.gl.COLOR_BUFFER_BIT),this._quad.draw()}}export{o as AnimationEffect};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Error.js\";import r from\"../../../../../core/Logger.js\";import{isSome as t}from\"../../../../../core/maybe.js\";import\"../../../../webgl/BufferObject.js\";import\"../../../../webgl/FramebufferObject.js\";import\"../../../../../core/has.js\";import\"../../../../webgl/checkWebGLError.js\";import\"../../../../webgl/enums.js\";import\"../../../../../chunks/builtins.js\";import s from\"../../../../webgl/ProgramCache.js\";import i from\"../../../../webgl/Texture.js\";import\"../../../../webgl/VertexArrayObject.js\";import{WGLDrawPhase as o}from\"../enums.js\";import a from\"../VertexStream.js\";import{blend as n}from\"../shaders/BlendPrograms.js\";const d=r.getLogger(\"esri.views.2d.engine.webgl.effects.blendEffects.BlendEffect\");class u{constructor(){this._size=[0,0]}dispose(e){this._backBufferTexture&&(this._backBufferTexture.dispose(),this._backBufferTexture=null),this._programCache&&(this._programCache.dispose(),this._programCache=null),this._quad&&(this._quad.dispose(),this._quad=null)}draw(r,t,s,i,a){const{context:u,drawPhase:c}=r;if(this._setupShader(u),i&&\"normal\"!==i&&c!==o.LABEL)return void this._drawBlended(r,t,s,i,a);const m=this._programCache.getProgram(n,\"normal\");if(!m)return void d.error(new e(\"mapview-BlendEffect\",'Error creating shader program for blend mode \"normal\"'));u.useProgram(m),t.setSamplingMode(s),u.bindTexture(t,0),m.setUniform1i(\"u_layerTexture\",0),m.setUniform1f(\"u_opacity\",a),u.setBlendingEnabled(!0),u.setBlendFunction(1,771);const f=this._quad;f.draw(),f.unbind()}_drawBlended(r,s,i,o,a){const{context:u,state:c,pixelRatio:m,inFadeTransition:f}=r,{size:h}=c,l=u.getBoundFramebufferObject();let p,g;if(t(l)){const e=l.descriptor;p=e.width,g=e.height}else p=Math.round(m*h[0]),g=Math.round(m*h[1]);this._createOrResizeTexture(r,p,g);const b=this._backBufferTexture;l.copyToTexture(0,0,p,g,0,0,b),u.setStencilTestEnabled(!1),u.setStencilWriteMask(0),u.setBlendingEnabled(!0),u.setDepthTestEnabled(!1),u.setDepthWriteEnabled(!1);const _=this._programCache.getProgram(n,o);if(!_)return void d.error(new e(\"mapview-BlendEffect\",`Error creating shader program for blend mode ${o}`));u.useProgram(_),b.setSamplingMode(i),u.bindTexture(b,0),_.setUniform1i(\"u_backbufferTexture\",0),s.setSamplingMode(i),u.bindTexture(s,1),_.setUniform1i(\"u_layerTexture\",1),_.setUniform1f(\"u_opacity\",a),_.setUniform1f(\"u_inFadeOpacity\",f?1:0),u.setBlendFunction(1,0);const x=this._quad;x.draw(),x.unbind(),u.setBlendFunction(1,771)}_setupShader(e){this._programCache||(this._programCache=new s(e),this._quad||(this._quad=new a(e,[-1,-1,1,-1,-1,1,1,1])))}_createOrResizeTexture(e,r,t){const{context:s}=e;null!==this._backBufferTexture&&r===this._size[0]&&t===this._size[1]||(this._backBufferTexture?this._backBufferTexture.resize(r,t):this._backBufferTexture=new i(s,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:r,height:t}),this._size[0]=r,this._size[1]=t)}}export{u as BlendEffect};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nclass t{constructor(){this.name=this.constructor.name}}export{t as Effect};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{Effect as e}from\"./Effect.js\";class t extends e{constructor(e){super(),this.name=this.constructor.name,this.defines=[e]}dispose(){}bind({context:e,painter:t}){this._prev=e.getBoundFramebufferObject();const{width:r,height:s}=e.getViewport(),o=t.getFbos(r,s).effect0;e.bindFramebuffer(o),e.setColorMask(!0,!0,!0,!0),e.setClearColor(0,0,0,0),e.clear(e.gl.COLOR_BUFFER_BIT)}unbind(){}draw(e,t){const{context:r,painter:s}=e,o=s.getPostProcessingEffects(t),n=r.getBoundFramebufferObject();for(const{postProcessingEffect:c,effect:f}of o)c.draw(e,n,f);r.bindFramebuffer(this._prev),r.setStencilTestEnabled(!1),s.blitTexture(r,n.colorTexture,9728),r.setStencilTestEnabled(!0)}}export{t as FeatureEffect};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../../core/has.js\";import{BitBlitRenderer as e}from\"../BitBlitRenderer.js\";import{Effect as t}from\"./Effect.js\";import i from\"./highlight/HighlightGradient.js\";import s from\"./highlight/HighlightRenderer.js\";import h from\"./highlight/HighlightSurfaces.js\";const r=4,l=4/r;class d extends t{constructor(){super(...arguments),this.defines=[\"highlight\"],this._hlRenderer=new s,this._hlGradient=new i,this._width=void 0,this._height=void 0,this._hlSurfaces=new h,this._adjustedWidth=void 0,this._adjustedHeight=void 0,this._blitRenderer=new e}dispose(){this._hlSurfaces&&this._hlSurfaces.dispose(),this._hlRenderer&&this._hlRenderer.dispose(),this._hlGradient&&this._hlGradient.destroy(),this._boundFBO=null}bind(e){const{context:t,painter:i}=e,{width:s,height:h}=t.getViewport(),r=i.getFbos(s,h).effect0;this.setup(e,s,h),t.bindFramebuffer(r),t.setColorMask(!0,!0,!0,!0),t.setClearColor(0,0,0,0),t.clear(t.gl.COLOR_BUFFER_BIT)}unbind(){}setup({context:e},t,i){this._width=t,this._height=i;const s=t%r,h=i%r;t+=s<r/2?-s:r-s,i+=h<r/2?-h:r-h,this._adjustedWidth=t,this._adjustedHeight=i,this._boundFBO=e.getBoundFramebufferObject();const d=Math.round(t*l),n=Math.round(i*l);this._hlRenderer.setup(e,d,n),this._hlSurfaces.setup(e,d,n)}draw({context:e}){const t=e.getBoundFramebufferObject();e.setViewport(0,0,this._adjustedWidth*l,this._adjustedHeight*l),e.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),e.setStencilTestEnabled(!1),e.setClearColor(0,0,0,0),e.clear(e.gl.COLOR_BUFFER_BIT),this._blitRenderer.render(e,t.colorTexture,9728,1),e.setStencilTestEnabled(!1),e.setBlendingEnabled(!1),e.setColorMask(!1,!1,!1,!0),e.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo),e.setClearColor(0,0,0,0),e.clear(e.gl.COLOR_BUFFER_BIT),this._hlRenderer.preBlur(e,this._hlSurfaces.sharedBlur1Tex),e.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),e.setClearColor(0,0,0,0),e.clear(e.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(e,this._hlSurfaces.sharedBlur2Tex),e.bindFramebuffer(this._boundFBO),e.setBlendingEnabled(!0),e.setColorMask(!0,!0,!0,!0),e.setViewport(0,0,this._width,this._height),this._hlRenderer.renderHighlight(e,this._hlSurfaces.sharedBlur1Tex,this._hlGradient),this._boundFBO=null}setHighlightOptions(e){this._hlGradient.setHighlightOptions(e)}}export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../../core/maybe.js\";import{HITTEST_SEARCH_SIZE as e}from\"../definitions.js\";import{Effect as s}from\"./Effect.js\";class o extends s{constructor(){super(...arguments),this.name=this.constructor.name,this.defines=[\"id\"],this._lastSize=0}dispose(){t(this._fbo)&&this._fbo.dispose()}bind({context:t,painter:e}){const{width:s,height:o}=t.getViewport();this._boundFBO=t.getBoundFramebufferObject();const r=e.getFbos(s,o).effect0;t.bindFramebuffer(r),t.setColorMask(!0,!0,!0,!0),t.setClearColor(0,0,0,0),t.clear(t.gl.COLOR_BUFFER_BIT)}unbind({context:t}){t.bindFramebuffer(this._boundFBO),this._boundFBO=null}draw({context:t,state:s,pixelRatio:o},r,i=e){const n=t.getBoundFramebufferObject(),f=s.size[1]*o,a=Math.round(i*o),h=a/2,u=a/2;this._ensureBuffer(a),r.forEach(((t,e)=>{const s=new Map,i=Math.floor(e.x*o-a/2),b=Math.floor(f-e.y*o-a/2);n.readPixels(i,b,a,a,6408,5121,this._buf);for(let o=0;o<this._buf32.length;o++){const t=this._buf32[o];if(4294967295!==t&&0!==t){const e=o%a,r=a-Math.floor(o/a),i=(h-e)*(h-e)+(u-r)*(u-r),n=s.has(t)?s.get(t):4294967295;s.set(t,Math.min(i,n))}}const c=Array.from(s).sort(((t,e)=>t[1]-e[1])).map((t=>t[0]));t.resolve(c),r.delete(e)}))}_ensureBuffer(t){this._lastSize!==t&&(this._lastSize=t,this._buf=new Uint8Array(4*t*t),this._buf32=new Uint32Array(this._buf.buffer))}}export{o as HittestEffect};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport o from\"../../../../../../core/Logger.js\";import\"../../../../../webgl/BufferObject.js\";import\"../../../../../webgl/FramebufferObject.js\";import\"../../../../../../core/has.js\";import\"../../../../../webgl/checkWebGLError.js\";import\"../../../../../webgl/enums.js\";import\"../../../../../../chunks/builtins.js\";import i from\"../../../../../webgl/Texture.js\";import\"../../../../../webgl/VertexArrayObject.js\";import{TEXTURE_BINDING_HIGHLIGHT_1 as t}from\"../../definitions.js\";import{HIGHLIGHT_SIZING as e,SHADE_TEXTURE_SIZE as l,SIGMA as r}from\"./parameters.js\";const n=o.getLogger(\"esri.views.2d.engine.webgl.painter.highlight.HighlightGradient\");function h(o,i){i.fillColor[0]=o.color.r/255,i.fillColor[1]=o.color.g/255,i.fillColor[2]=o.color.b/255,i.fillColor[3]=o.color.a,o.haloColor?(i.outlineColor[0]=o.haloColor.r/255,i.outlineColor[1]=o.haloColor.g/255,i.outlineColor[2]=o.haloColor.b/255,i.outlineColor[3]=o.haloColor.a):(i.outlineColor[0]=i.fillColor[0],i.outlineColor[1]=i.fillColor[1],i.outlineColor[2]=i.fillColor[2],i.outlineColor[3]=i.fillColor[3]),i.fillColor[3]*=o.fillOpacity,i.outlineColor[3]*=o.haloOpacity,i.fillColor[0]*=i.fillColor[3],i.fillColor[1]*=i.fillColor[3],i.fillColor[2]*=i.fillColor[3],i.outlineColor[0]*=i.outlineColor[3],i.outlineColor[1]*=i.outlineColor[3],i.outlineColor[2]*=i.outlineColor[3],i.outlineWidth=e.outlineWidth,i.outerHaloWidth=e.outerHaloWidth,i.innerHaloWidth=e.innerHaloWidth,i.outlinePosition=e.outlinePosition}const s=[0,0,0,0];class a{constructor(){this._convertedHighlightOptions={fillColor:[.2*.75,.6*.75,.675,.75],outlineColor:[.2*.9,.54,.81,.9],outlinePosition:e.outlinePosition,outlineWidth:e.outlineWidth,innerHaloWidth:e.innerHaloWidth,outerHaloWidth:e.outerHaloWidth},this.shadeTexChanged=!0,this.texelData=new Uint8Array(4*l),this.minMaxDistance=[0,0]}setHighlightOptions(o){const i=this._convertedHighlightOptions;h(o,i);const t=i.outlinePosition-i.outlineWidth/2-i.outerHaloWidth,e=i.outlinePosition-i.outlineWidth/2,a=i.outlinePosition+i.outlineWidth/2,u=i.outlinePosition+i.outlineWidth/2+i.innerHaloWidth,d=Math.sqrt(Math.PI/2)*r,g=Math.abs(t)>d?Math.round(10*(Math.abs(t)-d))/10:0,f=Math.abs(u)>d?Math.round(10*(Math.abs(u)-d))/10:0;let C;g&&!f?n.error(\"The outer rim of the highlight is \"+g+\"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards).\"):!g&&f?n.error(\"The inner rim of the highlight is \"+f+\"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards).\"):g&&f&&n.error(\"The highlight is \"+Math.max(g,f)+\"px away from the edge of the feature; consider reducing some width values.\");const c=[void 0,void 0,void 0,void 0];function m(o,i,t){c[0]=(1-t)*o[0]+t*i[0],c[1]=(1-t)*o[1]+t*i[1],c[2]=(1-t)*o[2]+t*i[2],c[3]=(1-t)*o[3]+t*i[3]}const{texelData:p}=this;for(let r=0;r<l;++r)C=t+r/(l-1)*(u-t),C<t?(c[4*r+0]=0,c[4*r+1]=0,c[4*r+2]=0,c[4*r+3]=0):C<e?m(s,i.outlineColor,(C-t)/(e-t)):C<a?[c[0],c[1],c[2],c[3]]=i.outlineColor:C<u?m(i.outlineColor,i.fillColor,(C-a)/(u-a)):[c[4*r+0],c[4*r+1],c[4*r+2],c[4*r+3]]=i.fillColor,p[4*r+0]=255*c[0],p[4*r+1]=255*c[1],p[4*r+2]=255*c[2],p[4*r+3]=255*c[3];this.minMaxDistance[0]=t,this.minMaxDistance[1]=u,this.shadeTexChanged=!0}applyHighlightOptions(o,e){this.shadeTex||(this.shadeTex=new i(o,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:l,height:1,samplingMode:9729})),this.shadeTexChanged&&(this.shadeTex.updateData(0,0,0,l,1,this.texelData),this.shadeTexChanged=!1),o.bindTexture(this.shadeTex,t),e.setUniform2fv(\"u_minMaxDistance\",this.minMaxDistance)}destroy(){this.shadeTex&&(this.shadeTex.dispose(),this.shadeTex=null)}}export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport r from\"../../../../../webgl/BufferObject.js\";import\"../../../../../webgl/FramebufferObject.js\";import\"../../../../../../core/has.js\";import\"../../../../../webgl/checkWebGLError.js\";import\"../../../../../webgl/enums.js\";import\"../../../../../../chunks/builtins.js\";import{createProgram as e}from\"../../../../../webgl/programUtils.js\";import\"../../../../../webgl/Texture.js\";import s from\"../../../../../webgl/VertexArrayObject.js\";import{TEXTURE_BINDING_HIGHLIGHT_0 as i,TEXTURE_BINDING_HIGHLIGHT_1 as t}from\"../../definitions.js\";import{ALPHA_TO_RGBA_CHANNEL_SELECTOR_MATRIX as o,RGBA_TO_RGBA_CHANNEL_SELECTOR_MATRIX as u,SIGMA as h}from\"./parameters.js\";import{highlight as a,blur as m}from\"../../shaders/HighlightPrograms.js\";class n{constructor(){this._width=void 0,this._height=void 0,this._resources=null}dispose(){this._resources&&(this._resources.quadGeometry.dispose(),this._resources.quadVAO.dispose(),this._resources.highlightProgram.dispose(),this._resources.blurProgram.dispose(),this._resources=null)}preBlur(r,e){r.bindTexture(e,i),r.useProgram(this._resources.blurProgram),this._resources.blurProgram.setUniform4fv(\"u_direction\",[1,0,1/this._width,0]),this._resources.blurProgram.setUniformMatrix4fv(\"u_channelSelector\",o),r.bindVAO(this._resources.quadVAO),r.drawArrays(5,0,4),r.bindVAO()}finalBlur(r,e){r.bindTexture(e,i),r.useProgram(this._resources.blurProgram),this._resources.blurProgram.setUniform4fv(\"u_direction\",[0,1,0,1/this._height]),this._resources.blurProgram.setUniformMatrix4fv(\"u_channelSelector\",u),r.bindVAO(this._resources.quadVAO),r.drawArrays(5,0,4),r.bindVAO()}renderHighlight(r,e,s){r.bindTexture(e,i),r.useProgram(this._resources.highlightProgram),s.applyHighlightOptions(r,this._resources.highlightProgram),r.bindVAO(this._resources.quadVAO),r.setBlendingEnabled(!0),r.setBlendFunction(1,771),r.drawArrays(5,0,4),r.bindVAO()}_initialize(o,u,n){this._width=u,this._height=n;const g=r.createVertex(o,35044,new Int8Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]).buffer),d=new s(o,new Map([[\"a_position\",0],[\"a_texcoord\",1]]),{geometry:[{name:\"a_position\",count:2,type:5120,offset:0,stride:4,normalized:!1},{name:\"a_texcoord\",count:2,type:5121,offset:2,stride:4,normalized:!1}]},{geometry:g}),l=e(o,a),c=e(o,m);l.setUniform1i(\"u_texture\",i),l.setUniform1i(\"u_shade\",t),l.setUniform1f(\"u_sigma\",h),c.setUniform1i(\"u_texture\",i),c.setUniform1f(\"u_sigma\",h),this._resources={quadGeometry:g,quadVAO:d,highlightProgram:l,blurProgram:c}}setup(r,e,s){this._resources?(this._width=e,this._height=s):this._initialize(r,e,s)}}export{n as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../../webgl/BufferObject.js\";import e from\"../../../../../webgl/FramebufferObject.js\";import\"../../../../../../core/has.js\";import\"../../../../../webgl/checkWebGLError.js\";import\"../../../../../webgl/enums.js\";import\"../../../../../../chunks/builtins.js\";import r from\"../../../../../webgl/Texture.js\";import\"../../../../../webgl/VertexArrayObject.js\";function s(s,t,i){const h=new r(s,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:t,height:i,samplingMode:9729});return[h,new e(s,{colorTarget:0,depthStencilTarget:2},h)]}class t{constructor(){this._width=void 0,this._height=void 0,this._resources=null}dispose(){this._resources&&(this._resources.sharedBlur1Tex.dispose(),this._resources.sharedBlur1Fbo.dispose(),this._resources.sharedBlur2Tex.dispose(),this._resources.sharedBlur2Fbo.dispose(),this._resources=null)}_initialize(e,r,t){this._width=r,this._height=t;const[i,h]=s(e,r,t),[o,u]=s(e,r,t);this._resources={sharedBlur1Tex:i,sharedBlur1Fbo:h,sharedBlur2Tex:o,sharedBlur2Fbo:u}}setup(e,r,s){!this._resources||this._width===r&&this._height===s||this.dispose(),this._resources||this._initialize(e,r,s)}get sharedBlur1Tex(){return this._resources.sharedBlur1Tex}get sharedBlur1Fbo(){return this._resources.sharedBlur1Fbo}get sharedBlur2Tex(){return this._resources.sharedBlur2Tex}get sharedBlur2Fbo(){return this._resources.sharedBlur2Fbo}}export{t as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nconst o=1,t=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n=256,e={outlineWidth:.7,outerHaloWidth:.7,innerHaloWidth:.7,outlinePosition:0};export{t as ALPHA_TO_RGBA_CHANNEL_SELECTOR_MATRIX,e as HIGHLIGHT_SIZING,i as RGBA_TO_RGBA_CHANNEL_SELECTOR_MATRIX,n as SHADE_TEXTURE_SIZE,o as SIGMA};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../../webgl/BufferObject.js\";import t from\"../../../../../webgl/FramebufferObject.js\";import\"../../../../../../core/has.js\";import\"../../../../../webgl/checkWebGLError.js\";import\"../../../../../webgl/enums.js\";import\"../../../../../../chunks/builtins.js\";import\"../../../../../webgl/Texture.js\";import\"../../../../../webgl/VertexArrayObject.js\";import e from\"../../VertexStream.js\";const i=5,s=[1,0],r=[0,1],o=[1,.8,.6,.4,.2],n=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];class a{constructor(){this._intensityFBO=null,this._compositeFBO=null,this._mipsFBOs=new Array(i),this._nMips=i,this._kernelSizeArray=[3,5,7,9,11],this._size=[0,0],this._programDesc={luminosityHighPass:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/bloom/luminosityHighPass\",attributes:new Map([[\"a_position\",0]])},gaussianBlur:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/bloom/gaussianBlur\",attributes:new Map([[\"a_position\",0]])},composite:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/bloom/composite\",attributes:new Map([[\"a_position\",0]])},blit:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/blit\",attributes:new Map([[\"a_position\",0]])}}}dispose(){if(this._quad&&(this._quad.dispose(),this._quad=null),this._intensityFBO&&(this._intensityFBO.dispose(),this._intensityFBO=null),this._compositeFBO&&(this._compositeFBO.dispose(),this._compositeFBO=null),this._mipsFBOs){for(let t=0;t<this._nMips;t++)this._mipsFBOs[t]&&(this._mipsFBOs[t].horizontal.dispose(),this._mipsFBOs[t].vertical.dispose());this._mipsFBOs=null}}draw(t,a,l){const{width:h,height:u}=a,{context:p,painter:m}=t,{materialManager:c}=m,d=p.gl,_=this._programDesc,{strength:g,radius:f,threshold:b}=l;this._quad||(this._quad=new e(p,[-1,-1,1,-1,-1,1,1,1])),this._createOrResizeResources(t,h,u),p.setStencilTestEnabled(!1),p.setBlendingEnabled(!0),p.setBlendFunction(1,771),p.setStencilWriteMask(0);const F=this._quad;F.bind(),p.bindFramebuffer(this._intensityFBO);const B=c.getProgram(t,_.luminosityHighPass);p.useProgram(B),p.bindTexture(a.colorTexture,0),B.setUniform1i(\"u_texture\",0),B.setUniform3fv(\"u_defaultColor\",[0,0,0]),B.setUniform1f(\"u_defaultOpacity\",0),B.setUniform1f(\"u_luminosityThreshold\",b),B.setUniform1f(\"u_smoothWidth\",.01);const O=[Math.round(h/2),Math.round(u/2)];p.setViewport(0,0,O[0],O[1]),p.setClearColor(0,0,0,0),p.clear(d.COLOR_BUFFER_BIT),F.draw(),p.setBlendingEnabled(!1);let T=this._intensityFBO.colorTexture;for(let e=0;e<this._nMips;e++){const i=c.getProgram(t,_.gaussianBlur,[{name:\"radius\",value:this._kernelSizeArray[e]}]);p.useProgram(i),p.bindTexture(T,e+1),i.setUniform1i(\"u_colorTexture\",e+1),i.setUniform2fv(\"u_texSize\",O),i.setUniform2fv(\"u_direction\",s),p.setViewport(0,0,O[0],O[1]);const o=this._mipsFBOs[e];p.bindFramebuffer(o.horizontal),F.draw(),T=o.horizontal.colorTexture,p.bindFramebuffer(o.vertical),p.bindTexture(T,e+1),i.setUniform2fv(\"u_direction\",r),F.draw(),T=o.vertical.colorTexture,O[0]=Math.round(O[0]/2),O[1]=Math.round(O[1]/2)}p.setViewport(0,0,h,u);const x=c.getProgram(t,_.composite,[{name:\"nummips\",value:i}]);p.bindFramebuffer(this._compositeFBO),p.useProgram(x),x.setUniform1f(\"u_bloomStrength\",g),x.setUniform1f(\"u_bloomRadius\",f),x.setUniform1fv(\"u_bloomFactors\",o),x.setUniform3fv(\"u_bloomTintColors\",n),p.bindTexture(this._mipsFBOs[0].vertical.colorTexture,1),x.setUniform1i(\"u_blurTexture1\",1),p.bindTexture(this._mipsFBOs[1].vertical.colorTexture,2),x.setUniform1i(\"u_blurTexture2\",2),p.bindTexture(this._mipsFBOs[2].vertical.colorTexture,3),x.setUniform1i(\"u_blurTexture3\",3),p.bindTexture(this._mipsFBOs[3].vertical.colorTexture,4),x.setUniform1i(\"u_blurTexture4\",4),p.bindTexture(this._mipsFBOs[4].vertical.colorTexture,5),x.setUniform1i(\"u_blurTexture5\",5),F.draw(),p.bindFramebuffer(a),p.setBlendingEnabled(!0);const w=c.getProgram(t,_.blit);p.useProgram(w),p.bindTexture(this._compositeFBO.colorTexture,6),w.setUniform1i(\"u_texture\",6),p.setBlendFunction(1,1),F.draw(),F.unbind(),p.setBlendFunction(1,771),p.setStencilTestEnabled(!0)}_createOrResizeResources(e,i,s){const{context:r}=e;if(this._compositeFBO&&this._size[0]===i&&this._size[1]===s)return;this._size[0]=i,this._size[1]=s;const o=[Math.round(i/2),Math.round(s/2)];this._compositeFBO?this._compositeFBO.resize(i,s):this._compositeFBO=new t(r,{colorTarget:0,depthStencilTarget:0,width:i,height:s}),this._intensityFBO?this._intensityFBO.resize(o[0],o[1]):this._intensityFBO=new t(r,{colorTarget:0,depthStencilTarget:0,width:o[0],height:o[1]},{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:o[0],height:o[1]});for(let n=0;n<this._nMips;n++)this._mipsFBOs[n]?(this._mipsFBOs[n].horizontal.resize(o[0],o[1]),this._mipsFBOs[n].vertical.resize(o[0],o[1])):this._mipsFBOs[n]={horizontal:new t(r,{colorTarget:0,depthStencilTarget:0,width:o[0],height:o[1]},{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:o[0],height:o[1]}),vertical:new t(r,{colorTarget:0,depthStencilTarget:0,width:o[0],height:o[1]},{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:o[0],height:o[1]})},o[0]=Math.round(o[0]/2),o[1]=Math.round(o[1]/2)}}export{a as Bloom};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../../webgl/BufferObject.js\";import e from\"../../../../../webgl/FramebufferObject.js\";import\"../../../../../../core/has.js\";import\"../../../../../webgl/checkWebGLError.js\";import\"../../../../../webgl/enums.js\";import\"../../../../../../chunks/builtins.js\";import\"../../../../../webgl/Texture.js\";import\"../../../../../webgl/VertexArrayObject.js\";import t from\"../../VertexStream.js\";const r=[1,0],s=[0,1];class i{constructor(){this._blurFBO=null,this._size=[0,0],this._programDesc={gaussianBlur:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/blur/gaussianBlur\",attributes:new Map([[\"a_position\",0]])},radialBlur:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/blur/radial-blur\",attributes:new Map([[\"a_position\",0]])},blit:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/blit\",attributes:new Map([[\"a_position\",0]])}}}dispose(){this._blurFBO&&(this._blurFBO.dispose(),this._blurFBO=null)}draw(e,r,s){const{context:i}=e,{type:a,radius:n}=s;if(0===n)return;this._createOrResizeResources(e),this._quad||(this._quad=new t(i,[-1,-1,1,-1,-1,1,1,1]));const o=this._quad;o.bind(),\"blur\"===a?this._gaussianBlur(e,r,n):this._radialBlur(e,r),o.unbind()}_gaussianBlur(e,t,i){const{context:a,state:n,painter:o,pixelRatio:u}=e,{size:l}=n,{materialManager:d}=o,b=this._programDesc,p=this._quad,c=[Math.round(u*l[0]),Math.round(u*l[1])],h=this._blurFBO,g=d.getProgram(e,b.gaussianBlur,[{name:\"radius\",value:Math.ceil(i)}]);a.useProgram(g),a.setBlendingEnabled(!1),a.bindFramebuffer(h),a.bindTexture(t.colorTexture,4),g.setUniform1i(\"u_colorTexture\",4),g.setUniform2fv(\"u_texSize\",c),g.setUniform2fv(\"u_direction\",r),g.setUniform1f(\"u_sigma\",i),p.draw(),a.bindFramebuffer(t),a.setStencilWriteMask(0),a.setStencilTestEnabled(!1),a.setDepthWriteEnabled(!1),a.setDepthTestEnabled(!1),a.bindTexture(h.colorTexture,5),g.setUniform1i(\"u_colorTexture\",5),g.setUniform2fv(\"u_direction\",s),p.draw(),a.setBlendingEnabled(!0),a.setBlendFunction(1,771),a.setStencilTestEnabled(!0)}_radialBlur(e,t){const{context:r,painter:s}=e,{materialManager:i}=s,a=this._programDesc,n=this._quad,o=this._blurFBO;r.bindFramebuffer(o);const u=i.getProgram(e,a.radialBlur);r.useProgram(u),r.setBlendingEnabled(!1),r.bindTexture(t.colorTexture,4),u.setUniform1i(\"u_colorTexture\",4),n.draw(),r.bindFramebuffer(t),r.setStencilWriteMask(0),r.setStencilTestEnabled(!1),r.setDepthWriteEnabled(!1),r.setDepthTestEnabled(!1),r.setBlendingEnabled(!0);const l=i.getProgram(e,a.blit);r.useProgram(l),r.bindTexture(o.colorTexture,5),l.setUniform1i(\"u_texture\",5),r.setBlendFunction(1,771),n.draw()}_createOrResizeResources(t){const{context:r,state:s,pixelRatio:i}=t,{size:a}=s,n=Math.round(i*a[0]),o=Math.round(i*a[1]);this._blurFBO&&this._size[0]===n&&this._size[1]===o||(this._size[0]=n,this._size[1]=o,this._blurFBO?this._blurFBO.resize(n,o):this._blurFBO=new e(r,{colorTarget:0,depthStencilTarget:0,width:n,height:o},{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:n,height:o}))}}export{i as Blur};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../../webgl/BufferObject.js\";import\"../../../../../webgl/FramebufferObject.js\";import\"../../../../../../core/has.js\";import\"../../../../../webgl/checkWebGLError.js\";import\"../../../../../webgl/enums.js\";import\"../../../../../../chunks/builtins.js\";import e from\"../../../../../webgl/Texture.js\";import\"../../../../../webgl/VertexArrayObject.js\";import t from\"../../VertexStream.js\";class r{constructor(){this._size=[0,0],this._programDesc={vsPath:\"post-processing/pp\",fsPath:\"post-processing/filterEffect\",attributes:new Map([[\"a_position\",0]])}}dispose(){this._layerFBOTexture&&(this._layerFBOTexture.dispose(),this._layerFBOTexture=null)}draw(e,t,r){const{width:s,height:i}=t;this._createOrResizeResources(e,s,i);const{context:o,painter:a}=e,{materialManager:n}=a,l=this._programDesc,c=this._quad,u=r.colorMatrix;c.bind();const h=this._layerFBOTexture;o.bindFramebuffer(t),t.copyToTexture(0,0,s,i,0,0,h),o.setBlendingEnabled(!1),o.setStencilTestEnabled(!1);const p=n.getProgram(e,l);o.useProgram(p),o.bindTexture(h,2),p.setUniformMatrix4fv(\"u_coefficients\",u),p.setUniform1i(\"u_colorTexture\",2),c.draw(),o.setBlendingEnabled(!0),o.setBlendFunction(1,771),o.setStencilTestEnabled(!0),c.unbind()}_createOrResizeResources(r,s,i){const{context:o}=r;this._layerFBOTexture&&this._size[0]===s&&this._size[1]===i||(this._size[0]=s,this._size[1]=i,this._layerFBOTexture?this._layerFBOTexture.resize(s,i):this._layerFBOTexture=new e(o,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:s,height:i}),this._quad||(this._quad=new t(o,[-1,-1,1,-1,-1,1,1,1])))}}export{r as Colorize};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{pt2px as e}from\"../../../../../../core/screenUtils.js\";import\"../../../../../webgl/BufferObject.js\";import t from\"../../../../../webgl/FramebufferObject.js\";import\"../../../../../../core/has.js\";import\"../../../../../webgl/checkWebGLError.js\";import\"../../../../../webgl/enums.js\";import\"../../../../../../chunks/builtins.js\";import r from\"../../../../../webgl/Texture.js\";import\"../../../../../webgl/VertexArrayObject.js\";import i from\"../../VertexStream.js\";const s=[1,0],o=[0,1];class a{constructor(){this._horizontalBlurFBO=null,this._verticalBlurFBO=null,this._size=[0,0],this._programDesc={blur:{vsPath:\"post-processing/drop-shadow\",fsPath:\"post-processing/blur/gaussianBlur\",attributes:new Map([[\"a_position\",0]])},composite:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/drop-shadow/composite\",attributes:new Map([[\"a_position\",0]])},blit:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/blit\",attributes:new Map([[\"a_position\",0]])}}}dispose(){this._layerFBOTexture&&(this._layerFBOTexture.dispose(),this._layerFBOTexture=null),this._horizontalBlurFBO&&(this._horizontalBlurFBO.dispose(),this._horizontalBlurFBO=null),this._verticalBlurFBO&&(this._verticalBlurFBO.dispose(),this._verticalBlurFBO=null)}draw(t,r,a){const{context:l,state:n,painter:u}=t,{materialManager:h}=u,p=this._programDesc,d=r.width,c=r.height,m=[Math.round(d/2),Math.round(c/2)],{blurRadius:_,offsetX:f,offsetY:B,color:g}=a,b=[e(f/2),e(B/2)];this._createOrResizeResources(t,d,c,m);const F=this._horizontalBlurFBO,w=this._verticalBlurFBO;l.setStencilWriteMask(0),l.setStencilTestEnabled(!1),l.setDepthWriteEnabled(!1),l.setDepthTestEnabled(!1);const x=this._layerFBOTexture;r.copyToTexture(0,0,d,c,0,0,x),this._quad||(this._quad=new i(l,[-1,-1,1,-1,-1,1,1,1])),l.setViewport(0,0,m[0],m[1]);const T=this._quad;T.bind(),l.setBlendingEnabled(!1);const O=h.getProgram(t,p.blur,[{name:\"radius\",value:Math.ceil(_)}]);l.useProgram(O),l.bindFramebuffer(F),l.bindTexture(r.colorTexture,4),O.setUniformMatrix3fv(\"u_displayViewMat3\",n.displayMat3),O.setUniform2fv(\"u_offset\",b),O.setUniform1i(\"u_colorTexture\",4),O.setUniform2fv(\"u_texSize\",m),O.setUniform2fv(\"u_direction\",s),O.setUniform1f(\"u_sigma\",_),T.draw(),l.bindFramebuffer(w),l.bindTexture(F.colorTexture,5),O.setUniformMatrix3fv(\"u_displayViewMat3\",n.displayMat3),O.setUniform2fv(\"u_offset\",[0,0]),O.setUniform1i(\"u_colorTexture\",5),O.setUniform2fv(\"u_direction\",o),T.draw(),l.bindFramebuffer(r),l.setViewport(0,0,d,c);const v=h.getProgram(t,p.composite);l.useProgram(v),l.bindTexture(w.colorTexture,2),v.setUniform1i(\"u_blurTexture\",2),l.bindTexture(x,3),v.setUniform1i(\"u_layerFBOTexture\",3),v.setUniform4fv(\"u_shadowColor\",[g[3]*(g[0]/255),g[3]*(g[1]/255),g[3]*(g[2]/255),g[3]]),T.draw(),l.setBlendingEnabled(!0),l.setStencilTestEnabled(!0),l.setBlendFunction(1,771),T.unbind()}_createOrResizeResources(e,i,s,o){const{context:a}=e;this._horizontalBlurFBO&&this._size[0]===i&&this._size[1]===s||(this._size[0]=i,this._size[1]=s,this._horizontalBlurFBO?this._horizontalBlurFBO.resize(o[0],o[1]):this._horizontalBlurFBO=new t(a,{colorTarget:0,depthStencilTarget:0,width:o[0],height:o[1]},{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:o[0],height:o[1]}),this._verticalBlurFBO?this._verticalBlurFBO.resize(o[0],o[1]):this._verticalBlurFBO=new t(a,{colorTarget:0,depthStencilTarget:0,width:o[0],height:o[1]},{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:o[0],height:o[1]}),this._layerFBOTexture?this._layerFBOTexture.resize(i,s):this._layerFBOTexture=new r(a,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:i,height:s}))}}export{a as DropShadow};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{Bloom as e}from\"./Bloom.js\";import{Blur as t}from\"./Blur.js\";import{Colorize as o}from\"./Colorize.js\";import{DropShadow as s}from\"./DropShadow.js\";import{Opacity as r}from\"./Opacity.js\";function c(e){switch(e){case\"bloom\":case\"blur\":case\"opacity\":case\"drop-shadow\":return e;default:return\"colorize\"}}const f={colorize:()=>new o,blur:()=>new t,bloom:()=>new e,opacity:()=>new r,\"drop-shadow\":()=>new s};class i{constructor(e){this._requestRender=e,this._effectMap=new Map}dispose(){this._requestRender&&(this._requestRender=null),this._effectMap.forEach((e=>e.dispose())),this._effectMap.clear()}getPostProcessingEffects(e){if(!e||0===e.length)return[];const t=[];for(const o of e){const e=c(o.type);let s=this._effectMap.get(e);s||(s=f[e](),this._effectMap.set(e,s)),t.push({postProcessingEffect:s,effect:o})}return t}}export{i as EffectManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../../webgl/BufferObject.js\";import\"../../../../../webgl/FramebufferObject.js\";import\"../../../../../../core/has.js\";import\"../../../../../webgl/checkWebGLError.js\";import\"../../../../../webgl/enums.js\";import\"../../../../../../chunks/builtins.js\";import e from\"../../../../../webgl/Texture.js\";import\"../../../../../webgl/VertexArrayObject.js\";class t{constructor(){this._size=[0,0]}dispose(){this._layerFBOTexture&&(this._layerFBOTexture.dispose(),this._layerFBOTexture=null)}draw(e,t,r){const{width:s,height:i}=t;this._createOrResizeResources(e,s,i);const{context:l,painter:o}=e,{amount:a}=r,h=l.gl,n=this._layerFBOTexture;l.bindFramebuffer(t),t.copyToTexture(0,0,s,i,0,0,n),l.setBlendingEnabled(!0),l.setStencilTestEnabled(!1),l.setDepthTestEnabled(!1),l.setClearColor(0,0,0,0),l.clear(h.COLOR_BUFFER_BIT),o.blitTexture(l,n,9728,a)}_createOrResizeResources(t,r,s){const{context:i}=t;this._layerFBOTexture&&this._size[0]===r&&this._size[1]===s||(this._size[0]=r,this._size[1]=s,this._layerFBOTexture?this._layerFBOTexture.resize(r,s):this._layerFBOTexture=new e(i,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9728,flipped:!1,width:r,height:s}))}}export{t as Opacity};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nconst e=-26,r=-18;function t(e){const r=e.toLowerCase().split(\" \").join(\"-\");switch(r){case\"serif\":return\"noto-serif\";case\"sans-serif\":return\"arial-unicode-ms\";case\"monospace\":return\"ubuntu-mono\";case\"fantasy\":return\"cabin-sketch\";case\"cursive\":return\"redressed\";default:return r}}function n(e){const r=u(e)+c(e);return t(e.family)+(r.length>0?r:\"-regular\")}function s(t){switch(t){case\"underline\":return e;case\"line-through\":return r}return NaN}function u(e){if(!e.weight)return\"\";switch(e.weight.toLowerCase()){case\"bold\":case\"bolder\":return\"-bold\"}return\"\"}function c(e){if(!e.style)return\"\";switch(e.style.toLowerCase()){case\"italic\":case\"oblique\":return\"-italic\"}return\"\"}export{s as getFontDecorationTop,n as getFullyQualifiedFontName};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isArrayLike as r}from\"../../../../../core/arrayUtils.js\";import{isNone as e}from\"../../../../../core/maybe.js\";import{WGLDrawPhase as t}from\"../enums.js\";class s{constructor(r,e){var s;this.brushes=r,this.name=e.name,this.drawPhase=e.drawPhase||t.MAP,this._targetFn=e.target,this.effects=e.effects||[],this.enableDefaultDraw=null!=(s=e.enableDefaultDraw)?s:()=>!0}render(r){const{context:e,profiler:t}=r,s=this._targetFn(),a=this.drawPhase&r.drawPhase;if(t.recordPassStart(this.name),a){this.enableDefaultDraw()&&this._doRender(r,s),t.recordPassEnd();for(const a of this.effects){if(!a.enable())continue;const o=a.apply;t.recordPassStart(this.name+\".\"+o.name),t.recordBrushStart(o.name);const n=a.args&&a.args(),{x:i,y:d,width:f,height:h}=e.getViewport(),c=e.getBoundFramebufferObject();o.bind(r,n),this._doRender(r,s,o.defines),o.draw(r,n),o.unbind(r,n),e.bindFramebuffer(c),e.setViewport(i,d,f,h),t.recordBrushEnd(),t.recordPassEnd()}}}_doRender(t,s,a){if(!e(s))if(r(s)){for(const r of s)if(r.visible)for(const e of this.brushes)t.profiler.recordBrushStart(e.name),e.prepareState(t,r,a),e.draw(t,r,a),t.profiler.recordBrushEnd()}else for(const r of this.brushes)t.profiler.recordBrushStart(r.name),r.prepareState(t,s,a),r.draw(t,s,a),t.profiler.recordBrushEnd()}}export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{resolveIncludes as t}from\"./sources/resolver.js\";const e={shaders:{vertexShader:t(\"bitBlit/bitBlit.vert\"),fragmentShader:t(\"bitBlit/bitBlit.frag\")},attributes:new Map([[\"a_pos\",0],[\"a_tex\",1]])};export{e as bitBlit};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{resolveIncludes as e}from\"./sources/resolver.js\";const r=e=>e.replace(\"-\",\"_\").toUpperCase(),a=e=>`#define ${r(e)}\\n`,t={attributes:new Map([[\"a_pos\",0],[\"a_tex\",1]]),shaders:r=>({vertexShader:a(r)+e(\"blend/blend.vert\"),fragmentShader:a(r)+e(\"blend/blend.frag\")})};export{t as blend};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{resolveIncludes as e}from\"./sources/resolver.js\";const t={shaders:{vertexShader:e(\"highlight/textured.vert\"),fragmentShader:e(\"highlight/highlight.frag\")},attributes:new Map([[\"a_position\",0],[\"a_texcoord\",1]])},r={shaders:{vertexShader:e(\"highlight/textured.vert\"),fragmentShader:e(\"highlight/blur.frag\")},attributes:new Map([[\"a_position\",0],[\"a_texcoord\",1]])};export{r as blur,t as highlight};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../webgl/BufferObject.js\";import\"../../../../webgl/FramebufferObject.js\";import\"../../../../../core/has.js\";import\"../../../../webgl/checkWebGLError.js\";import\"../../../../webgl/enums.js\";import\"../../../../../chunks/builtins.js\";import{createProgram as r}from\"../../../../webgl/programUtils.js\";import\"../../../../webgl/Texture.js\";import\"../../../../webgl/VertexArrayObject.js\";import{resolveIncludes as e}from\"./sources/resolver.js\";const t={shaders:{vertexShader:e(\"magnifier/magnifier.vert\"),fragmentShader:e(\"magnifier/magnifier.frag\")},attributes:new Map([[\"a_pos\",0]])};function i(e){return r(e,t)}export{i as createMagnifierProgram,t as magnifierProgramTemplate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{resolveIncludes as r}from\"./sources/resolver.js\";import{glslifyDefineMap as t}from\"../../../../webgl/programUtils.js\";const e=r=>{let t=\"\";t+=r[0].toUpperCase();for(let e=1;e<r.length;e++){const s=r[e];s===s.toUpperCase()?(t+=\"_\",t+=s):t+=s.toUpperCase()}return t},s=r=>{const s={};for(const t in r){s[e(t)]=r[t]}return t(s)},o=(t,e,o)=>{const n=t+t.substring(t.lastIndexOf(\"/\")),a=e+e.substring(e.lastIndexOf(\"/\"));return{attributes:o,shaders:t=>({vertexShader:s(t)+r(`${n}.vert`),fragmentShader:s(t)+r(`${a}.frag`)})}};export{o as createProgramTemplate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{resolveIncludes as e}from\"./sources/resolver.js\";const r={shaders:{vertexShader:e(\"stencil/stencil.vert\"),fragmentShader:e(\"stencil/stencil.frag\")},attributes:new Map([[\"a_pos\",0]])};export{r as stencil};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction e(e){switch(e.type){case\"esriSMS\":return`${e.style}.${e.path}`;case\"esriSLS\":return`${e.style}.${e.cap}`;case\"esriSFS\":return`${e.style}`;case\"esriPFS\":case\"esriPMS\":return e.imageData?`${e.imageData}${e.width}${e.height}`:`${e.url}${e.width}${e.height}`;default:return\"mosaicHash\"in e?e.mosaicHash:JSON.stringify(e)}}export{e as keyFromSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../request.js\";import r from\"../../../core/Handles.js\";import{clamp as s}from\"../../../core/mathUtils.js\";import{isNone as t,isSome as i,disposeMaybe as a}from\"../../../core/maybe.js\";import{createTask as o}from\"../../../core/promiseUtils.js\";import{isSVG as n}from\"../../../core/urlUtils.js\";import{init as l}from\"../../../core/watchUtils.js\";import{c as h}from\"../../../chunks/mat3f32.js\";import m from\"../../webgl/BufferObject.js\";import\"../../webgl/FramebufferObject.js\";import\"../../../core/has.js\";import\"../../webgl/checkWebGLError.js\";import\"../../webgl/enums.js\";import\"../../../chunks/builtins.js\";import c from\"../../webgl/Texture.js\";import u from\"../../webgl/VertexArrayObject.js\";import{DisplayObject as d}from\"../engine/DisplayObject.js\";import{WGLDrawPhase as p}from\"../engine/webgl/enums.js\";import{createMagnifierProgram as _,magnifierProgramTemplate as f}from\"../engine/webgl/shaders/MagnifierPrograms.js\";import{loadMagnifierResources as g}from\"../../magnifier/resources.js\";class b extends d{constructor(){super(),this._handles=new r,this._resourcePixelRatio=1,this.visible=!1}destroy(){this._handles.destroy(),this._handles=null,this._disposeRenderResources(),this._resourcesTask&&(this._resourcesTask.abort(),this._resourcesTask=null)}get background(){return this._background}set background(e){this._background=e,this.requestRender()}get magnifier(){return this._magnifier}set magnifier(e){this._magnifier=e,this._handles.removeAll(),this._handles.add([l(e,\"version\",(()=>{this.visible=e.visible&&i(e.position)&&e.size>0,this.requestRender()})),e.watch([\"mask\",\"overlay\"],(()=>this._reloadResources())),e.watch(\"size\",(()=>{this._disposeRenderResources(),this.requestRender()}))])}_createTransforms(){return{dvs:h()}}doRender(e){var r;const i=e.context;if(!this._resourcesTask)return void this._reloadResources();if(e.drawPhase!==p.MAP||!this._canRender())return;this._updateResources(e);const a=this._magnifier;if(t(a.position))return;const o=e.pixelRatio,n=a.size*o,l=1/a.factor,h=Math.ceil(l*n);this._readbackTexture.resize(h,h);const{size:m}=e.state,c=o*m[0],u=o*m[1],d=.5*h,_=.5*h,f=s(o*a.position.x,d,c-d-1),g=s(u-o*a.position.y,_,u-_-1);i.setBlendingEnabled(!0);const b=f-d,x=g-_,y=this._readbackTexture;i.bindTexture(y,0),i.gl.copyTexImage2D(y.descriptor.target,0,y.descriptor.pixelFormat,b,x,h,h,0);const k=null==(r=this.background)?void 0:r.color,T=k?[k.a*k.r/255,k.a*k.g/255,k.a*k.b/255,k.a]:[1,1,1,1],v=(f+a.offset.x*o)/c*2-1,R=(g-a.offset.y*o)/u*2-1,j=n/c*2,w=n/u*2,A=this._program;i.bindVAO(this._vertexArrayObject),i.bindTexture(this._overlayTexture,6),i.bindTexture(this._maskTexture,7),i.useProgram(A),A.setUniform4fv(\"u_background\",T),A.setUniform1i(\"u_readbackTexture\",0),A.setUniform1i(\"u_overlayTexture\",6),A.setUniform1i(\"u_maskTexture\",7),A.setUniform4f(\"u_drawPos\",v,R,j,w),A.setUniform1i(\"u_maskEnabled\",a.maskEnabled?1:0),A.setUniform1i(\"u_overlayEnabled\",a.overlayEnabled?1:0),i.setStencilTestEnabled(!1),i.setColorMask(!0,!0,!0,!0),i.drawArrays(5,0,4),i.bindVAO()}_canRender(){return this.mask&&this.overlay&&null!=this._magnifier}_reloadResources(){this._resourcesTask&&this._resourcesTask.abort();const r=i(this._magnifier)?this._magnifier.maskUrl:null,s=i(this._magnifier)?this._magnifier.overlayUrl:null;this._resourcesTask=o((async a=>{const o=t(r)||t(s)?g(a):null,n=i(r)?e(r,{responseType:\"image\",signal:a}).then((e=>e.data)):o.then((e=>e.mask)),l=i(s)?e(s,{responseType:\"image\",signal:a}).then((e=>e.data)):o.then((e=>e.overlay)),[h,m]=await Promise.all([n,l]);this.mask=h,this.overlay=m,this._disposeRenderResources(),this.requestRender()}))}_disposeRenderResources(){this._readbackTexture=a(this._readbackTexture),this._overlayTexture=a(this._overlayTexture),this._maskTexture=a(this._maskTexture),this._vertexArrayObject=a(this._vertexArrayObject),this._program=a(this._program)}_updateResources(e){if(e.pixelRatio!==this._resourcePixelRatio&&this._disposeRenderResources(),this._readbackTexture)return;const r=e.context;this._resourcePixelRatio=e.pixelRatio;const s=Math.ceil(this._magnifier.size*e.pixelRatio);this._program=_(r);const t={geometry:[{name:\"a_pos\",count:2,type:5123,offset:0,stride:4,normalized:!1,divisor:0}]},i=new Uint16Array([0,1,0,0,1,1,1,0]),a=f.attributes;this._vertexArrayObject=new u(r,a,t,{geometry:m.createVertex(r,35044,i)}),this.overlay.width=s,this.overlay.height=s,this._overlayTexture=new c(r,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9728,flipped:!0,preMultiplyAlpha:!n(this.overlay.src)||!e.context.driverTest.svgAlwaysPremultipliesAlpha},this.overlay),this.mask.width=s,this.mask.height=s,this._maskTexture=new c(r,{target:3553,pixelFormat:6406,internalFormat:6406,dataType:5121,wrapMode:33071,samplingMode:9728,flipped:!0},this.mask);const o=1/this._magnifier.factor;this._readbackTexture=new c(r,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:Math.ceil(o*s),height:Math.ceil(o*s)})}}export{b as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nexport{Stage}from\"./engine/Stage.js\";export{default as LabelManager}from\"./LabelManager.js\";export{default as GraphicsView2D}from\"./layers/graphics/GraphicsView2D.js\";export{default as GraphicContainer}from\"./layers/graphics/GraphicContainer.js\";export{default as MapViewNavigation}from\"./navigation/MapViewNavigation.js\";export{default as MagnifierView2D}from\"./magnifier/MagnifierView2D.js\";\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import i from\"../../../Viewpoint.js\";import o from\"../../../core/Accessor.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"../../../geometry/Point.js\";import{rotateBy as a,translateBy as r,padAndScaleAndRotateBy as c}from\"../viewpointUtils.js\";import m from\"./ZoomBox.js\";import h from\"./actions/Pan.js\";import p from\"./actions/Pinch.js\";import u from\"./actions/Rotate.js\";const l=10,w=1,v=new i({targetGeometry:new s}),g=[0,0],d=250;let _=class extends o{constructor(t){super(t),this._endTimer=null,this.animationManager=null}initialize(){this.pan=new h({navigation:this}),this.rotate=new u({navigation:this}),this.pinch=new p({navigation:this}),this.zoomBox=new m({view:this.view,navigation:this})}destroy(){this.zoomBox.destroy(),this.zoomBox=null,this.animationManager=null}begin(){this._set(\"interacting\",!0)}end(){this._lastEventTimestamp=performance.now(),this._startTimer(d)}async zoom(t,i=this._getDefaultAnchor()){if(this.stop(),this.begin(),this.view.constraints.snapToZoom&&this.view.constraints.effectiveLODs)return t<1?this.zoomIn(i):this.zoomOut(i);this.setViewpoint(i,t,0,[0,0])}async zoomIn(t){const i=this.view,o=i.constraints.snapToNextScale(i.scale);return this._zoomToScale(o,t)}async zoomOut(t){const i=this.view,o=i.constraints.snapToPreviousScale(i.scale);return this._zoomToScale(o,t)}setViewpoint(t,i,o,n){this.begin(),this.view.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,t,i,o,n),this.end()}setViewpointImmediate(t,i=0,o=[0,0],n=this._getDefaultAnchor()){this.view.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,n,t,i,o)}continousRotateClockwise(){const t=this.get(\"view.viewpoint\");this.animationManager.animateContinous(t,(t=>{a(t,t,-w)}))}continousRotateCounterclockwise(){const t=this.get(\"view.viewpoint\");this.animationManager.animateContinous(t,(t=>{a(t,t,w)}))}resetRotation(){this.view.rotation=0}continousPanLeft(){this._continuousPan([-l,0])}continousPanRight(){this._continuousPan([l,0])}continousPanUp(){this._continuousPan([0,l])}continousPanDown(){this._continuousPan([0,-l])}stop(){this.pan.stopMomentumNavigation(),this.animationManager.stop(),this.end(),null!==this._endTimer&&(clearTimeout(this._endTimer),this._endTimer=null,this._set(\"interacting\",!1))}_continuousPan(t){const i=this.get(\"view.viewpoint\");this.animationManager.animateContinous(i,(i=>{r(i,i,t),this.view.constraints.constrainByGeometry(i)}))}_startTimer(t){return null!==this._endTimer||(this._endTimer=setTimeout((()=>{this._endTimer=null;const t=performance.now()-this._lastEventTimestamp;t<d?this._endTimer=this._startTimer(t):this._set(\"interacting\",!1)}),t)),this._endTimer}_getDefaultAnchor(){const{size:t,padding:{left:i,right:o,top:n,bottom:e}}=this.view;return g[0]=.5*(t[0]-o+i),g[1]=.5*(t[1]-e+n),g}async _zoomToScale(t,i=this._getDefaultAnchor()){const{view:o}=this,{constraints:n,scale:e,viewpoint:s,size:a,padding:r}=o,m=n.canZoomInTo(t),h=n.canZoomOutTo(t);if(!(t<e&&!m||t>e&&!h))return c(v,s,t/e,0,i,a,r),n.constrainByGeometry(v),o.goTo(v,{animate:!0})}_scaleRotateTranslateViewpoint(t,i,o,n,e){const{view:s}=this,{size:a,padding:m,constraints:h,scale:p,viewpoint:u}=s,l=p*o,w=h.canZoomInTo(l),v=h.canZoomOutTo(l);return(o<1&&!w||o>1&&!v)&&(o=1),r(u,u,e),c(t,u,o,n,i,a,m),h.constrainByGeometry(t)}};t([n()],_.prototype,\"animationManager\",void 0),t([n({type:Boolean,readOnly:!0})],_.prototype,\"interacting\",void 0),t([n()],_.prototype,\"pan\",void 0),t([n()],_.prototype,\"pinch\",void 0),t([n()],_.prototype,\"rotate\",void 0),t([n()],_.prototype,\"view\",void 0),t([n()],_.prototype,\"zoomBox\",void 0),_=t([e(\"esri.views.2d.navigation.MapViewNavigation\")],_);const T=_;export{T as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Accessor.js\";import{createScreenPoint as r}from\"../../../core/screenUtils.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{ViewEventPriorities as s}from\"../../input/InputManager.js\";const a={container:\"esri-zoom-box__container\",overlay:\"esri-zoom-box__overlay\",background:\"esri-zoom-box__overlay-background\",box:\"esri-zoom-box__outline\"},n={zoom:\"Shift\",counter:\"Ctrl\"};let h=class extends e{constructor(t){super(t),this._container=null,this._overlay=null,this._backgroundShape=null,this._boxShape=null,this._box={x:0,y:0,width:0,height:0},this._redraw=this._redraw.bind(this)}destroy(){this.view=null}set view(t){this._handles&&this._handles.forEach((t=>{t.remove()})),this._handles=null,this._destroyOverlay(),this._set(\"view\",t),t&&(t.on(\"drag\",[n.zoom],(t=>this._handleDrag(t,1)),s.INTERNAL),t.on(\"drag\",[n.zoom,n.counter],(t=>this._handleDrag(t,-1)),s.INTERNAL))}_start(){this._createContainer(),this._createOverlay(),this.navigation.begin()}_update(t,e,r,i){this._box.x=t,this._box.y=e,this._box.width=r,this._box.height=i,this._rafId||(this._rafId=requestAnimationFrame(this._redraw))}_end(t,e,i,o,s){const a=this.view,n=a.toMap(r(t+.5*i,e+.5*o));let h=Math.max(i/a.width,o/a.height);-1===s&&(h=1/h),this._destroyOverlay(),this.navigation.end(),a.goTo({center:n,scale:a.scale*h})}_updateBox(t,e,r,i){const o=this._boxShape;o.setAttributeNS(null,\"x\",\"\"+t),o.setAttributeNS(null,\"y\",\"\"+e),o.setAttributeNS(null,\"width\",\"\"+r),o.setAttributeNS(null,\"height\",\"\"+i),o.setAttributeNS(null,\"class\",a.box)}_updateBackground(t,e,r,i){this._backgroundShape.setAttributeNS(null,\"d\",this._toSVGPath(t,e,r,i,this.view.width,this.view.height))}_createContainer(){const t=document.createElement(\"div\");t.className=a.container,this.view.root.appendChild(t),this._container=t}_createOverlay(){const t=this.view.width,e=this.view.height,r=document.createElementNS(\"http://www.w3.org/2000/svg\",\"path\");r.setAttributeNS(null,\"d\",\"M 0 0 L \"+t+\" 0 L \"+t+\" \"+e+\" L 0 \"+e+\" Z\"),r.setAttributeNS(null,\"class\",a.background);const i=document.createElementNS(\"http://www.w3.org/2000/svg\",\"rect\"),o=document.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\");o.setAttributeNS(\"http://www.w3.org/2000/xmlns/\",\"xmlns:xlink\",\"http://www.w3.org/1999/xlink\"),o.setAttributeNS(null,\"class\",a.overlay),o.appendChild(r),o.appendChild(i),this._container.appendChild(o),this._backgroundShape=r,this._boxShape=i,this._overlay=o}_destroyOverlay(){this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container),this._container=this._backgroundShape=this._boxShape=this._overlay=null}_toSVGPath(t,e,r,i,o,s){const a=t+r,n=e+i;return\"M 0 0 L \"+o+\" 0 L \"+o+\" \"+s+\" L 0 \"+s+\" ZM \"+t+\" \"+e+\" L \"+t+\" \"+n+\" L \"+a+\" \"+n+\" L \"+a+\" \"+e+\" Z\"}_handleDrag(t,e){const r=t.x,i=t.y,o=t.origin.x,s=t.origin.y;let a,n,h,l;switch(r>o?(a=o,h=r-o):(a=r,h=o-r),i>s?(n=s,l=i-s):(n=i,l=s-i),t.action){case\"start\":this._start();break;case\"update\":this._update(a,n,h,l);break;case\"end\":this._end(a,n,h,l,e)}t.stopPropagation()}_redraw(){if(!this._rafId)return;if(this._rafId=null,!this._overlay)return;const{x:t,y:e,width:r,height:i}=this._box;this._updateBox(t,e,r,i),this._updateBackground(t,e,r,i),this._rafId=requestAnimationFrame(this._redraw)}};t([i()],h.prototype,\"navigation\",void 0),t([i()],h.prototype,\"view\",null),h=t([o(\"esri.views.2d.navigation.ZoomBox\")],h);const l=h;export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import i from\"../../../../Viewpoint.js\";import o from\"../../../../core/Accessor.js\";import{createScreenPointArray as m}from\"../../../../core/screenUtils.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as e}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{a as n}from\"../../../../chunks/vec3.js\";import{c as r,f as a}from\"../../../../chunks/vec3f64.js\";import{translateBy as p}from\"../../viewpointUtils.js\";import{PanPlanarMomentumEstimator as h}from\"../../../navigation/PanPlanarMomentumEstimator.js\";import u from\"../../../../geometry/Point.js\";let c=class extends o{constructor(t){super(t),this.animationTime=0,this.momentumEstimator=new h(500,6,.92),this.momentum=null,this.tmpMomentum=r(),this.momentumFinished=!1,this.viewpoint=new i({targetGeometry:new u,scale:0,rotation:0}),this.watch(\"momentumFinished\",(t=>{t&&this.navigation.stop()}))}begin(t,i){this.navigation.begin(),this.momentumEstimator.reset(),this.addToEstimator(i),this.previousDrag=i}update(t,i){this.addToEstimator(i);let o=i.center.x,m=i.center.y;const s=this.previousDrag;o=s?s.center.x-o:-o,m=s?m-s.center.y:m,t.viewpoint=p(this.viewpoint,t.viewpoint,[o||0,m||0]),this.previousDrag=i}end(t,i){this.addToEstimator(i);const o=t.navigation.momentumEnabled;this.momentum=o?this.momentumEstimator.evaluateMomentum():null,this.animationTime=0,this.momentum&&this.onAnimationUpdate(t),this.previousDrag=null,this.navigation.end()}addToEstimator(t){const i=t.center.x,o=t.center.y,s=m(-i,o),e=a(-i,o,0);this.momentumEstimator.add(s,e,.001*t.timestamp)}onAnimationUpdate(t){this.navigation.animationManager.animateContinous(t.viewpoint,((i,o)=>{this.momentumFinished=!this.momentum||this.momentum.isFinished(this.animationTime);const m=.001*o;if(!this.momentumFinished){const o=this.momentum.valueDelta(this.animationTime,m);n(this.tmpMomentum,this.momentum.direction,o),p(i,i,this.tmpMomentum),t.constraints.constrainByGeometry(i)}this.animationTime+=m}))}stopMomentumNavigation(){this.momentum&&(this.momentumEstimator.reset(),this.momentum=null,this.navigation.stop())}};t([s()],c.prototype,\"momentumFinished\",void 0),t([s()],c.prototype,\"viewpoint\",void 0),t([s()],c.prototype,\"navigation\",void 0),c=t([e(\"esri.views.2d.navigation.actions.Pan\")],c);const d=c;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import o from\"../../../../Viewpoint.js\";import i from\"../../../../core/Accessor.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as e}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{s as n,m}from\"../../../../chunks/vec2.js\";import{a}from\"../../../../chunks/vec2f64.js\";import{getPaddingScreenTranslation as r,scaleAndRotateBy as h}from\"../../viewpointUtils.js\";import{RotationMomentumEstimator as u}from\"../../../navigation/RotationMomentumEstimator.js\";import{ZoomMomentumEstimator as p}from\"../../../navigation/ZoomMomentumEstimator.js\";import c from\"../../../../geometry/Point.js\";let l=class extends i{constructor(t){super(t),this._animationTime=0,this._momentumFinished=!1,this._rotationMomentumEstimator=new u(.6,.15,.95),this._rotationDirection=1,this._zoomDirection=1,this._zoomMomentumEstimator=new p,this._zoomOnly=null,this.zoomMomentum=null,this.rotateMomentum=null,this.viewpoint=new o({targetGeometry:new c,scale:0,rotation:0}),this.watch(\"_momentumFinished\",(t=>{t&&this.navigation.stop()}))}begin(t,o){this.navigation.begin(),this._rotationMomentumEstimator.reset(),this._zoomMomentumEstimator.reset(),this._zoomOnly=null,this._previousAngle=this._startAngle=o.angle,this._previousRadius=this._startRadius=o.radius,this._previousCenter=o.center,this._updateTimestamp=null,t.constraints.rotationEnabled&&this.addToRotateEstimator(0,o.timestamp),this.addToZoomEstimator(o,1)}update(t,o){null===this._updateTimestamp&&(this._updateTimestamp=o.timestamp);const i=o.angle,s=o.radius,e=o.center,n=Math.abs(180*(i-this._startAngle)/Math.PI),m=Math.abs(s-this._startRadius),a=this._startRadius/s;if(this._previousRadius){const r=s/this._previousRadius;let h=180*(i-this._previousAngle)/Math.PI;this._rotationDirection=h>=0?1:-1,this._zoomDirection=r>=1?1:-1,t.constraints.rotationEnabled?(null===this._zoomOnly&&o.timestamp-this._updateTimestamp>200&&(this._zoomOnly=m-n>0),null===this._zoomOnly||this._zoomOnly?h=0:this.addToRotateEstimator(i-this._startAngle,o.timestamp)):h=0,this.addToZoomEstimator(o,a),this.navigation.setViewpoint([e.x,e.y],1/r,h,[this._previousCenter.x-e.x,e.y-this._previousCenter.y])}this._previousAngle=i,this._previousRadius=s,this._previousCenter=e}end(t){this.rotateMomentum=this._rotationMomentumEstimator.evaluateMomentum(),this.zoomMomentum=this._zoomMomentumEstimator.evaluateMomentum(),this._animationTime=0,(this.rotateMomentum||this.zoomMomentum)&&this.onAnimationUpdate(t),this.navigation.end()}addToRotateEstimator(t,o){this._rotationMomentumEstimator.add(t,.001*o)}addToZoomEstimator(t,o){this._zoomMomentumEstimator.add(o,.001*t.timestamp)}canZoomIn(t){const o=t.scale,i=t.constraints.effectiveMaxScale;return 0===i||o>i}canZoomOut(t){const o=t.scale,i=t.constraints.effectiveMinScale;return 0===i||o<i}onAnimationUpdate(t){this.navigation.animationManager.animateContinous(t.viewpoint,((o,i)=>{const s=!this.canZoomIn(t)&&this._zoomDirection>1||!this.canZoomOut(t)&&this._zoomDirection<1,e=!this.rotateMomentum||this.rotateMomentum.isFinished(this._animationTime),u=s||!this.zoomMomentum||this.zoomMomentum.isFinished(this._animationTime),p=.001*i;if(this._momentumFinished=e&&u,!this._momentumFinished){const i=this.rotateMomentum?Math.abs(this.rotateMomentum.valueDelta(this._animationTime,p))*this._rotationDirection*180/Math.PI:0;let s=this.zoomMomentum?Math.abs(this.zoomMomentum.valueDelta(this._animationTime,p)):1;const e=a(),u=a();if(this._previousCenter){n(e,this._previousCenter.x,this._previousCenter.y),r(u,t.size,t.padding),m(e,e,u);const{constraints:a,scale:p}=t,c=p*s;s<1&&!a.canZoomInTo(c)?(s=p/a.effectiveMaxScale,this.zoomMomentum=null,this.rotateMomentum=null):s>1&&!a.canZoomOutTo(c)&&(s=p/a.effectiveMinScale,this.zoomMomentum=null,this.rotateMomentum=null),h(o,t.viewpoint,s,i,e,t.size),t.constraints.constrainByGeometry(o)}}this._animationTime+=p}))}stopMomentumNavigation(){(this.rotateMomentum||this.zoomMomentum)&&(this.rotateMomentum&&(this._rotationMomentumEstimator.reset(),this.rotateMomentum=null),this.zoomMomentum&&(this._zoomMomentumEstimator.reset(),this.zoomMomentum=null),this.navigation.stop())}};t([s()],l.prototype,\"_momentumFinished\",void 0),t([s()],l.prototype,\"viewpoint\",void 0),t([s()],l.prototype,\"navigation\",void 0),l=t([e(\"esri.views.2d.navigation.actions.Pinch\")],l);const _=l;export{_ as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import e from\"../../../../Viewpoint.js\";import o from\"../../../../core/Accessor.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{s as i,c as p}from\"../../../../chunks/vec2.js\";import{a as n}from\"../../../../chunks/vec2f64.js\";import{getAnchor as c,rotateBy as a,angleBetween as m}from\"../../viewpointUtils.js\";import v from\"../../../../geometry/Point.js\";const u=n(),d=n();let j=class extends o{constructor(t){super(t),this._previousCenter=n(),this.viewpoint=new e({targetGeometry:new v,scale:0,rotation:0})}begin(t,e){this.navigation.begin(),i(this._previousCenter,e.center.x,e.center.y)}update(t,e){const{state:{size:o,padding:r}}=t;i(u,e.center.x,e.center.y),c(d,o,r),t.viewpoint=a(this.viewpoint,t.state.paddedViewState.viewpoint,m(d,this._previousCenter,u)),p(this._previousCenter,u)}end(){this.navigation.end()}};t([r()],j.prototype,\"viewpoint\",void 0),t([r()],j.prototype,\"navigation\",void 0),j=t([s(\"esri.views.2d.actions.Rotate\")],j);const h=j;export{h as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{throwIfAborted as a}from\"../../core/promiseUtils.js\";import{requestImage as t}from\"../../support/requestImageUtils.js\";async function s(s){const r=import(\"./mask-svg.js\"),i=import(\"./overlay-svg.js\"),o=t((await r).default,{signal:s}),e=t((await i).default,{signal:s}),m={mask:await o,overlay:await e};return a(s),m}export{s as loadMagnifierResources};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nclass t{constructor(t){this.gain=t}update(t){if(this.hasLastValue){const e=this.computeDelta(t);this.updateDelta(e)}this.lastValue=t}reset(){this.lastValue=void 0,this.filteredDelta=void 0}get hasLastValue(){return void 0!==this.lastValue}get hasFilteredDelta(){return void 0!==this.filteredDelta}computeDelta(t){return t-this.lastValue}updateDelta(t){this.hasFilteredDelta?this.filteredDelta=(1-this.gain)*this.filteredDelta+this.gain*t:this.filteredDelta=t}}export{t as FilteredFiniteDifference};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nclass t{constructor(t,i,o){this._initialVelocity=t,this._stopVelocity=i,this._friction=o,this._duration=Math.abs(Math.log(Math.abs(this._initialVelocity)/this._stopVelocity)/Math.log(1-this._friction))}get duration(){return this._duration}isFinished(t){return t>this.duration}get friction(){return this._friction}value(t){return this.valueFromInitialVelocity(this._initialVelocity,t)}valueDelta(t,i){const o=this.value(t);return this.value(t+i)-o}valueFromInitialVelocity(t,i){i=Math.min(i,this.duration);const o=1-this.friction;return t*(o**i-1)/Math.log(o)}}export{t as Momentum};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../core/mathUtils.js\";import{FilteredFiniteDifference as e}from\"./FilteredFiniteDifference.js\";import{Momentum as i}from\"./Momentum.js\";class s{constructor(t=2.5,i=.01,s=.95,l=12){this.minimumInitialVelocity=t,this.stopVelocity=i,this.friction=s,this.maxVelocity=l,this.enabled=!0,this.value=new e(.8),this.time=new e(.3)}add(t,e){if(this.enabled){if(this.time.hasLastValue){if(this.time.computeDelta(e)<.01)return;if(this.value.hasFilteredDelta){const e=this.value.computeDelta(t);this.value.filteredDelta*e<0&&this.value.reset()}}this.time.update(e),this.value.update(t)}}reset(){this.value.reset(),this.time.reset()}evaluateMomentum(){if(!this.enabled||!this.value.hasFilteredDelta)return null;let e=this.value.filteredDelta/this.time.filteredDelta;return e=t(e,-this.maxVelocity,this.maxVelocity),Math.abs(e)<this.minimumInitialVelocity?null:this.createMomentum(e,this.stopVelocity,this.friction)}createMomentum(t,e,s){return new i(t,e,s)}}export{s as MomentumEstimator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{s as e,l as t,a as i}from\"../../chunks/vec3.js\";import{c as s}from\"../../chunks/vec3f64.js\";import{FilteredFiniteDifference as n}from\"./FilteredFiniteDifference.js\";import{Momentum as r}from\"./Momentum.js\";class c extends r{constructor(e,t,i,s,n){super(e,t,i),this.sceneVelocity=s,this.direction=n}value(e){return super.valueFromInitialVelocity(this.sceneVelocity,e)}}class h{constructor(e=300,t=12,i=.84){this.minimumInitialVelocity=e,this.stopVelocity=t,this.friction=i,this.enabled=!0,this.time=new n(.6),this.screen=[new n(.4),new n(.4)],this.scene=[new n(.6),new n(.6),new n(.6)],this.tmpDirection=s()}add(e,t,i){if(this.enabled){if(this.time.hasLastValue){if(this.time.computeDelta(i)<.015)return}this.screen[0].update(e[0]),this.screen[1].update(e[1]),this.scene[0].update(t[0]),this.scene[1].update(t[1]),this.scene[2].update(t[2]),this.time.update(i)}}reset(){this.screen[0].reset(),this.screen[1].reset(),this.scene[0].reset(),this.scene[1].reset(),this.scene[2].reset(),this.time.reset()}evaluateMomentum(){if(!this.enabled||!this.screen[0].hasFilteredDelta)return null;const e=this.screen[0].filteredDelta,t=this.screen[1].filteredDelta,i=Math.sqrt(e*e+t*t)/this.time.filteredDelta;return Math.abs(i)<this.minimumInitialVelocity?null:this.createMomentum(i,this.stopVelocity,this.friction)}createMomentum(s,n,r){e(this.tmpDirection,this.scene[0].filteredDelta,this.scene[1].filteredDelta,this.scene[2].filteredDelta);const h=t(this.tmpDirection);h>0&&i(this.tmpDirection,this.tmpDirection,1/h);const a=h/this.time.filteredDelta;return new c(s,n,r,a,this.tmpDirection)}}export{c as PanPlanarMomentum,h as PanPlanarMomentumEstimator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{MomentumEstimator as t}from\"./MomentumEstimator.js\";class a extends t{constructor(t=3,a=.01,s=.95,e=12){super(t,a,s,e)}add(t,a){if(this.value.hasLastValue){const a=this.value.lastValue;let s=t-a;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;t=a+s}super.add(t,a)}}export{a as RotationMomentumEstimator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{Momentum as e}from\"./Momentum.js\";import{MomentumEstimator as t}from\"./MomentumEstimator.js\";class r extends e{constructor(e,t,r){super(e,t,r)}value(e){const t=super.value(e);return Math.exp(t)}valueDelta(e,t){const r=super.value(e),s=super.value(e+t)-r;return Math.exp(s)}}class s extends t{constructor(e=2.5,t=.01,r=.95,s=12){super(e,t,r,s)}add(e,t){super.add(Math.log(e),t)}createMomentum(e,t,s){return new r(e,t,s)}}export{r as ZoomMomentum,s as ZoomMomentumEstimator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nclass o{constructor(o){this._allocations=new Map,o?Error.stackTraceLimit=1/0:(this.add=()=>{},this.remove=()=>{})}add(o){this._allocations.set(o,(new Error).stack)}remove(o){this._allocations.delete(o)}print(){if(this._allocations.size>0){console.log(`${this._allocations.size} live object allocations:`);const o=new Map;this._allocations.forEach((s=>{var t;o.set(s,(null!=(t=o.get(s))?t:0)+1)})),o.forEach(((o,s)=>{const t=s.split(\"\\n\");t.shift(),t.shift(),console.log(`${o}: ${t.shift()}`),t.forEach((o=>console.log(\"   \",o)))}))}}}export{o as AllocationTracer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{AllocationTracer as t}from\"../support/AllocationTracer.js\";import{ResourceType as r}from\"./enums.js\";const e=!1;class s{constructor(){for(this._current=new Array,this._max=new Array,this._allocations=new t(e);this._current.length<r.COUNT;)this._current.push(0),this._max.push(0)}resetMax(){for(this._max.length=0;this._max.length<this._current.length;)this._max.push(0)}increment(t,r){const e=++this._current[t];this._max[t]=Math.max(e,this._max[t]),this._allocations.add(r)}decrement(t,r){--this._current[t],this._allocations.remove(r)}get max(){return this._max}get current(){return this._current}get total(){return this.current.reduce(((t,r)=>t+r),0)}printResourceCount(){if(this.total>0){console.log(\"Live objects:\");for(let t=0;t<r.COUNT;++t){const e=this._current[t];e>0&&console.log(`${r[t]}: ${e}`)}}this._allocations.print()}}export{s as InstanceCounter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isNone as t,isSome as e}from\"../../core/maybe.js\";import{webglDebugEnabled as i}from\"./checkWebGLError.js\";import{BASE_TEXTURE_UNIT as s}from\"./enums.js\";import{InstanceCounter as a}from\"./InstanceCounter.js\";import{StateTracker as n}from\"./renderState.js\";import l from\"./Texture.js\";import{WebGLDriverTest as r}from\"./WebGLDriverTest.js\";import h from\"./capabilities/isWebGL2Context.js\";import{loadCapabilities as c}from\"./capabilities/load.js\";class o{constructor(t,e){this.gl=t,this.instanceCounter=new a,this._blendEnabled=!1,this._blendColorState={r:0,g:0,b:0,a:0},this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0},this._blendEquationState={mode:32774,modeAlpha:32774},this._colorMaskState={r:!0,g:!0,b:!0,a:!0},this._polygonCullingEnabled=!1,this._cullFace=1029,this._frontFace=2305,this._scissorTestEnabled=!1,this._scissorRect={x:0,y:0,width:0,height:0},this._depthTestEnabled=!1,this._depthFunction=513,this._clearDepth=1,this._depthWriteEnabled=!0,this._depthRange={zNear:0,zFar:1},this._viewport=null,this._stencilTestEnabled=!1,this._polygonOffsetFillEnabled=!1,this._polygonOffset=[0,0],this._stencilFunction={face:1032,func:519,ref:0,mask:1},this._clearStencil=0,this._stencilWriteMask=1,this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680},this._clearColor={r:0,g:0,b:0,a:0},this._activeShaderProgram=null,this._activeVertexBuffer=null,this._activeIndexBuffer=null,this._activeFramebuffer=null,this._activeRenderbuffer=null,this._activeTextureUnit=0,this._textureUnitMap=new Array,this._numOfDrawCalls=0,this._numOfTriangles=0,this.webglVersion=h(t)?\"webgl2\":\"webgl\",\"webgl\"===this.webglVersion&&this.gl.getExtension(\"OES_element_index_uint\"),this._capabilities=c(t,e),this._parameters=this._loadParameters(e);const i=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:i[0],y:i[1],width:i[2],height:i[3]},this._stateTracker=new n({setBlending:t=>{if(t){this.setBlendingEnabled(!0),this.setBlendEquationSeparate(t.opRgb,t.opAlpha),this.setBlendFunctionSeparate(t.srcRgb,t.dstRgb,t.srcAlpha,t.dstAlpha);const e=t.color;this.setBlendColor(e.r,e.g,e.b,e.a)}else this.setBlendingEnabled(!1)},setCulling:t=>{t?(this.setFaceCullingEnabled(!0),this.setCullFace(t.face),this.setFrontFace(t.mode)):this.setFaceCullingEnabled(!1)},setPolygonOffset:t=>{t?(this.setPolygonOffsetFillEnabled(!0),this.setPolygonOffset(t.factor,t.units)):this.setPolygonOffsetFillEnabled(!1)},setDepthTest:t=>{t?(this.setDepthTestEnabled(!0),this.setDepthFunction(t.func)):this.setDepthTestEnabled(!1)},setStencilTest:t=>{if(t){this.setStencilTestEnabled(!0);const e=t.function;this.setStencilFunction(e.func,e.ref,e.mask);const i=t.operation;this.setStencilOp(i.fail,i.zFail,i.zPass)}else this.setStencilTestEnabled(!1)},setDepthWrite:t=>{t?(this.setDepthWriteEnabled(!0),this.setDepthRange(t.zNear,t.zFar)):this.setDepthWriteEnabled(!1)},setColorWrite:t=>{t?this.setColorMask(t.r,t.g,t.b,t.a):this.setColorMask(!1,!1,!1,!1)},setStencilWrite:t=>{t?this.setStencilWriteMask(t.mask):this.setStencilWriteMask(0)}}),this.enforceState(),this.driverTest=new r(this)}get contextAttributes(){return this.gl.getContextAttributes()}get parameters(){return this._parameters}dispose(){this.bindVAO(null),this.unbindBuffer(34962),this.unbindBuffer(34963),this._textureUnitMap.length=0,i()&&this.instanceCounter.printResourceCount()}setPipelineState(t){this._stateTracker.setPipeline(t)}setBlendingEnabled(t){this._blendEnabled!==t&&(!0===t?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=t,this._stateTracker.invalidateBlending())}externalProgramUpdate(){var t;null==(t=this._activeShaderProgram)||t.stop(),this._activeShaderProgram=null}externalTextureUnitUpdate(t,e){for(let i=0;i<t.length;++i)this._textureUnitMap[t[i]]=null;e>=0&&(this._activeTextureUnit=e)}externalVertexArrayObjectUpdate(){const t=this.capabilities.vao;t&&(t.bindVertexArray(null),this._activeVertexArrayObject=null),this._activeVertexBuffer=null,this._activeIndexBuffer=null}externalVertexBufferUpdate(){this._activeVertexBuffer=null}externalIndexBufferUpdate(){this._activeIndexBuffer=null}setBlendColor(t,e,i,s){t===this._blendColorState.r&&e===this._blendColorState.g&&i===this._blendColorState.b&&s===this._blendColorState.a||(this.gl.blendColor(t,e,i,s),this._blendColorState.r=t,this._blendColorState.g=e,this._blendColorState.b=i,this._blendColorState.a=s,this._stateTracker.invalidateBlending())}setBlendFunction(t,e){t===this._blendFunctionState.srcRGB&&e===this._blendFunctionState.dstRGB||(this.gl.blendFunc(t,e),this._blendFunctionState.srcRGB=t,this._blendFunctionState.srcAlpha=t,this._blendFunctionState.dstRGB=e,this._blendFunctionState.dstAlpha=e,this._stateTracker.invalidateBlending())}setBlendFunctionSeparate(t,e,i,s){this._blendFunctionState.srcRGB===t&&this._blendFunctionState.srcAlpha===i&&this._blendFunctionState.dstRGB===e&&this._blendFunctionState.dstAlpha===s||(this.gl.blendFuncSeparate(t,e,i,s),this._blendFunctionState.srcRGB=t,this._blendFunctionState.srcAlpha=i,this._blendFunctionState.dstRGB=e,this._blendFunctionState.dstAlpha=s,this._stateTracker.invalidateBlending())}setBlendEquation(t){this._blendEquationState.mode!==t&&(this.gl.blendEquation(t),this._blendEquationState.mode=t,this._blendEquationState.modeAlpha=t,this._stateTracker.invalidateBlending())}setBlendEquationSeparate(t,e){this._blendEquationState.mode===t&&this._blendEquationState.modeAlpha===e||(this.gl.blendEquationSeparate(t,e),this._blendEquationState.mode=t,this._blendEquationState.modeAlpha=e,this._stateTracker.invalidateBlending())}setColorMask(t,e,i,s){this._colorMaskState.r===t&&this._colorMaskState.g===e&&this._colorMaskState.b===i&&this._colorMaskState.a===s||(this.gl.colorMask(t,e,i,s),this._colorMaskState.r=t,this._colorMaskState.g=e,this._colorMaskState.b=i,this._colorMaskState.a=s,this._stateTracker.invalidateColorWrite())}setClearColor(t,e,i,s){this._clearColor.r===t&&this._clearColor.g===e&&this._clearColor.b===i&&this._clearColor.a===s||(this.gl.clearColor(t,e,i,s),this._clearColor.r=t,this._clearColor.g=e,this._clearColor.b=i,this._clearColor.a=s)}setFaceCullingEnabled(t){this._polygonCullingEnabled!==t&&(!0===t?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=t,this._stateTracker.invalidateCulling())}setPolygonOffsetFillEnabled(t){this._polygonOffsetFillEnabled!==t&&(!0===t?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=t,this._stateTracker.invalidatePolygonOffset())}setPolygonOffset(t,e){this._polygonOffset[0]===t&&this._polygonOffset[1]===e||(this._polygonOffset[0]=t,this._polygonOffset[1]=e,this.gl.polygonOffset(t,e),this._stateTracker.invalidatePolygonOffset())}setCullFace(t){this._cullFace!==t&&(this.gl.cullFace(t),this._cullFace=t,this._stateTracker.invalidateCulling())}setFrontFace(t){this._frontFace!==t&&(this.gl.frontFace(t),this._frontFace=t,this._stateTracker.invalidateCulling())}setScissorTestEnabled(t){this._scissorTestEnabled!==t&&(!0===t?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=t)}setScissorRect(t,e,i,s){this._scissorRect.x===t&&this._scissorRect.y===e&&this._scissorRect.width===i&&this._scissorRect.height===s||(this.gl.scissor(t,e,i,s),this._scissorRect.x=t,this._scissorRect.y=e,this._scissorRect.width=i,this._scissorRect.height=s)}setDepthTestEnabled(t){this._depthTestEnabled!==t&&(!0===t?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=t,this._stateTracker.invalidateDepthTest())}setClearDepth(t){this._clearDepth!==t&&(this.gl.clearDepth(t),this._clearDepth=t)}setDepthFunction(t){this._depthFunction!==t&&(this.gl.depthFunc(t),this._depthFunction=t,this._stateTracker.invalidateDepthTest())}setDepthWriteEnabled(t){this._depthWriteEnabled!==t&&(this.gl.depthMask(t),this._depthWriteEnabled=t,this._stateTracker.invalidateDepthWrite())}setDepthRange(t,e){this._depthRange.zNear===t&&this._depthRange.zFar===e||(this.gl.depthRange(t,e),this._depthRange.zNear=t,this._depthRange.zFar=e,this._stateTracker.invalidateDepthWrite())}setStencilTestEnabled(t){this._stencilTestEnabled!==t&&(!0===t?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=t,this._stateTracker.invalidateStencilTest())}setClearStencil(t){t!==this._clearStencil&&(this.gl.clearStencil(t),this._clearStencil=t)}setStencilFunction(t,e,i){this._stencilFunction.func===t&&this._stencilFunction.ref===e&&this._stencilFunction.mask===i||(this.gl.stencilFunc(t,e,i),this._stencilFunction.face=1032,this._stencilFunction.func=t,this._stencilFunction.ref=e,this._stencilFunction.mask=i,this._stateTracker.invalidateStencilTest())}setStencilFunctionSeparate(t,e,i,s){this._stencilFunction.face===t&&this._stencilFunction.func===e&&this._stencilFunction.ref===i&&this._stencilFunction.mask===s||(this.gl.stencilFuncSeparate(t,e,i,s),this._stencilFunction.face=t,this._stencilFunction.func=e,this._stencilFunction.ref=i,this._stencilFunction.mask=s,this._stateTracker.invalidateStencilTest())}setStencilWriteMask(t){this._stencilWriteMask!==t&&(this.gl.stencilMask(t),this._stencilWriteMask=t,this._stateTracker.invalidateStencilWrite())}setStencilOp(t,e,i){this._stencilOperation.fail===t&&this._stencilOperation.zFail===e&&this._stencilOperation.zPass===i||(this.gl.stencilOp(t,e,i),this._stencilOperation.face=1032,this._stencilOperation.fail=t,this._stencilOperation.zFail=e,this._stencilOperation.zPass=i,this._stateTracker.invalidateStencilTest())}setStencilOpSeparate(t,e,i,s){this._stencilOperation.face===t&&this._stencilOperation.fail===e&&this._stencilOperation.zFail===i&&this._stencilOperation.zPass===s||(this.gl.stencilOpSeparate(t,e,i,s),this._stencilOperation.face=t,this._stencilOperation.face=t,this._stencilOperation.fail=e,this._stencilOperation.zFail=i,this._stencilOperation.zPass=s,this._stateTracker.invalidateStencilTest())}setActiveTexture(t,e=!1){const i=this._activeTextureUnit;return t>=0&&(e||t!==this._activeTextureUnit)&&(this.gl.activeTexture(s+t),this._activeTextureUnit=t),i}clear(t){t&&this.gl.clear(t)}clearSafe(t,e=255){t&&(16384&t&&this.setColorMask(!0,!0,!0,!0),256&t&&this.setDepthWriteEnabled(!0),1024&t&&this.setStencilWriteMask(e),this.gl.clear(t))}drawArrays(t,e,s){i()&&(this._numOfDrawCalls++,this._numOfTriangles+=d(t,s)),this.gl.drawArrays(t,e,s)}drawElements(t,e,s,a){i()&&(this._numOfDrawCalls++,this._numOfTriangles+=d(t,e)),this.gl.drawElements(t,e,s,a)}logIno(){i()&&console.log(`DrawCalls: ${this._numOfDrawCalls}, Triangles: ${this._numOfTriangles}`)}get capabilities(){return this._capabilities}setViewport(t,e,i,s){i=Math.max(Math.round(i),1),s=Math.max(Math.round(s),1);const a=this._viewport;a.x===t&&a.y===e&&a.width===i&&a.height===s||(a.x=t,a.y=e,a.width=i,a.height=s,this.gl.viewport(t,e,i,s))}getViewport(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}}useProgram(t){var e,i;this._activeShaderProgram!==t&&(null==(e=this._activeShaderProgram)||e.stop(),this._activeShaderProgram=t,this.gl.useProgram(null!=(i=null==t?void 0:t.glName)?i:null))}bindTexture(i,s,a=!1){(s>=this.parameters.maxTextureImageUnits||s<0)&&console.error(\"Input texture unit is out of range of available units!\");const n=this._textureUnitMap[s];return t(i)||null==i.glName?(e(n)&&(this.setActiveTexture(s,a),this.gl.bindTexture(n.descriptor.target,null)),this._textureUnitMap[s]=null,n):a||n!==i?(this.setActiveTexture(s,a),this.gl.bindTexture(i.descriptor.target,i.glName),i.applyChanges(),this._textureUnitMap[s]=i,n):(i.isDirty&&(this.setActiveTexture(s,a),i.applyChanges()),n)}unbindTextureAllUnits(t){for(let e=0;e<this.parameters.maxTextureImageUnits;e++)this._textureUnitMap[e]===t&&(this.bindTexture(null,e),this._textureUnitMap[e]=null)}bindFramebuffer(e,i=!1,s=3553){if(t(e))return this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),void(this._activeFramebuffer=null);(i||this._activeFramebuffer!==e)&&(e.initializeAndBind(s),this._activeFramebuffer=e)}bindBuffer(t){t&&(34962===t.bufferType?this._activeVertexBuffer=_(this.gl,t,t.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=_(this.gl,t,t.bufferType,this._activeIndexBuffer))}bindRenderbuffer(t){const e=this.gl;t||(e.bindRenderbuffer(e.RENDERBUFFER,null),this._activeRenderbuffer=null),this._activeRenderbuffer!==t&&(e.bindRenderbuffer(e.RENDERBUFFER,t.glName),this._activeRenderbuffer=t)}unbindBuffer(t){34962===t?this._activeVertexBuffer=_(this.gl,null,t,this._activeVertexBuffer):this._activeIndexBuffer=_(this.gl,null,t,this._activeIndexBuffer)}bindVAO(e=null){t(e)?this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null):this._activeVertexArrayObject!==e&&(e.bind(),this._activeVertexArrayObject=e)}getBoundFramebufferObject(){return this._activeFramebuffer}getBoundVAO(){return this._activeVertexArrayObject}resetState(){this.useProgram(null),this.bindVAO(null),this.bindFramebuffer(null),this.unbindBuffer(34962),this.unbindBuffer(34963);for(let t=0;t<this.parameters.maxTextureImageUnits;++t)this.bindTexture(null,t);this.setBlendingEnabled(!1),this.setBlendFunction(1,0),this.setBlendEquation(32774),this.setBlendColor(0,0,0,0),this.setFaceCullingEnabled(!1),this.setCullFace(1029),this.setFrontFace(2305),this.setPolygonOffsetFillEnabled(!1),this.setPolygonOffset(0,0),this.setScissorTestEnabled(!1),this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height),this.setDepthTestEnabled(!1),this.setDepthFunction(513),this.setDepthRange(0,1),this.setStencilTestEnabled(!1),this.setStencilFunction(519,0,0),this.setStencilOp(7680,7680,7680),this.setClearColor(0,0,0,0),this.setClearDepth(1),this.setClearStencil(0),this.setColorMask(!0,!0,!0,!0),this.setStencilWriteMask(4294967295),this.setDepthWriteEnabled(!0),this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)}enforceState(){var t,a,n,l;const r=this.gl,c=this.capabilities.vao;c&&c.bindVertexArray(null);for(let e=0;e<this.parameters.maxVertexAttributes;e++)r.disableVertexAttribArray(e);if(this._activeVertexBuffer?r.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):r.bindBuffer(34962,null),this._activeIndexBuffer?r.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):r.bindBuffer(34963,null),c&&this._activeVertexArrayObject){const t=this._activeVertexArrayObject;this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null),this.bindVAO(t)}r.bindFramebuffer(r.FRAMEBUFFER,null!=(t=null==(a=this._activeFramebuffer)?void 0:a.glName)?t:null),r.useProgram(null!=(n=null==(l=this._activeShaderProgram)?void 0:l.glName)?n:null),r.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a),r.bindRenderbuffer(r.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null),!0===this._blendEnabled?r.enable(this.gl.BLEND):r.disable(this.gl.BLEND),r.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha),r.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha),r.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a),r.clearDepth(this._clearDepth),r.clearStencil(this._clearStencil),r.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a),r.cullFace(this._cullFace),r.depthFunc(this._depthFunction),r.depthRange(this._depthRange.zNear,this._depthRange.zFar),!0===this._depthTestEnabled?r.enable(r.DEPTH_TEST):r.disable(r.DEPTH_TEST),r.depthMask(this._depthWriteEnabled),r.frontFace(this._frontFace),r.lineWidth(1),!0===this._polygonCullingEnabled?r.enable(r.CULL_FACE):r.disable(r.CULL_FACE),r.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]),!0===this._polygonOffsetFillEnabled?r.enable(r.POLYGON_OFFSET_FILL):r.disable(r.POLYGON_OFFSET_FILL),r.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height),!0===this._scissorTestEnabled?r.enable(r.SCISSOR_TEST):r.disable(r.SCISSOR_TEST),r.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask),r.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass),!0===this._stencilTestEnabled?r.enable(r.STENCIL_TEST):r.disable(r.STENCIL_TEST),r.stencilMask(this._stencilWriteMask);for(let i=0;i<this.parameters.maxTextureImageUnits;i++){r.activeTexture(s+i),r.bindTexture(3553,null),r.bindTexture(34067,null),h(r)&&r.bindTexture(32879,null);const t=this._textureUnitMap[i];e(t)&&r.bindTexture(t.descriptor.target,t.glName)}r.activeTexture(s+this._activeTextureUnit),r.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height),i()&&(this._numOfDrawCalls=0,this._numOfTriangles=0)}_loadParameters(t){var e;const i=this.capabilities.textureFilterAnisotropic,s=null!=(e=t.maxAnisotropy)?e:1/0,a={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:i?Math.min(this.gl.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY),s):1,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),maxTextureSize:this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE)};return l.TEXTURE_UNIT_FOR_UPDATES=a.maxTextureImageUnits-1,a}}function _(t,e,i,s){return e?s!==e&&t.bindBuffer(i,e.glName):t.bindBuffer(i,null),e}function d(t,e){switch(t){case 0:return 2*e;case 4:return e/3;case 5:case 6:return e-2;default:return 0}}export{o as RenderingContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../../core/maybe.js\";import{testDoublePrecisionArithmetic as t}from\"./testDoublePrecisionArithmetic.js\";import{testFloatBufferBlend as i}from\"./testFloatBufferBlend.js\";import{testSamplerPrecision as r}from\"./testSamplerPrecision.js\";import{testSVGPremultipliedAlpha as s}from\"./testSVGPremultipliedAlpha.js\";class o{constructor(e){this.context=e,this._floatBufferBlendWorking=i(e),s(e).then((e=>this._svgAlwaysPremultipliesAlpha=!e))}get floatBufferBlendWorking(){if(e(this._floatBufferBlendWorking))throw new Error(\"floatBufferBlendWorking test not yet available\");return this._floatBufferBlendWorking}get svgAlwaysPremultipliesAlpha(){if(e(this._svgAlwaysPremultipliesAlpha))throw new Error(\"svgAlwaysPremultipliesAlpha test not yet available\");return this._svgAlwaysPremultipliesAlpha}get doublePrecisionRequiresObfuscation(){if(e(this._doublePrecisionRequiresObfuscation)){const e=t(this.context,!1),i=t(this.context,!0);this._doublePrecisionRequiresObfuscation=0!==e&&(0===i||e/i>5)}return this._doublePrecisionRequiresObfuscation}get ignoresSamplerPrecision(){return e(this._ignoresSamplerPrecision)&&(this._ignoresSamplerPrecision=r(this.context)),this._ignoresSamplerPrecision}}export{o as WebGLDriverTest};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"./isWebGL2Context.js\";class E{constructor(e,E,t,T,r,_,i,u){this.createQuery=e,this.resultAvailable=E,this.getResult=t,this.disjoint=T,this.beginTimeElapsed=r,this.endTimeElapsed=_,this.createTimestamp=i,this.timestampBits=u}}function t(t,T){if(T.disjointTimerQuery)return null;let r=t.getExtension(\"EXT_disjoint_timer_query_webgl2\");return r&&e(t)?new E((()=>t.createQuery()),(e=>t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE)),(e=>t.getQueryParameter(e,t.QUERY_RESULT)),(()=>t.getParameter(r.GPU_DISJOINT_EXT)),(e=>t.beginQuery(r.TIME_ELAPSED_EXT,e)),(()=>t.endQuery(r.TIME_ELAPSED_EXT)),(e=>r.queryCounterEXT(e,r.TIMESTAMP_EXT)),(()=>t.getQuery(r.TIMESTAMP_EXT,r.QUERY_COUNTER_BITS_EXT))):(r=t.getExtension(\"EXT_disjoint_timer_query\"),r?new E((()=>r.createQueryEXT()),(e=>r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT)),(e=>r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)),(()=>t.getParameter(r.GPU_DISJOINT_EXT)),(e=>r.beginQueryEXT(r.TIME_ELAPSED_EXT,e)),(()=>r.endQueryEXT(r.TIME_ELAPSED_EXT)),(e=>r.queryCounterEXT(e,r.TIMESTAMP_EXT)),(()=>r.getQueryEXT(r.TIMESTAMP_EXT,r.QUERY_COUNTER_BITS_EXT))):null)}export{E as DisjointTimerQuery,t as createDisjointTimerQuery};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport r from\"./isWebGL2Context.js\";function A(A,_){if(_.disjointTimerQuery)return null;if(r(A))return{drawBuffers:A.drawBuffers.bind(A),MAX_DRAW_BUFFERS:A.MAX_DRAW_BUFFERS,MAX_COLOR_ATTACHMENTS:A.MAX_COLOR_ATTACHMENTS};if(_.drawBuffers)return null;const e=A.getExtension(\"WEBGL_draw_buffers\");return e?{drawBuffers:e.drawBuffersWEBGL.bind(e),MAX_DRAW_BUFFERS:e.MAX_DRAW_BUFFERS_WEBGL,MAX_COLOR_ATTACHMENTS:e.MAX_COLOR_ATTACHMENTS_WEBGL}:null}export{A as load};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport n from\"./isWebGL2Context.js\";function r(r){if(n(r))return{drawArraysInstanced:r.drawArraysInstanced.bind(r),drawElementsInstanced:r.drawElementsInstanced.bind(r),vertexAttribDivisor:r.vertexAttribDivisor.bind(r)};const t=r.getExtension(\"ANGLE_instanced_arrays\");return t?{drawArraysInstanced:t.drawArraysInstancedANGLE.bind(t),drawElementsInstanced:t.drawElementsInstancedANGLE.bind(t),vertexAttribDivisor:t.vertexAttribDivisorANGLE.bind(t)}:null}export{r as load};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction e(e,t){const n=t.loseContext&&e.getExtension(\"WEBGL_lose_context\");return n?{loseRenderingContext:()=>n.loseContext()}:null}export{e as load};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"./isWebGL2Context.js\";function r(r,t){if(e(r))return{createVertexArray:r.createVertexArray.bind(r),deleteVertexArray:r.deleteVertexArray.bind(r),bindVertexArray:r.bindVertexArray.bind(r)};if(t.vao)return null;const n=r.getExtension(\"OES_vertex_array_object\")||r.getExtension(\"MOZ_OES_vertex_array_object\")||r.getExtension(\"WEBKIT_OES_vertex_array_object\");return n?{createVertexArray:n.createVertexArrayOES.bind(n),deleteVertexArray:n.deleteVertexArrayOES.bind(n),bindVertexArray:n.bindVertexArrayOES.bind(n)}:null}export{r as load};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{createDisjointTimerQuery as t}from\"./DisjointTimerQuery.js\";import{load as e}from\"./DrawBuffers.js\";import{load as r}from\"./Instancing.js\";import _ from\"./isWebGL2Context.js\";import{load as n}from\"./LoseContext.js\";import{load as o}from\"./VertexArrayObjects.js\";function E(_,E){const s=E.disabledExtensions||{},x=E.debugWebGLExtensions||{};let C,G,A,O,F,B,M,c,D,X,d,g,P=null,L=null,H=null,p=null;return{get drawBuffers(){return d||(d=e(_,s)),d},get instancing(){return C||(C=r(_)),C},get vao(){return G||(G=o(_,s)),G},get compressedTextureETC(){return A||(A=l(_,s)),A},get compressedTextureS3TC(){return O||(O=u(_,s)),O},get textureFilterAnisotropic(){return F||(F=i(_,s)),F},get disjointTimerQuery(){return B||(B=t(_,s)),B},get textureFloat(){return M||(M=a(_,s)),M},get colorBufferFloat(){return c||(c=S(_,s)),c},get blendMinMax(){return D||(D=R(_,s)),D},get depthTexture(){return null===P&&(P=f(_,s,\"depthTexture\",!0,[\"WEBGL_depth_texture\",\"MOZ_WEBGL_depth_texture\",\"WEBKIT_WEBGL_depth_texture\"])),P},get standardDerivatives(){return null===L&&(L=f(_,s,\"standardDerivatives\",!0,[\"OES_standard_derivatives\"])),L},get shaderTextureLOD(){return null===H&&(H=f(_,s,\"shaderTextureLOD\",!0,[\"EXT_shader_texture_lod\"])),H},get fragDepth(){return null===p&&(p=f(_,s,\"fragDepth\",!0,[\"EXT_frag_depth\"])),p},get loseContext(){return X||(X=n(_,x)),X},get textureNorm16(){return g||(g=T(_,s)),g},enable(t){return this[t]}}}function l(t,e){if(e.compressedTextureETC)return null;const r=t.getExtension(\"WEBGL_compressed_texture_etc\");return r?{COMPRESSED_R11_EAC:r.COMPRESSED_R11_EAC,COMPRESSED_SIGNED_R11_EAC:r.COMPRESSED_SIGNED_R11_EAC,COMPRESSED_RG11_EAC:r.COMPRESSED_RG11_EAC,COMPRESSED_SIGNED_RG11_EAC:r.COMPRESSED_SIGNED_RG11_EAC,COMPRESSED_RGB8_ETC2:r.COMPRESSED_RGB8_ETC2,COMPRESSED_SRGB8_ETC2:r.COMPRESSED_SRGB8_ETC2,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_RGBA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC}:null}function u(t,e){if(e.compressedTextureS3TC)return null;const r=t.getExtension(\"WEBGL_compressed_texture_s3tc\");return r?{COMPRESSED_RGB_S3TC_DXT1:r.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:r.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:r.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:r.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null}function R(t,e){if(_(t))return{MIN:t.MIN,MAX:t.MAX};if(e.blendMinMax)return null;{const e=t.getExtension(\"EXT_blend_minmax\");return e?{MIN:e.MIN_EXT,MAX:e.MAX_EXT}:null}}function i(t,e){if(e.textureFilterAnisotropic)return null;const r=t.getExtension(\"EXT_texture_filter_anisotropic\")||t.getExtension(\"MOZ_EXT_texture_filter_anisotropic\")||t.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");return r?{MAX_TEXTURE_MAX_ANISOTROPY:r.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:r.TEXTURE_MAX_ANISOTROPY_EXT}:null}function a(t,e){if(_(t))return{textureFloat:!0,textureFloatLinear:!e.textureFloatLinear&&!!t.getExtension(\"OES_texture_float_linear\"),textureHalfFloat:!0,textureHalfFloatLinear:!e.textureHalfFloatLinear&&!!t.getExtension(\"OES_texture_half_float_linear\"),HALF_FLOAT:t.HALF_FLOAT};if(t instanceof WebGLRenderingContext){const r=!e.textureHalfFloat&&t.getExtension(\"OES_texture_half_float\");return{textureFloat:!e.textureFloat&&!!t.getExtension(\"OES_texture_float\"),textureFloatLinear:!e.textureFloatLinear&&!!t.getExtension(\"OES_texture_float_linear\"),textureHalfFloat:!!r,textureHalfFloatLinear:!e.textureHalfFloatLinear&&!!t.getExtension(\"OES_texture_half_float_linear\"),HALF_FLOAT:r?r.HALF_FLOAT_OES:void 0}}return null}function S(t,e){if(_(t)){const r=!e.colorBufferFloat&&t.getExtension(\"EXT_color_buffer_half_float\"),_=!e.colorBufferFloat&&t.getExtension(\"EXT_color_buffer_float\"),n=!e.colorBufferFloat&&t.getExtension(\"EXT_float_blend\");return r||_||n?{textureFloat:!!_,textureHalfFloat:!!r,floatBlend:!!n,R16F:t.R16F,RG16F:t.RG16F,RGBA16F:t.RGBA16F,R32F:t.R32F,RG32F:t.RG32F,RGBA32F:t.RGBA32F,R11F_G11F_B10F:t.R11F_G11F_B10F,RGB16F:t.RGB16F}:null}if(t instanceof WebGLRenderingContext){const r=!e.colorBufferFloat&&t.getExtension(\"EXT_color_buffer_half_float\"),_=!e.colorBufferFloat&&t.getExtension(\"WEBGL_color_buffer_float\"),n=!e.colorBufferFloat&&t.getExtension(\"EXT_float_blend\");return r||_||n?{textureFloat:!!_,textureHalfFloat:!!r,floatBlend:!!n,RGBA16F:r?r.RGBA16F_EXT:void 0,RGB16F:r?r.RGB16F_EXT:void 0,RGBA32F:_?_.RGBA32F_EXT:void 0}:null}return null}function f(t,e,r,n,o){if(n&&_(t))return!0;if(e[r])return!1;for(const _ of o)if(t.getExtension(_))return!0;return!1}function T(t,e){if(!_(t))return null;if(e.textureNorm16)return null;const r=t.getExtension(\"EXT_texture_norm16\");return r?{R16:r.R16,RG16:r.RG16,RGB16:r.RGB16,RGBA16:r.RGBA16,R16_SNORM:r.R16_SNORM,RG16_SNORM:r.RG16_SNORM,RGB16_SNORM:r.RGB16_SNORM,RGBA16_SNORM:r.RGBA16_SNORM}:null}export{E as loadCapabilities};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{unpackFloatRGBA as n}from\"../../core/floatRGBA.js\";import{f as e}from\"../../chunks/vec3f64.js\";import o from\"./BufferObject.js\";import{encodeDoubleArray as t}from\"./doublePrecisionUtils.js\";import r from\"./FramebufferObject.js\";import{Program as i}from\"./Program.js\";import a from\"./VertexArrayObject.js\";function c(c,s){const l=new r(c,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1});function v(n,e){const o=new i(c,`\\n\\n  precision highp float;\\n\\n  attribute vec2 position;\\n\\n  uniform vec3 u_highA;\\n  uniform vec3 u_lowA;\\n  uniform vec3 u_highB;\\n  uniform vec3 u_lowB;\\n\\n  varying vec4 v_color;\\n\\n  ${s?\"#define DOUBLE_PRECISION_REQUIRES_OBFUSCATION\":\"\"}\\n\\n  #ifdef DOUBLE_PRECISION_REQUIRES_OBFUSCATION\\n\\n  vec3 dpPlusFrc(vec3 a, vec3 b) {\\n    return mix(a, a + b, vec3(notEqual(b, vec3(0))));\\n  }\\n\\n  vec3 dpMinusFrc(vec3 a, vec3 b) {\\n    return mix(vec3(0), a - b, vec3(notEqual(a, b)));\\n  }\\n\\n  vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\\n    vec3 t1 = dpPlusFrc(hiA, hiB);\\n    vec3 e = dpMinusFrc(t1, hiA);\\n    vec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;\\n    return t1 + t2;\\n  }\\n\\n  #else\\n\\n  vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\\n    vec3 t1 = hiA + hiB;\\n    vec3 e = t1 - hiA;\\n    vec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;\\n    return t1 + t2;\\n  }\\n\\n  #endif\\n\\n  const float MAX_RGBA_FLOAT =\\n    255.0 / 256.0 +\\n    255.0 / 256.0 / 256.0 +\\n    255.0 / 256.0 / 256.0 / 256.0 +\\n    255.0 / 256.0 / 256.0 / 256.0 / 256.0;\\n\\n  const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);\\n\\n  vec4 float2rgba(const float value) {\\n    // Make sure value is in the domain we can represent\\n    float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);\\n\\n    // Decompose value in 32bit fixed point parts represented as\\n    // uint8 rgba components. Decomposition uses the fractional part after multiplying\\n    // by a power of 256 (this removes the bits that are represented in the previous\\n    // component) and then converts the fractional part to 8bits.\\n    vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);\\n\\n    // Convert uint8 values (from 0 to 255) to floating point representation for\\n    // the shader\\n    const float toU8AsFloat = 1.0 / 255.0;\\n\\n    return fixedPointU8 * toU8AsFloat;\\n  }\\n\\n  void main() {\\n    vec3 val = dpAdd(u_highA, u_lowA, -u_highB, -u_lowB);\\n\\n    v_color = float2rgba(val.z / 25.0);\\n\\n    gl_Position = vec4(position * 2.0 - 1.0, 0.0, 1.0);\\n  }\\n  `,\"\\n  precision highp float;\\n\\n  varying vec4 v_color;\\n\\n  void main() {\\n    gl_FragColor = v_color;\\n  }\\n  \",new Map([[\"position\",0]])),r=new Float32Array(6);t(n,r,3);const a=new Float32Array(6);return t(e,a,3),c.useProgram(o),o.setUniform3f(\"u_highA\",r[0],r[2],r[4]),o.setUniform3f(\"u_lowA\",r[1],r[3],r[5]),o.setUniform3f(\"u_highB\",a[0],a[2],a[4]),o.setUniform3f(\"u_lowB\",a[1],a[3],a[5]),o}const f=o.createVertex(c,35044,new Uint16Array([0,0,1,0,0,1,1,1])),p=new a(c,new Map([[\"position\",0]]),{geometry:[{name:\"position\",count:2,type:5123,offset:0,stride:4,normalized:!1}]},{geometry:f}),u=e(5633261.287538229,2626832.878767164,1434988.0495278358),d=e(5633271.46742708,2626873.6381334523,1434963.231608387),h=v(u,d),m=c.getBoundFramebufferObject(),{x:A,y:_,width:g,height:b}=c.getViewport();c.bindFramebuffer(l),c.setViewport(0,0,1,1),c.bindVAO(p),c.drawArrays(5,0,4);const B=new Uint8Array(4);l.readPixels(0,0,1,1,6408,5121,B),h.dispose(),p.dispose(!1),f.dispose(),l.dispose(),c.setViewport(A,_,g,b),c.bindFramebuffer(m);const F=(u[2]-d[2])/25,w=n(B);return Math.abs(F-w)}export{c as testDoublePrecisionArithmetic};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{blendingAlpha as e}from\"../3d/webgl-engine/lib/OrderIndependentTransparency.js\";import t from\"./BufferObject.js\";import r from\"./FramebufferObject.js\";import{Program as n}from\"./Program.js\";import{makePipelineState as o}from\"./renderState.js\";import i from\"./VertexArrayObject.js\";var a,u,f,l={exports:{}};function c(a){var u,f,c,s,d;if(!a.gl)return!1;if(\"webgl\"===a.webglVersion)return(null==(s=a.capabilities.textureFloat)?void 0:s.textureFloat)&&(null==(d=a.capabilities.colorBufferFloat)?void 0:d.textureFloat);if(!((null==(u=a.capabilities.textureFloat)?void 0:u.textureFloat)&&(null==(f=a.capabilities.colorBufferFloat)?void 0:f.textureFloat)&&(null==(c=a.capabilities.colorBufferFloat)?void 0:c.floatBlend)))return!1;const g=new r(a,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5126,internalFormat:34836,samplingMode:9728,width:1,height:1}),b=t.createVertex(a,35044,new Uint16Array([0,0,1,0,0,1,1,1])),p=new i(a,new Map([[\"a_pos\",0]]),{geometry:[{name:\"a_pos\",count:2,type:5123,offset:0,stride:4,normalized:!1}]},{geometry:b}),m=new n(a,\"\\n  precision highp float;\\n  attribute vec2 a_pos;\\n\\n  void main() {\\n    gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\\n  }\\n  \",\"\\n   precision highp float;\\n\\n   void main() {\\n    gl_FragColor = vec4(0.5, 0.5, 0.5, 0.5);\\n   }\\n  \",new Map([[\"a_pos\",0]]));a.useProgram(m);const E=a.getBoundFramebufferObject(),{x:v,y:T,width:F,height:_}=a.getViewport();a.bindFramebuffer(g),a.setViewport(0,0,1,1),a.bindVAO(p),a.drawArrays(5,0,4);const x=o({blending:e});a.setPipelineState(x),a.drawArrays(5,0,4),l.exports.init(a);const h=a.gl.getError();return a.setViewport(v,T,F,_),a.bindFramebuffer(E),m.dispose(),p.dispose(!1),b.dispose(),g.dispose(),1282!==h||(console.warn(\"Device claims support for WebGL extension EXT_float_blend but does not support it. Using fall back.\"),!1)}a=l,u=function(){var e=function(e){window.console&&window.console.log&&window.console.log(e)},t=function(t){window.console&&window.console.error?window.console.error(t):e(t)},r={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0}},bindBuffer:{2:{0:!0}},bufferData:{3:{0:!0,2:!0}},bufferSubData:{3:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},readPixels:{7:{4:!0,5:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:[\"COLOR_BUFFER_BIT\",\"DEPTH_BUFFER_BIT\",\"STENCIL_BUFFER_BIT\"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}}},n=null,o=null;function i(e){if(null==n)for(var t in n={},o={},e)\"number\"==typeof e[t]&&(n[e[t]]=t,o[t]=e[t])}function a(){if(null==n)throw\"WebGLDebugUtils.init(ctx) not called\"}function u(e){return a(),void 0!==n[e]}function f(e){a();var t=n[e];return void 0!==t?\"gl.\"+t:\"/*UNKNOWN WebGL ENUM*/ 0x\"+e.toString(16)}function l(e,t,n,i){var a;if(void 0!==(a=r[e])&&void 0!==(a=a[t])&&a[n]){if(\"object\"==typeof a[n]&&void 0!==a[n].enumBitwiseOr){for(var u=a[n].enumBitwiseOr,l=0,c=[],s=0;s<u.length;++s){var d=o[u[s]];0!=(i&d)&&(l|=d,c.push(f(d)))}return l===i?c.join(\" | \"):f(i)}return f(i)}return null===i?\"null\":void 0===i?\"undefined\":i.toString()}function c(e,t){for(var r=\"\",n=t.length,o=0;o<n;++o)r+=(0==o?\"\":\", \")+l(e,n,o,t[o]);return r}function s(e,t,r){e.__defineGetter__(r,(function(){return t[r]})),e.__defineSetter__(r,(function(e){t[r]=e}))}function d(e,r,n,o){o=o||e,i(e),r=r||function(e,r,n){for(var o=\"\",i=n.length,a=0;a<i;++a)o+=(0==a?\"\":\", \")+l(r,i,a,n[a]);t(\"WebGL error \"+f(e)+\" in \"+r+\"(\"+o+\")\")};var a={};function u(e,t){return function(){n&&n(t,arguments);var i=e[t].apply(e,arguments),u=o.getError();return 0!=u&&(a[u]=!0,r(u,t,arguments)),i}}var c={};for(var g in e)if(\"function\"==typeof e[g])if(\"getExtension\"!=g)c[g]=u(e,g);else{var b=u(e,g);c[g]=function(){return d(b.apply(e,arguments),r,n,o)}}else s(c,e,g);return c.getError=function(){for(var t in a)if(a.hasOwnProperty(t)&&a[t])return a[t]=!1,t;return e.NO_ERROR},c}function g(e){var t=e.getParameter(e.MAX_VERTEX_ATTRIBS),r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r);for(var n=0;n<t;++n)e.disableVertexAttribArray(n),e.vertexAttribPointer(n,4,e.FLOAT,!1,0,0),e.vertexAttrib1f(n,0);e.deleteBuffer(r);var o=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);for(n=0;n<o;++n)e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_CUBE_MAP,null),e.bindTexture(e.TEXTURE_2D,null);for(e.activeTexture(e.TEXTURE0),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.DITHER),e.disable(e.SCISSOR_TEST),e.blendColor(0,0,0,0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.clearColor(0,0,0,0),e.clearDepth(1),e.clearStencil(-1),e.colorMask(!0,!0,!0,!0),e.cullFace(e.BACK),e.depthFunc(e.LESS),e.depthMask(!0),e.depthRange(0,1),e.frontFace(e.CCW),e.hint(e.GENERATE_MIPMAP_HINT,e.DONT_CARE),e.lineWidth(1),e.pixelStorei(e.PACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.UNPACK_COLORSPACE_CONVERSION_WEBGL&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.BROWSER_DEFAULT_WEBGL),e.polygonOffset(0,0),e.sampleCoverage(1,!1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilMask(4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT);e.getError(););}function b(e){var t,r,n=[],o=[],i={},a=1,u=!1,f=[],l=0,c=0,d=!1,b=0,p={};function m(e){return\"function\"==typeof e?e:function(t){e.handleEvent(t)}}e.getContext=(r=e.getContext,function(){var n=r.apply(e,arguments);if(n instanceof WebGLRenderingContext){if(n!=t){if(t)throw\"got different context\";i=R(t=n)}return i}return n});var E=function(e){n.push(m(e))},v=function(e){o.push(m(e))};function T(e){var t=e.addEventListener;e.addEventListener=function(r,n,o){switch(r){case\"webglcontextlost\":E(n);break;case\"webglcontextrestored\":v(n);break;default:t.apply(e,arguments)}}}function F(){for(var e=Object.keys(p),t=0;t<e.length;++t)delete p[e]}function _(){++c,u||l==c&&e.loseContext()}function x(e,t){var r=e[t];return function(){if(_(),!u)return r.apply(e,arguments)}}function h(){for(var e=0;e<f.length;++e){var r=f[e];r instanceof WebGLBuffer?t.deleteBuffer(r):r instanceof WebGLFramebuffer?t.deleteFramebuffer(r):r instanceof WebGLProgram?t.deleteProgram(r):r instanceof WebGLRenderbuffer?t.deleteRenderbuffer(r):r instanceof WebGLShader?t.deleteShader(r):r instanceof WebGLTexture&&t.deleteTexture(r)}}function A(e){return{statusMessage:e,preventDefault:function(){d=!0}}}return T(e),e.loseContext=function(){if(!u){for(u=!0,l=0,++a;t.getError(););F(),p[t.CONTEXT_LOST_WEBGL]=!0;var r=A(\"context lost\"),o=n.slice();setTimeout((function(){for(var t=0;t<o.length;++t)o[t](r);b>=0&&setTimeout((function(){e.restoreContext()}),b)}),0)}},e.restoreContext=function(){u&&o.length&&setTimeout((function(){if(!d)throw\"can not restore. webglcontestlost listener did not call event.preventDefault\";h(),g(t),u=!1,c=0,d=!1;for(var e=o.slice(),r=A(\"context restored\"),n=0;n<e.length;++n)e[n](r)}),0)},e.loseContextInNCalls=function(e){if(u)throw\"You can not ask a lost contet to be lost\";l=c+e},e.getNumCalls=function(){return c},e.setRestoreTimeout=function(e){b=e},e;function R(e){for(var r in e)\"function\"==typeof e[r]?i[r]=x(e,r):s(i,e,r);i.getError=function(){if(_(),!u)for(;e=t.getError();)p[e]=!0;for(var e in p)if(p[e])return delete p[e],e;return i.NO_ERROR};for(var n=[\"createBuffer\",\"createFramebuffer\",\"createProgram\",\"createRenderbuffer\",\"createShader\",\"createTexture\"],o=0;o<n.length;++o){var l=n[o];i[l]=function(t){return function(){if(_(),u)return null;var r=t.apply(e,arguments);return r.__webglDebugContextLostId__=a,f.push(r),r}}(e[l])}var c=[\"getActiveAttrib\",\"getActiveUniform\",\"getBufferParameter\",\"getContextAttributes\",\"getAttachedShaders\",\"getFramebufferAttachmentParameter\",\"getParameter\",\"getProgramParameter\",\"getProgramInfoLog\",\"getRenderbufferParameter\",\"getShaderParameter\",\"getShaderInfoLog\",\"getShaderSource\",\"getTexParameter\",\"getUniform\",\"getUniformLocation\",\"getVertexAttrib\"];for(o=0;o<c.length;++o)l=c[o],i[l]=function(t){return function(){return _(),u?null:t.apply(e,arguments)}}(i[l]);var d=[\"isBuffer\",\"isEnabled\",\"isFramebuffer\",\"isProgram\",\"isRenderbuffer\",\"isShader\",\"isTexture\"];for(o=0;o<d.length;++o)l=d[o],i[l]=function(t){return function(){return _(),!u&&t.apply(e,arguments)}}(i[l]);return i.checkFramebufferStatus=function(t){return function(){return _(),u?i.FRAMEBUFFER_UNSUPPORTED:t.apply(e,arguments)}}(i.checkFramebufferStatus),i.getAttribLocation=function(t){return function(){return _(),u?-1:t.apply(e,arguments)}}(i.getAttribLocation),i.getVertexAttribOffset=function(t){return function(){return _(),u?0:t.apply(e,arguments)}}(i.getVertexAttribOffset),i.isContextLost=function(){return u},i}}return{init:i,mightBeEnum:u,glEnumToString:f,glFunctionArgToString:l,glFunctionArgsToString:c,makeDebugContext:d,makeLostContextSimulatingCanvas:b,resetToInitialState:g}},void 0!==(f=u())&&(a.exports=f);export{c as testFloatBufferBlend};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"./BufferObject.js\";import r from\"./FramebufferObject.js\";import{Program as t}from\"./Program.js\";import i from\"./Texture.js\";import n from\"./VertexArrayObject.js\";async function o(o){const a=new Image;if(a.src=\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A\",a.width=5,a.height=5,await a.decode(),!o.gl)return!0;const s=new r(o,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1}),p=e.createVertex(o,35044,new Uint16Array([0,0,1,0,0,1,1,1])),d=new n(o,new Map([[\"a_pos\",0]]),{geometry:[{name:\"a_pos\",count:2,type:5123,offset:0,stride:4,normalized:!1}]},{geometry:p}),m=new t(o,\"\\n  precision highp float;\\n\\n  attribute vec2 a_pos;\\n  varying vec2 v_uv;\\n\\n  void main() {\\n    v_uv = a_pos;\\n    gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\\n  }\\n  \",\"\\n  precision highp float;\\n\\n  varying vec2 v_uv;\\n  uniform sampler2D u_texture;\\n\\n  void main() {\\n    gl_FragColor = texture2D(u_texture, v_uv);\\n  }\\n  \",new Map([[\"a_pos\",0]]));o.useProgram(m);const g=new i(o,{dataType:5121,pixelFormat:6408,preMultiplyAlpha:!1,wrapMode:33071,samplingMode:9729},a);o.bindTexture(g,0),m.setUniform1i(\"u_texture\",0);const l=o.getBoundFramebufferObject(),{x:c,y:f,width:u,height:w}=o.getViewport();o.bindFramebuffer(s),o.setViewport(0,0,1,1),o.setClearColor(0,0,0,0),o.setBlendingEnabled(!1),o.clearSafe(16384),o.bindVAO(d),o.drawArrays(5,0,4);const v=new Uint8Array(4);return s.readPixels(0,0,1,1,6408,5121,v),m.dispose(),d.dispose(!1),p.dispose(),s.dispose(),g.dispose(),o.setViewport(c,f,u,w),o.bindFramebuffer(l),a.src=\"\",255===v[0]}export{o as testSVGPremultipliedAlpha};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Logger.js\";import r from\"./BufferObject.js\";import t from\"./FramebufferObject.js\";import{Program as o}from\"./Program.js\";import\"./enums.js\";import i from\"./Texture.js\";import n from\"./VertexArrayObject.js\";const a=e.getLogger(\"esri.views.WebGLDriverTest\"),s=e=>{const s=new t(e,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1}),p=\"\\nprecision highp float;\\nattribute vec2 a_pos;\\nuniform highp sampler2D u_texture;\\nvarying vec4 v_color;\\n\\nfloat getBit(in float bitset, in int bitIndex) {\\n  float offset = pow(2.0, float(bitIndex));\\n  return mod(floor(bitset / offset), 2.0);\\n}\\n\\nvoid main() {\\n  vec4 value = texture2D(u_texture, vec2(0.0));\\n  float bit = getBit(value.x * 255.0, 1);\\n\\n  v_color = bit * vec4(1.0);\\n  gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\\n}\\n\",m=\"\\nprecision highp float;\\nvarying vec4 v_color;\\n\\nvoid main() {\\n  gl_FragColor = v_color;\\n}\\n\",d=new Uint8Array(4),l=r.createVertex(e,35044,new Uint16Array([0,0,1,0,0,1,1,1])),c=new n(e,new Map([[\"a_position\",0]]),{geometry:[{name:\"a_position\",count:2,type:5122,offset:0,stride:4,normalized:!1}]},{geometry:l}),g=new o(e,p,m,new Map([[\"a_pos\",0]])),u=new i(e,{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1},new Uint8Array([2,255,0,0]));g.setUniform1i(\"u_texture\",0),e.bindTexture(u,0);const f=e.getBoundFramebufferObject();e.bindFramebuffer(s),e.useProgram(g);const{x:w,y:h,width:v,height:b}=e.getViewport();e.setViewport(0,0,1,1),e.bindVAO(c),e.drawArrays(5,0,4),e.setViewport(w,h,v,b),s.readPixels(0,0,1,1,6408,5121,d),g.dispose(),c.dispose(!1),l.dispose(),s.dispose();const y=255!==d[0]||255!==d[1]||255!==d[2]||255!==d[3];return y&&a.warn(`A problem was detected with your graphics driver. Your driver does not appear to honor sampler precision specifiers, which may result in rendering issues due to numerical instability. We recommend ensuring that your drivers have been updated to the latest version. Applying lowp sampler workaround. [${d[0]}.${d[1]}.${d[2]}.${d[3]}]`),e.bindFramebuffer(f),y};export{s as testSamplerPrecision};\n"],"names":["e","on","t","i","isSome","r","addFrameTask","s","init","n","a","o","h","l","c","d","p","m","u","_","g","f","createProgram","b","R","createContextOrErrorHTML","w","Container","O","WGLDrawPhase","y","F","Profiler","x","stencil","C","Timeline","T","resampleHermite","j","encodeResult","B","createEmptyImageData","P","RenderingContext","v","k","S","constructor","_trash","Set","_clipData","Float32Array","_upperLeft","_upperRight","_lowerLeft","_lowerRight","_mat2","_clipRendererInitialized","_renderRemainingTime","_lastFrameRenderTime","renderRequested","stage","_stationary","canvas","document","createElement","alpha","contextOptions","_canvas","antialias","depth","context","resourceManager","painter","_debugOutput","setAttribute","appendChild","_renderParameters","drawPhase","state","pixelRatio","window","devicePixelRatio","stationary","globalOpacity","blendMode","deltaTime","time","inFadeTransition","effects","timeline","renderingOptions","requireFBO","profiler","dataUploadCounter","_taskHandle","render","renderFrame","pause","_lostWebGLContextHandle","emit","error","destroy","removeAllChildren","_emptyTrash","remove","_boundFBO","_clipFBO","dispose","_clipVAO","_clipVBO","_clipStencilProgram","parentNode","removeChild","highlightOptions","background","_background","requestRender","_highlightOptions","_highlightOptionsHandle","setHighlightOptions","_renderingOptions","_state","trashDisplayObject","add","untrashDisplayObject","delete","resume","processRender","_createTransforms","dvs","renderChildren","children","beforeRender","_renderChildren","afterRender","recordStart","_beforeRenderChildren","MAP","beforeRenderLayers","renderLayers","HIGHLIGHT","_isLabelDrawPhaseRequired","LABEL","DEBUG","recordEnd","_afterRenderChildren","enforceState","setClearDepth","setClearColor","clear","gl","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","size","rotation","Math","round","getBoundFramebufferObject","spatialReference","_isWrappable","isWrappable","_clipFrame","abs","cos","sin","worldScreenWidth","width","height","colorTarget","depthStencilTarget","padding","left","right","bottom","top","set","_initializeClipRenderer","setData","bindFramebuffer","setDepthWriteEnabled","setStencilWriteMask","setClearStencil","STENCIL_BUFFER_BIT","logIno","bindVAO","useProgram","setDepthTestEnabled","setStencilTestEnabled","setBlendingEnabled","setColorMask","setStencilOp","setStencilFunction","drawElements","color","blitTexture","colorTexture","doRender","_resizeCanvas","setViewport","takeScreenshot","framebufferWidth","framebufferHeight","resolutionScale","clone","viewpoint","Date","now","getViewport","_readbackScreenshot","cropArea","outputScale","ImageData","format","quality","disableDecorations","flipY","premultipliedAlpha","readPixels","Uint8Array","data","buffer","style","attributes","createVertex","Uint16Array","createIndex","geometry","name","count","type","offset","stride","normalized","divisor","Array","from","processDetach","hasLabels","EXTRA_RENDER_TIME","Stage","throwIfNotAbortError","floor","has","then","catch","get","rect","page","metrics","advance","code","sdf","_dirties","_glyphData","_currentPage","_glyphCache","_textures","_rangePromises","Map","_glyphSource","_binPack","push","_initDecorationGlyph","length","bitmap","_recordGlyph","getGlyphItems","_getGlyphCache","_fetchRanges","map","_getMosaicItem","bind","_getTexture","setSamplingMode","bindTexture","pixelFormat","dataType","_invalidate","forEach","_fetchRange","Promise","all","getRange","getGlyph","allocate","isEmpty","_showDebugPage","getContext","border","putImageData","body","default","bidiText","isNone","throwIfAborted","isAbortError","pt2px","TEXTURE_BINDING_GLYPH_ATLAS","TEXTURE_BINDING_SPRITE_ATLAS","MosaicType","getFullyQualifiedFontName","M","is3D","charCodes","I","isSimple","isSVGResource","z","isImageResource","shouldRepeat","getPMSResourceSize","isGIF","isPNG","getUrl","U","isSVGImage","G","isAnimatedPNG","q","isAnimatedGIF","L","ok","$","keyFromSymbol","QueueProcessor","A","N","Q","E","getLogger","H","includes","indexOf","substring","atob","charCodeAt","responseType","V","min","Y","D","mosaicType","fromMosaic","J","_invalidFontsMap","_sdfConverter","_bindingInfos","_hashToBindingIndex","_ongoingRasterizations","_imageRequestQueue","concurrency","process","signal","_spriteMosaic","fontsUrl","_glyphMosaic","_rasterizer","sprites","glyphs","rasterizeItem","_rasterizeText","_setTextureBinding","GLYPH","glyphMosaicItems","_rasterizeSpriteSymbol","SPRITE","spriteMosaicItem","bindTextures","textureBinding","getWidth","getHeight","setUniform1i","setUniform2fv","_hashMosaic","fontName","text","font","getSpriteItem","_handleAsyncResource","rasterizeJSONResource","image","simplePattern","_addItemToMosaic","_handleSVG","_handleImage","draw","path","Uint32Array","_handleGIFOrPNG","create","Blob","_imageFromBlob","HTMLImageElement","cim","colorSubstitutions","rasterizeImageResource","getResource","scaleX","message","URL","createObjectURL","revokeObjectURL","addSpriteItem","some","DataView","getUint32","numPlays","playTime","frames","paused","playing","playSpeed","currentFrameNumber","_lastUsedFrame","_load","play","_play","clearTimeout","timerID","togglePlay","bindFrame","frameChanged","currentFrame","frameData","descriptor","updateData","updateUsedFrame","createImage","delay","imageData","setTimeout","disposeOp","blendOp","onload","onerror","Error","src","drawImage","getImageData","Uint8ClampedArray","subarray","getUint16","getUint8","dataParts","frameCount","prototype","slice","call","String","fromCharCode","apply","setUint32","getPNGSize","isAborted","createAbortError","GCExt","COMMENT","APPExt","UNKNOWN","IMAGE","EOF","EXT","byteLength","waitTillDone","loading","firstFrameOnly","comment","lastFrame","playOnLoad","complete","interlaceOffsets","interlaceSteps","seekFrame","_setCurrentFrame","seek","_parse","pos","globalColourCount","globalColourTable","_parseColourTable","_parseBlock","_parseImg","_finishedLoading","_parseExt","onprogress","bytesRead","totalBytes","frame","pixelBufSize","interlacedBufSize","deinterlaceBuf","pixelBuf","disposalMethod","delayTime","transparencyGiven","transparencyIndex","leftPos","topPos","localColourTableFlag","localColourTable","_lzwDecode","readSubBlocksB","interlaced","_processFrame","concat","ctx","_parseGCExt","readSubBlocks","_parseAppExt","getString","len","getGIFSize","clamp","disposeMaybe","createTask","isSVG","DisplayObject","createMagnifierProgram","magnifierProgramTemplate","loadMagnifierResources","_handles","_resourcePixelRatio","visible","_disposeRenderResources","_resourcesTask","abort","magnifier","_magnifier","removeAll","position","watch","_reloadResources","_canRender","_updateResources","factor","ceil","_readbackTexture","resize","copyTexImage2D","target","_program","_vertexArrayObject","_overlayTexture","_maskTexture","setUniform4fv","setUniform4f","maskEnabled","overlayEnabled","drawArrays","mask","overlay","maskUrl","overlayUrl","internalFormat","wrapMode","samplingMode","flipped","preMultiplyAlpha","driverTest","svgAlwaysPremultipliesAlpha","property","subclass","rotateBy","translateBy","padAndScaleAndRotateBy","targetGeometry","_endTimer","animationManager","initialize","pan","navigation","rotate","pinch","zoomBox","view","begin","_set","end","_lastEventTimestamp","performance","_startTimer","zoom","_getDefaultAnchor","stop","constraints","snapToZoom","effectiveLODs","zoomIn","zoomOut","setViewpoint","snapToNextScale","scale","_zoomToScale","snapToPreviousScale","_scaleRotateTranslateViewpoint","setViewpointImmediate","continousRotateClockwise","animateContinous","continousRotateCounterclockwise","resetRotation","continousPanLeft","_continuousPan","continousPanRight","continousPanUp","continousPanDown","stopMomentumNavigation","constrainByGeometry","canZoomInTo","canZoomOutTo","goTo","animate","Boolean","readOnly","requestImage","Program","Image","decode","clearSafe","testSVGPremultipliedAlpha"],"sourceRoot":"webpack:///"}