"use strict";(self.webpackChunkbio_medical=self.webpackChunkbio_medical||[]).push([[6213],{62642:(p,c,s)=>{s.d(c,{Z:()=>h});var u=s(30627),o=s(31620),P=s(84700),f=s(35138),x=s(50257);const a=(n,e)=>n.key.level-e.key.level!=0?n.key.level-e.key.level:n.key.row-e.key.row!=0?n.key.row-e.key.row:n.key.col-e.key.col;class h extends P.Z{constructor(e){super(),this._tileInfoView=e}get requiresDedicatedFBO(){return!1}renderChildren(e){this.sortChildren(a),this.setStencilReference(),super.renderChildren(e)}createRenderParams(e){const{state:i}=e,l=super.createRenderParams(e);return l.requiredLevel=this._tileInfoView.getClosestInfoForScale(i.scale).level,l.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(i.scale),l}prepareRenderPasses(e){const i=super.prepareRenderPasses(e);return i.push(e.registerRenderPass({name:"stencil",brushes:[x.Z],drawPhase:o.jx.DEBUG|o.jx.MAP|o.jx.HIGHLIGHT,target:()=>this.getStencilTarget()})),(0,u.Z)("esri-tiles-debug")&&i.push(e.registerRenderPass({name:"tileInfo",brushes:[f.Z],drawPhase:o.jx.DEBUG,target:()=>this.children})),i}getStencilTarget(){return this.children}updateTransforms(e){for(const i of this.children){const l=this._tileInfoView.getTileResolution(i.key);i.setTransform(e,l)}}setStencilReference(){let e=1;for(const i of this.children)i.stencilRef=e++}}},62561:(p,c,s)=>{s.d(c,{I:()=>f});var u=s(72425),o=s(17821),P=s(5507);class f extends o.s{constructor(a,h,n,e,i,l=e,d=i){super(),this.triangleCountReportedInDebug=0,this.triangleCount=0,this.texture=null,this.key=new P.Z(a),this.x=h,this.y=n,this.width=e,this.height=i,this.rangeX=l,this.rangeY=d}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}setTransform(a,h){const n=h/(a.resolution*a.pixelRatio),e=this.transforms.tileMat3,[i,l]=a.toScreenNoRotation([0,0],[this.x,this.y]),d=this.width/this.rangeX*n,v=this.height/this.rangeY*n;(0,u.s)(e,d,0,0,0,v,0,i,l,1),(0,u.m)(this.transforms.dvs,a.displayViewMat3,e)}}},34262:(p,c,s)=>{s.r(c),s.d(c,{default:()=>v});var u=s(79076),h=(s(22345),s(55865),s(45072),s(30627),s(72062),s(96410)),n=s(39115),e=s(99306),i=s(86923);class l{constructor(){this.gradient=null,this.height=512,this.width=512}render(r){(0,n.hy)(r,512,this.intensities,this.gradient,this.minPixelIntensity,this.maxPixelIntensity)}}let d=class extends i.Z{constructor(t){super(t),this._intensityInfo={minPixelIntensity:0,maxPixelIntensity:0},this.featuresView={attributeView:{initialize:()=>{},requestUpdate:()=>{}},requestRender:()=>{}},this._container=new e.s(t.tileInfoView)}createTile(t){const r=this._container.createTile(t);return this.tileInfoView.getTileCoords(r.bitmap,t),r.bitmap.resolution=this.tileInfoView.getTileResolution(t),r}onConfigUpdate(){const t=this.layer.renderer;if("heatmap"===t.type){const{minPixelIntensity:r,maxPixelIntensity:y}=t;this._intensityInfo.minPixelIntensity=r,this._intensityInfo.maxPixelIntensity=y,this._gradient=(0,n.uI)(t.toJSON()),this.tiles.forEach(g=>{const m=g.bitmap.source;m&&(m.minPixelIntensity=r,m.maxPixelIntensity=y,m.gradient=this._gradient,g.bitmap.invalidateTexture())})}}hitTest(){return Promise.resolve([])}install(t){t.addChild(this._container)}uninstall(t){this._container.removeAllChildren(),t.removeChild(this._container)}disposeTile(t){this._container.removeChild(t),t.destroy()}supportsRenderer(t){return t&&"heatmap"===t.type}onTileData(t){const r=this.tiles.get(t.tileKey);if(!r)return;const y=t.intensityInfo,{minPixelIntensity:g,maxPixelIntensity:m}=this._intensityInfo,I=r.bitmap.source||new l;I.intensities=y&&y.matrix||null,I.minPixelIntensity=g,I.maxPixelIntensity=m,I.gradient=this._gradient,r.bitmap.source=I,this._container.addChild(r),this._container.requestRender(),this.requestUpdate()}onTileError(t){console.error(t)}lockGPUUploads(){}unlockGPUUploads(){}fetchResource(t,r){return console.error(t),Promise.reject()}};d=(0,u._)([(0,h.j)("esri.views.2d.layers.features.tileRenderers.HeatmapTileRenderer")],d);const v=d}}]);
//# sourceMappingURL=6213.1f6784591eaac7a618d7.js.map